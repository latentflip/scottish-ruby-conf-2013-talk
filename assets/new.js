/*! jQuery v1.7.2 jquery.com | jquery.org/license */
(function(a,b){function c(a){return J.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function d(a){if(!co[a]){var b=G.body,c=J("<"+a+">").appendTo(b),d=c.css("display");c.remove();if(d==="none"||d===""){cp||(cp=G.createElement("iframe"),cp.frameBorder=cp.width=cp.height=0),b.appendChild(cp);if(!cq||!cp.createElement)cq=(cp.contentWindow||cp.contentDocument).document,cq.write((J.support.boxModel?"<!doctype html>":"")+"<html><body>"),cq.close();c=cq.createElement(a),cq.body.appendChild(c),d=J.css(c,"display"),b.removeChild(cp)}co[a]=d}return co[a]}function e(a,b){var c={};return J.each(cu.concat.apply([],cu.slice(0,b)),function(){c[this]=a}),c}function f(){cv=b}function g(){return setTimeout(f,0),cv=J.now()}function h(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function i(){try{return new a.XMLHttpRequest}catch(b){}}function j(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},f,g,h=d.length,i,j=d[0],k,l,m,n,o;for(f=1;f<h;f++){if(f===1)for(g in a.converters)typeof g=="string"&&(e[g.toLowerCase()]=a.converters[g]);k=j,j=d[f];if(j==="*")j=k;else if(k!=="*"&&k!==j){l=k+" "+j,m=e[l]||e["* "+j];if(!m){o=b;for(n in e){i=n.split(" ");if(i[0]===k||i[0]==="*"){o=e[i[1]+" "+j];if(o){n=e[n],n===!0?m=o:o===!0&&(m=n);break}}}}!m&&!o&&J.error("No conversion from "+l.replace(" "," to ")),m!==!0&&(c=m?m(c):o(n(c)))}}return c}function k(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j)return j!==f[0]&&f.unshift(j),d[j]}function l(a,b,c,d){if(J.isArray(b))J.each(b,function(b,e){c||bQ.test(a)?d(a,e):l(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)});else if(!c&&J.type(b)==="object")for(var e in b)l(a+"["+e+"]",b[e],c,d);else d(a,b)}function m(a,c){var d,e,f=J.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&J.extend(!0,a,e)}function n(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===cd,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=n(a,c,d,e,l,g)));return(k||!l)&&!g["*"]&&(l=n(a,c,d,e,"*",g)),l}function o(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(J.isFunction(c)){var d=b.toLowerCase().split(b_),e=0,f=d.length,g,h,i;for(;e<f;e++)g=d[e],i=/^\+/.test(g),i&&(g=g.substr(1)||"*"),h=a[g]=a[g]||[],h[i?"unshift":"push"](c)}}}function p(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?1:0,f=4;if(d>0){if(c!=="border")for(;e<f;e+=2)c||(d-=parseFloat(J.css(a,"padding"+bL[e]))||0),c==="margin"?d+=parseFloat(J.css(a,c+bL[e]))||0:d-=parseFloat(J.css(a,"border"+bL[e]+"Width"))||0;return d+"px"}d=bM(a,b);if(d<0||d==null)d=a.style[b];if(bH.test(d))return d;d=parseFloat(d)||0;if(c)for(;e<f;e+=2)d+=parseFloat(J.css(a,"padding"+bL[e]))||0,c!=="padding"&&(d+=parseFloat(J.css(a,"border"+bL[e]+"Width"))||0),c==="margin"&&(d+=parseFloat(J.css(a,c+bL[e]))||0);return d+"px"}function q(a){var b=G.createElement("div");return bC.appendChild(b),b.innerHTML=a.outerHTML,b.firstChild}function r(a){var b=(a.nodeName||"").toLowerCase();b==="input"?s(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&J.grep(a.getElementsByTagName("input"),s)}function s(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function t(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function u(a,b){var c;b.nodeType===1&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c==="object"?b.outerHTML=a.outerHTML:c!=="input"||a.type!=="checkbox"&&a.type!=="radio"?c==="option"?b.selected=a.defaultSelected:c==="input"||c==="textarea"?b.defaultValue=a.defaultValue:c==="script"&&b.text!==a.text&&(b.text=a.text):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(J.expando),b.removeAttribute("_submit_attached"),b.removeAttribute("_change_attached"))}function v(a,b){if(b.nodeType===1&&!!J.hasData(a)){var c,d,e,f=J._data(a),g=J._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;d<e;d++)J.event.add(b,c,h[c][d])}g.data&&(g.data=J.extend({},g.data))}}function w(a,b){return J.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function x(a){var b=bo.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function y(a,b,c){b=b||0;if(J.isFunction(b))return J.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return J.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=J.grep(a,function(a){return a.nodeType===1});if(bk.test(b))return J.filter(b,d,!c);b=J.filter(b,d)}return J.grep(a,function(a,d){return J.inArray(a,b)>=0===c})}function z(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function A(){return!0}function B(){return!1}function C(a,b,c){var d=b+"defer",e=b+"queue",f=b+"mark",g=J._data(a,d);g&&(c==="queue"||!J._data(a,e))&&(c==="mark"||!J._data(a,f))&&setTimeout(function(){!J._data(a,e)&&!J._data(a,f)&&(J.removeData(a,d,!0),g.fire())},0)}function D(a){for(var b in a){if(b==="data"&&J.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function E(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(N,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:J.isNumeric(d)?+d:M.test(d)?J.parseJSON(d):d}catch(f){}J.data(a,c,d)}else d=b}return d}function F(a){var b=K[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b}var G=a.document,H=a.navigator,I=a.location,J=function(){function c(){if(!d.isReady){try{G.documentElement.doScroll("left")}catch(a){setTimeout(c,1);return}d.ready()}}var d=function(a,b){return new d.fn.init(a,b,g)},e=a.jQuery,f=a.$,g,h=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,i=/\S/,j=/^\s+/,k=/\s+$/,l=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,m=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,p=/(?:^|:|,)(?:\s*\[)+/g,q=/(webkit)[ \/]([\w.]+)/,r=/(opera)(?:.*version)?[ \/]([\w.]+)/,s=/(msie) ([\w.]+)/,t=/(mozilla)(?:.*? rv:([\w.]+))?/,u=/-([a-z]|[0-9])/ig,v=/^-ms-/,w=function(a,b){return(b+"").toUpperCase()},x=H.userAgent,y,z,A,B=Object.prototype.toString,C=Object.prototype.hasOwnProperty,D=Array.prototype.push,E=Array.prototype.slice,F=String.prototype.trim,I=Array.prototype.indexOf,J={};return d.fn=d.prototype={constructor:d,init:function(a,c,e){var f,g,i,j;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(a==="body"&&!c&&G.body)return this.context=G,this[0]=G.body,this.selector=a,this.length=1,this;if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?f=h.exec(a):f=[null,a,null];if(f&&(f[1]||!c)){if(f[1])return c=c instanceof d?c[0]:c,j=c?c.ownerDocument||c:G,i=l.exec(a),i?d.isPlainObject(c)?(a=[G.createElement(i[1])],d.fn.attr.call(a,c,!0)):a=[j.createElement(i[1])]:(i=d.buildFragment([f[1]],[j]),a=(i.cacheable?d.clone(i.fragment):i.fragment).childNodes),d.merge(this,a);g=G.getElementById(f[2]);if(g&&g.parentNode){if(g.id!==f[2])return e.find(a);this.length=1,this[0]=g}return this.context=G,this.selector=a,this}return!c||c.jquery?(c||e).find(a):this.constructor(c).find(a)}return d.isFunction(a)?e.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),d.makeArray(a,this))},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return E.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var e=this.constructor();return d.isArray(a)?D.apply(e,a):d.merge(e,a),e.prevObject=this,e.context=this.context,b==="find"?e.selector=this.selector+(this.selector?" ":"")+c:b&&(e.selector=this.selector+"."+b+"("+c+")"),e},each:function(a,b){return d.each(this,a,b)},ready:function(a){return d.bindReady(),z.add(a),this},eq:function(a){return a=+a,a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(E.apply(this,arguments),"slice",E.call(arguments).join(","))},map:function(a){return this.pushStack(d.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:D,sort:[].sort,splice:[].splice},d.fn.init.prototype=d.fn,d.extend=d.fn.extend=function(){var a,c,e,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!d.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){e=i[c],f=a[c];if(i===f)continue;l&&f&&(d.isPlainObject(f)||(g=d.isArray(f)))?(g?(g=!1,h=e&&d.isArray(e)?e:[]):h=e&&d.isPlainObject(e)?e:{},i[c]=d.extend(l,h,f)):f!==b&&(i[c]=f)}return i},d.extend({noConflict:function(b){return a.$===d&&(a.$=f),b&&a.jQuery===d&&(a.jQuery=e),d},isReady:!1,readyWait:1,holdReady:function(a){a?d.readyWait++:d.ready(!0)},ready:function(a){if(a===!0&&!--d.readyWait||a!==!0&&!d.isReady){if(!G.body)return setTimeout(d.ready,1);d.isReady=!0;if(a!==!0&&--d.readyWait>0)return;z.fireWith(G,[d]),d.fn.trigger&&d(G).trigger("ready").off("ready")}},bindReady:function(){if(!z){z=d.Callbacks("once memory");if(G.readyState==="complete")return setTimeout(d.ready,1);if(G.addEventListener)G.addEventListener("DOMContentLoaded",A,!1),a.addEventListener("load",d.ready,!1);else if(G.attachEvent){G.attachEvent("onreadystatechange",A),a.attachEvent("onload",d.ready);var b=!1;try{b=a.frameElement==null}catch(e){}G.documentElement.doScroll&&b&&c()}}},isFunction:function(a){return d.type(a)==="function"},isArray:Array.isArray||function(a){return d.type(a)==="array"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):J[B.call(a)]||"object"},isPlainObject:function(a){if(!a||d.type(a)!=="object"||a.nodeType||d.isWindow(a))return!1;try{if(a.constructor&&!C.call(a,"constructor")&&!C.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var e;for(e in a);return e===b||C.call(a,e)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=d.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(m.test(b.replace(n,"@").replace(o,"]").replace(p,"")))return(new Function("return "+b))();d.error("Invalid JSON: "+b)},parseXML:function(c){if(typeof c!="string"||!c)return null;var e,f;try{a.DOMParser?(f=new DOMParser,e=f.parseFromString(c,"text/xml")):(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(c))}catch(g){e=b}return(!e||!e.documentElement||e.getElementsByTagName("parsererror").length)&&d.error("Invalid XML: "+c),e},noop:function(){},globalEval:function(b){b&&i.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(v,"ms-").replace(u,w)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,e){var f,g=0,h=a.length,i=h===b||d.isFunction(a);if(e){if(i){for(f in a)if(c.apply(a[f],e)===!1)break}else for(;g<h;)if(c.apply(a[g++],e)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:F?function(a){return a==null?"":F.call(a)}:function(a){return a==null?"":(a+"").replace(j,"").replace(k,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var e=d.type(a);a.length==null||e==="string"||e==="function"||e==="regexp"||d.isWindow(a)?D.call(c,a):d.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(I)return I.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];return a.length=d,a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,e){var f,g,h=[],i=0,j=a.length,k=a instanceof d||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||d.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,e),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,e),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var e=a[c];c=a,a=e}if(!d.isFunction(a))return b;var f=E.call(arguments,2),g=function(){return a.apply(c,f.concat(E.call(arguments)))};return g.guid=a.guid=a.guid||g.guid||d.guid++,g},access:function(a,c,e,f,g,h,i){var j,k=e==null,l=0,m=a.length;if(e&&typeof e=="object"){for(l in e)d.access(a,c,l,e[l],1,h,f);g=1}else if(f!==b){j=i===b&&d.isFunction(f),k&&(j?(j=c,c=function(a,b,c){return j.call(d(a),c)}):(c.call(a,f),c=null));if(c)for(;l<m;l++)c(a[l],e,j?f.call(a[l],l,c(a[l],e)):f,i);g=1}return g?a:k?c.call(a):m?c(a[0],e):h},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=q.exec(a)||r.exec(a)||s.exec(a)||a.indexOf("compatible")<0&&t.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}d.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(c,e){return e&&e instanceof d&&!(e instanceof a)&&(e=a(e)),d.fn.init.call(this,c,e,b)},a.fn.init.prototype=a.fn;var b=a(G);return a},browser:{}}),d.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){J["[object "+b+"]"]=b.toLowerCase()}),y=d.uaMatch(x),y.browser&&(d.browser[y.browser]=!0,d.browser.version=y.version),d.browser.webkit&&(d.browser.safari=!0),i.test(" ")&&(j=/^[\s\xA0]+/,k=/[\s\xA0]+$/),g=d(G),G.addEventListener?A=function(){G.removeEventListener("DOMContentLoaded",A,!1),d.ready()}:G.attachEvent&&(A=function(){G.readyState==="complete"&&(G.detachEvent("onreadystatechange",A),d.ready())}),d}(),K={};J.Callbacks=function(a){a=a?K[a]||F(a):{};var c=[],d=[],e,f,g,h,i,j,k=function(b){var d,e,f,g,h;for(d=0,e=b.length;d<e;d++)f=b[d],g=J.type(f),g==="array"?k(f):g==="function"&&(!a.unique||!m.has(f))&&c.push(f)},l=function(b,k){k=k||[],e=!a.memory||[b,k],f=!0,g=!0,j=h||0,h=0,i=c.length;for(;c&&j<i;j++)if(c[j].apply(b,k)===!1&&a.stopOnFalse){e=!0;break}g=!1,c&&(a.once?e===!0?m.disable():c=[]:d&&d.length&&(e=d.shift(),m.fireWith(e[0],e[1])))},m={add:function(){if(c){var a=c.length;k(arguments),g?i=c.length:e&&e!==!0&&(h=a,l(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++)for(var f=0;f<c.length;f++)if(b[d]===c[f]){g&&f<=i&&(i--,f<=j&&j--),c.splice(f--,1);if(a.unique)break}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++)if(a===c[b])return!0}return!1},empty:function(){return c=[],this},disable:function(){return c=d=e=b,this},disabled:function(){return!c},lock:function(){return d=b,(!e||e===!0)&&m.disable(),this},locked:function(){return!d},fireWith:function(b,c){return d&&(g?a.once||d.push([b,c]):(!a.once||!e)&&l(b,c)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!f}};return m};var L=[].slice;J.extend({Deferred:function(a){var b=J.Callbacks("once memory"),c=J.Callbacks("once memory"),d=J.Callbacks("memory"),e="pending",f={resolve:b,reject:c,notify:d},g={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){return h.done(a).fail(b).progress(c),this},always:function(){return h.done.apply(h,arguments).fail.apply(h,arguments),this},pipe:function(a,b,c){return J.Deferred(function(d){J.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],f;J.isFunction(c)?h[a](function(){f=c.apply(this,arguments),f&&J.isFunction(f.promise)?f.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===h?d:this,[f])}):h[a](d[e])})}).promise()},promise:function(a){if(a==null)a=g;else for(var b in g)a[b]=g[b];return a}},h=g.promise({}),i;for(i in f)h[i]=f[i].fire,h[i+"With"]=f[i].fireWith;return h.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(h,h),h},when:function(a){function b(a){return function(b){g[a]=arguments.length>1?L.call(arguments,0):b,j.notifyWith(k,g)}}function c(a){return function(b){d[a]=arguments.length>1?L.call(arguments,0):b,--h||j.resolveWith(j,d)}}var d=L.call(arguments,0),e=0,f=d.length,g=Array(f),h=f,i=f,j=f<=1&&a&&J.isFunction(a.promise)?a:J.Deferred(),k=j.promise();if(f>1){for(;e<f;e++)d[e]&&d[e].promise&&J.isFunction(d[e].promise)?d[e].promise().then(c(e),j.reject,b(e)):--h;h||j.resolveWith(j,d)}else j!==a&&j.resolveWith(j,f?[a]:[]);return k}}),J.support=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n=G.createElement("div"),o=G.documentElement;n.setAttribute("className","t"),n.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",c=n.getElementsByTagName("*"),d=n.getElementsByTagName("a")[0];if(!c||!c.length||!d)return{};e=G.createElement("select"),f=e.appendChild(G.createElement("option")),g=n.getElementsByTagName("input")[0],b={leadingWhitespace:n.firstChild.nodeType===3,tbody:!n.getElementsByTagName("tbody").length,htmlSerialize:!!n.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:d.getAttribute("href")==="/a",opacity:/^0.55/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:g.value==="on",optSelected:f.selected,getSetAttribute:n.className!=="t",enctype:!!G.createElement("form").enctype,html5Clone:G.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},J.boxModel=b.boxModel=G.compatMode==="CSS1Compat",g.checked=!0,b.noCloneChecked=g.cloneNode(!0).checked,e.disabled=!0,b.optDisabled=!f.disabled;try{delete n.test}catch(p){b.deleteExpando=!1}!n.addEventListener&&n.attachEvent&&n.fireEvent&&(n.attachEvent("onclick",function(){b.noCloneEvent=!1}),n.cloneNode(!0).fireEvent("onclick")),g=G.createElement("input"),g.value="t",g.setAttribute("type","radio"),b.radioValue=g.value==="t",g.setAttribute("checked","checked"),g.setAttribute("name","t"),n.appendChild(g),h=G.createDocumentFragment(),h.appendChild(n.lastChild),b.checkClone=h.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=g.checked,h.removeChild(g),h.appendChild(n);if(n.attachEvent)for(l in{submit:1,change:1,focusin:1})k="on"+l,m=k in n,m||(n.setAttribute(k,"return;"),m=typeof n[k]=="function"),b[l+"Bubbles"]=m;return h.removeChild(n),h=e=f=n=g=null,J(function(){var c,d,e,f,g,h,j,k,l,o,p,q,r,s=G.getElementsByTagName("body")[0];!s||(k=1,r="padding:0;margin:0;border:",p="position:absolute;top:0;left:0;width:1px;height:1px;",q=r+"0;visibility:hidden;",l="style='"+p+r+"5px solid #000;",o="<div "+l+"display:block;'><div style='"+r+"0;display:block;overflow:hidden;'></div></div>"+"<table "+l+"' cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",c=G.createElement("div"),c.style.cssText=q+"width:0;height:0;position:static;top:0;margin-top:"+k+"px",s.insertBefore(c,s.firstChild),n=G.createElement("div"),c.appendChild(n),n.innerHTML="<table><tr><td style='"+r+"0;display:none'></td><td>t</td></tr></table>",i=n.getElementsByTagName("td"),m=i[0].offsetHeight===0,i[0].style.display="",i[1].style.display="none",b.reliableHiddenOffsets=m&&i[0].offsetHeight===0,a.getComputedStyle&&(n.innerHTML="",j=G.createElement("div"),j.style.width="0",j.style.marginRight="0",n.style.width="2px",n.appendChild(j),b.reliableMarginRight=(parseInt((a.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0),typeof n.style.zoom!="undefined"&&(n.innerHTML="",n.style.width=n.style.padding="1px",n.style.border=0,n.style.overflow="hidden",n.style.display="inline",n.style.zoom=1,b.inlineBlockNeedsLayout=n.offsetWidth===3,n.style.display="block",n.style.overflow="visible",n.innerHTML="<div style='width:5px;'></div>",b.shrinkWrapBlocks=n.offsetWidth!==3),n.style.cssText=p+q,n.innerHTML=o,d=n.firstChild,e=d.firstChild,g=d.nextSibling.firstChild.firstChild,h={doesNotAddBorder:e.offsetTop!==5,doesAddBorderForTableAndCells:g.offsetTop===5},e.style.position="fixed",e.style.top="20px",h.fixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",h.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,h.doesNotIncludeMarginInBodyOffset=s.offsetTop!==k,a.getComputedStyle&&(n.style.marginTop="1%",b.pixelMargin=(a.getComputedStyle(n,null)||{marginTop:0}).marginTop!=="1%"),typeof c.style.zoom!="undefined"&&(c.style.zoom=1),s.removeChild(c),j=n=c=null,J.extend(b,h))}),b}();var M=/^(?:\{.*\}|\[.*\])$/,N=/([A-Z])/g;J.extend({cache:{},uuid:0,expando:"jQuery"+(J.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?J.cache[a[J.expando]]:a[J.expando],!!a&&!D(a)},data:function(a,c,d,e){if(!!J.acceptData(a)){var f,g,h,i=J.expando,j=typeof c=="string",k=a.nodeType,l=k?J.cache:a,m=k?a[i]:a[i]&&i,n=c==="events";if((!m||!l[m]||!n&&!e&&!l[m].data)&&j&&d===b)return;m||(k?a[i]=m=++J.uuid:m=i),l[m]||(l[m]={},k||(l[m].toJSON=J.noop));if(typeof c=="object"||typeof c=="function")e?l[m]=J.extend(l[m],c):l[m].data=J.extend(l[m].data,c);return f=g=l[m],e||(g.data||(g.data={}),g=g.data),d!==b&&(g[J.camelCase(c)]=d),n&&!g[c]?f.events:(j?(h=g[c],h==null&&(h=g[J.camelCase(c)])):h=g,h)}},removeData:function(a,b,c){if(!!J.acceptData(a)){var d,e,f,g=J.expando,h=a.nodeType,i=h?J.cache:a,j=h?a[g]:g;if(!i[j])return;if(b){d=c?i[j]:i[j].data;if(d){J.isArray(b)||(b in d?b=[b]:(b=J.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,f=b.length;e<f;e++)delete d[b[e]];if(!(c?D:J.isEmptyObject)(d))return}}if(!c){delete i[j].data;if(!D(i[j]))return}J.support.deleteExpando||!i.setInterval?delete i[j]:i[j]=null,h&&(J.support.deleteExpando?delete a[g]:a.removeAttribute?a.removeAttribute(g):a[g]=null)}},_data:function(a,b,c){return J.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=J.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),J.fn.extend({data:function(a,c){var d,e,f,g,h,i=this[0],j=0,k=null;if(a===b){if(this.length){k=J.data(i);if(i.nodeType===1&&!J._data(i,"parsedAttrs")){f=i.attributes;for(h=f.length;j<h;j++)g=f[j].name,g.indexOf("data-")===0&&(g=J.camelCase(g.substring(5)),E(i,g,k[g]));J._data(i,"parsedAttrs",!0)}}return k}return typeof a=="object"?this.each(function(){J.data(this,a)}):(d=a.split(".",2),d[1]=d[1]?"."+d[1]:"",e=d[1]+"!",J.access(this,function(c){if(c===b)return k=this.triggerHandler("getData"+e,[d[0]]),k===b&&i&&(k=J.data(i,a),k=E(i,a,k)),k===b&&d[1]?this.data(d[0]):k;d[1]=c,this.each(function(){var b=J(this);b.triggerHandler("setData"+e,d),J.data(this,a,c),b.triggerHandler("changeData"+e,d)})},null,c,arguments.length>1,null,!1))},removeData:function(a){return this.each(function(){J.removeData(this,a)})}}),J.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",J._data(a,b,(J._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(J._data(b,d)||1)-1;e?J._data(b,d,e):(J.removeData(b,d,!0),C(b,c,"mark"))}},queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=J._data(a,b),c&&(!d||J.isArray(c)?d=J._data(a,b,J.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=J.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),J._data(a,b+".run",e),d.call(a,function(){J.dequeue(a,b)},e)),c.length||(J.removeData(a,b+"queue "+b+".run",!0),C(a,b,"queue"))}}),J.fn.extend({queue:function(a,c){var d=2;return typeof a!="string"&&(c=a,a="fx",d--),arguments.length<d?J.queue(this[0],a):c===b?this:this.each(function(){var b=J.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&J.dequeue(this,a)})},dequeue:function(a){return this.each(function(){J.dequeue(this,a)})},delay:function(a,b){return a=J.fx?J.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function d(){--h||e.resolveWith(f,[f])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var e=J.Deferred(),f=this,g=f.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=J.data(f[g],i,b,!0)||(J.data(f[g],j,b,!0)||J.data(f[g],k,b,!0))&&J.data(f[g],i,J.Callbacks("once memory"),!0))h++,l.add(d);return d(),e.promise(c)}});var O=/[\n\t\r]/g,P=/\s+/,Q=/\r/g,R=/^(?:button|input)$/i,S=/^(?:button|input|object|select|textarea)$/i,T=/^a(?:rea)?$/i,U=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,V=J.support.getSetAttribute,W,X,Y;J.fn.extend({attr:function(a,b){return J.access(this,J.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){J.removeAttr(this,a)})},prop:function(a,b){return J.access(this,J.prop,a,b,arguments.length>1)},removeProp:function(a){return a=J.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if(J.isFunction(a))return this.each(function(b){J(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(P);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{f=" "+e.className+" ";for(g=0,h=b.length;g<h;g++)~f.indexOf(" "+b[g]+" ")||(f+=b[g]+" ");e.className=J.trim(f)}}}return this},removeClass:function(a){var c,d,e,f,g,h,i;if(J.isFunction(a))return this.each(function(b){J(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(P);for(d=0,e=this.length;d<e;d++){f=this[d];if(f.nodeType===1&&f.className)if(a){g=(" "+f.className+" ").replace(O," ");for(h=0,i=c.length;h<i;h++)g=g.replace(" "+c[h]+" "," ");f.className=J.trim(g)}else f.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";return J.isFunction(a)?this.each(function(c){J(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c==="string"){var e,f=0,g=J(this),h=b,i=a.split(P);while(e=i[f++])h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&J._data(this,"__className__",this.className),this.className=this.className||a===!1?"":J._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(O," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,f=this[0];if(!!arguments.length)return e=J.isFunction(a),this.each(function(d){var f=J(this),g;if(this.nodeType===1){e?g=a.call(this,d,f.val()):g=a,g==null?g="":typeof g=="number"?g+="":J.isArray(g)&&(g=J.map(g,function(a){return a==null?"":a+""})),c=J.valHooks[this.type]||J.valHooks[this.nodeName.toLowerCase()];if(!c||!("set"in c)||c.set(this,g,"value")===b)this.value=g}});if(f)return c=J.valHooks[f.type]||J.valHooks[f.nodeName.toLowerCase()],c&&"get"in c&&(d=c.get(f,"value"))!==b?d:(d=f.value,typeof d=="string"?d.replace(Q,""):d==null?"":d)}}),J.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,f=a.selectedIndex,g=[],h=a.options,i=a.type==="select-one";if(f<0)return null;c=i?f:0,d=i?f+1:h.length;for(;c<d;c++){e=h[c];if(e.selected&&(J.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!J.nodeName(e.parentNode,"optgroup"))){b=J(e).val();if(i)return b;g.push(b)}}return i&&!g.length&&h.length?J(h[f]).val():g},set:function(a,b){var c=J.makeArray(b);return J(a).find("option").each(function(){this.selected=J.inArray(J(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){if(e&&c in J.attrFn)return J(a)[c](d);if(typeof a.getAttribute=="undefined")return J.prop(a,c,d);h=i!==1||!J.isXMLDoc(a),h&&(c=c.toLowerCase(),g=J.attrHooks[c]||(U.test(c)?X:W));if(d!==b){if(d===null){J.removeAttr(a,c);return}return g&&"set"in g&&h&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,""+d),d)}return g&&"get"in g&&h&&(f=g.get(a,c))!==null?f:(f=a.getAttribute(c),f===null?b:f)}},removeAttr:function(a,b){var c,d,e,f,g,h=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(P),f=d.length;for(;h<f;h++)e=d[h],e&&(c=J.propFix[e]||e,g=U.test(e),g||J.attr(a,e,""),a.removeAttribute(V?e:c),g&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(R.test(a.nodeName)&&a.parentNode)J.error("type property can't be changed");else if(!J.support.radioValue&&b==="radio"&&J.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},value:{get:function(a,b){return W&&J.nodeName(a,"button")?W.get(a,b):b in a?a.value:null},set:function(a,b,c){if(W&&J.nodeName(a,"button"))return W.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(!!a&&h!==3&&h!==8&&h!==2)return g=h!==1||!J.isXMLDoc(a),g&&(c=J.propFix[c]||c,f=J.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&(e=f.get(a,c))!==null?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):S.test(a.nodeName)||T.test(a.nodeName)&&a.href?0:b}}}}),J.attrHooks.tabindex=J.propHooks.tabIndex,X={get:function(a,c){var d,e=J.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?J.removeAttr(a,c):(d=J.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},V||(Y={name:!0,id:!0,coords:!0},W=J.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(Y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,c){var d=a.getAttributeNode(c);return d||(d=G.createAttribute(c),a.setAttributeNode(d)),d.nodeValue=b+""}},J.attrHooks.tabindex.set=W.set,J.each(["width","height"],function(a,b){J.attrHooks[b]=J.extend(J.attrHooks[b],{set:function(a,c){if(c==="")return a.setAttribute(b,"auto"),c}})}),J.attrHooks.contenteditable={get:W.get,set:function(a,b,c){b===""&&(b="false"),W.set(a,b,c)}}),J.support.hrefNormalized||J.each(["href","src","width","height"],function(a,c){J.attrHooks[c]=J.extend(J.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),J.support.style||(J.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),J.support.optSelected||(J.propHooks.selected=J.extend(J.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),J.support.enctype||(J.propFix.enctype="encoding"),J.support.checkOn||J.each(["radio","checkbox"],function(){J.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),J.each(["radio","checkbox"],function(){J.valHooks[this]=J.extend(J.valHooks[this],{set:function(a,b){if(J.isArray(b))return a.checked=J.inArray(J(a).val(),b)>=0}})});var Z=/^(?:textarea|input|select)$/i,$=/^([^\.]*)?(?:\.(.+))?$/,_=/(?:^|\s)hover(\.\S+)?\b/,ba=/^key/,bb=/^(?:mouse|contextmenu)|click/,bc=/^(?:focusinfocus|focusoutblur)$/,bd=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,be=function(a){var b=bd.exec(a);return b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)")),b},bf=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},bg=function(a){return J.event.special.hover?a:a.replace(_,"mouseenter$1 mouseleave$1")};J.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r;
if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(g=J._data(a)))){d.handler&&(o=d,d=o.handler,f=o.selector),d.guid||(d.guid=J.guid++),i=g.events,i||(g.events=i={}),h=g.handle,h||(g.handle=h=function(a){return typeof J!="undefined"&&(!a||J.event.triggered!==a.type)?J.event.dispatch.apply(h.elem,arguments):b},h.elem=a),c=J.trim(bg(c)).split(" ");for(j=0;j<c.length;j++){k=$.exec(c[j])||[],l=k[1],m=(k[2]||"").split(".").sort(),r=J.event.special[l]||{},l=(f?r.delegateType:r.bindType)||l,r=J.event.special[l]||{},n=J.extend({type:l,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,quick:f&&be(f),namespace:m.join(".")},o),q=i[l];if(!q){q=i[l]=[],q.delegateCount=0;if(!r.setup||r.setup.call(a,e,m,h)===!1)a.addEventListener?a.addEventListener(l,h,!1):a.attachEvent&&a.attachEvent("on"+l,h)}r.add&&(r.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?q.splice(q.delegateCount++,0,n):q.push(n),J.event.global[l]=!0}a=null}},global:{},remove:function(a,b,c,d,e){var f=J.hasData(a)&&J._data(a),g,h,i,j,k,l,m,n,o,p,q,r;if(!!f&&!!(n=f.events)){b=J.trim(bg(b||"")).split(" ");for(g=0;g<b.length;g++){h=$.exec(b[g])||[],i=j=h[1],k=h[2];if(!i){for(i in n)J.event.remove(a,i+b[g],c,d,!0);continue}o=J.event.special[i]||{},i=(d?o.delegateType:o.bindType)||i,q=n[i]||[],l=q.length,k=k?new RegExp("(^|\\.)"+k.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(m=0;m<q.length;m++)r=q[m],(e||j===r.origType)&&(!c||c.guid===r.guid)&&(!k||k.test(r.namespace))&&(!d||d===r.selector||d==="**"&&r.selector)&&(q.splice(m--,1),r.selector&&q.delegateCount--,o.remove&&o.remove.call(a,r));q.length===0&&l!==q.length&&((!o.teardown||o.teardown.call(a,k)===!1)&&J.removeEvent(a,i,f.handle),delete n[i])}J.isEmptyObject(n)&&(p=f.handle,p&&(p.elem=null),J.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,f){if(!e||e.nodeType!==3&&e.nodeType!==8){var g=c.type||c,h=[],i,j,k,l,m,n,o,p,q,r;if(bc.test(g+J.event.triggered))return;g.indexOf("!")>=0&&(g=g.slice(0,-1),j=!0),g.indexOf(".")>=0&&(h=g.split("."),g=h.shift(),h.sort());if((!e||J.event.customEvent[g])&&!J.event.global[g])return;c=typeof c=="object"?c[J.expando]?c:new J.Event(g,c):new J.Event(g),c.type=g,c.isTrigger=!0,c.exclusive=j,c.namespace=h.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,n=g.indexOf(":")<0?"on"+g:"";if(!e){i=J.cache;for(k in i)i[k].events&&i[k].events[g]&&J.event.trigger(c,d,i[k].handle.elem,!0);return}c.result=b,c.target||(c.target=e),d=d!=null?J.makeArray(d):[],d.unshift(c),o=J.event.special[g]||{};if(o.trigger&&o.trigger.apply(e,d)===!1)return;q=[[e,o.bindType||g]];if(!f&&!o.noBubble&&!J.isWindow(e)){r=o.delegateType||g,l=bc.test(r+g)?e:e.parentNode,m=null;for(;l;l=l.parentNode)q.push([l,r]),m=l;m&&m===e.ownerDocument&&q.push([m.defaultView||m.parentWindow||a,r])}for(k=0;k<q.length&&!c.isPropagationStopped();k++)l=q[k][0],c.type=q[k][1],p=(J._data(l,"events")||{})[c.type]&&J._data(l,"handle"),p&&p.apply(l,d),p=n&&l[n],p&&J.acceptData(l)&&p.apply(l,d)===!1&&c.preventDefault();return c.type=g,!f&&!c.isDefaultPrevented()&&(!o._default||o._default.apply(e.ownerDocument,d)===!1)&&(g!=="click"||!J.nodeName(e,"a"))&&J.acceptData(e)&&n&&e[g]&&(g!=="focus"&&g!=="blur"||c.target.offsetWidth!==0)&&!J.isWindow(e)&&(m=e[n],m&&(e[n]=null),J.event.triggered=g,e[g](),J.event.triggered=b,m&&(e[n]=m)),c.result}},dispatch:function(c){c=J.event.fix(c||a.event);var d=(J._data(this,"events")||{})[c.type]||[],e=d.delegateCount,f=[].slice.call(arguments,0),g=!c.exclusive&&!c.namespace,h=J.event.special[c.type]||{},i=[],j,k,l,m,n,o,p,q,r,s,t;f[0]=c,c.delegateTarget=this;if(!h.preDispatch||h.preDispatch.call(this,c)!==!1){if(e&&(!c.button||c.type!=="click")){m=J(this),m.context=this.ownerDocument||this;for(l=c.target;l!=this;l=l.parentNode||this)if(l.disabled!==!0){o={},q=[],m[0]=l;for(j=0;j<e;j++)r=d[j],s=r.selector,o[s]===b&&(o[s]=r.quick?bf(l,r.quick):m.is(s)),o[s]&&q.push(r);q.length&&i.push({elem:l,matches:q})}}d.length>e&&i.push({elem:this,matches:d.slice(e)});for(j=0;j<i.length&&!c.isPropagationStopped();j++){p=i[j],c.currentTarget=p.elem;for(k=0;k<p.matches.length&&!c.isImmediatePropagationStopped();k++){r=p.matches[k];if(g||!c.namespace&&!r.namespace||c.namespace_re&&c.namespace_re.test(r.namespace))c.data=r.data,c.handleObj=r,n=((J.event.special[r.origType]||{}).handle||r.handler).apply(p.elem,f),n!==b&&(c.result=n,n===!1&&(c.preventDefault(),c.stopPropagation()))}}return h.postDispatch&&h.postDispatch.call(this,c),c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return a.pageX==null&&c.clientX!=null&&(d=a.target.ownerDocument||G,e=d.documentElement,f=d.body,a.pageX=c.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=c.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),!a.which&&g!==b&&(a.which=g&1?1:g&2?3:g&4?2:0),a}},fix:function(a){if(a[J.expando])return a;var c,d,e=a,f=J.event.fixHooks[a.type]||{},g=f.props?this.props.concat(f.props):this.props;a=J.Event(e);for(c=g.length;c;)d=g[--c],a[d]=e[d];return a.target||(a.target=e.srcElement||G),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey),f.filter?f.filter(a,e):a},special:{ready:{setup:J.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){J.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=J.extend(new J.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?J.event.trigger(e,null,b):J.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},J.event.handle=J.event.dispatch,J.removeEvent=G.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},J.Event=function(a,b){if(this instanceof J.Event)a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?A:B):this.type=a,b&&J.extend(this,b),this.timeStamp=a&&a.timeStamp||J.now(),this[J.expando]=!0;else return new J.Event(a,b)},J.Event.prototype={preventDefault:function(){this.isDefaultPrevented=A;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=A;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=A,this.stopPropagation()},isDefaultPrevented:B,isPropagationStopped:B,isImmediatePropagationStopped:B},J.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){J.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,f=e.selector,g;if(!d||d!==c&&!J.contains(c,d))a.type=e.origType,g=e.handler.apply(this,arguments),a.type=b;return g}}}),J.support.submitBubbles||(J.event.special.submit={setup:function(){if(J.nodeName(this,"form"))return!1;J.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=J.nodeName(c,"input")||J.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(J.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),d._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&J.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(J.nodeName(this,"form"))return!1;J.event.remove(this,"._submit")}}),J.support.changeBubbles||(J.event.special.change={setup:function(){if(Z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")J.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),J.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,J.event.simulate("change",this,a,!0))});return!1}J.event.add(this,"beforeactivate._change",function(a){var b=a.target;Z.test(b.nodeName)&&!b._change_attached&&(J.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&J.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){return J.event.remove(this,"._change"),Z.test(this.nodeName)}}),J.support.focusinBubbles||J.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){J.event.simulate(b,a.target,J.event.fix(a),!0)};J.event.special[b]={setup:function(){c++===0&&G.addEventListener(a,d,!0)},teardown:function(){--c===0&&G.removeEventListener(a,d,!0)}}}),J.fn.extend({on:function(a,c,d,e,f){var g,h;if(typeof a=="object"){typeof c!="string"&&(d=d||c,c=b);for(h in a)this.on(h,c,d,a[h],f);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=B;else if(!e)return this;return f===1&&(g=e,e=function(a){return J().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=J.guid++)),this.each(function(){J.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;return J(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this}if(typeof a=="object"){for(var f in a)this.off(f,c,a[f]);return this}if(c===!1||typeof c=="function")d=c,c=b;return d===!1&&(d=B),this.each(function(){J.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return J(this.context).on(a,this.selector,b,c),this},die:function(a,b){return J(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){J.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return J.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||J.guid++,d=0,e=function(c){var e=(J._data(this,"lastToggle"+a.guid)||0)%d;return J._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),J.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){J.fn[b]=function(a,c){return c==null&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)},J.attrFn&&(J.attrFn[b]=!0),ba.test(b)&&(J.event.fixHooks[b]=J.event.keyHooks),bb.test(b)&&(J.event.fixHooks[b]=J.event.mouseHooks)}),function(){function a(a,b,c,d,f,g){for(var h=0,i=d.length;h<i;h++){var j=d[h];if(j){var k=!1;j=j[a];while(j){if(j[e]===c){k=d[j.sizset];break}if(j.nodeType===1){g||(j[e]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}}j=j[a]}d[h]=k}}}function c(a,b,c,d,f,g){for(var h=0,i=d.length;h<i;h++){var j=d[h];if(j){var k=!1;j=j[a];while(j){if(j[e]===c){k=d[j.sizset];break}j.nodeType===1&&!g&&(j[e]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}d[h]=k}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e="sizcache"+(Math.random()+"").replace(".",""),f=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){return i=!1,0});var m=function(a,b,c,e){c=c||[],b=b||G;var f=b;if(b.nodeType!==1&&b.nodeType!==9)return[];if(!a||typeof a!="string")return c;var h,i,j,k,l,n,q,r,t=!0,u=m.isXML(b),v=[],x=a;do{d.exec(""),h=d.exec(x);if(h){x=h[3],v.push(h[1]);if(h[2]){k=h[3];break}}}while(h);if(v.length>1&&p.exec(a))if(v.length===2&&o.relative[v[0]])i=w(v[0]+v[1],b,e);else{i=o.relative[v[0]]?[b]:m(v.shift(),b);while(v.length)a=v.shift(),o.relative[a]&&(a+=v.shift()),i=w(a,i,e)}else{!e&&v.length>1&&b.nodeType===9&&!u&&o.match.ID.test(v[0])&&!o.match.ID.test(v[v.length-1])&&(l=m.find(v.shift(),b,u),b=l.expr?m.filter(l.expr,l.set)[0]:l.set[0]);if(b){l=e?{expr:v.pop(),set:s(e)}:m.find(v.pop(),v.length===1&&(v[0]==="~"||v[0]==="+")&&b.parentNode?b.parentNode:b,u),i=l.expr?m.filter(l.expr,l.set):l.set,v.length>0?j=s(i):t=!1;while(v.length)n=v.pop(),q=n,o.relative[n]?q=v.pop():n="",q==null&&(q=b),o.relative[n](j,q,u)}else j=v=[]}j||(j=i),j||m.error(n||a);if(g.call(j)==="[object Array]")if(!t)c.push.apply(c,j);else if(b&&b.nodeType===1)for(r=0;j[r]!=null;r++)j[r]&&(j[r]===!0||j[r].nodeType===1&&m.contains(b,j[r]))&&c.push(i[r]);else for(r=0;j[r]!=null;r++)j[r]&&j[r].nodeType===1&&c.push(i[r]);else s(j,c);return k&&(m(k,f,c,e),m.uniqueSort(c)),c};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}return d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]),{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter)if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\")continue;s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f)g=i=!0;else if(f===!0)continue}if(f)for(n=0;(j=s[n])!=null;n++)j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g)return[];break}}if(a===q)if(g==null)m.error(a);else break;q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9||d===11){if(typeof a.textContent=="string")return a.textContent;if(typeof a.innerText=="string")return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(d===3||d===4)return a.nodeValue}else for(b=0;c=a[b];b++)c.nodeType!==8&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(b,d,e){var g,h=f++,i=a;typeof d=="string"&&!l.test(d)&&(d=d.toLowerCase(),g=d,i=c),i("parentNode",d,h,b,g,e)},"~":function(b,d,e){var g,h=f++,i=a;typeof d=="string"&&!l.test(d)&&(d=d.toLowerCase(),g=d,i=c),i("previousSibling",d,h,b,g,e)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);return a[0]=f++,a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");return!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" "),a},PSEUDO:function(a,b,c,e,f){if(a[1]==="not")if((d.exec(a[3])||"").length>1||/^\w/.test(a[3]))a[3]=m(a[3],null,null,b);else{var g=m.filter(a[3],b,c,!0^f);return c||e.push.apply(e,g),!1}else if(o.match.POS.test(a[0])||o.match.CHILD.test(a[0]))return!0;return a},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,d,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling)if(l.nodeType===1)return!1;if(k==="first")return!0;l=a;case"last":while(l=l.nextSibling)if(l.nodeType===1)return!1;return!0;case"nth":c=b[2],d=b[3];if(c===1&&d===0)return!0;f=b[0],g=a.parentNode;if(g&&(g[e]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling)l.nodeType===1&&(l.nodeIndex=++i);g[e]=f}return j=a.nodeIndex-d,c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f)return f(a,c,b,d)}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));o.match.globalPOS=p;var s=function(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(G.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;G.documentElement.compareDocumentPosition?u=function(a,b){return a===b?(h=!0,0):!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition?-1:1:a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b)return h=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=G.createElement("div"),c="script"+(new Date).getTime(),d=G.documentElement;a.innerHTML="<a name='"+c+"'/>",d.insertBefore(a,d.firstChild),G.getElementById(c)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),d.removeChild(a),d=a=null}(),function(){var a=G.createElement("div");a.appendChild(G.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),G.querySelectorAll&&function(){var a=m,b=G.createElement("div"),c="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,d,e,f){d=d||G;if(!f&&!m.isXML(d)){var g=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(g&&(d.nodeType===1||d.nodeType===9)){if(g[1])return s(d.getElementsByTagName(b),e);if(g[2]&&o.find.CLASS&&d.getElementsByClassName)return s(d.getElementsByClassName(g[2]),e)}if(d.nodeType===9){if(b==="body"&&d.body)return s([d.body],e);if(g&&g[3]){var h=d.getElementById(g[3]);if(!h||!h.parentNode)return s([],e);if(h.id===g[3])return s([h],e)}try{return s(d.querySelectorAll(b),e)}catch(i){}}else if(d.nodeType===1&&d.nodeName.toLowerCase()!=="object"){var j=d,k=d.getAttribute("id"),l=k||c,n=d.parentNode,p=/^\s*[+~]/.test(b);k?l=l.replace(/'/g,"\\$&"):d.setAttribute("id",l),p&&n&&(d=d.parentNode);try{if(!p||n)return s(d.querySelectorAll("[id='"+l+"'] "+b),e)}catch(q){}finally{k||j.removeAttribute("id")}}}return a(b,d,e,f)};for(var d in a)m[d]=a[d];b=null}}(),function(){var a=G.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var c=!b.call(G.createElement("div"),"div"),d=!1;try{b.call(G.documentElement,"[test!='']:sizzle")}catch(e){d=!0}m.matchesSelector=function(a,e){e=e.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a))try{if(d||!o.match.PSEUDO.test(e)&&!/!=/.test(e)){var f=b.call(a,e);if(f||!c||a.document&&a.document.nodeType!==11)return f}}catch(g){}return m(e,null,null,[a]).length>0}}}(),function(){var a=G.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),G.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:G.documentElement.compareDocumentPosition?m.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var w=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a))f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=J.attr,m.selectors.attrMap={},J.find=m,J.expr=m.selectors,J.expr[":"]=J.expr.filters,J.unique=m.uniqueSort,J.text=m.getText,J.isXMLDoc=m.isXML,J.contains=m.contains}();var bh=/Until$/,bi=/^(?:parents|prevUntil|prevAll)/,bj=/,/,bk=/^.[^:#\[\.,]*$/,bl=Array.prototype.slice,bm=J.expr.match.globalPOS,bn={children:!0,contents:!0,next:!0,prev:!0};J.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return J(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(J.contains(b[c],this))return!0});var e=this.pushStack("","find",a),f,g,h;for(c=0,d=this.length;c<d;c++){f=e.length,J.find(a,this[c],e);if(c>0)for(g=f;g<e.length;g++)for(h=0;h<f;h++)if(e[h]===e[g]){e.splice(g--,1);break}}return e},has:function(a){var b=J(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(J.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(y(this,a,!1),"not",a)},filter:function(a){return this.pushStack(y(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?bm.test(a)?J(a,this.context).index(this[0])>=0:J.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,f=this[0];if(J.isArray(a)){var g=1;while(f&&f.ownerDocument&&f!==b){for(d=0;d<a.length;d++)J(f).is(a[d])&&c.push({selector:a[d],elem:f,level:g});f=f.parentNode,g++}return c}var h=bm.test(a)||typeof a!="string"?J(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){f=this[d];while(f){if(h?h.index(f)>-1:J.find.matchesSelector(f,a)){c.push(f);break}f=f.parentNode;if(!f||!f.ownerDocument||f===b||f.nodeType===11)break}}return c=c.length>1?J.unique(c):c,this.pushStack(c,"closest",a)},index:function(a){return a?typeof a=="string"?J.inArray(this[0],J(a)):J.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c=typeof a=="string"?J(a,b):J.makeArray(a&&a.nodeType?[a]:a),d=J.merge(this.get(),c);return this.pushStack(z(c[0])||z(d[0])?d:J.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),J.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return J.dir(a,"parentNode")},parentsUntil:function(a,b,c){return J.dir(a,"parentNode",c)},next:function(a){return J.nth(a,2,"nextSibling")},prev:function(a){return J.nth(a,2,"previousSibling")},nextAll:function(a){return J.dir(a,"nextSibling")},prevAll:function(a){return J.dir(a,"previousSibling")},nextUntil:function(a,b,c){return J.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return J.dir(a,"previousSibling",c)},siblings:function(a){return J.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return J.sibling(a.firstChild)},contents:function(a){return J.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:J.makeArray(a.childNodes)}},function(a,b){J.fn[a]=function(c,d){var e=J.map(this,b,c);return bh.test(a)||(d=c),d&&typeof d=="string"&&(e=J.filter(d,e)),e=this.length>1&&!bn[a]?J.unique(e):e,(this.length>1||bj.test(d))&&bi.test(a)&&(e=e.reverse()),this.pushStack(e,a,bl.call(arguments).join(","))}}),J.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),b.length===1?J.find.matchesSelector(b[0],a)?[b[0]]:[]:J.find.matches(a,b)},dir:function(a,c,d){var e=[],f=a[c];while(f&&f.nodeType!==9&&(d===b||f.nodeType!==1||!J(f).is(d)))f.nodeType===1&&e.push(f),f=f[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var bo="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",bp=/ jQuery\d+="(?:\d+|null)"/g,bq=/^\s+/,br=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,bs=/<([\w:]+)/,bt=/<tbody/i,bu=/<|&#?\w+;/,bv=/<(?:script|style)/i,bw=/<(?:script|object|embed|option|style)/i,bx=new RegExp("<(?:"+bo+")[\\s/>]","i"),by=/checked\s*(?:[^=]|=\s*.checked.)/i,bz=/\/(java|ecma)script/i,bA=/^\s*<!(?:\[CDATA\[|\-\-)/,bB={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bC=x(G);bB.optgroup=bB.option,bB.tbody=bB.tfoot=bB.colgroup=bB.caption=bB.thead,bB.th=bB.td,J.support.htmlSerialize||(bB._default=[1,"div<div>","</div>"]),J.fn.extend({text:function(a){return J.access(this,function(a){return a===b?J.text(this):this.empty().append((this[0]&&this[0].ownerDocument||G).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(J.isFunction(a))return this.each(function(b){J(this).wrapAll(a.call(this,b))});if(this[0]){var b=J(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return J.isFunction(a)?this.each(function(b){J(this).wrapInner(a.call(this,b))}):this.each(function(){var b=J(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=J.isFunction(a);return this.each(function(c){J(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){J.nodeName(this,"body")||J(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=J.clean(arguments);return a.push.apply(a,this.toArray()),this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);return a.push.apply(a,J.clean(arguments)),a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||J.filter(a,[d]).length)!b&&d.nodeType===1&&
(J.cleanData(d.getElementsByTagName("*")),J.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&J.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return J.clone(this,a,b)})},html:function(a){return J.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return c.nodeType===1?c.innerHTML.replace(bp,""):null;if(typeof a=="string"&&!bv.test(a)&&(J.support.leadingWhitespace||!bq.test(a))&&!bB[(bs.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(br,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},c.nodeType===1&&(J.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){return this[0]&&this[0].parentNode?J.isFunction(a)?this.each(function(b){var c=J(this),d=c.html();c.replaceWith(a.call(this,b,d))}):(typeof a!="string"&&(a=J(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;J(this).remove(),b?J(b).before(a):J(c).append(a)})):this.length?this.pushStack(J(J.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,f,g,h,i=a[0],j=[];if(!J.support.checkClone&&arguments.length===3&&typeof i=="string"&&by.test(i))return this.each(function(){J(this).domManip(a,c,d,!0)});if(J.isFunction(i))return this.each(function(e){var f=J(this);a[0]=i.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){h=i&&i.parentNode,J.support.parentNode&&h&&h.nodeType===11&&h.childNodes.length===this.length?e={fragment:h}:e=J.buildFragment(a,this,j),g=e.fragment,g.childNodes.length===1?f=g=g.firstChild:f=g.firstChild;if(f){c=c&&J.nodeName(f,"tr");for(var k=0,l=this.length,m=l-1;k<l;k++)d.call(c?w(this[k],f):this[k],e.cacheable||l>1&&k<m?J.clone(g,!0,!0):g)}j.length&&J.each(j,function(a,b){b.src?J.ajax({type:"GET",global:!1,url:b.src,async:!1,dataType:"script"}):J.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bA,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),J.buildFragment=function(a,b,c){var d,e,f,g,h=a[0];return b&&b[0]&&(g=b[0].ownerDocument||b[0]),g.createDocumentFragment||(g=G),a.length===1&&typeof h=="string"&&h.length<512&&g===G&&h.charAt(0)==="<"&&!bw.test(h)&&(J.support.checkClone||!by.test(h))&&(J.support.html5Clone||!bx.test(h))&&(e=!0,f=J.fragments[h],f&&f!==1&&(d=f)),d||(d=g.createDocumentFragment(),J.clean(a,g,d,c)),e&&(J.fragments[h]=f?d:1),{fragment:d,cacheable:e}},J.fragments={},J.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){J.fn[a]=function(c){var d=[],e=J(c),f=this.length===1&&this[0].parentNode;if(f&&f.nodeType===11&&f.childNodes.length===1&&e.length===1)return e[b](this[0]),this;for(var g=0,h=e.length;g<h;g++){var i=(g>0?this.clone(!0):this).get();J(e[g])[b](i),d=d.concat(i)}return this.pushStack(d,a,e.selector)}}),J.extend({clone:function(a,b,c){var d,e,f,g=J.support.html5Clone||J.isXMLDoc(a)||!bx.test("<"+a.nodeName+">")?a.cloneNode(!0):q(a);if((!J.support.noCloneEvent||!J.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!J.isXMLDoc(a)){u(a,g),d=t(a),e=t(g);for(f=0;d[f];++f)e[f]&&u(d[f],e[f])}if(b){v(a,g);if(c){d=t(a),e=t(g);for(f=0;d[f];++f)v(d[f],e[f])}}return d=e=null,g},clean:function(a,b,c,d){var e,f,g,h=[];b=b||G,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||G);for(var i=0,j;(j=a[i])!=null;i++){typeof j=="number"&&(j+="");if(!j)continue;if(typeof j=="string")if(!bu.test(j))j=b.createTextNode(j);else{j=j.replace(br,"<$1></$2>");var k=(bs.exec(j)||["",""])[1].toLowerCase(),l=bB[k]||bB._default,m=l[0],n=b.createElement("div"),o=bC.childNodes,p;b===G?bC.appendChild(n):x(b).appendChild(n),n.innerHTML=l[1]+j+l[2];while(m--)n=n.lastChild;if(!J.support.tbody){var q=bt.test(j),s=k==="table"&&!q?n.firstChild&&n.firstChild.childNodes:l[1]==="<table>"&&!q?n.childNodes:[];for(g=s.length-1;g>=0;--g)J.nodeName(s[g],"tbody")&&!s[g].childNodes.length&&s[g].parentNode.removeChild(s[g])}!J.support.leadingWhitespace&&bq.test(j)&&n.insertBefore(b.createTextNode(bq.exec(j)[0]),n.firstChild),j=n.childNodes,n&&(n.parentNode.removeChild(n),o.length>0&&(p=o[o.length-1],p&&p.parentNode&&p.parentNode.removeChild(p)))}var t;if(!J.support.appendChecked)if(j[0]&&typeof (t=j.length)=="number")for(g=0;g<t;g++)r(j[g]);else r(j);j.nodeType?h.push(j):h=J.merge(h,j)}if(c){e=function(a){return!a.type||bz.test(a.type)};for(i=0;h[i];i++){f=h[i];if(d&&J.nodeName(f,"script")&&(!f.type||bz.test(f.type)))d.push(f.parentNode?f.parentNode.removeChild(f):f);else{if(f.nodeType===1){var u=J.grep(f.getElementsByTagName("script"),e);h.splice.apply(h,[i+1,0].concat(u))}c.appendChild(f)}}}return h},cleanData:function(a){var b,c,d=J.cache,e=J.event.special,f=J.support.deleteExpando;for(var g=0,h;(h=a[g])!=null;g++){if(h.nodeName&&J.noData[h.nodeName.toLowerCase()])continue;c=h[J.expando];if(c){b=d[c];if(b&&b.events){for(var i in b.events)e[i]?J.event.remove(h,i):J.removeEvent(h,i,b.handle);b.handle&&(b.handle.elem=null)}f?delete h[J.expando]:h.removeAttribute&&h.removeAttribute(J.expando),delete d[c]}}}});var bD=/alpha\([^)]*\)/i,bE=/opacity=([^)]*)/,bF=/([A-Z]|^ms)/g,bG=/^[\-+]?(?:\d*\.)?\d+$/i,bH=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,bI=/^([\-+])=([\-+.\de]+)/,bJ=/^margin/,bK={position:"absolute",visibility:"hidden",display:"block"},bL=["Top","Right","Bottom","Left"],bM,bN,bO;J.fn.css=function(a,c){return J.access(this,function(a,c,d){return d!==b?J.style(a,c,d):J.css(a,c)},a,c,arguments.length>1)},J.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bM(a,"opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":J.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var f,g,h=J.camelCase(c),i=a.style,j=J.cssHooks[h];c=J.cssProps[h]||h;if(d===b)return j&&"get"in j&&(f=j.get(a,!1,e))!==b?f:i[c];g=typeof d,g==="string"&&(f=bI.exec(d))&&(d=+(f[1]+1)*+f[2]+parseFloat(J.css(a,c)),g="number");if(d==null||g==="number"&&isNaN(d))return;g==="number"&&!J.cssNumber[h]&&(d+="px");if(!j||!("set"in j)||(d=j.set(a,d))!==b)try{i[c]=d}catch(k){}}},css:function(a,c,d){var e,f;c=J.camelCase(c),f=J.cssHooks[c],c=J.cssProps[c]||c,c==="cssFloat"&&(c="float");if(f&&"get"in f&&(e=f.get(a,!0,d))!==b)return e;if(bM)return bM(a,c)},swap:function(a,b,c){var d={},e,f;for(f in b)d[f]=a.style[f],a.style[f]=b[f];e=c.call(a);for(f in b)a.style[f]=d[f];return e}}),J.curCSS=J.css,G.defaultView&&G.defaultView.getComputedStyle&&(bN=function(a,b){var c,d,e,f,g=a.style;return b=b.replace(bF,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!J.contains(a.ownerDocument.documentElement,a)&&(c=J.style(a,b))),!J.support.pixelMargin&&e&&bJ.test(b)&&bH.test(c)&&(f=g.width,g.width=c,c=e.width,g.width=f),c}),G.documentElement.currentStyle&&(bO=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;return f==null&&g&&(e=g[b])&&(f=e),bH.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d)),f===""?"auto":f}),bM=bN||bO,J.each(["height","width"],function(a,b){J.cssHooks[b]={get:function(a,c,d){if(c)return a.offsetWidth!==0?p(a,b,d):J.swap(a,bK,function(){return p(a,b,d)})},set:function(a,b){return bG.test(b)?b+"px":b}}}),J.support.opacity||(J.cssHooks.opacity={get:function(a,b){return bE.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=J.isNumeric(b)?"alpha(opacity="+b*100+")":"",f=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&J.trim(f.replace(bD,""))===""){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bD.test(f)?f.replace(bD,e):f+" "+e}}),J(function(){J.support.reliableMarginRight||(J.cssHooks.marginRight={get:function(a,b){return J.swap(a,{display:"inline-block"},function(){return b?bM(a,"margin-right"):a.style.marginRight})}})}),J.expr&&J.expr.filters&&(J.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!J.support.reliableHiddenOffsets&&(a.style&&a.style.display||J.css(a,"display"))==="none"},J.expr.filters.visible=function(a){return!J.expr.filters.hidden(a)}),J.each({margin:"",padding:"",border:"Width"},function(a,b){J.cssHooks[a+b]={expand:function(c){var d,e=typeof c=="string"?c.split(" "):[c],f={};for(d=0;d<4;d++)f[a+bL[d]+b]=e[d]||e[d-2]||e[0];return f}}});var bP=/%20/g,bQ=/\[\]$/,bR=/\r?\n/g,bS=/#.*$/,bT=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bU=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bV=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bW=/^(?:GET|HEAD)$/,bX=/^\/\//,bY=/\?/,bZ=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,b$=/^(?:select|textarea)/i,b_=/\s+/,ca=/([?&])_=[^&]*/,cb=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,cc=J.fn.load,cd={},ce={},cf,cg,ch=["*/"]+["*"];try{cf=I.href}catch(ci){cf=G.createElement("a"),cf.href="",cf=cf.href}cg=cb.exec(cf.toLowerCase())||[],J.fn.extend({load:function(a,c,d){if(typeof a!="string"&&cc)return cc.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var f=a.slice(e,a.length);a=a.slice(0,e)}var g="GET";c&&(J.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=J.param(c,J.ajaxSettings.traditional),g="POST"));var h=this;return J.ajax({url:a,type:g,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),h.html(f?J("<div>").append(c.replace(bZ,"")).find(f):c)),d&&h.each(d,[c,b,a])}}),this},serialize:function(){return J.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?J.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||b$.test(this.nodeName)||bU.test(this.type))}).map(function(a,b){var c=J(this).val();return c==null?null:J.isArray(c)?J.map(c,function(a,c){return{name:b.name,value:a.replace(bR,"\r\n")}}):{name:b.name,value:c.replace(bR,"\r\n")}}).get()}}),J.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){J.fn[b]=function(a){return this.on(b,a)}}),J.each(["get","post"],function(a,c){J[c]=function(a,d,e,f){return J.isFunction(d)&&(f=f||e,e=d,d=b),J.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),J.extend({getScript:function(a,c){return J.get(a,b,c,"script")},getJSON:function(a,b,c){return J.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?m(a,J.ajaxSettings):(b=a,a=J.ajaxSettings),m(a,b),a},ajaxSettings:{url:cf,isLocal:bV.test(cg[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":ch},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":J.parseJSON,"text xml":J.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:o(cd),ajaxTransport:o(ce),ajax:function(a,c){function d(a,c,d,n){if(v!==2){v=2,t&&clearTimeout(t),s=b,q=n||"",y.readyState=a>0?4:0;var o,p,r,u=c,x=d?k(e,y,d):b,z,A;if(a>=200&&a<300||a===304){if(e.ifModified){if(z=y.getResponseHeader("Last-Modified"))J.lastModified[m]=z;if(A=y.getResponseHeader("Etag"))J.etag[m]=A}if(a===304)u="notmodified",o=!0;else try{p=j(e,x),u="success",o=!0}catch(B){u="parsererror",r=B}}else{r=u;if(!u||a)u="error",a<0&&(a=0)}y.status=a,y.statusText=""+(c||u),o?h.resolveWith(f,[p,u,y]):h.rejectWith(f,[y,u,r]),y.statusCode(l),l=b,w&&g.trigger("ajax"+(o?"Success":"Error"),[y,e,o?p:r]),i.fireWith(f,[y,u]),w&&(g.trigger("ajaxComplete",[y,e]),--J.active||J.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var e=J.ajaxSetup({},c),f=e.context||e,g=f!==e&&(f.nodeType||f instanceof J)?J(f):J.event,h=J.Deferred(),i=J.Callbacks("once memory"),l=e.statusCode||{},m,o={},p={},q,r,s,t,u,v=0,w,x,y={readyState:0,setRequestHeader:function(a,b){if(!v){var c=a.toLowerCase();a=p[c]=p[c]||a,o[a]=b}return this},getAllResponseHeaders:function(){return v===2?q:null},getResponseHeader:function(a){var c;if(v===2){if(!r){r={};while(c=bT.exec(q))r[c[1].toLowerCase()]=c[2]}c=r[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return v||(e.mimeType=a),this},abort:function(a){return a=a||"abort",s&&s.abort(a),d(0,a),this}};h.promise(y),y.success=y.done,y.error=y.fail,y.complete=i.add,y.statusCode=function(a){if(a){var b;if(v<2)for(b in a)l[b]=[l[b],a[b]];else b=a[y.status],y.then(b,b)}return this},e.url=((a||e.url)+"").replace(bS,"").replace(bX,cg[1]+"//"),e.dataTypes=J.trim(e.dataType||"*").toLowerCase().split(b_),e.crossDomain==null&&(u=cb.exec(e.url.toLowerCase()),e.crossDomain=!(!u||u[1]==cg[1]&&u[2]==cg[2]&&(u[3]||(u[1]==="http:"?80:443))==(cg[3]||(cg[1]==="http:"?80:443)))),e.data&&e.processData&&typeof e.data!="string"&&(e.data=J.param(e.data,e.traditional)),n(cd,e,c,y);if(v===2)return!1;w=e.global,e.type=e.type.toUpperCase(),e.hasContent=!bW.test(e.type),w&&J.active++===0&&J.event.trigger("ajaxStart");if(!e.hasContent){e.data&&(e.url+=(bY.test(e.url)?"&":"?")+e.data,delete e.data),m=e.url;if(e.cache===!1){var z=J.now(),A=e.url.replace(ca,"$1_="+z);e.url=A+(A===e.url?(bY.test(e.url)?"&":"?")+"_="+z:"")}}(e.data&&e.hasContent&&e.contentType!==!1||c.contentType)&&y.setRequestHeader("Content-Type",e.contentType),e.ifModified&&(m=m||e.url,J.lastModified[m]&&y.setRequestHeader("If-Modified-Since",J.lastModified[m]),J.etag[m]&&y.setRequestHeader("If-None-Match",J.etag[m])),y.setRequestHeader("Accept",e.dataTypes[0]&&e.accepts[e.dataTypes[0]]?e.accepts[e.dataTypes[0]]+(e.dataTypes[0]!=="*"?", "+ch+"; q=0.01":""):e.accepts["*"]);for(x in e.headers)y.setRequestHeader(x,e.headers[x]);if(!e.beforeSend||e.beforeSend.call(f,y,e)!==!1&&v!==2){for(x in{success:1,error:1,complete:1})y[x](e[x]);s=n(ce,e,c,y);if(!s)d(-1,"No Transport");else{y.readyState=1,w&&g.trigger("ajaxSend",[y,e]),e.async&&e.timeout>0&&(t=setTimeout(function(){y.abort("timeout")},e.timeout));try{v=1,s.send(o,d)}catch(B){if(v<2)d(-1,B);else throw B}}return y}return y.abort(),!1},param:function(a,c){var d=[],e=function(a,b){b=J.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=J.ajaxSettings.traditional);if(J.isArray(a)||a.jquery&&!J.isPlainObject(a))J.each(a,function(){e(this.name,this.value)});else for(var f in a)l(f,a[f],c,e);return d.join("&").replace(bP,"+")}}),J.extend({active:0,lastModified:{},etag:{}});var cj=J.now(),ck=/(\=)\?(&|$)|\?\?/i;J.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return J.expando+"_"+cj++}}),J.ajaxPrefilter("json jsonp",function(b,c,d){var e=typeof b.data=="string"&&/^application\/x\-www\-form\-urlencoded/.test(b.contentType);if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(ck.test(b.url)||e&&ck.test(b.data))){var f,g=b.jsonpCallback=J.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h=a[g],i=b.url,j=b.data,k="$1"+g+"$2";return b.jsonp!==!1&&(i=i.replace(ck,k),b.url===i&&(e&&(j=j.replace(ck,k)),b.data===j&&(i+=(/\?/.test(i)?"&":"?")+b.jsonp+"="+g))),b.url=i,b.data=j,a[g]=function(a){f=[a]},d.always(function(){a[g]=h,f&&J.isFunction(h)&&a[g](f[0])}),b.converters["script json"]=function(){return f||J.error(g+" was not called"),f[0]},b.dataTypes[0]="json","script"}}),J.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return J.globalEval(a),a}}}),J.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),J.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=G.head||G.getElementsByTagName("head")[0]||G.documentElement;return{send:function(e,f){c=G.createElement("script"),c.async="async",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){if(e||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||f(200,"success")},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var cl=a.ActiveXObject?function(){for(var a in cn)cn[a](0,1)}:!1,cm=0,cn;J.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&i()||h()}:i,function(a){J.extend(J.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(J.ajaxSettings.xhr()),J.support.ajax&&J.ajaxTransport(function(c){if(!c.crossDomain||J.support.cors){var d;return{send:function(e,f){var g=c.xhr(),h,i;c.username?g.open(c.type,c.url,c.async,c.username,c.password):g.open(c.type,c.url,c.async);if(c.xhrFields)for(i in c.xhrFields)g[i]=c.xhrFields[i];c.mimeType&&g.overrideMimeType&&g.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(i in e)g.setRequestHeader(i,e[i])}catch(j){}g.send(c.hasContent&&c.data||null),d=function(a,e){var i,j,k,l,m;try{if(d&&(e||g.readyState===4)){d=b,h&&(g.onreadystatechange=J.noop,cl&&delete cn[h]);if(e)g.readyState!==4&&g.abort();else{i=g.status,k=g.getAllResponseHeaders(),l={},m=g.responseXML,m&&m.documentElement&&(l.xml=m);try{l.text=g.responseText}catch(a){}try{j=g.statusText}catch(n){j=""}!i&&c.isLocal&&!c.crossDomain?i=l.text?200:404:i===1223&&(i=204)}}}catch(o){e||f(-1,o)}l&&f(i,j,l,k)},!c.async||g.readyState===4?d():(h=++cm,cl&&(cn||(cn={},J(a).unload(cl)),cn[h]=d),g.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var co={},cp,cq,cr=/^(?:toggle|show|hide)$/,cs=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,ct,cu=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cv;J.fn.extend({show:function(a,b,c){var f,g;if(a||a===0)return this.animate(e("show",3),a,b,c);for(var h=0,i=this.length;h<i;h++)f=this[h],f.style&&(g=f.style.display,!J._data(f,"olddisplay")&&g==="none"&&(g=f.style.display=""),(g===""&&J.css(f,"display")==="none"||!J.contains(f.ownerDocument.documentElement,f))&&J._data(f,"olddisplay",d(f.nodeName)));for(h=0;h<i;h++){f=this[h];if(f.style){g=f.style.display;if(g===""||g==="none")f.style.display=J._data(f,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(e("hide",3),a,b,c);var d,f,g=0,h=this.length;for(;g<h;g++)d=this[g],d.style&&(f=J.css(d,"display"),f!=="none"&&!J._data(d,"olddisplay")&&J._data(d,"olddisplay",f));for(g=0;g<h;g++)this[g].style&&(this[g].style.display="none");return this},_toggle:J.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";return J.isFunction(a)&&J.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:J(this).is(":hidden");J(this)[b?"show":"hide"]()}):this.animate(e("toggle",3),a,b,c),this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,e){function f(){g.queue===!1&&J._mark(this);var b=J.extend({},g),c=this.nodeType===1,e=c&&J(this).is(":hidden"),f,h,i,j,k,l,m,n,o,p,q;b.animatedProperties={};for(i in a){f=J.camelCase(i),i!==f&&(a[f]=a[i],delete a[i]);if((k=J.cssHooks[f])&&"expand"in k){l=k.expand(a[f]),delete a[f];for(i in l)i in a||(a[i]=l[i])}}for(f in a){h=a[f],J.isArray(h)?(b.animatedProperties[f]=h[1],h=a[f]=h[0]):b.animatedProperties[f]=b.specialEasing&&b.specialEasing[f]||b.easing||"swing";if(h==="hide"&&e||h==="show"&&!e)return b.complete.call(this);c&&(f==="height"||f==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],J.css(this,"display")==="inline"&&J.css(this,"float")==="none"&&(!J.support.inlineBlockNeedsLayout||d(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)j=new J.fx(this,b,i),h=a[i],cr.test(h)?(q=J._data(this,"toggle"+i)||(h==="toggle"?e?"show":"hide":0),q?(J._data(this,"toggle"+i,q==="show"?"hide":"show"),j[q]()):j[h]()):(m=cs.exec(h),n=j.cur(),m?(o=parseFloat(m[2]),p=m[3]||(J.cssNumber[i]?"":"px"),p!=="px"&&(J.style(this,i,(o||1)+p),n=(o||1)/j.cur()*n,J.style(this,i,n+p)),m[1]&&(o=(m[1]==="-="?-1:1)*o+n),j.custom(n,o,p)):j.custom(n,h,""));return!0}var g=J.speed(b,c,e);return J.isEmptyObject(a)?this.each(g.complete,[!1]):(a=J.extend({},a),g.queue===!1?this.each(f):this.queue(g.queue,f))},stop:function(a,c,d){return typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){function b(a,b,c){var e=b[c];J.removeData(a,c,!0),e.stop(d)}var c,e=!1,f=J.timers,g=J._data(this);d||J._unmark(!0,this);if(a==null)for(c in g)g[c]&&g[c].stop&&c.indexOf(".run")===c.length-4&&b(this,g,c);else g[c=a+".run"]&&g[c].stop&&b(this,g,c);for(c=f.length;c--;)f[c].elem===this&&(a==null||f[c].queue===a)&&(d?f[c](!0):f[c].saveState(),e=!0,f.splice(c,1));(!d||!e)&&J.dequeue(this,a)})}}),J.each({slideDown:e("show",1),slideUp:e("hide",1),slideToggle:e("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){J.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),J.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?J.extend({},a):{complete:c||!c&&b||J.isFunction(a)&&a,duration:a,easing:c&&b||b&&!J.isFunction(b)&&b};d.duration=J.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in J.fx.speeds?J.fx.speeds[d.duration]:J.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";return d.old=d.complete,d.complete=function(a){J.isFunction(d.old)&&d.old.call(this),d.queue?J.dequeue(this,d.queue):a!==!1&&J._unmark(this)},d},easing:{linear:function(a){return a},swing:function(a){return-Math.cos(a*Math.PI)/2+.5}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),J.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(J.fx.step[this.prop]||J.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var a,b=J.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a}return this.elem[this.prop]},custom:function(a,c,d){function e(a){return f.step(a)}var f=this,h=J.fx;this.startTime=cv||g(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(J.cssNumber[this.prop]?"":"px"),e.queue=this.options.queue,e.elem=this.elem,e.saveState=function(){J._data(f.elem,"fxshow"+f.prop)===b&&(f.options.hide?J._data(f.elem,"fxshow"+f.prop,f.start):f.options.show&&J._data(f.elem,"fxshow"+f.prop,f.end))},e()&&J.timers.push(e)&&!ct&&(ct=setInterval(h.tick,h.interval))},show:function(){var a=J._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||J.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),J(this.elem).show()},hide:function(){this.options.orig[this.prop]=J._data(this.elem,"fxshow"+this.prop)||J.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cv||g(),f=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties)i.animatedProperties[b]!==!0&&(f=!1);if(f){i.overflow!=null&&!J.support.shrinkWrapBlocks&&J.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&J(h).hide();if(i.hide||i.show)for(b in i.animatedProperties)J.style(h,b,i.orig[b]),J.removeData(h,"fxshow"+b,!0),J.removeData(h,"toggle"+b,!0);d=i.complete,d&&(i.complete=!1,d.call(h))}return!1}return i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=J.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},J.extend(J.fx,{tick:function(){var a,b=J.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||J.fx.stop()},interval:13,stop:function(){clearInterval(ct),ct=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){J.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),J.each(cu.concat.apply([],cu),function(a,b){b.indexOf("margin")&&(J.fx.step[b]=function(a){J.style(a.elem,b,Math.max(0,a.now)+a.unit)})}),J.expr&&J.expr.filters&&(J.expr.filters.animated=function(a){return J.grep(J.timers,function(b){return a===b.elem}).length});var cw,cx=/^t(?:able|d|h)$/i,cy=/^(?:body|html)$/i;"getBoundingClientRect"in G.documentElement?cw=function(a,b,d,e){try{e=a.getBoundingClientRect()}catch(f){}if(!e||!J.contains(d,a))return e?{top:e.top,left:e.left}:{top:0,left:0};var g=b.body,h=c(b),i=d.clientTop||g.clientTop||0,j=d.clientLeft||g.clientLeft||0,k=h.pageYOffset||J.support.boxModel&&d.scrollTop||g.scrollTop,l=h.pageXOffset||J.support.boxModel&&d.scrollLeft||g.scrollLeft,m=e.top+k-i,n=e.left+l-j;return{top:m,left:n}}:cw=function(a,b,c){var d,e=a.offsetParent,f=a,g=b.body,h=b.defaultView,i=h?h.getComputedStyle(a,null):a.currentStyle,j=a.offsetTop,k=a.offsetLeft;while((a=a.parentNode)&&a!==g&&a!==c){if(J.support.fixedPosition&&i.position==="fixed")break;d=h?h.getComputedStyle(a,null):a.currentStyle,j-=a.scrollTop,k-=a.scrollLeft,a===e&&(j+=a.offsetTop,k+=a.offsetLeft,J.support.doesNotAddBorder&&(!J.support.doesAddBorderForTableAndCells||!cx.test(a.nodeName))&&(j+=parseFloat(d.borderTopWidth)||0,k+=parseFloat(d.borderLeftWidth)||0),f=e,e=a.offsetParent),J.support.subtractsBorderForOverflowNotVisible&&d.overflow!=="visible"&&(j+=parseFloat(d.borderTopWidth)||0,k+=parseFloat(d.borderLeftWidth)||0),i=d}if(i.position==="relative"||i.position==="static")j+=g.offsetTop,k+=g.offsetLeft;return J.support.fixedPosition&&i.position==="fixed"&&(j+=Math.max(c.scrollTop,g.scrollTop),k+=Math.max(c.scrollLeft,g.scrollLeft)),{top:j,left:k}},J.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){J.offset.setOffset(this,a,b)});var c=this[0],d=c&&c.ownerDocument;return d?c===d.body?J.offset.bodyOffset(c):cw(c,d,d.documentElement):null},J.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return J.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(J.css(a,"marginTop"))||0,c+=parseFloat(J.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=J.css(a,"position");d==="static"&&(a.style.position="relative");var e=J(a),f=e.offset(),g=J.css(a,"top"),h=J.css(a,"left"),i=(d==="absolute"||d==="fixed")&&J.inArray("auto",[g,h])>-1,j={},k={},l,m;i?(k=e.position(),l=k.top,m=k.left):(l=parseFloat(g)||0,m=parseFloat(h)||0),J.isFunction(b)&&(b=b.call(a,c,f)),b.top!=null&&(j.top=b.top-f.top+l),b.left!=null&&(j.left=b.left-f.left+m),"using"in b?b.using.call(a,j):e.css(j)}},J.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cy.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(J.css(a,"marginTop"))||0,c.left-=parseFloat(J.css(a,"marginLeft"))||0,d.top+=parseFloat(J.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(J.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||G.body;while(a&&!cy.test(a.nodeName)&&J.css(a,"position")==="static")a=a.offsetParent;return a})}}),J.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,d){var e=/Y/.test(d);J.fn[a]=function(f){return J.access(this,function(a,f,g){var h=c(a);if(g===b)return h?d in h?h[d]:J.support.boxModel&&h.document.documentElement[f]||h.document.body[f]:a[f];h?h.scrollTo(e?J(h).scrollLeft():g,e?g:J(h).scrollTop()):a[f]=g},a,f,arguments.length,null)}}),J.each({Height:"height",Width:"width"},function(a,c){var d="client"+a,e="scroll"+a,f="offset"+a;J.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(J.css(a,c,"padding")):this[c]():null},J.fn["outer"+a]=function(a){var b=this[0];return b?b.style?parseFloat(J.css(b,c,a?"margin":"border")):this[c]():null},J.fn[c]=function(a){return J.access(this,function(a,c,g){var h,i,j,k;if(J.isWindow(a))return h=a.document,i=h.documentElement[d],J.support.boxModel&&i||h.body&&h.body[d]||i;if(a.nodeType===9)return h=a.documentElement,h[d]>=h[e]?h[d]:Math.max(a.body[e],h[e],a.body[f],h[f]);if(g===b)return j=J.css(a,c),k=parseFloat(j),J.isNumeric(k)?k:j;J(a).css(c,g)},c,a,arguments.length,null)}}),a.jQuery=a.$=J,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return J})})(window);var JSON;JSON||(JSON={}),function(){function f(a){return a<10?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||"null";return e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1)typeof rep[c]=="string"&&(d=rep[c],e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}"use strict",typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c=="number")for(d=0;d<c;d+=1)indent+=" ";else typeof c=="string"&&(indent=c);rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number")return str("",{"":a});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object")for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(a,b){var c;a.rails=c={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]",selectChangeSelector:"select[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",CSRFProtection:function(b){var c=a('meta[name="csrf-token"]').attr("content");c&&b.setRequestHeader("X-CSRF-Token"
,c)},fire:function(b,c,d){var e=a.Event(c);return b.trigger(e,d),e.result!==!1},confirm:function(a){return confirm(a)},ajax:function(b){return a.ajax(b)},handleRemote:function(d){var e,f,g,h=d.data("cross-domain")||null,i=d.data("type")||a.ajaxSettings&&a.ajaxSettings.dataType;if(c.fire(d,"ajax:before")){if(d.is("form")){e=d.attr("method"),f=d.attr("action"),g=d.serializeArray();var j=d.data("ujs:submit-button");j&&(g.push(j),d.data("ujs:submit-button",null))}else d.is("select")?(e=d.data("method"),f=d.data("url"),g=d.serialize(),d.data("params")&&(g=g+"&"+d.data("params"))):(e=d.data("method"),f=d.attr("href"),g=d.data("params")||null);options={type:e||"GET",data:g,dataType:i,crossDomain:h,beforeSend:function(a,e){return e.dataType===b&&a.setRequestHeader("accept","*/*;q=0.5, "+e.accepts.script),c.fire(d,"ajax:beforeSend",[a,e])},success:function(a,b,c){d.trigger("ajax:success",[a,b,c])},complete:function(a,b){d.trigger("ajax:complete",[a,b])},error:function(a,b,c){d.trigger("ajax:error",[a,b,c])}},f&&a.extend(options,{url:f}),c.ajax(options)}},handleMethod:function(c){var d=c.attr("href"),e=c.data("method"),f=a("meta[name=csrf-token]").attr("content"),g=a("meta[name=csrf-param]").attr("content"),h=a('<form method="post" action="'+d+'"></form>'),i='<input name="_method" value="'+e+'" type="hidden" />';g!==b&&f!==b&&(i+='<input name="'+g+'" value="'+f+'" type="hidden" />'),h.hide().append(i).appendTo("body"),h.submit()},disableFormElements:function(b){b.find(c.disableSelector).each(function(){var b=a(this),c=b.is("button")?"html":"val";b.data("ujs:enable-with",b[c]()),b[c](b.data("disable-with")),b.attr("disabled","disabled")})},enableFormElements:function(b){b.find(c.enableSelector).each(function(){var b=a(this),c=b.is("button")?"html":"val";b.data("ujs:enable-with")&&b[c](b.data("ujs:enable-with")),b.removeAttr("disabled")})},allowAction:function(a){var b=a.data("confirm"),d=!1,e;return b?(c.fire(a,"confirm")&&(d=c.confirm(b),e=c.fire(a,"confirm:complete",[d])),d&&e):!0},blankInputs:function(b,c,d){var e=a(),f,g=c||"input,textarea";return b.find(g).each(function(){f=a(this);if(d?f.val():!f.val())e=e.add(f)}),e.length?e:!1},nonBlankInputs:function(a,b){return c.blankInputs(a,b,!0)},stopEverything:function(b){return a(b.target).trigger("ujs:everythingStopped"),b.stopImmediatePropagation(),!1},callFormSubmitBindings:function(c){var d=c.data("events"),e=!0;return d!==b&&d.submit!==b&&a.each(d.submit,function(a,b){if(typeof b.handler=="function")return e=b.handler(b.data)}),e}},a.ajaxPrefilter(function(a,b,d){a.crossDomain||c.CSRFProtection(d)}),a(c.linkClickSelector).live("click.rails",function(d){var e=a(this);if(!c.allowAction(e))return c.stopEverything(d);if(e.data("remote")!==b)return c.handleRemote(e),!1;if(e.data("method"))return c.handleMethod(e),!1}),a(c.selectChangeSelector).live("change.rails",function(b){var d=a(this);return c.allowAction(d)?(c.handleRemote(d),!1):c.stopEverything(b)}),a(c.formSubmitSelector).live("submit.rails",function(d){var e=a(this),f=e.data("remote")!==b,g=c.blankInputs(e,c.requiredInputSelector),h=c.nonBlankInputs(e,c.fileInputSelector);if(!c.allowAction(e))return c.stopEverything(d);if(g&&e.attr("novalidate")==b&&c.fire(e,"ajax:aborted:required",[g]))return c.stopEverything(d);if(f)return h?c.fire(e,"ajax:aborted:file",[h]):!a.support.submitBubbles&&c.callFormSubmitBindings(e)===!1?c.stopEverything(d):(c.handleRemote(e),!1);setTimeout(function(){c.disableFormElements(e)},13)}),a(c.formInputClickSelector).live("click.rails",function(b){var d=a(this);if(!c.allowAction(d))return c.stopEverything(b);var e=d.attr("name"),f=e?{name:e,value:d.val()}:null;d.closest("form").data("ujs:submit-button",f)}),a(c.formSubmitSelector).live("ajax:beforeSend.rails",function(b){this==b.target&&c.disableFormElements(a(this))}),a(c.formSubmitSelector).live("ajax:complete.rails",function(b){this==b.target&&c.enableFormElements(a(this))})}(jQuery),function(a,b){function c(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}function d(b,d){var e=b.nodeName.toLowerCase();if("area"===e){var f=b.parentNode,g=f.name,h;return!b.href||!g||f.nodeName.toLowerCase()!=="map"?!1:(h=a("img[usemap=#"+g+"]")[0],!!h&&c(h))}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||d:d)&&c(b)}a.ui=a.ui||{},a.ui.version||(a.extend(a.ui,{version:"1.8.17",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return typeof b=="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){var d=a(this[0]),e,f;while(d.length&&d[0]!==document){e=d.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){f=parseInt(d.css("zIndex"),10);if(!isNaN(f)&&f!==0)return f}d=d.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),e&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var f=d==="Width"?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return typeof b!="number"?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return d(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var c=a.attr(b,"tabindex"),e=isNaN(c);return(e||c>=0)&&d(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=c.offsetHeight===100,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(!!d&&!!a.element[0].parentNode)for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;var d=c&&c==="left"?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}}))}(jQuery),function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d=0,e;(e=b[d])!=null;d++)try{a(e).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e=b.split(".")[0],f;b=b.split(".")[1],f=e+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[e][b].prototype=a.extend(!0,g,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.widget.bridge(b,a[e][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f=typeof e=="string",g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&e.charAt(0)==="_"?h:(f?this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;if(f!==d&&f!==b)return h=f,!1}):this.each(function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(arguments.length===0)return a.extend({},this.options);if(typeof c=="string"){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,g=this.options[b];d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent;if(f)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}}(jQuery),function(a,b){var c=!1;a(document).mouseup(function(a){c=!1}),a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(b){if(!c){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=b.which==1,f=typeof this.options.cancel=="string"&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;if(!e||f||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){this._mouseStarted=this._mouseStart(b)!==!1;if(!this._mouseStarted)return b.preventDefault(),!0}return!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0,!0}},_mouseMove:function(b){return!a.browser.msie||document.documentMode>=9||!!b.button?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}})}(jQuery),function(a,b){a.ui=a.ui||{};var c=/left|center|right/,d=/top|center|bottom/,e="center",f={},g=a.fn.position,h=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return g.apply(this,arguments);b=a.extend({},b);var h=a(b.of),i=h[0],j=(b.collision||"flip").split(" "),k=b.offset?b.offset.split(" "):[0,0],l,m,n;return i.nodeType===9?(l=h.width(),m=h.height(),n={top:0,left:0}):i.setTimeout?(l=h.width(),m=h.height(),n={top:h.scrollTop(),left:h.scrollLeft()}):i.preventDefault?(b.at="left top",l=m=0,n={top:b.of.pageY,left:b.of.pageX}):(l=h.outerWidth(),m=h.outerHeight(),n=h.offset()),a.each(["my","at"],function(){var a=(b[this]||"").split(" ");a.length===1&&(a=c.test(a[0])?a.concat([e]):d.test(a[0])?[e].concat(a):[e,e]),a[0]=c.test(a[0])?a[0]:e,a[1]=d.test(a[1])?a[1]:e,b[this]=a}),j.length===1&&(j[1]=j[0]),k[0]=parseInt(k[0],10)||0,k.length===1&&(k[1]=k[0]),k[1]=parseInt(k[1],10)||0,b.at[0]==="right"?n.left+=l:b.at[0]===e&&(n.left+=l/2),b.at[1]==="bottom"?n.top+=m:b.at[1]===e&&(n.top+=m/2),n.left+=k[0],n.top+=k[1],this.each(function(){var c=a(this),d=c.outerWidth(),g=c.outerHeight(),h=parseInt(a.curCSS(this,"marginLeft",!0))||0,i=parseInt(a.curCSS(this,"marginTop",!0))||0,o=d+h+(parseInt(a.curCSS(this,"marginRight",!0))||0),p=g+i+(parseInt(a.curCSS(this,"marginBottom",!0))||0),q=a.extend({},n),r;b.my[0]==="right"?q.left-=d:b.my[0]===e&&(q.left-=d/2),b.my[1]==="bottom"?q.top-=g:b.my[1]===e&&(q.top-=g/2),f.fractions||(q.left=Math.round(q.left),q.top=Math.round(q.top)),r={left:q.left-h,top:q.top-i},a.each(["left","top"],function(c,e){a.ui.position[j[c]]&&a.ui.position[j[c]][e](q,{targetWidth:l,targetHeight:m,elemWidth:d,elemHeight:g,collisionPosition:r,collisionWidth:o,collisionHeight:p,offset:k,my:b.my,at:b.at})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(q,{using:b.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]!==e){var d=a(window),f=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),g=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,h=c.at[0]==="left"?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+i:f>0?g+h+i:0}},top:function(b,c){if(c.at[1]!==e){var d=a(window),f=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),g=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,h=c.at[1]==="top"?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+i:f>0?g+h+i:0}}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0,h={top:c.top-e.top+f,left:c.left-e.left+g};"using"in c?c.using.call(b,h):d.css(h)},a.fn.offset=function(b){var c=this[0];return!c||!c.ownerDocument?null:b?this.each(function(){a.offset.setOffset(this,b)}):h.call(this)}),function(){var b=document.getElementsByTagName("body")[0],c=document.createElement("div"),d,e,g,h,i;d=document.createElement(b?"div":"body"),g={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},b&&jQuery.extend(g,{position:"absolute",left:"-1000px",top:"-1000px"});for(var j in g)d.style[j]=g[j];d.appendChild(c),e=b||document.documentElement,e.insertBefore(d,e.firstChild),c.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",h=a(c).offset(function(a,b){return b}).offset(),d.innerHTML="",e.removeChild(d),i=h.top+h.left+(b?2e3:0),f.fractions=i>21&&i<22}()}(jQuery),function(a,b){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!!this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(b),this.handle?(c.iframeFix&&a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute");if(!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b)),this.dropped&&(c=this.dropped,this.dropped=!1);if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")return!1;if(this.options.revert=="invalid"&&!c||this.options.revert=="valid"&&c||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var d=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){d._trigger("stop",b)!==!1&&d._clear()})}else this._trigger("stop",b)!==!1&&this._clear();return!1},_mouseUp:function(b){return this.options.iframeFix===!0&&a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var c=!this.options.handle||!a(this.options.handle,this.element).length?!0:!1;return a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)}),c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):c.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo(c.appendTo=="parent"?this.element[0].parentNode:c.appendTo),d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){typeof b=="string"&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;b.containment=="parent"&&(b.containment=this.helper[0].parentNode);if(b.containment=="document"||b.containment=="window")this.containment=[b.containment=="document"?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,b.containment=="document"?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(b.containment=="document"?0:a(window).scrollLeft())+a(b.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(b.containment=="document"?0:a(window).scrollTop())+(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)&&b.containment.constructor!=Array){var c=a(b.containment),d=c[0];if(!d)return;var e=c.offset(),f=a(d).css("overflow")!="hidden";this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}else b.containment.constructor==Array&&(this.containment=b.containment)},_convertPositionTo:function(b,c){c||(c=this.position);var d=b=="absolute"?1:-1,e=this.options,f=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(d[0].tagName),f=b.pageX,g=b.pageY;if(this.originalPosition){var h;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();h=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else h=this.containment;b.pageX-this.offset.click.left<h[0]&&(f=h[0]+this.offset.click.left),b.pageY-this.offset.click.top<h[1]&&(g=h[1]+this.offset.click.top),b.pageX-this.offset.click.left>h[2]&&(f=h[2]+this.offset.click.left),b.pageY-this.offset.click.top>h[3]&&(g=h[3]+this.offset.click.top)}if(c.grid){var j=c.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY;g=h?j-this.offset.click.top<h[1]||j-this.offset.click.top>h[3]?j-this.offset.click.top<h[1]?j+c.grid[1]:j-c.grid[1]:j:j;var k=c.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX;f=h?k-this.offset.click.left<h[0]||k-this.offset.click.left>h[2]?k-this.offset.click.left<h[0]?k+c.grid[0]:k-c.grid[0]:k:k}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),b=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(a){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.extend(a.ui.draggable,{version:"1.8.17"}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,d.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("draggable"),e=this,f=function(b){var c=this.offset.click.top,d=this.offset.click.left,e=this.positionAbs.top,f=this.positionAbs.left,g=b.height,h=b.width,i=b.top,j=b.left;return a.ui.isOver(e+c,f+d,i,j,g,h)};a.each(d.sortables,function(f){this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c){var d=a("body"),e=a(this).data("draggable").options;d.css("cursor")&&(e._cursor=d.css("cursor")),d.css("cursor",e.cursor)},stop:function(b,c){var d=a(this).data("draggable").options;d._cursor&&a("body").css("cursor",d._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(b,c){var d=a(this).data("draggable");d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"&&(d.overflowOffset=d.scrollParent.offset())},drag:function(b,c){var d=a(this).data("draggable"),e=d.options,f=!1;if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"){if(!e.axis||e.axis!="x")d.overflowOffset.top+d.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity?d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop-e.scrollSpeed);if(!e.axis||e.axis!="y")d.overflowOffset.left+d.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity?d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft-e.scrollSpeed)}else{if(!e.axis||e.axis!="x")b.pageY-a(document).scrollTop()<e.scrollSensitivity?f=a(document).scrollTop(a(document).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<e.scrollSensitivity&&(f=a(document).scrollTop(a(document).scrollTop()+e.scrollSpeed));if(!e.axis||e.axis!="y")b.pageX-a(document).scrollLeft
()<e.scrollSensitivity?f=a(document).scrollLeft(a(document).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<e.scrollSensitivity&&(f=a(document).scrollLeft(a(document).scrollLeft()+e.scrollSpeed))}f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c){var d=a(this).data("draggable"),e=d.options;d.snapElements=[],a(e.snap.constructor!=String?e.snap.items||":data(draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c){var d=a(this).data("draggable"),e=d.options,f=e.snapTolerance,g=c.offset.left,h=g+d.helperProportions.width,i=c.offset.top,j=i+d.helperProportions.height;for(var k=d.snapElements.length-1;k>=0;k--){var l=d.snapElements[k].left,m=l+d.snapElements[k].width,n=d.snapElements[k].top,o=n+d.snapElements[k].height;if(!(l-f<g&&g<m+f&&n-f<i&&i<o+f||l-f<g&&g<m+f&&n-f<j&&j<o+f||l-f<h&&h<m+f&&n-f<i&&i<o+f||l-f<h&&h<m+f&&n-f<j&&j<o+f)){d.snapElements[k].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=!1;continue}if(e.snapMode!="inner"){var p=Math.abs(n-j)<=f,q=Math.abs(o-i)<=f,r=Math.abs(l-h)<=f,s=Math.abs(m-g)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n-d.helperProportions.height,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m}).left-d.margins.left)}var t=p||q||r||s;if(e.snapMode!="outer"){var p=Math.abs(n-i)<=f,q=Math.abs(o-j)<=f,r=Math.abs(l-g)<=f,s=Math.abs(m-h)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o-d.helperProportions.height,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m-d.helperProportions.width}).left-d.margins.left)}!d.snapElements[k].snapping&&(p||q||r||s||t)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=p||q||r||s||t}}}),a.ui.plugin.add("draggable","stack",{start:function(b,c){var d=a(this).data("draggable").options,e=a.makeArray(a(d.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(!!e.length){var f=parseInt(e[0].style.zIndex)||0;a(e).each(function(a){this.style.zIndex=f+a}),this[0].style.zIndex=f+e.length}}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(jQuery),function(a,b){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,c=b.accept;this.isover=0,this.isout=1,this.accept=a.isFunction(c)?c:function(a){return a.is(c)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[],a.ui.ddmanager.droppables[b.scope].push(this),b.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){var b=a.ui.ddmanager.droppables[this.options.scope];for(var c=0;c<b.length;c++)b[c]==this&&b.splice(c,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(b,c){b=="accept"&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;!!c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;!!c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0])return!1;var e=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"droppable");if(b.options.greedy&&!b.options.disabled&&b.options.scope==d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance))return e=!0,!1}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.extend(a.ui.droppable,{version:"1.8.17"}),a.ui.intersect=function(b,c,d){if(!c.offset)return!1;var e=(b.positionAbs||b.position.absolute).left,f=e+b.helperProportions.width,g=(b.positionAbs||b.position.absolute).top,h=g+b.helperProportions.height,i=c.offset.left,j=i+c.proportions.width,k=c.offset.top,l=k+c.proportions.height;switch(d){case"fit":return i<=e&&f<=j&&k<=g&&h<=l;case"intersect":return i<e+b.helperProportions.width/2&&f-b.helperProportions.width/2<j&&k<g+b.helperProportions.height/2&&h-b.helperProportions.height/2<l;case"pointer":var m=(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,n=(b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,o=a.ui.isOver(n,m,k,i,c.proportions.height,c.proportions.width);return o;case"touch":return(g>=k&&g<=l||h>=k&&h<=l||g<k&&h>l)&&(e>=i&&e<=j||f>=i&&f<=j||e<i&&f>j);default:return!1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d=a.ui.ddmanager.droppables[b.options.scope]||[],e=c?c.type:null,f=(b.currentItem||b.element).find(":data(droppable)").andSelf();g:for(var h=0;h<d.length;h++){if(d[h].options.disabled||b&&!d[h].accept.call(d[h].element[0],b.currentItem||b.element))continue;for(var i=0;i<f.length;i++)if(f[i]==d[h].element[0]){d[h].proportions.height=0;continue g}d[h].visible=d[h].element.css("display")!="none";if(!d[h].visible)continue;e=="mousedown"&&d[h]._activate.call(d[h],c),d[h].offset=d[h].element.offset(),d[h].proportions={width:d[h].element[0].offsetWidth,height:d[h].element[0].offsetHeight}}},drop:function(b,c){var d=!1;return a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){!this.options||(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parents(":not(body,html)").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var d=a.ui.intersect(b,this,this.options.tolerance),e=!d&&this.isover==1?"isout":d&&this.isover==0?"isover":null;if(!e)return;var f;if(this.options.greedy){var g=this.element.parents(":data(droppable):eq(0)");g.length&&(f=a.data(g[0],"droppable"),f.greedyChild=e=="isover"?1:0)}f&&e=="isover"&&(f.isover=0,f.isout=1,f._out.call(f,c)),this[e]=1,this[e=="isout"?"isover":"isout"]=0,this[e=="isover"?"_over":"_out"].call(this,c),f&&e=="isout"&&(f.isout=0,f.isover=1,f._over.call(f,c))}})},dragStop:function(b,c){b.element.parents(":not(body,html)").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}}(jQuery),function(a,b){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var b=this,c=this.options;this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(/relative/.test(this.element.css("position"))&&a.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"}),this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=c.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var d=this.handles.split(",");this.handles={};for(var e=0;e<d.length;e++){var f=a.trim(d[e]),g="ui-resizable-"+f,h=a('<div class="ui-resizable-handle '+g+'"></div>');/sw|se|ne|nw/.test(f)&&h.css({zIndex:++c.zIndex}),"se"==f&&h.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[f]=".ui-resizable-"+f,this.element.append(h)}}this._renderAxis=function(b){b=b||this.element;for(var c in this.handles){this.handles[c].constructor==String&&(this.handles[c]=a(this.handles[c],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=a(this.handles[c],this.element),e=0;e=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth();var f=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");b.css(f,e),this._proportionallyResize()}if(!a(this.handles[c]).length)continue}},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=a&&a[1]?a[1]:"se"}}),c.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").hover(function(){c.disabled||(a(this).removeClass("ui-resizable-autohide"),b._handles.show())},function(){c.disabled||b.resizing||(a(this).addClass("ui-resizable-autohide"),b._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var b=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){b(this.element);var c=this.element;c.after(this.originalElement.css({position:c.css("position"),width:c.outerWidth(),height:c.outerHeight(),top:c.css("top"),left:c.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),b(this.originalElement),this},_mouseCapture:function(b){var c=!1;for(var d in this.handles)a(this.handles[d])[0]==b.target&&(c=!0);return!this.options.disabled&&c},_mouseStart:function(b){var d=this.options,e=this.element.position(),f=this.element;this.resizing=!0,this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()},(f.is(".ui-draggable")||/absolute/.test(f.css("position")))&&f.css({position:"absolute",top:e.top,left:e.left}),a.browser.opera&&/relative/.test(f.css("position"))&&f.css({position:"relative",top:"auto",left:"auto"}),this._renderProxy();var g=c(this.helper.css("left")),h=c(this.helper.css("top"));d.containment&&(g+=a(d.containment).scrollLeft()||0,h+=a(d.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:g,top:h},this.size=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalSize=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalPosition={left:g,top:h},this.sizeDiff={width:f.outerWidth()-f.width(),height:f.outerHeight()-f.height()},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio=typeof d.aspectRatio=="number"?d.aspectRatio:this.originalSize.width/this.originalSize.height||1;var i=a(".ui-resizable-"+this.axis).css("cursor");return a("body").css("cursor",i=="auto"?this.axis+"-resize":i),f.addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var c=this.helper,d=this.options,e={},f=this,g=this.originalMousePosition,h=this.axis,i=b.pageX-g.left||0,j=b.pageY-g.top||0,k=this._change[h];if(!k)return!1;var l=k.apply(this,[b,i,j]),m=a.browser.msie&&a.browser.version<7,n=this.sizeDiff;this._updateVirtualBoundaries(b.shiftKey);if(this._aspectRatio||b.shiftKey)l=this._updateRatio(l,b);return l=this._respectSize(l,b),this._propagate("resize",b),c.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",b,this.ui()),!1},_mouseStop:function(b){this.resizing=!1;var c=this.options,d=this;if(this._helper){var e=this._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:d.sizeDiff.height,h=f?0:d.sizeDiff.width,i={width:d.helper.width()-h,height:d.helper.height()-g},j=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,k=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;c.animate||this.element.css(a.extend(i,{top:k,left:j})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()}return a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b=this.options,c,e,f,g,h;h={minWidth:d(b.minWidth)?b.minWidth:0,maxWidth:d(b.maxWidth)?b.maxWidth:Infinity,minHeight:d(b.minHeight)?b.minHeight:0,maxHeight:d(b.maxHeight)?b.maxHeight:Infinity};if(this._aspectRatio||a)c=h.minHeight*this.aspectRatio,f=h.minWidth/this.aspectRatio,e=h.maxHeight*this.aspectRatio,g=h.maxWidth/this.aspectRatio,c>h.minWidth&&(h.minWidth=c),f>h.minHeight&&(h.minHeight=f),e<h.maxWidth&&(h.maxWidth=e),g<h.maxHeight&&(h.maxHeight=g);this._vBoundaries=h},_updateCache:function(a){var b=this.options;this.offset=this.helper.offset(),d(a.left)&&(this.position.left=a.left),d(a.top)&&(this.position.top=a.top),d(a.height)&&(this.size.height=a.height),d(a.width)&&(this.size.width=a.width)},_updateRatio:function(a,b){var c=this.options,e=this.position,f=this.size,g=this.axis;return d(a.height)?a.width=a.height*this.aspectRatio:d(a.width)&&(a.height=a.width/this.aspectRatio),g=="sw"&&(a.left=e.left+(f.width-a.width),a.top=null),g=="nw"&&(a.top=e.top+(f.height-a.height),a.left=e.left+(f.width-a.width)),a},_respectSize:function(a,b){var c=this.helper,e=this._vBoundaries,f=this._aspectRatio||b.shiftKey,g=this.axis,h=d(a.width)&&e.maxWidth&&e.maxWidth<a.width,i=d(a.height)&&e.maxHeight&&e.maxHeight<a.height,j=d(a.width)&&e.minWidth&&e.minWidth>a.width,k=d(a.height)&&e.minHeight&&e.minHeight>a.height;j&&(a.width=e.minWidth),k&&(a.height=e.minHeight),h&&(a.width=e.maxWidth),i&&(a.height=e.maxHeight);var l=this.originalPosition.left+this.originalSize.width,m=this.position.top+this.size.height,n=/sw|nw|w/.test(g),o=/nw|ne|n/.test(g);j&&n&&(a.left=l-e.minWidth),h&&n&&(a.left=l-e.maxWidth),k&&o&&(a.top=m-e.minHeight),i&&o&&(a.top=m-e.maxHeight);var p=!a.width&&!a.height;return p&&!a.left&&a.top?a.top=null:p&&!a.top&&a.left&&(a.left=null),a},_proportionallyResize:function(){var b=this.options;if(!!this._proportionallyResizeElements.length){var c=this.helper||this.element;for(var d=0;d<this._proportionallyResizeElements.length;d++){var e=this._proportionallyResizeElements[d];if(!this.borderDif){var f=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],g=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];this.borderDif=a.map(f,function(a,b){var c=parseInt(a,10)||0,d=parseInt(g[b],10)||0;return c+d})}if(!a.browser.msie||!a(c).is(":hidden")&&!a(c).parents(":hidden").length)e.css({height:c.height()-this.borderDif[0]-this.borderDif[2]||0,width:c.width()-this.borderDif[1]-this.borderDif[3]||0});else continue}}},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset();if(this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var d=a.browser.msie&&a.browser.version<7,e=d?1:0,f=d?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+f,height:this.element.outerHeight()+f,position:"absolute",left:this.elementOffset.left-e+"px",top:this.elementOffset.top-e+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,b,c){return{width:this.originalSize.width+b}},w:function(a,b,c){var d=this.options,e=this.originalSize,f=this.originalPosition;return{left:f.left+b,width:e.width-b}},n:function(a,b,c){var d=this.options,e=this.originalSize,f=this.originalPosition;return{top:f.top+c,height:e.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),b!="resize"&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.extend(a.ui.resizable,{version:"1.8.17"}),a.ui.plugin.add("resizable","alsoResize",{start:function(b,c){var d=a(this).data("resizable"),e=d.options,f=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10),position:b.css("position")})})};typeof e.alsoResize=="object"&&!e.alsoResize.parentNode?e.alsoResize.length?(e.alsoResize=e.alsoResize[0],f(e.alsoResize)):a.each(e.alsoResize,function(a){f(a)}):f(e.alsoResize)},resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,e){a(b).each(function(){var b=a(this),f=a(this).data("resizable-alsoresize"),g={},i=e&&e.length?e:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(i,function(a,b){var c=(f[b]||0)+(h[b]||0);c&&c>=0&&(g[b]=c||null)}),a.browser.opera&&/relative/.test(b.css("position"))&&(d._revertToRelativePosition=!0,b.css({position:"absolute",top:"auto",left:"auto"})),b.css(g)})};typeof e.alsoResize=="object"&&!e.alsoResize.nodeType?a.each(e.alsoResize,function(a,b){i(a,b)}):i(e.alsoResize)},stop:function(b,c){var d=a(this).data("resizable"),e=d.options,f=function(b){a(b).each(function(){var b=a(this);b.css({position:b.data("resizable-alsoresize").position})})};d._revertToRelativePosition&&(d._revertToRelativePosition=!1,typeof e.alsoResize=="object"&&!e.alsoResize.nodeType?a.each(e.alsoResize,function(a){f(a)}):f(e.alsoResize)),a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","animate",{stop:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d._proportionallyResizeElements,g=f.length&&/textarea/i.test(f[0].nodeName),h=g&&a.ui.hasScroll(f[0],"left")?0:d.sizeDiff.height,i=g?0:d.sizeDiff.width,j={width:d.size.width-i,height:d.size.height-h},k=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,l=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;d.element.animate(a.extend(j,l&&k?{top:l,left:k}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var c={width:parseInt(d.element.css("width"),10),height:parseInt(d.element.css("height"),10),top:parseInt(d.element.css("top"),10),left:parseInt(d.element.css("left"),10)};f&&f.length&&a(f[0]).css({width:c.width,height:c.height}),d._updateCache(c),d._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(b,d){var e=a(this).data("resizable"),f=e.options,g=e.element,h=f.containment,i=h instanceof a?h.get(0):/parent/.test(h)?g.parent().get(0):h;if(!!i){e.containerElement=a(i);if(/document/.test(h)||h==document)e.containerOffset={left:0,top:0},e.containerPosition={left:0,top:0},e.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var j=a(i),k=[];a(["Top","Right","Left","Bottom"]).each(function(a,b){k[a]=c(j.css("padding"+b))}),e.containerOffset=j.offset(),e.containerPosition=j.position(),e.containerSize={height:j.innerHeight()-k[3],width:j.innerWidth()-k[1]};var l=e.containerOffset,m=e.containerSize.height,n=e.containerSize.width,o=a.ui.hasScroll(i,"left")?i.scrollWidth:n,p=a.ui.hasScroll(i)?i.scrollHeight:m;e.parentData={element:i,left:l.left,top:l.top,width:o,height:p}}}},resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.containerSize,g=d.containerOffset,h=d.size,i=d.position,j=d._aspectRatio||b.shiftKey,k={top:0,left:0},l=d.containerElement;l[0]!=document&&/static/.test(l.css("position"))&&(k=g),i.left<(d._helper?g.left:0)&&(d.size.width=d.size.width+(d._helper?d.position.left-g.left:d.position.left-k.left),j&&(d.size.height=d.size.width/e.aspectRatio),d.position.left=e.helper?g.left:0),i.top<(d._helper?g.top:0)&&(d.size.height=d.size.height+(d._helper?d.position.top-g.top:d.position.top),j&&(d.size.width=d.size.height*e.aspectRatio),d.position.top=d._helper?g.top:0),d.offset.left=d.parentData.left+d.position.left,d.offset.top=d.parentData.top+d.position.top;var m=Math.abs((d._helper?d.offset.left-k.left:d.offset.left-k.left)+d.sizeDiff.width),n=Math.abs((d._helper?d.offset.top-k.top:d.offset.top-g.top)+d.sizeDiff.height),o=d.containerElement.get(0)==d.element.parent().get(0),p=/relative|absolute/.test(d.containerElement.css("position"));o&&p&&(m-=d.parentData.left),m+d.size.width>=d.parentData.width&&(d.size.width=d.parentData.width-m,j&&(d.size.height=d.size.width/d.aspectRatio)),n+d.size.height>=d.parentData.height&&(d.size.height=d.parentData.height-n,j&&(d.size.width=d.size.height*d.aspectRatio))},stop:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.position,g=d.containerOffset,h=d.containerPosition,i=d.containerElement,j=a(d.helper),k=j.offset(),l=j.outerWidth()-d.sizeDiff.width,m=j.outerHeight()-d.sizeDiff.height;d._helper&&!e.animate&&/relative/.test(i.css("position"))&&a(this).css({left:k.left-h.left-g.left,width:l,height:m}),d._helper&&!e.animate&&/static/.test(i.css("position"))&&a(this).css({left:k.left-h.left-g.left,width:l,height:m})}}),a.ui.plugin.add("resizable","ghost",{start:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.size;d.ghost=d.originalElement.clone(),d.ghost.css({opacity:.25,display:"block",position:"relative",height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof e.ghost=="string"?e.ghost:""),d.ghost.appendTo(d.helper)},resize:function(b,c){var d=a(this).data("resizable"),e=d.options;d.ghost&&d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})},stop:function(b,c){var d=a(this).data("resizable"),e=d.options;d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.size,g=d.originalSize,h=d.originalPosition,i=d.axis,j=e._aspectRatio||b.shiftKey;e.grid=typeof e.grid=="number"?[e.grid,e.grid]:e.grid;var k=Math.round((f.width-g.width)/(e.grid[0]||1))*(e.grid[0]||1),l=Math.round((f.height-g.height)/(e.grid[1]||1))*(e.grid[1]||1);/^(se|s|e)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l):/^(ne)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l,d.position.top=h.top-l):/^(sw)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l,d.position.left=h.left-k):(d.size.width=g.width+k,d.size.height=g.height+l,d.position.top=h.top-l,d.position.left=h.left-k)}});var c=function(a){return parseInt(a,10)||0},d=function(a){return!isNaN(parseInt(a,10))}}(jQuery),function(a,b){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable"),this.dragged=!1;var c;this.refresh=function(){c=a(b.options.filter,b.element[0]),c.addClass("ui-selectee"),c.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=c.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(b){var c=this;this.opos=[b.pageX,b.pageY];if(!this.options.disabled){var d=this.options;this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,!b.metaKey&&!b.ctrlKey&&(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().andSelf().each(function(){var d=a.data(this,"selectable-item");if(d){var e=!b.metaKey&&!b.ctrlKey||!d.$element.hasClass("ui-selected");return d.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting"),d.unselecting=!e,d.selecting=e,d.selected=e,e?c._trigger("selecting",b,{selecting:d.element}):c._trigger("unselecting",b,{unselecting:d.element}),!1}})}},_mouseDrag:function(b){var c=this;this.dragged=!0;if(!this.options.disabled){var d=this.options,e=this.opos[0],f=this.opos[1],g=b.pageX,h=b.pageY;if(e>g){var i=g;g=e,e=i}if(f>h){var i=h;h=f,f=i}return this.helper.css({left:e,top:f,width:g-e,height:h-f}),this.selectees.each(function(){var i=a.data(this,"selectable-item");if(!!i&&i.element!=c.element[0]){var j=!1;d.tolerance=="touch"?j=!(i.left>g||i.right<e||i.top>h||i.bottom<f):d.tolerance=="fit"&&(j=i.left>e&&i.right<g&&i.top>f&&i.bottom<h),j?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,c._trigger("selecting",b,{selecting:i.element}))):(i.selecting&&((b.metaKey||b.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),c._trigger("unselecting",b,{unselecting:i.element}))),i.selected&&!b.metaKey&&!b.ctrlKey&&!i.startselected&&(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,c._trigger("unselecting",b,{unselecting:i.element})))}}),!1}},_mouseStop:function(b){var c=this;this.dragged=!1;var d=this.options;return a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}}),a.extend(a.ui.selectable,{version:"1.8.17"})}(jQuery),function(a,b){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?a.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,c){b==="disabled"?(this.options[b]=c,this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){var d=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(b);var e=null,f=this,g=a(b.target).parents().each(function(){if(a.data(this,d.widgetName+"-item")==f)return e=a(this),!1});a.data(b.target,d.widgetName+"-item")==f&&(e=a(b.target));if(!e)return!1;if(this.options.handle&&!c){var h=!1;a(this.options.handle,e).find("*").andSelf().each(function(){this==b.target&&(h=!0)});if(!h)return!1}return this.currentItem=e,this._removeCurrentsFromItems(),!0},_mouseStart:function(b,c,d){var e=this.options,f=this;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper
.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),e.containment&&this._setContainment(),e.cursor&&(a("body").css("cursor")&&(this._storedCursor=a("body").css("cursor")),a("body").css("cursor",e.cursor)),e.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",e.opacity)),e.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",e.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!d)for(var g=this.containers.length-1;g>=0;g--)this.containers[g]._trigger("activate",b,f._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var c=this.options,d=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity?this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+c.scrollSpeed:b.pageY-this.overflowOffset.top<c.scrollSensitivity&&(this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-c.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity?this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+c.scrollSpeed:b.pageX-this.overflowOffset.left<c.scrollSensitivity&&(this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-c.scrollSpeed)):(b.pageY-a(document).scrollTop()<c.scrollSensitivity?d=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<c.scrollSensitivity&&(d=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed)),b.pageX-a(document).scrollLeft()<c.scrollSensitivity?d=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(d=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed))),d!==!1&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var e=this.items.length-1;e>=0;e--){var f=this.items[e],g=f.item[0],h=this._intersectsWithPointer(f);if(!h)continue;if(g!=this.currentItem[0]&&this.placeholder[h==1?"next":"prev"]()[0]!=g&&!a.ui.contains(this.placeholder[0],g)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],g):!0)){this.direction=h==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(f))this._rearrange(b,f);else break;this._trigger("change",b,this._uiHash());break}}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(!!b){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b);if(this.options.revert){var d=this,e=d.placeholder.offset();d.reverting=!0,a(this.helper).animate({left:e.left-this.offset.parent.left-d.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-d.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){var b=this;if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var c=this.containers.length-1;c>=0;c--)this.containers[c]._trigger("deactivate",null,b._uiHash(this)),this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",null,b._uiHash(this)),this.containers[c].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l=d+j>h&&d+j<i&&b+k>f&&b+k<g;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?l:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_intersectsWithPointer:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width),e=c&&d,f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return e?this.floating?g&&g=="right"||f=="down"?2:1:f&&(f=="down"?2:1):!1},_intersectsWithSides:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?f=="right"&&d||f=="left"&&!d:e&&(e=="down"&&c||e=="up"&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!=0&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!=0&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var c=this,d=[],e=[],f=this._connectWith();if(f&&b)for(var g=f.length-1;g>=0;g--){var h=a(f[g]);for(var i=h.length-1;i>=0;i--){var j=a.data(h[i],this.widgetName);j&&j!=this&&!j.options.disabled&&e.push([a.isFunction(j.options.items)?j.options.items.call(j.element):a(j.options.items,j.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),j])}}e.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var g=e.length-1;g>=0;g--)e[g][0].each(function(){d.push(this)});return a(d)},_removeCurrentsFromItems:function(){var a=this.currentItem.find(":data("+this.widgetName+"-item)");for(var b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(b){this.items=[],this.containers=[this];var c=this.items,d=this,e=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],f=this._connectWith();if(f)for(var g=f.length-1;g>=0;g--){var h=a(f[g]);for(var i=h.length-1;i>=0;i--){var j=a.data(h[i],this.widgetName);j&&j!=this&&!j.options.disabled&&(e.push([a.isFunction(j.options.items)?j.options.items.call(j.element[0],b,{item:this.currentItem}):a(j.options.items,j.element),j]),this.containers.push(j))}}for(var g=e.length-1;g>=0;g--){var k=e[g][1],l=e[g][0];for(var i=0,m=l.length;i<m;i++){var n=a(l[i]);n.data(this.widgetName+"-item",k),c.push({item:n,instance:k,width:0,height:0,left:0,top:0})}}},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var c=this.items.length-1;c>=0;c--){var d=this.items[c];if(d.instance!=this.currentContainer&&this.currentContainer&&d.item[0]!=this.currentItem[0])continue;var e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item;b||(d.width=e.outerWidth(),d.height=e.outerHeight());var f=e.offset();d.left=f.left,d.top=f.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var c=this.containers.length-1;c>=0;c--){var f=this.containers[c].element.offset();this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight()}return this},_createPlaceholder:function(b){var c=b||this,d=c.options;if(!d.placeholder||d.placeholder.constructor==String){var e=d.placeholder;d.placeholder={element:function(){var b=a(document.createElement(c.currentItem[0].nodeName)).addClass(e||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return e||(b.style.visibility="hidden"),b},update:function(a,b){if(!e||!!d.forcePlaceholderSize)b.height()||b.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10)),b.width()||b.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10))}}}c.placeholder=a(d.placeholder.element.call(c.element,c.currentItem)),c.currentItem.after(c.placeholder),d.placeholder.update(c,c.placeholder)},_contactContainers:function(b){var c=null,d=null;for(var e=this.containers.length-1;e>=0;e--){if(a.ui.contains(this.currentItem[0],this.containers[e].element[0]))continue;if(this._intersectsWith(this.containers[e].containerCache)){if(c&&a.ui.contains(this.containers[e].element[0],c.element[0]))continue;c=this.containers[e],d=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",b,this._uiHash(this)),this.containers[e].containerCache.over=0)}if(!!c)if(this.containers.length===1)this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1;else if(this.currentContainer!=this.containers[d]){var f=1e4,g=null,h=this.positionAbs[this.containers[d].floating?"left":"top"];for(var i=this.items.length-1;i>=0;i--){if(!a.ui.contains(this.containers[d].element[0],this.items[i].item[0]))continue;var j=this.items[i][this.containers[d].floating?"left":"top"];Math.abs(j-h)<f&&(f=Math.abs(j-h),g=this.items[i])}if(!g&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[d],g?this._rearrange(b,g,null,!0):this._rearrange(b,null,this.containers[d].element,!0),this._trigger("change",b,this._uiHash()),this.containers[d]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):c.helper=="clone"?this.currentItem.clone():this.currentItem;return d.parents("body").length||a(c.appendTo!="parent"?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(d[0].style.width==""||c.forceHelperSize)&&d.width(this.currentItem.width()),(d[0].style.height==""||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){typeof b=="string"&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;b.containment=="parent"&&(b.containment=this.helper[0].parentNode);if(b.containment=="document"||b.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(b.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)){var c=a(b.containment)[0],d=a(b.containment).offset(),e=a(c).css("overflow")!="hidden";this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,c){c||(c=this.position);var d=b=="absolute"?1:-1,e=this.options,f=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(d[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var f=b.pageX,g=b.pageY;if(this.originalPosition){this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top));if(c.grid){var h=this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1];g=this.containment?h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3]?h-this.offset.click.top<this.containment[1]?h+c.grid[1]:h-c.grid[1]:h:h;var i=this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0];f=this.containment?i-this.offset.click.left<this.containment[0]||i-this.offset.click.left>this.containment[2]?i-this.offset.click.left<this.containment[0]?i+c.grid[0]:i-c.grid[0]:i:i}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this,f=this.counter;window.setTimeout(function(){f==e.counter&&e.refreshPositions(!d)},0)},_clear:function(b,c){this.reverting=!1;var d=[],e=this;!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var f in this._storedCSS)if(this._storedCSS[f]=="auto"||this._storedCSS[f]=="static")this._storedCSS[f]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!c&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!c&&d.push(function(a){this._trigger("update",a,this._uiHash())});if(!a.ui.contains(this.element[0],this.currentItem[0])){c||d.push(function(a){this._trigger("remove",a,this._uiHash())});for(var f=this.containers.length-1;f>=0;f--)a.ui.contains(this.containers[f].element[0],this.currentItem[0])&&!c&&(d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.containers[f])),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.containers[f])))}for(var f=this.containers.length-1;f>=0;f--)c||d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over=0);this._storedCursor&&a("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",b,this._uiHash());for(var f=0;f<d.length;f++)d[f].call(this,b);this._trigger("stop",b,this._uiHash())}return!1}c||this._trigger("beforeStop",b,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!c){for(var f=0;f<d.length;f++)d[f].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}}),a.extend(a.ui.sortable,{version:"1.8.17"})}(jQuery),function($,undefined){function isArray(a){return a&&($.browser.safari&&typeof a=="object"&&a.length||a.constructor&&a.constructor.toString().match(/\Array\(\)/))}function extendRemove(a,b){$.extend(a,b);for(var c in b)if(b[c]==null||b[c]==undefined)a[c]=b[c];return a}function bindHover(a){var b="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return a.bind("mouseout",function(a){var c=$(a.target).closest(b);!c.length||c.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(c){var d=$(c.target).closest(b);!$.datepicker._isDisabledDatepicker(instActive.inline?a.parent()[0]:instActive.input[0])&&!!d.length&&(d.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),d.addClass("ui-state-hover"),d.hasClass("ui-datepicker-prev")&&d.addClass("ui-datepicker-prev-hover"),d.hasClass("ui-datepicker-next")&&d.addClass("ui-datepicker-next-hover"))})}function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}$.extend($.ui,{datepicker:{version:"1.8.17"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return extendRemove(this._defaults,a||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(a,b){var c=a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:c,input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(a,b){var c=$(a);b.append=$([]),b.trigger=$([]),c.hasClass(this.markerClassName)||(this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),$.data(a,PROP_NAME,b),b.settings.disabled&&this._disableDatepicker(a))},_attachments:function(a,b){var c=this._get(b,"appendText"),d=this._get(b,"isRTL");b.append&&b.append.remove(),c&&(b.append=$('<span class="'+this._appendClass+'">'+c+"</span>"),a[d?"before":"after"](b.append)),a.unbind("focus",this._showDatepicker),b.trigger&&b.trigger.remove();var e=this._get(b,"showOn");(e=="focus"||e=="both")&&a.focus(this._showDatepicker);if(e=="button"||e=="both"){var f=this._get(b,"buttonText"),g=this._get(b,"buttonImage");b.trigger=$(this._get(b,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:g,alt:f,title:f}):$('<button type="button"></button>').addClass(this._triggerClass).html(g==""?f:$("<img/>").attr({src:g,alt:f,title:f}))),a[d?"before":"after"](b.trigger),b.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==a[0]?$.datepicker._hideDatepicker():$.datepicker._showDatepicker(a[0]),!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){var b=0,c=0;for(var d=0;d<a.length;d++)a[d].length>b&&(b=a[d].length,c=d);return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort"))),b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=$(a);c.hasClass(this.markerClassName)||(c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),$.data(a,PROP_NAME,b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),b.dpDiv.css("display","block"))},_dialogDatepicker:function(a,b,c,d,e){var f=this._dialogInst;if(!f){this.uuid+=1;var g="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+g+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},$.data(this._dialogInput[0],PROP_NAME,f)}extendRemove(f.settings,d||{}),b=b&&b.constructor==Date?this._formatDate(f,b):b,this._dialogInput.val(b),this._pos=e?e.length?e:[e.pageX,e.pageY]:null;if(!this._pos){var h=document.documentElement.clientWidth,i=document.documentElement.clientHeight,j=document.documentElement.scrollLeft||document.body.scrollLeft,k=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[h/2-100+j,i/2-150+k]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=c,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,f),this},_destroyDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!!b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();$.removeData(a,PROP_NAME),d=="input"?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(d=="div"||d=="span")&&b.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!!b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if(d=="input")a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().removeClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b})}},_disableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!!b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if(d=="input")a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().addClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b}),this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(a){try{return $.data(a,PROP_NAME)}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var d=this._getInst(a);if(arguments.length==2&&typeof b=="string")return b=="defaults"?$.extend({},$.datepicker._defaults):d?b=="all"?$.extend({},d.settings):this._get(d,b):null;var e=b||{};typeof b=="string"&&(e={},e[b]=c);if(d){this._curInst==d&&this._hideDatepicker();var f=this._getDateDatepicker(a,!0),g=this._getMinMaxDate(d,"min"),h=this._getMinMaxDate(d,"max");extendRemove(d.settings,e),g!==null&&e.dateFormat!==undefined&&e.minDate===undefined&&(d.settings.minDate=this._formatDate(d,g)),h!==null&&e.dateFormat!==undefined&&e.maxDate===undefined&&(d.settings.maxDate=this._formatDate(d,h)),this._attachments($(a),d),this._autoSize(d),this._setDate(d,f),this._updateAlternate(d),this._updateDatepicker(d)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(a){var b=$.datepicker._getInst(a.target),c=!0,d=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if($.datepicker._datepickerShowing)switch(a.keyCode){case 9:$.datepicker._hideDatepicker(),c=!1;break;case 13:var e=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",b.dpDiv);e[0]&&$.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,e[0]);var f=$.datepicker._get(b,"onSelect");if(f){var g=$.datepicker._formatDate(b);f.apply(b.input?b.input
[0]:null,[g,b])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&$.datepicker._clearDate(a.target),c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&$.datepicker._gotoToday(a.target),c=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?1:-1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,-7,"D"),c=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?-1:1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,7,"D"),c=a.ctrlKey||a.metaKey;break;default:c=!1}else a.keyCode==36&&a.ctrlKey?$.datepicker._showDatepicker(this):c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=$.datepicker._getInst(a.target);if($.datepicker._get(b,"constrainInput")){var c=$.datepicker._possibleChars($.datepicker._get(b,"dateFormat")),d=String.fromCharCode(a.charCode==undefined?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||d<" "||!c||c.indexOf(d)>-1}},_doKeyUp:function(a){var b=$.datepicker._getInst(a.target);if(b.input.val()!=b.lastVal)try{var c=$.datepicker.parseDate($.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,$.datepicker._getFormatConfig(b));c&&($.datepicker._setDateFromField(b),$.datepicker._updateAlternate(b),$.datepicker._updateDatepicker(b))}catch(a){$.datepicker.log(a)}return!0},_showDatepicker:function(a){a=a.target||a,a.nodeName.toLowerCase()!="input"&&(a=$("input",a.parentNode)[0]);if(!$.datepicker._isDisabledDatepicker(a)&&$.datepicker._lastInput!=a){var b=$.datepicker._getInst(a);$.datepicker._curInst&&$.datepicker._curInst!=b&&($.datepicker._curInst.dpDiv.stop(!0,!0),b&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var c=$.datepicker._get(b,"beforeShow"),d=c?c.apply(a,[a,b]):{};if(d===!1)return;extendRemove(b.settings,d),b.lastVal=null,$.datepicker._lastInput=a,$.datepicker._setDateFromField(b),$.datepicker._inDialog&&(a.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(a),$.datepicker._pos[1]+=a.offsetHeight);var e=!1;$(a).parents().each(function(){return e|=$(this).css("position")=="fixed",!e}),e&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var f={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,b.dpDiv.empty(),b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(b),f=$.datepicker._checkOffset(b,f,e),b.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":e?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"});if(!b.inline){var g=$.datepicker._get(b,"showAnim"),h=$.datepicker._get(b,"duration"),i=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(!!a.length){var c=$.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex($(a).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[g]?b.dpDiv.show(g,$.datepicker._get(b,"showOptions"),h,i):b.dpDiv[g||"show"](g?h:null,i),(!g||!h)&&i(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),$.datepicker._curInst=b}}},_updateDatepicker:function(a){var b=this;b.maxRows=4;var c=$.datepicker._getBorders(a.dpDiv);instActive=a,a.dpDiv.empty().append(this._generateHTML(a));var d=a.dpDiv.find("iframe.ui-datepicker-cover");!d.length||d.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}),a.dpDiv.find("."+this._dayOverClass+" a").mouseover();var e=this._getNumberOfMonths(a),f=e[1],g=17;a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),f>1&&a.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",g*f+"em"),a.dpDiv[(e[0]!=1||e[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a==$.datepicker._curInst&&$.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus();if(a.yearshtml){var h=a.yearshtml;setTimeout(function(){h===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),h=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var d=a.dpDiv.outerWidth(),e=a.dpDiv.outerHeight(),f=a.input?a.input.outerWidth():0,g=a.input?a.input.outerHeight():0,h=document.documentElement.clientWidth+$(document).scrollLeft(),i=document.documentElement.clientHeight+$(document).scrollTop();return b.left-=this._get(a,"isRTL")?d-f:0,b.left-=c&&b.left==a.input.offset().left?$(document).scrollLeft():0,b.top-=c&&b.top==a.input.offset().top+g?$(document).scrollTop():0,b.left-=Math.min(b.left,b.left+d>h&&h>d?Math.abs(b.left+d-h):0),b.top-=Math.min(b.top,b.top+e>i&&i>e?Math.abs(e+g):0),b},_findPos:function(a){var b=this._getInst(a),c=this._get(b,"isRTL");while(a&&(a.type=="hidden"||a.nodeType!=1||$.expr.filters.hidden(a)))a=a[c?"previousSibling":"nextSibling"];var d=$(a).offset();return[d.left,d.top]},_hideDatepicker:function(a){var b=this._curInst;if(!(!b||a&&b!=$.data(a,PROP_NAME))&&this._datepickerShowing){var c=this._get(b,"showAnim"),d=this._get(b,"duration"),e=this,f=function(){$.datepicker._tidyDialog(b),e._curInst=null};$.effects&&$.effects[c]?b.dpDiv.hide(c,$.datepicker._get(b,"showOptions"),d,f):b.dpDiv[c=="slideDown"?"slideUp":c=="fadeIn"?"fadeOut":"hide"](c?d:null,f),c||f(),this._datepickerShowing=!1;var g=this._get(b,"onClose");g&&g.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if(!!$.datepicker._curInst){var b=$(a.target),c=$.datepicker._getInst(b[0]);(b[0].id!=$.datepicker._mainDivId&&b.parents("#"+$.datepicker._mainDivId).length==0&&!b.hasClass($.datepicker.markerClassName)&&!b.hasClass($.datepicker._triggerClass)&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||b.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=c)&&$.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){var d=$(a),e=this._getInst(d[0]);this._isDisabledDatepicker(d[0])||(this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e))},_gotoToday:function(a){var b=$(a),c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay)c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear;else{var d=new Date;c.selectedDay=d.getDate(),c.drawMonth=c.selectedMonth=d.getMonth(),c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c),this._adjustDate(b)},_selectMonthYear:function(a,b,c){var d=$(a),e=this._getInst(d[0]);e["selected"+(c=="M"?"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(d)},_selectDay:function(a,b,c,d){var e=$(a);if(!$(d).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(e[0])){var f=this._getInst(e[0]);f.selectedDay=f.currentDay=$("a",d).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))}},_clearDate:function(a){var b=$(a),c=this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(a,b){var c=$(a),d=this._getInst(c[0]);b=b!=null?b:this._formatDate(d),d.input&&d.input.val(b),this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[b,d]):d.input&&d.input.trigger("change"),d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],typeof d.input[0]!="object"&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),d=this._getDate(a),e=this.formatDate(c,d,this._getFormatConfig(a));$(b).each(function(){$(this).val(e)})}},noWeekends:function(a){var b=a.getDay();return[b>0&&b<6,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1},parseDate:function(a,b,c){if(a==null||b==null)throw"Invalid arguments";b=typeof b=="object"?b.toString():b+"";if(b=="")return null;var d=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;d=typeof d!="string"?d:(new Date).getFullYear()%100+parseInt(d,10);var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=-1,j=-1,k=-1,l=-1,m=!1,n=function(b){var c=s+1<a.length&&a.charAt(s+1)==b;return c&&s++,c},o=function(a){var c=n(a),d=a=="@"?14:a=="!"?20:a=="y"&&c?4:a=="o"?3:2,e=new RegExp("^\\d{1,"+d+"}"),f=b.substring(r).match(e);if(!f)throw"Missing number at position "+r;return r+=f[0].length,parseInt(f[0],10)},p=function(a,c,d){var e=$.map(n(a)?d:c,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)}),f=-1;$.each(e,function(a,c){var d=c[1];if(b.substr(r,d.length).toLowerCase()==d.toLowerCase())return f=c[0],r+=d.length,!1});if(f!=-1)return f+1;throw"Unknown name at position "+r},q=function(){if(b.charAt(r)!=a.charAt(s))throw"Unexpected literal at position "+r;r++},r=0;for(var s=0;s<a.length;s++)if(m)a.charAt(s)=="'"&&!n("'")?m=!1:q();else switch(a.charAt(s)){case"d":k=o("d");break;case"D":p("D",e,f);break;case"o":l=o("o");break;case"m":j=o("m");break;case"M":j=p("M",g,h);break;case"y":i=o("y");break;case"@":var t=new Date(o("@"));i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"!":var t=new Date((o("!")-this._ticksTo1970)/1e4);i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"'":n("'")?q():m=!0;break;default:q()}if(r<b.length)throw"Extra/unparsed characters found in date: "+b.substring(r);i==-1?i=(new Date).getFullYear():i<100&&(i+=(new Date).getFullYear()-(new Date).getFullYear()%100+(i<=d?0:-100));if(l>-1){j=1,k=l;for(;;){var u=this._getDaysInMonth(i,j-1);if(k<=u)break;j++,k-=u}}var t=this._daylightSavingAdjust(new Date(i,j-1,k));if(t.getFullYear()!=i||t.getMonth()+1!=j||t.getDate()!=k)throw"Invalid date";return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(a,b,c){if(!b)return"";var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,h=function(b){var c=m+1<a.length&&a.charAt(m+1)==b;return c&&m++,c},i=function(a,b,c){var d=""+b;if(h(a))while(d.length<c)d="0"+d;return d},j=function(a,b,c,d){return h(a)?d[b]:c[b]},k="",l=!1;if(b)for(var m=0;m<a.length;m++)if(l)a.charAt(m)=="'"&&!h("'")?l=!1:k+=a.charAt(m);else switch(a.charAt(m)){case"d":k+=i("d",b.getDate(),2);break;case"D":k+=j("D",b.getDay(),d,e);break;case"o":k+=i("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":k+=i("m",b.getMonth()+1,2);break;case"M":k+=j("M",b.getMonth(),f,g);break;case"y":k+=h("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":k+=b.getTime();break;case"!":k+=b.getTime()*1e4+this._ticksTo1970;break;case"'":h("'")?k+="'":l=!0;break;default:k+=a.charAt(m)}return k},_possibleChars:function(a){var b="",c=!1,d=function(b){var c=e+1<a.length&&a.charAt(e+1)==b;return c&&e++,c};for(var e=0;e<a.length;e++)if(c)a.charAt(e)=="'"&&!d("'")?c=!1:b+=a.charAt(e);else switch(a.charAt(e)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}return b},_get:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e,f;e=f=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{e=this.parseDate(c,d,g)||f}catch(h){this.log(h),d=b?"":d}a.selectedDay=e.getDate(),a.drawMonth=a.selectedMonth=e.getMonth(),a.drawYear=a.selectedYear=e.getFullYear(),a.currentDay=d?e.getDate():0,a.currentMonth=d?e.getMonth():0,a.currentYear=d?e.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var d=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},e=function(b){try{return $.datepicker.parseDate($.datepicker._get(a,"dateFormat"),b,$.datepicker._getFormatConfig(a))}catch(c){}var d=(b.toLowerCase().match(/^c/)?$.datepicker._getDate(a):null)||new Date,e=d.getFullYear(),f=d.getMonth(),g=d.getDate(),h=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(b);while(i){switch(i[2]||"d"){case"d":case"D":g+=parseInt(i[1],10);break;case"w":case"W":g+=parseInt(i[1],10)*7;break;case"m":case"M":f+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f));break;case"y":case"Y":e+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f))}i=h.exec(b)}return new Date(e,f,g)},f=b==null||b===""?c:typeof b=="string"?e(b):typeof b=="number"?isNaN(b)?c:d(b):new Date(b.getTime());return f=f&&f.toString()=="Invalid Date"?c:f,f&&(f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0)),this._daylightSavingAdjust(f)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),(e!=a.selectedMonth||f!=a.selectedYear)&&!c&&this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),d=this._get(a,"showButtonPanel"),e=this._get(a,"hideIfNoPrevNext"),f=this._get(a,"navigationAsDateFormat"),g=this._getNumberOfMonths(a),h=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),j=g[0]!=1||g[1]!=1,k=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),l=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),n=a.drawMonth-h,o=a.drawYear;n<0&&(n+=12,o--);if(m){var p=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-g[0]*g[1]+1,m.getDate()));p=l&&p<l?l:p;while(this._daylightSavingAdjust(new Date(o,n,1))>p)n--,n<0&&(n=11,o--)}a.drawMonth=n,a.drawYear=o;var q=this._get(a,"prevText");q=f?this.formatDate(q,this._daylightSavingAdjust(new Date(o,n-i,1)),this._getFormatConfig(a)):q;var r=this._canAdjustMonth(a,-1,o,n)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', -"+i+", 'M');\""+' title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>":e?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>",s=this._get(a,"nextText");s=f?this.formatDate(s,this._daylightSavingAdjust(new Date(o,n+i,1)),this._getFormatConfig(a)):s;var t=this._canAdjustMonth(a,1,o,n)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', +"+i+", 'M');\""+' title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":e?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>",u=this._get(a,"currentText"),v=this._get(a,"gotoCurrent")&&a.currentDay?k:b;u=f?this.formatDate(u,v,this._getFormatConfig(a)):u;var w=a.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</button>",x=d?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?w:"")+(this._isInRange(a,v)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._gotoToday('#"+a.id+"');\""+">"+u+"</button>":"")+(c?"":w)+"</div>":"",y=parseInt(this._get(a,"firstDay"),10);y=isNaN(y)?0:y;var z=this._get(a,"showWeek"),A=this._get(a,"dayNames"),B=this._get(a,"dayNamesShort"),C=this._get(a,"dayNamesMin"),D=this._get(a,"monthNames"),E=this._get(a,"monthNamesShort"),F=this._get(a,"beforeShowDay"),G=this._get(a,"showOtherMonths"),H=this._get(a,"selectOtherMonths"),I=this._get(a,"calculateWeek")||this.iso8601Week,J=this._getDefaultDate(a),K="";for(var L=0;L<g[0];L++){var M="";this.maxRows=4;for(var N=0;N<g[1];N++){var O=this._daylightSavingAdjust(new Date(o,n,a.selectedDay)),P=" ui-corner-all",Q="";if(j){Q+='<div class="ui-datepicker-group';if(g[1]>1)switch(N){case 0:Q+=" ui-datepicker-group-first",P=" ui-corner-"+(c?"right":"left");break;case g[1]-1:Q+=" ui-datepicker-group-last",P=" ui-corner-"+(c?"left":"right");break;default:Q+=" ui-datepicker-group-middle",P=""}Q+='">'}Q+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+P+'">'+(/all|left/.test(P)&&L==0?c?t:r:"")+(/all|right/.test(P)&&L==0?c?r:t:"")+this._generateMonthYearHeader(a,n,o,l,m,L>0||N>0,D,E)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";var R=z?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(var S=0;S<7;S++){var T=(S+y)%7;R+="<th"+((S+y+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+A[T]+'">'+C[T]+"</span></th>"}Q+=R+"</tr></thead><tbody>";var U=this._getDaysInMonth(o,n);o==a.selectedYear&&n==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,U));var V=(this._getFirstDayOfMonth(o,n)-y+7)%7,W=Math.ceil((V+U)/7),X=j?this.maxRows>W?this.maxRows:W:W;this.maxRows=X;var Y=this._daylightSavingAdjust(new Date(o,n,1-V));for(var Z=0;Z<X;Z++){Q+="<tr>";var _=z?'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(Y)+"</td>":"";for(var S=0;S<7;S++){var ba=F?F.apply(a.input?a.input[0]:null,[Y]):[!0,""],bb=Y.getMonth()!=n,bc=bb&&!H||!ba[0]||l&&Y<l||m&&Y>m;_+='<td class="'+((S+y+6)%7>=5?" ui-datepicker-week-end":"")+(bb?" ui-datepicker-other-month":"")+(Y.getTime()==O.getTime()&&n==a.selectedMonth&&a._keyEvent||J.getTime()==Y.getTime()&&J.getTime()==O.getTime()?" "+this._dayOverClass:"")+(bc?" "+this._unselectableClass+" ui-state-disabled":"")+(bb&&!G?"":" "+ba[1]+(Y.getTime()==k.getTime()?" "+this._currentClass:"")+(Y.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!bb||G)&&ba[2]?' title="'+ba[2]+'"':"")+(bc?"":' onclick="DP_jQuery_'+dpuuid+".datepicker._selectDay('#"+a.id+"',"+Y.getMonth()+","+Y.getFullYear()+', this);return false;"')+">"+(bb&&!G?"&#xa0;":bc?'<span class="ui-state-default">'+Y.getDate()+"</span>":'<a class="ui-state-default'+(Y.getTime()==b.getTime()?" ui-state-highlight":"")+(Y.getTime()==k.getTime()?" ui-state-active":"")+(bb?" ui-priority-secondary":"")+'" href="#">'+Y.getDate()+"</a>")+"</td>",Y.setDate(Y.getDate()+1),Y=this._daylightSavingAdjust(Y)}Q+=_+"</tr>"}n++,n>11&&(n=0,o++),Q+="</tbody></table>"+(j?"</div>"+(g[0]>0&&N==g[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),M+=Q}K+=M}return K+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),a._keyEvent=!1,K},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i=this._get(a,"changeMonth"),j=this._get(a,"changeYear"),k=this._get(a,"showMonthAfterYear"),l='<div class="ui-datepicker-title">',m="";if(f||!i)m+='<span class="ui-datepicker-month">'+g[b]+"</span>";else{var n=d&&d.getFullYear()==c,o=e&&e.getFullYear()==c;m+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" "+">";for(var p=0;p<12;p++)(!n||p>=d.getMonth())&&(!o||p<=e.getMonth())&&(m+='<option value="'+p+'"'+(p==b?' selected="selected"':"")+">"+h[p]+"</option>");m+="</select>"}k||(l+=m+(f||!i||!j?"&#xa0;":""));if(!a.yearshtml){a.yearshtml="";if(f||!j)l+='<span class="ui-datepicker-year">'+c+"</span>";else{var q=this._get(a,"yearRange").split(":"),r=(new Date).getFullYear(),s=function(a){var b=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?r+parseInt(a,10):parseInt(a,10);return isNaN(b)?r:b},t=s(q[0]),u=Math.max(t,s(q[1]||""));t=d?Math.max(t,d.getFullYear()):t,u=e?Math.min(u,e.getFullYear()):u,a.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" "+">";for(;t<=u;t++)a.yearshtml+='<option value="'+t+'"'+(t==c?' selected="selected"':"")+">"+t+"</option>";a.yearshtml+="</select>",l+=a.yearshtml,a.yearshtml=null}}return l+=this._get(a,"yearSuffix"),k&&(l+=(f||!i||!j?"&#xa0;":"")+m),l+="</div>",l},_adjustInstDate:function(a,b,c){var d=a.drawYear+(c=="Y"?b:0),e=a.drawMonth+(c=="M"?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+(c=="D"?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),(c=="M"||c=="Y")&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&b<c?c:b;return e=d&&e>d?d:e,e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return b==null?[1,1]:typeof b=="number"?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(b<0?b:e[0]*e[1]),1));return b<0&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),$.fn.datepicker=function(a){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return typeof a!="string"||a!="isDisabled"&&a!="getDate"&&a!="widget"?a=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b)):this.each(function(){typeof a=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this].concat(b)):$.datepicker._attachDatepicker(this,a)}):$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.17",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(a,b){a.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),a.Widget.prototype.destroy.apply(this,arguments)},value:function(a){return a===b?this._value():(this._setOption("value",a),this)},_setOption:function(b,c){b==="value"&&(this.options.value=c,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),a.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;return typeof a!="number"&&(a=0),Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value(),b=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change")),this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%"),this.element.attr("aria-valuenow",a)}}),a.extend(a.ui.progressbar,{version:"1.8.17"})}(jQuery),jQuery.effects||function(a,b){function c(b){return!b||typeof b=="number"||a.fx.speeds[b]?!0:typeof b=="string"&&!a.effects[b]?!0:!1}function d(b,c,d,e){typeof b=="object"&&(e=c,d=null,c=b,b=c.effect),a.isFunction(c)&&(e=c,d=null,c={});if(typeof c=="number"||a.fx.speeds[c])e=d,d=c,c={};return a.isFunction(d)&&(e=d,d=null),c=c||{},d=d||c.duration,d=a.fx.off?0:typeof d=="number"?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,e=e||c.complete,[b,c,d,e]}function e(a,b){var c={_:0},d;for(d in b)a[d]!=b[d]&&(c[d]=b[d]);return c}function f(b){var c,d;for(c in b)d=b[c],(d==null||a.isFunction(d)||c in l||/scrollbar/.test(c)||!/color/i.test(c)&&isNaN(parseFloat(d)))&&delete b[c];return b}function g(){var a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={},c,d;if(a&&a.length&&a[0]&&a[a[0]]){var e=a.length;while(e--)c=a[e],typeof a[c]=="string"&&(d=c.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),b[d]=a[c])}else for(c in a)typeof a[c]=="string"&&(b[c]=a[c]);return b}function h(b,c){var d;do{d=a.curCSS(b,c);if(d!=""&&d!="transparent"||a.nodeName(b,"body"))break;c="backgroundColor"}while(b=b.parentNode);return i(d)}function i(b){var c;return b&&b.constructor==Array&&b.length==3?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[parseFloat(c[1])*2.55,parseFloat(c[2])*2.55,parseFloat(c[3])*2.55]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:(c=/rgba\(0, 0, 0, 0\)/.exec(b))?j.transparent:j[a.trim(b).toLowerCase()]}a.effects={},a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(b,c){a.fx.step[c]=function(a){a.colorInit||(a.start=h(a.elem,c),a.end=i(a.end),a.colorInit=!0),a.elem.style[c]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var j={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},k=["add","remove","toggle"],l={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,c,d,h){return a.isFunction(d)&&(h=d,d=null),this.queue(function(){var i=a(this),j=i.attr("style")||" ",l=f(g.call(this)),m,n=i.attr("class");a.each(k,function(a,c){b[c]&&i[c+"Class"](b[c])}),m=f(g.call(this)),i.attr("class",n),i.animate(e(l,m),{queue:!1,duration:c,easing:d,complete:function(){a.each(k,function(a,c){b[c]&&i[c+"Class"](b[c])}),typeof i.attr("style")=="object"?(i.attr("style").cssText="",i.attr("style").cssText=j):i.attr("style",j),h&&h.apply(this,arguments),a.dequeue(this)}})})},a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,e,f,g){return typeof d=="boolean"||d===b?e?a.effects.animateClass.apply(this,[d?{add:c}:{remove:c},e,f,g]):this._toggleClass(c,d):a.effects.animateClass.apply(this,[{toggle:c},d,e,f])},switchClass:function(b,c,d,e,f){return a.effects.animateClass.apply(this,[{add:c,remove:b},d,e,f])}}),a.extend(a.effects,{version:"1.8.17",save:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){return b=="toggle"&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;return b.wrap(d),(b[0]===e||a.contains(b[0],e))&&a(e).focus(),d=b.parent(),b.css("position")=="static"?(d.css({position:"relative"
}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),d.css(c).show()},removeWrapper:function(b){var c,d=document.activeElement;return b.parent().is(".ui-effects-wrapper")?(c=b.parent().replaceWith(b),(b[0]===d||a.contains(b[0],d))&&a(d).focus(),c):b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){unit=b.cssUnit(c),unit[0]>0&&(e[c]=unit[0]*d+unit[1])}),e}}),a.fn.extend({effect:function(b,c,e,f){var g=d.apply(this,arguments),h={options:g[1],duration:g[2],callback:g[3]},i=h.options.mode,j=a.effects[b];return a.fx.off||!j?i?this[i](h.duration,h.callback):this.each(function(){h.callback&&h.callback.call(this)}):j.call(this,h)},_show:a.fn.show,show:function(a){if(c(a))return this._show.apply(this,arguments);var b=d.apply(this,arguments);return b[1].mode="show",this.effect.apply(this,b)},_hide:a.fn.hide,hide:function(a){if(c(a))return this._hide.apply(this,arguments);var b=d.apply(this,arguments);return b[1].mode="hide",this.effect.apply(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(c(b)||typeof b=="boolean"||a.isFunction(b))return this.__toggle.apply(this,arguments);var e=d.apply(this,arguments);return e[1].mode="toggle",this.effect.apply(this,e)},cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}}),a.easing.jswing=a.easing.swing,a.extend(a.easing,{def:"easeOutQuad",swing:function(b,c,d,e,f){return a.easing[a.easing.def](b,c,d,e,f)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return b==0?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return b==0?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*2*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e/2)==2)return c+d;g||(g=e*.3*1.5);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return b<1?-0.5*h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)+c:h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)*.5+d+c},easeInBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),e*(c/=f)*c*((g+1)*c-g)+d},easeOutBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),e*((c=c/f-1)*c*((g+1)*c+g)+1)+d},easeInOutBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),(c/=f/2)<1?e/2*c*c*(((g*=1.525)+1)*c-g)+d:e/2*((c-=2)*c*(((g*=1.525)+1)*c+g)+2)+d},easeInBounce:function(b,c,d,e,f){return e-a.easing.easeOutBounce(b,f-c,0,e,f)+d},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*7.5625*b*b+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(b,c,d,e,f){return c<f/2?a.easing.easeInBounce(b,c*2,0,e,f)*.5+d:a.easing.easeOutBounce(b,c*2-f,0,e,f)*.5+e*.5+d}})}(jQuery),function(a,b){a.effects.blind=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d),c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"}),h=f=="vertical"?"height":"width",i=f=="vertical"?g.height():g.width();e=="show"&&g.css(h,0);var j={};j[h]=e=="show"?i:0,g.animate(j,b.duration,b.options.easing,function(){e=="hide"&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery),function(a,b){a.effects.bounce=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"effect"),f=b.options.direction||"up",g=b.options.distance||20,h=b.options.times||5,i=b.duration||250;/show|hide/.test(e)&&d.push("opacity"),a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var j=f=="up"||f=="down"?"top":"left",k=f=="up"||f=="left"?"pos":"neg",g=b.options.distance||(j=="top"?c.outerHeight({margin:!0})/3:c.outerWidth({margin:!0})/3);e=="show"&&c.css("opacity",0).css(j,k=="pos"?-g:g),e=="hide"&&(g=g/(h*2)),e!="hide"&&h--;if(e=="show"){var l={opacity:1};l[j]=(k=="pos"?"+=":"-=")+g,c.animate(l,i/2,b.options.easing),g=g/2,h--}for(var m=0;m<h;m++){var n={},o={};n[j]=(k=="pos"?"-=":"+=")+g,o[j]=(k=="pos"?"+=":"-=")+g,c.animate(n,i/2,b.options.easing).animate(o,i/2,b.options.easing),g=e=="hide"?g*2:g/2}if(e=="hide"){var l={opacity:0};l[j]=(k=="pos"?"-=":"+=")+g,c.animate(l,i/2,b.options.easing,function(){c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})}else{var n={},o={};n[j]=(k=="pos"?"-=":"+=")+g,o[j]=(k=="pos"?"+=":"-=")+g,c.animate(n,i/2,b.options.easing).animate(o,i/2,b.options.easing,function(){a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})}c.queue("fx",function(){c.dequeue()}),c.dequeue()})}}(jQuery),function(a,b){a.effects.clip=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","height","width"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d),c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"}),h=c[0].tagName=="IMG"?g:c,i={size:f=="vertical"?"height":"width",position:f=="vertical"?"top":"left"},j=f=="vertical"?h.height():h.width();e=="show"&&(h.css(i.size,0),h.css(i.position,j/2));var k={};k[i.size]=e=="show"?j:0,k[i.position]=e=="show"?0:j/2,h.animate(k,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){e=="hide"&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()}})})}}(jQuery),function(a,b){a.effects.drop=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","opacity"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"left";a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var g=f=="up"||f=="down"?"top":"left",h=f=="up"||f=="left"?"pos":"neg",i=b.options.distance||(g=="top"?c.outerHeight({margin:!0})/2:c.outerWidth({margin:!0})/2);e=="show"&&c.css("opacity",0).css(g,h=="pos"?-i:i);var j={opacity:e=="show"?1:0};j[g]=(e=="show"?h=="pos"?"+=":"-=":h=="pos"?"-=":"+=")+i,c.animate(j,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){e=="hide"&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a,b){a.effects.explode=function(b){return this.queue(function(){var c=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3,d=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3;b.options.mode=b.options.mode=="toggle"?a(this).is(":visible")?"hide":"show":b.options.mode;var e=a(this).show().css("visibility","hidden"),f=e.offset();f.top-=parseInt(e.css("marginTop"),10)||0,f.left-=parseInt(e.css("marginLeft"),10)||0;var g=e.outerWidth(!0),h=e.outerHeight(!0);for(var i=0;i<c;i++)for(var j=0;j<d;j++)e.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-j*(g/d),top:-i*(h/c)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g/d,height:h/c,left:f.left+j*(g/d)+(b.options.mode=="show"?(j-Math.floor(d/2))*(g/d):0),top:f.top+i*(h/c)+(b.options.mode=="show"?(i-Math.floor(c/2))*(h/c):0),opacity:b.options.mode=="show"?0:1}).animate({left:f.left+j*(g/d)+(b.options.mode=="show"?0:(j-Math.floor(d/2))*(g/d)),top:f.top+i*(h/c)+(b.options.mode=="show"?0:(i-Math.floor(c/2))*(h/c)),opacity:b.options.mode=="show"?1:0},b.duration||500);setTimeout(function(){b.options.mode=="show"?e.css({visibility:"visible"}):e.css({visibility:"visible"}).hide(),b.callback&&b.callback.apply(e[0]),e.dequeue(),a("div.ui-effects-explode").remove()},b.duration||500)})}}(jQuery),function(a,b){a.effects.fade=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"hide");c.animate({opacity:d},{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a,b){a.effects.fold=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.size||15,g=!!b.options.horizFirst,h=b.duration?b.duration/2:a.fx.speeds._default/2;a.effects.save(c,d),c.show();var i=a.effects.createWrapper(c).css({overflow:"hidden"}),j=e=="show"!=g,k=j?["width","height"]:["height","width"],l=j?[i.width(),i.height()]:[i.height(),i.width()],m=/([0-9]+)%/.exec(f);m&&(f=parseInt(m[1],10)/100*l[e=="hide"?0:1]),e=="show"&&i.css(g?{height:0,width:f}:{height:f,width:0});var n={},o={};n[k[0]]=e=="show"?l[0]:f,o[k[1]]=e=="show"?l[1]:0,i.animate(n,h,b.options.easing).animate(o,h,b.options.easing,function(){e=="hide"&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery),function(a,b){a.effects.highlight=function(b){return this.queue(function(){var c=a(this),d=["backgroundImage","backgroundColor","opacity"],e=a.effects.setMode(c,b.options.mode||"show"),f={backgroundColor:c.css("backgroundColor")};e=="hide"&&(f.opacity=0),a.effects.save(c,d),c.show().css({backgroundImage:"none",backgroundColor:b.options.color||"#ffff99"}).animate(f,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){e=="hide"&&c.hide(),a.effects.restore(c,d),e=="show"&&!a.support.opacity&&this.style.removeAttribute("filter"),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a,b){a.effects.pulsate=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"show");times=(b.options.times||5)*2-1,duration=b.duration?b.duration/2:a.fx.speeds._default/2,isVisible=c.is(":visible"),animateTo=0,isVisible||(c.css("opacity",0).show(),animateTo=1),(d=="hide"&&isVisible||d=="show"&&!isVisible)&&times--;for(var e=0;e<times;e++)c.animate({opacity:animateTo},duration,b.options.easing),animateTo=(animateTo+1)%2;c.animate({opacity:animateTo},duration,b.options.easing,function(){animateTo==0&&c.hide(),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}).dequeue()})}}(jQuery),function(a,b){a.effects.puff=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"hide"),e=parseInt(b.options.percent,10)||150,f=e/100,g={height:c.height(),width:c.width()};a.extend(b.options,{fade:!0,mode:d,percent:d=="hide"?e:100,from:d=="hide"?g:{height:g.height*f,width:g.width*f}}),c.effect("scale",b.options,b.duration,b.callback),c.dequeue()})},a.effects.scale=function(b){return this.queue(function(){var c=a(this),d=a.extend(!0,{},b.options),e=a.effects.setMode(c,b.options.mode||"effect"),f=parseInt(b.options.percent,10)||(parseInt(b.options.percent,10)==0?0:e=="hide"?0:100),g=b.options.direction||"both",h=b.options.origin;e!="effect"&&(d.origin=h||["middle","center"],d.restore=!0);var i={height:c.height(),width:c.width()};c.from=b.options.from||(e=="show"?{height:0,width:0}:i);var j={y:g!="horizontal"?f/100:1,x:g!="vertical"?f/100:1};c.to={height:i.height*j.y,width:i.width*j.x},b.options.fade&&(e=="show"&&(c.from.opacity=0,c.to.opacity=1),e=="hide"&&(c.from.opacity=1,c.to.opacity=0)),d.from=c.from,d.to=c.to,d.mode=e,c.effect("size",d,b.duration,b.callback),c.dequeue()})},a.effects.size=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","width","height","overflow","opacity"],e=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],g=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],i=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],j=a.effects.setMode(c,b.options.mode||"effect"),k=b.options.restore||!1,l=b.options.scale||"both",m=b.options.origin,n={height:c.height(),width:c.width()};c.from=b.options.from||n,c.to=b.options.to||n;if(m){var o=a.effects.getBaseline(m,n);c.from.top=(n.height-c.from.height)*o.y,c.from.left=(n.width-c.from.width)*o.x,c.to.top=(n.height-c.to.height)*o.y,c.to.left=(n.width-c.to.width)*o.x}var p={from:{y:c.from.height/n.height,x:c.from.width/n.width},to:{y:c.to.height/n.height,x:c.to.width/n.width}};if(l=="box"||l=="both")p.from.y!=p.to.y&&(d=d.concat(h),c.from=a.effects.setTransition(c,h,p.from.y,c.from),c.to=a.effects.setTransition(c,h,p.to.y,c.to)),p.from.x!=p.to.x&&(d=d.concat(i),c.from=a.effects.setTransition(c,i,p.from.x,c.from),c.to=a.effects.setTransition(c,i,p.to.x,c.to));(l=="content"||l=="both")&&p.from.y!=p.to.y&&(d=d.concat(g),c.from=a.effects.setTransition(c,g,p.from.y,c.from),c.to=a.effects.setTransition(c,g,p.to.y,c.to)),a.effects.save(c,k?d:e),c.show(),a.effects.createWrapper(c),c.css("overflow","hidden").css(c.from);if(l=="content"||l=="both")h=h.concat(["marginTop","marginBottom"]).concat(g),i=i.concat(["marginLeft","marginRight"]),f=d.concat(h).concat(i),c.find("*[width]").each(function(){child=a(this),k&&a.effects.save(child,f);var c={height:child.height(),width:child.width()};child.from={height:c.height*p.from.y,width:c.width*p.from.x},child.to={height:c.height*p.to.y,width:c.width*p.to.x},p.from.y!=p.to.y&&(child.from=a.effects.setTransition(child,h,p.from.y,child.from),child.to=a.effects.setTransition(child,h,p.to.y,child.to)),p.from.x!=p.to.x&&(child.from=a.effects.setTransition(child,i,p.from.x,child.from),child.to=a.effects.setTransition(child,i,p.to.x,child.to)),child.css(child.from),child.animate(child.to,b.duration,b.options.easing,function(){k&&a.effects.restore(child,f)})});c.animate(c.to,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){c.to.opacity===0&&c.css("opacity",c.from.opacity),j=="hide"&&c.hide(),a.effects.restore(c,k?d:e),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a,b){a.effects.shake=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"effect"),f=b.options.direction||"left",g=b.options.distance||20,h=b.options.times||3,i=b.duration||b.options.duration||140;a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var j=f=="up"||f=="down"?"top":"left",k=f=="up"||f=="left"?"pos":"neg",l={},m={},n={};l[j]=(k=="pos"?"-=":"+=")+g,m[j]=(k=="pos"?"+=":"-=")+g*2,n[j]=(k=="pos"?"-=":"+=")+g*2,c.animate(l,i,b.options.easing);for(var o=1;o<h;o++)c.animate(m,i,b.options.easing).animate(n,i,b.options.easing);c.animate(m,i,b.options.easing).animate(l,i/2,b.options.easing,function(){a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}),c.dequeue()})}}(jQuery),function(a,b){a.effects.slide=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"show"),f=b.options.direction||"left";a.effects.save(c,d),c.show(),a.effects.createWrapper(c).css({overflow:"hidden"});var g=f=="up"||f=="down"?"top":"left",h=f=="up"||f=="left"?"pos":"neg",i=b.options.distance||(g=="top"?c.outerHeight({margin:!0}):c.outerWidth({margin:!0}));e=="show"&&c.css(g,h=="pos"?isNaN(i)?"-"+i:-i:i);var j={};j[g]=(e=="show"?h=="pos"?"+=":"-=":h=="pos"?"-=":"+=")+i,c.animate(j,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){e=="hide"&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a,b){a.effects.transfer=function(b){return this.queue(function(){var c=a(this),d=a(b.options.to),e=d.offset(),f={top:e.top,left:e.left,height:d.innerHeight(),width:d.innerWidth()},g=c.offset(),h=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.options.className).css({top:g.top,left:g.left,height:c.innerHeight(),width:c.innerWidth(),position:"absolute"}).animate(f,b.duration,b.options.easing,function(){h.remove(),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery),function(){function A(a,b,c){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;a._chain&&(a=a._wrapped),b._chain&&(b=b._wrapped);if(a.isEqual&&w.isFunction(a.isEqual))return a.isEqual(b);if(b.isEqual&&w.isFunction(b.isEqual))return b.isEqual(a);var d=i.call(a);if(d!=i.call(b))return!1;switch(d){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return!1;var e=c.length;while(e--)if(c[e]==a)return!0;c.push(a);var f=0,g=!0;if(d=="[object Array]"){f=a.length,g=f==b.length;if(g)while(f--)if(!(g=f in a==f in b&&A(a[f],b[f],c)))break}else{if("constructor"in a!="constructor"in b||a.constructor!=b.constructor)return!1;for(var h in a)if(w.has(a,h)){f++;if(!(g=w.has(b,h)&&A(a[h],b[h],c)))break}if(g){for(h in b)if(w.has(b,h)&&!(f--))break;g=!f}}return c.pop(),g}var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.slice,h=d.unshift,i=e.toString,j=e.hasOwnProperty,k=d.forEach,l=d.map,m=d.reduce,n=d.reduceRight,o=d.filter,p=d.every,q=d.some,r=d.indexOf,s=d.lastIndexOf,t=Array.isArray,u=Object.keys,v=f.bind,w=function(a){return new E(a)};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=w),exports._=w):a._=w,w.VERSION="1.3.1";var x=w.each=w.forEach=function(a,b,d){if(a==null)return;if(k&&a.forEach===k)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;e<f;e++)if(e in a&&b.call(d,a[e],e,a)===c)return}else for(var g in a)if(w.has(a,g)&&b.call(d,a[g],g,a)===c)return};w.map=w.collect=function(a,b,c){var d=[];return a==null?d:l&&a.map===l?a.map(b,c):(x(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),a.length===+a.length&&(d.length=a.length),d)},w.reduce=w.foldl=w.inject=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(m&&a.reduce===m)return d&&(b=w.bind(b,d)),e?a.reduce(b,c):a.reduce(b);x(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c},w.reduceRight=w.foldr=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(n&&a.reduceRight===n)return d&&(b=w.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=w.toArray(a).reverse();return d&&!e&&(b=w.bind(b,d)),e?w.reduce(f,b,c,d):w.reduce(f,b)},w.find=w.detect=function(a,b,c){var d;return y(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0}),d},w.filter=w.select=function(a,b,c){var d=[];return a==null?d:o&&a.filter===o?a.filter(b,c):(x(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},w.reject=function(a,b,c){var d=[];return a==null?d:(x(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)}),d)},w.every=w.all=function(a,b,d){var e=!0;return a==null?e:p&&a.every===p?a.every(b,d):(x(a,function(a,f,g){if(!(e=e&&b.call(d,a,f,g)))return c}),e)};var y=w.some=w.any=function(a,b,d){b||(b=w.identity);var e=!1;return a==null?e:q&&a.some===q?a.some(b,d):(x(a,function(a,f,g){if(e||(e=b.call(d,a,f,g)))return c}),!!e)};w.include=w.contains=function(a,b){var c=!1;return a==null?c:r&&a.indexOf===r?a.indexOf(b)!=-1:(c=y(a,function(a){return a===b}),c)},w.invoke=function(a,b){var c=g.call(arguments,2);return w.map(a,function(a){return(w.isFunction(b)?b||a:a[b]).apply(a,c)})},w.pluck=function(a,b){return w.map(a,function(a){return a[b]})},w.max=function(a,b,c){if(!b&&w.isArray(a))return Math.max.apply(Math,a);if(!b&&w.isEmpty(a))return-Infinity;var d={computed:-Infinity};return x(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},w.min=function(a,b,c){if(!b&&w.isArray(a))return Math.min.apply(Math,a);if(!b&&w.isEmpty(a))return Infinity;var d={computed:Infinity};return x(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},w.shuffle=function(a){var b=[],c;return x(a,function(a,d,e){d==0?b[0]=a:(c=Math.floor(Math.random()*(d+1)),b[d]=b[c],b[c]=a)}),b},w.sortBy=function(a,b,c){return w.pluck(w.map(a,function(a,d,e){return{value:a,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),"value")},w.groupBy=function(a,b){var c={},d=w.isFunction(b)?b:function(a){return a[b]};return x(a,function(a,b){var e=d(a,b);(c[e]||(c[e]=[])).push(a)}),c},w.sortedIndex=function(a,b,c){c||(c=w.identity);var d=0,e=a.length;while(d<e){var f=d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d},w.toArray=function(a){return a?a.toArray?a.toArray():w.isArray(a)?g.call(a):w.isArguments(a)?g.call(a):w.values(a):[]},w.size=function(a){return w.toArray(a).length},w.first=w.head=function(a,b,c){return b!=null&&!c?g.call(a,0,b):a[0]},w.initial=function(a,b,c){return g.call(a,0,a.length-(b==null||c?1:b))},w.last=function(a,b,c){return b!=null&&!c?g.call(a,Math.max(a.length-b,0)):a[a.length-1]},w.rest=w.tail=function(a,b,c){return g.call(a,b==null||c?1:b)},w.compact=function(a){return w.filter(a,function(a){return!!a})},w.flatten=function(a,b){return w.reduce(a,function(a,c){return w.isArray(c)?a.concat(b?c:w.flatten(c)):(a[a.length]=c,a)},[])},w.without=function(a){return w.difference(a,g.call(arguments,1))},w.uniq=w.unique=function(a,b,c){var d=c?w.map(a,c):a,e=[];return w.reduce(d,function(c,d,f){if(0==f||(b===!0?w.last(c)!=d:!w.include(c,d)))c[c.length]=d,e[e.length]=a[f];return c},[]),e},w.union=function(){return w.uniq(w.flatten(arguments,!0))},w.intersection=w.intersect=function(a){var b=g.call(arguments,1);return w.filter(w.uniq(a),function(a){return w.every(b,function(b){return w.indexOf(b,a)>=0})})},w.difference=function(a){var b=w.flatten(g.call(arguments,1));return w.filter(a,function(a){return!w.include(b,a)})},w.zip=function(){var a=g.call(arguments),b=w.max(w.pluck(a,"length")),c=Array(b);for(var d=0;d<b;d++)c[d]=w.pluck(a,""+d);return c},w.indexOf=function(a,b,c){if(a==null)return-1;var d,e;if(c)return d=w.sortedIndex(a,b),a[d]===b?d:-1;if(r&&a.indexOf===r)return a.indexOf(b);for(d=0,e=a.length;d<e;d++)if(d in a&&a[d]===b)return d;return-1},w.lastIndexOf=function(a,b){if(a==null)return-1;if(s&&a.lastIndexOf===s)return a.lastIndexOf(b);var c=a.length;while(c--)if(c in a&&a[c]===b)return c;return-1},w.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=Array(d);while(e<d)f[e++]=a,a+=c;return f};var z=function(){};w.bind=function(a,b){var c,d;if(a.bind===v&&v)return v.apply(a,g.call(arguments,1));if(!w.isFunction(a))throw new TypeError;return d=g.call(arguments,2),c=function(){if(this instanceof c){z.prototype=a.prototype;var e=new z,f=a.apply(e,d.concat(g.call(arguments)));return Object(f)===f?f:e}return a.apply(b,d.concat(g.call(arguments)))}},w.bindAll=function(a){var b=g.call(arguments,1);return b.length==0&&(b=w.functions(a)),x(b,function(b){a[b]=w.bind(a[b],a)}),a},w.memoize=function(a,b){var c={};return b||(b=w.identity),function(){var d=b.apply(this,arguments);return w.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},w.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(a,c)},b)},w.defer=function(a){return w.delay.apply(w,[a,1].concat(g.call(arguments,1)))},w.throttle=function(a,b){var c,d,e,f,g,h=w.debounce(function(){g=f=!1},b);return function(){c=this,d=arguments;var i=function(){e=null,g&&a.apply(c,d),h()};e||(e=setTimeout(i,b)),f?g=!0:a.apply(c,d),h(),f=!0}},w.debounce=function(a,b){var c;return function(){var d=this,e=arguments,f=function(){c=null,a.apply(d,e)};clearTimeout(c),c=setTimeout(f,b)}},w.once=function(a){var b=!1,c;return function(){return b?c:(b=!0,c=a.apply(this,arguments))}},w.wrap=function(a,b){return function(){var c=[a].concat(g.call(arguments,0));return b.apply(this,c)}},w.compose=function(){var a=arguments;return function(){var b=arguments;for(var c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},w.after=function(a,b){return a<=0?b():function(){if(--a<1)return b.apply(this,arguments)}},w.keys=u||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)w.has(a,c)&&(b[b.length]=c);return b},w.values=function(a){return w.map(a,w.identity)},w.functions=w.methods=function(a){var b=[];for(var c in a)w.isFunction(a[c])&&b.push(c);return b.sort()},w.extend=function(a){return x(g.call(arguments,1),function(b){for(var c in b)a[c]=b[c]}),a},w.defaults=function(a){return x(g.call(arguments,1),function(b){for(var c in b)a[c]==null&&(a[c]=b[c])}),a},w.clone=function(a){return w.isObject(a)?w.isArray(a)?a.slice():w.extend({},a):a},w.tap=function(a,b){return b(a),a},w.isEqual=function(a,b){return A(a,b,[])},w.isEmpty=function(a){if(w.isArray(a)||w.isString(a))return a.length===0;for(var b in a)if(w.has(a,b))return!1;return!0},w.isElement=function(a){return!!a&&a.nodeType==1},w.isArray=t||function(a){return i.call(a)=="[object Array]"},w.isObject=function(a){return a===Object(a)},w.isArguments=function(a){return i.call(a)=="[object Arguments]"},w.isArguments(arguments)||(w.isArguments=function(a){return!!a&&!!w.has(a,"callee")}),w.isFunction=function(a){return i.call(a)=="[object Function]"},w.isString=function(a){return i.call(a)=="[object String]"},w.isNumber=function(a){return i.call(a)=="[object Number]"},w.isNaN=function(a){return a!==a},w.isBoolean=function(a){return a===!0||a===!1||i.call(a)=="[object Boolean]"},w.isDate=function(a){return i.call(a)=="[object Date]"},w.isRegExp=function(a){return i.call(a)=="[object RegExp]"},w.isNull=function(a){return a===null},w.isUndefined=function(a){return a===void 0},w.has=function(a,b){return j.call(a,b)},w.noConflict=function(){return a._=b,this},w.identity=function(a){return a},w.times=function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)},w.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},w.mixin=function(a){x(w.functions(a),function(b){G(b,w[b]=a[b])})};var B=0;w.uniqueId=function(a){var b=B++;return a?a+b:b},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/.^/,D=function(a){return a.replace(/\\\\/g,"\\").replace(/\\'/g,"'")};w.template=function(a,b){var c=w.templateSettings,d="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.escape||C,function(a,b){return"',_.escape("+D(b)+"),'"}).replace(c.interpolate||C,function(a,b){return"',"+D(b)+",'"}).replace(c.evaluate||C,function(a,b){return"');"+D(b).replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",e=new Function("obj","_",d);return b?e(b,w):function(a){return e.call(this,a,w)}},w.chain=function(a){return w(a).chain()};var E=function(a){this._wrapped=a};w.prototype=E.prototype;var F=function(a,b){return b?w(a).chain():a},G=function(a,b){E.prototype[a]=function(){var a=g.call(arguments);return h.call(a,this._wrapped),F(b.apply(w,a),this._chain)}};w.mixin(w),x(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];E.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);var d=c.length;return(a=="shift"||a=="splice")&&d===0&&delete c[0],F(c,this._chain)}}),x(["concat","join","slice"],function(a){var b=d[a];E.prototype[a]=function(){return F(b.apply(this._wrapped,arguments),this._chain)}}),E.prototype.chain=function(){return this._chain=!0,this},E.prototype.value=function(){return this._wrapped}}.call(this),function(a){function d(a,b){var c=a+"";while(c.length<b)c="0"+c;return c}function e(a,b,c){var d=(b.ms||0)+(b.s||0)*1e3+(b.m||0)*6e4+(b.h||0)*36e5+(b.d||0)*864e5+(b.w||0)*6048e5,e=(b.M||0)+(b.y||0)*12,f;return d&&a.setMilliseconds(a.getMilliseconds()+d*c),e&&(f=a.getDate(),a.setDate(1),a.setMonth(a.getMonth()+e*c),a.setDate(Math.min((new Date(a.getFullYear(),a.getMonth()+1,0)).getDate(),f))),a}function f(a){return Object.prototype.toString.call(a)==="[object Array]"}function g(a){return new Date(a[0],a[1]||0,a[2]||1,a[3]||0,a[4]||0,a[5]||0,a[6]||0)}function h(a,b){function j(a,b){switch(a){case"M":case"MM":c[1]=~~b-1;break;case"D":case"DD":case"DDD":case"DDDD":c[2]=~~b;break;case"YY":b=~~b,c[0]=b+(b>70?1900:2e3);break;case"YYYY":c[0]=~~b;break;case"a":case"A":i=b.toLowerCase()==="pm";break;case"H":case"HH":case"h":case"hh":c[3]=~~b;break;case"m":case"mm":c[4]=~~b;break;case"s":case"ss":c[5]=~~b}}var c=[0],d=/[0-9a-zA-Z]+/g,e=a.match(d),f=b.match(d),h,i;for(h=0;h<f.length;h++)j(f[h],e[h]);return i&&c[3]<12&&(c[3]+=12),g(c)}function i(b,c){b&&b.date instanceof Date?this.date=b.date:c?this.date=h(b,c):this.date=b===a?new Date:b instanceof Date?b:f(b)?g(b):new Date(b)}function j(a){return isNaN(a)?(new i(a)).date.getTime():a}function k(a,c){return b.relativeTime[a].replace(/%d/i,c||1)}function l(a,b){return j(a)-j(b)}function m(a){var b=Math.abs(a)/1e3,d=b/60,e=d/60,f=e/24,g=f/365;return b<45&&k("s",c(b))||c(d)===1&&k("m")||d<45&&k("mm",c(d))||c(e)===1&&k("h")||e<22&&k("hh",c(e))||c(f)===1&&k("d")||f<25&&k("dd",c(f))||f<45&&k("M")||f<345&&k("MM",c(f/30))||c(g)===1&&k("y")||k("yy",c(g))}var b,c=Math.round;b=function(a,b){return new i(a,b)},i.formats={},i.addFormatter=function(a,b){i.formats[a]=b},b.addFormatter=i.addFormatter,b.fromJSON=function(a){return new i(a,"YYYY-MM-DD")},b.months=["January","February","March","April","May","June","July","August","September","October","November","December"],b.monthsShort=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],b.weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b.weekdaysShort=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],b.relativeTime={future:"in %s",past:"%s ago",s:"seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},b.ordinal=function(a){var b=a%10;return~~(a%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th"},b.periodsBetween=function(a,c,d){var e,f,g;c=b(c),d=b(d),a==="month"&&(f={M:1}),a==="week"&&(f={w:1}),a==="day"&&(f={d:1}),g=[_.date(c),_.date(d)],c=g[0],d=g[1],c=c.clone().beginningOf(a),d=d.clone(),e=[c.clone()];while(c.add(f).beginningOf(a)<d)e.push(c.clone());return e},b.monthsBetween=function(a,b){return this.periodsBetween("month",a,b)},b.weeksBetween=function(a,b){return this.periodsBetween("week",a,b)},b.daysBetween=function(a,b){return this.periodsBetween("day",a,b)},i.prototype={clone:function(){return _.date(this.valueOf())},valueOf:function(){return this.date.getTime
()},format:function(a){function q(a){var c,e;switch(a){case"M":return f+1;case"Mo":return f+1+b.ordinal(f+1);case"MM":return d(f+1,2);case"MMM":return b.monthsShort[f];case"MMMM":return b.months[f];case"D":return g;case"Do":return g+b.ordinal(g);case"DD":return d(g,2);case"DDD":return c=new Date(h,f,g),e=new Date(h,0,1),~~((c-e)/864e5+1.5);case"DDDo":return c=q("DDD"),c+b.ordinal(c);case"DDDD":return d(q("DDD"),3);case"d":return j;case"do":return j+b.ordinal(j);case"ddd":return b.weekdaysShort[j];case"dddd":return b.weekdays[j];case"w":return c=new Date(h,f,g-j+5),e=new Date(c.getFullYear(),0,4),~~((c-e)/864e5/7+1.5);case"wo":return c=q("w"),c+b.ordinal(c);case"ww":return d(q("w"),2);case"YY":return(h+"").slice(-2);case"YYYY":return h;case"a":return k>11?"pm":"am";case"A":return k>11?"PM":"AM";case"H":return k;case"HH":return d(k,2);case"h":return k%12||12;case"hh":return d(k%12||12,2);case"m":return l;case"mm":return d(l,2);case"s":return m;case"ss":return d(m,2);case"z":return q("zz").replace(p,"");case"zz":c=n.indexOf("(");if(c>-1)return n.slice(c+1,n.indexOf(")"));return n.slice(n.indexOf(":")).replace(p,"");default:return a.replace("\\","")}}if(i.formats[a]){var c=i.formats[a];if(_.isString(c))return this.format(c);if(_.isFunction(c))return c(this)}var e=this.date,f=e.getMonth(),g=e.getDate(),h=e.getFullYear(),j=e.getDay(),k=e.getHours(),l=e.getMinutes(),m=e.getSeconds(),n=e.toString(),o=/(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|dddd?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|zz?)/g,p=/[^A-Z]/g;return a.replace(o,q)},add:function(a){return this.date=e(this.date,a,1),this},subtract:function(a){return this.date=e(this.date,a,-1),this},isInCurrentMonth:function(){var a=new i;return this>=a.beginningOfMonth()&&this<=a.endOfMonth()},isInHistoricalMonth:function(){var a=new i;return this<a.beginningOfMonth()},isInFutureMonth:function(){var a=new i;return this>a.endOfMonth()},beginningOfMonth:function(){return this.date=e(this.date,{d:this.date.getDate()-1},-1),this.beginningOfDay(),this},endOfMonth:function(){return this.date=e(this.date,{M:1},1),this.date=e(this.date,{d:this.date.getDate()},-1),this.endOfDay(),this},endOfWeek:function(){var a=this.date.getDay();return a!==0&&(a=7-a),this.date=e(this.date,{d:a},1),this.endOfDay(),this},beginningOfWeek:function(){var a=this.date.getDay();return a===0?a=6:a=a-1,this.date=e(this.date,{d:a},-1),this.beginningOfDay(),this},beginningOfDay:function(){return this.date=e(this.date,{h:this.date.getHours(),m:this.date.getMinutes(),s:this.date.getSeconds(),ms:this.date.getMilliseconds()},-1),this},endOfDay:function(){return this.date=e(this.date,{d:1},1),this.beginningOfDay(),this.date=e(this.date,{ms:1},-1),this},beginningOf:function(a){if(a=="week")return this.beginningOfWeek();if(a=="month")return this.beginningOfMonth();if(a=="day")return this.beginningOfDay()},endOf:function(a){if(a=="week")return this.endOfWeek();if(a=="month")return this.endOfMonth();if(a=="day")return this.beginningOfDay()},from:function(a,c,d){var e=l(this.date,a),f=e<0?b.relativeTime.past:b.relativeTime.future;return d?e:c?m(e):f.replace(/%s/i,m(e))},fromNow:function(a,b){return this.from(new i,a,b)},isLeapYear:function(){var a=this.date.getFullYear();return a%4===0&&a%100!==0||a%400===0},toJSON:function(){return this.format("YYYY-MM-DD")},toString:function(){return this.format("YYYY-MM-DD")}},typeof window=="undefined"&&typeof module!="undefined"?module.exports=b:(this._!==a&&this._.mixin!==a&&this._.mixin({date:b}),this._date=b)}(),function(a,b){function g(a){return!!(a===""||a&&a.charCodeAt&&a.substr)}function h(a){return e?e(a):f.call(a)==="[object Array]"}function i(a){return f.call(a)==="[object Object]"}function j(a,b){var c;a=a||{},b=b||{};for(c in b)b.hasOwnProperty(c)&&a[c]==null&&(a[c]=b[c]);return a}function k(a,b,c){var e=[],f,g;if(!a)return e;if(d&&a.map===d)return a.map(b,c);for(f=0,g=a.length;f<g;f++)e[f]=b.call(c,a[f],f,a);return e}function l(a,b){return a=Math.round(Math.abs(a)),isNaN(a)?b:a}function m(a){var b=c.settings.currency.format;return typeof a=="function"&&(a=a()),g(a)&&a.match("%v")?{pos:a,neg:a.replace("-","").replace("%v","-%v"),zero:a}:!a||!a.pos||!a.pos.match("%v")?g(b)?c.settings.currency.format={pos:b,neg:b.replace("%v","-%v"),zero:b}:b:a}var c={};c.version="0.3.0",c.settings={currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}};var d=Array.prototype.map,e=Array.isArray,f=Object.prototype.toString,n=c.unformat=c.parse=function(a,b){if(h(a))return k(a,function(a){return n(a,b)});a=a||0;if(typeof a=="number")return a;b=b||".";var c=new RegExp("[^0-9-"+b+"]",["g"]),d=parseFloat((""+a).replace(/\((.*)\)/,"-$1").replace(c,"").replace(b,"."));return isNaN(d)?0:d},o=c.toFixed=function(a,b){b=l(b,c.settings.number.precision);var d=Math.pow(10,b);return(Math.round(c.unformat(a)*d)/d).toFixed(b)},p=c.formatNumber=function(a,b,d,e){if(h(a))return k(a,function(a){return p(a,b,d,e)});a=n(a);var f=j(i(b)?b:{precision:b,thousand:d,decimal:e},c.settings.number),g=l(f.precision),m=a<0?"-":"",q=parseInt(o(Math.abs(a||0),g),10)+"",r=q.length>3?q.length%3:0;return m+(r?q.substr(0,r)+f.thousand:"")+q.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+f.thousand)+(g?f.decimal+o(Math.abs(a),g).split(".")[1]:"")},q=c.formatMoney=function(a,b,d,e,f,g){if(h(a))return k(a,function(a){return q(a,b,d,e,f,g)});a=n(a);var o=j(i(b)?b:{symbol:b,precision:d,thousand:e,decimal:f,format:g},c.settings.currency),r=m(o.format),s=a>0?r.pos:a<0?r.neg:r.zero;return s.replace("%s",o.symbol).replace("%v",p(Math.abs(a),l(o.precision),o.thousand,o.decimal))};c.formatColumn=function(a,b,d,e,f,o){if(!a)return[];var q=j(i(b)?b:{symbol:b,precision:d,thousand:e,decimal:f,format:o},c.settings.currency),r=m(q.format),s=r.pos.indexOf("%s")<r.pos.indexOf("%v")?!0:!1,t=0,u=k(a,function(a,b){if(h(a))return c.formatColumn(a,q);a=n(a);var d=a>0?r.pos:a<0?r.neg:r.zero,e=d.replace("%s",q.symbol).replace("%v",p(Math.abs(a),l(q.precision),q.thousand,q.decimal));return e.length>t&&(t=e.length),e});return k(u,function(a,b){return g(a)&&a.length<t?s?a.replace(q.symbol,q.symbol+Array(t-a.length+1).join(" ")):Array(t-a.length+1).join(" ")+a:a})},typeof module!="undefined"&&module.exports?(module.exports=c,c.accounting=c):typeof define=="function"&&define.amd?define([],function(){return c}):(c.noConflict=function(d){return function(){return a.accounting=d,c.noConflict=b,c}}(a.accounting),a.accounting=c)}(this),function(){this.DecimalMath={matchScales:function(a,b){return a.scale===b.scale?a.scale:a.scale>b.scale?(b.setScale(a.scale),a.scale):(a.setScale(b.scale),b.scale)},add:function(a,b){var c;return c=new SimpleDecimal,c.scale=this.matchScales(a,b),c.intval=a.intval+b.intval,c},subtract:function(a,b){var c;return c=new SimpleDecimal,c.scale=this.matchScales(a,b),c.intval=a.intval-b.intval,c}},this.SimpleDecimal=function(){function a(a){var b,c;a&&(b=parseFloat(a).toString(),c=b.split("."),c.length===1?(this.precision=c[0].length,this.scale=0):(this.scale=c[1].length,this.precision=c[0].length+c[1].length),this.intval=parseInt(c[0]+c[1],10),this.isNegative()&&(this.precision=this.precision-1))}return a.prototype.valueOf=function(){return this.toFloat()},a.prototype.toJSON=function(){return this.toString()},a.prototype.toString=function(){return this.toFloat().toFixed(this.scale)},a.prototype.truncate=function(){return new a(parseInt(this.toString()).toFixed(0))},a.prototype.toFloat=function(){return this.intval*Math.pow(10,-1*this.scale)},a.prototype.setScale=function(a){var b;b=a-this.scale;if(b>0)return this.intval=this.intval*Math.pow(10,b),this.scale=a,this.precision=this.precision+b},a.prototype.isNegative=function(){return this.intval<0},a.prototype.isPositive=function(){return!this.isNegative()},a.prototype.add=function(a){return DecimalMath.add(this,a)},a.prototype.subtract=function(a){return DecimalMath.subtract(this,a)},a.prototype.invert=function(){return DecimalMath.subtract(new a("0"),this)},a.prototype.clone=function(){return DecimalMath.add(new a("0"),this)},a.prototype.abs=function(){return this.isNegative()?this.invert():this.clone()},a.prototype.isString=function(a){return toString.call(a)==="[object String]"},a.prototype.format=function(b,c){return b==null&&(b="default"),this.isString(b)||(c=b,b="default"),a.formats[b](this,c)},a}(),SimpleDecimal.formats={},SimpleDecimal.addFormatter=function(a,b){return SimpleDecimal.formats[a]=b},SimpleDecimal.addFormatter("default",function(a){return a.toString()})}.call(this),function(a){var b=function(a){return new SimpleDecimal(a)};typeof window=="undefined"&&typeof module!="undefined"?module.exports=b:(this._!==a&&this._.mixin!==a&&this._.mixin({decimal:b}),this._date=b)}(),function(){function bu(a,b){var c;a||(a={});for(c in b)a[c]=b[c];return a}function bv(){var a=0,b=arguments,c=b.length,d={};for(;a<c;a++)d[b[a++]]=b[a];return d}function bw(a,b){return parseInt(a,b||10)}function bx(a){return typeof a=="string"}function by(a){return typeof a=="object"}function bz(a){return Object.prototype.toString.call(a)==="[object Array]"}function bA(a){return typeof a=="number"}function bB(a){return d.log(a)/d.LN10}function bC(a){return d.pow(10,a)}function bD(a,b){var c=a.length;while(c--)if(a[c]===b){a.splice(c,1);break}}function bE(b){return b!==a&&b!==null}function bF(a,b,c){var d,e="setAttribute",f;if(bx(b))bE(c)?a[e](b,c):a&&a.getAttribute&&(f=a.getAttribute(b));else if(bE(b)&&by(b))for(d in b)a[e](d,b[d]);return f}function bG(a){return bz(a)?a:[a]}function bH(){var a=arguments,b,c,d=a.length;for(b=0;b<d;b++){c=a[b];if(typeof c!="undefined"&&c!==null)return c}}function bI(b,c){p&&c&&c.opacity!==a&&(c.filter="alpha(opacity="+c.opacity*100+")"),bu(b.style,c)}function bJ(a,c,d,e,f){var g=b.createElement(a);return c&&bu(g,c),f&&bI(g,{padding:0,border:P,margin:0}),d&&bI(g,d),e&&e.appendChild(g),g}function bK(a,b){var c=function(){};return c.prototype=new a,bu(c.prototype,b),c}function bL(a){return a=(a||0).toString(),a.indexOf(".")>-1?a.split(".")[1].length:0}function bM(a,b,c,d){var e=C.lang,f=a,g=b===-1?bL(a):isNaN(b=j(b))?2:b,h=c===undefined?e.decimalPoint:c,i=d===undefined?e.thousandsSep:d,k=f<0?"-":"",l=String(bw(f=j(+f||0).toFixed(g))),m=l.length>3?l.length%3:0;return k+(m?l.substr(0,m)+i:"")+l.substr(m).replace(/(\d{3})(?=\d)/g,"$1"+i)+(g?h+j(f-l).toFixed(g).slice(2):"")}function bN(a,b){return Array((b||2)+1-String(a).length).join(0)+a}function bO(a,b,c,d){var e,f;c=bH(c,1),e=a/c,b||(b=[1,2,2.5,5,10],d&&d.allowDecimals===!1&&(c===1?b=[1,2,5,10]:c<=.1&&(b=[1/c])));for(f=0;f<b.length;f++){a=b[f];if(e<=(b[f]+(b[f+1]||b[f]))/2)break}return a*=c,a}function bP(a,b){var c=b||[[W,[1,2,5,10,20,25,50,100,200,500]],[X,[1,2,5,10,15,30]],[Y,[1,2,5,10,15,30]],[Z,[1,2,3,4,6,8,12]],[$,[1,2]],[_,[1,2]],[ba,[1,2,3,4,6]],[bb,null]],d=c[c.length-1],e=G[d[0]],f=d[1],g,h;for(h=0;h<c.length;h++){d=c[h],e=G[d[0]],f=d[1];if(c[h+1]){var i=(e*f[f.length-1]+G[c[h+1][0]])/2;if(a<=i)break}}return e===G[bb]&&a<5*e&&(f=[1,2,5]),e===G[bb]&&a<5*e&&(f=[1,2,5]),g=bO(a/e,f),{unitRange:e,count:g,unitName:d[0]}}function bQ(a,b,c,d){var e=[],g,h={},i=C.global.useUTC,j,k=new Date(b),l=a.unitRange,m=a.count;l>=G[X]&&(k.setMilliseconds(0),k.setSeconds(l>=G[Y]?0:m*f(k.getSeconds()/m))),l>=G[Y]&&k[bo](l>=G[Z]?0:m*f(k[bi]()/m)),l>=G[Z]&&k[bp](l>=G[$]?0:m*f(k[bj]()/m)),l>=G[$]&&k[bq](l>=G[ba]?1:m*f(k[bl]()/m)),l>=G[ba]&&(k[br](l>=G[bb]?0:m*f(k[bm]()/m)),j=k[bn]()),l>=G[bb]&&(j-=j%m,k[bs](j)),l===G[_]&&k[bq](k[bl]()-k[bk]()+bH(d,1)),g=1,j=k[bn]();var n=k.getTime(),o=k[bm](),p=k[bl](),q=i?0:(864e5+k.getTimezoneOffset()*60*1e3)%864e5;while(n<c)e.push(n),l===G[bb]?n=bh(j+g*m,0):l===G[ba]?n=bh(j,o+g*m):!!i||l!==G[$]&&l!==G[_]?(n+=l*m,l<=G[Z]&&n%G[$]===q&&(h[n]=$)):n=bh(j,o,p+g*m*(l===G[$]?1:7)),g++;return e.push(n),e.info=bu(a,{higherRanks:h,totalRange:l*m}),e}function bR(){this.color=0,this.symbol=0}function bS(a,b){var c=a.length,d,e;for(e=0;e<c;e++)a[e].ss_i=e;a.sort(function(a,c){return d=b(a,c),d===0?a.ss_i-c.ss_i:d});for(e=0;e<c;e++)delete a[e].ss_i}function bT(a){var b=a.length,c=a[0];while(b--)a[b]<c&&(c=a[b]);return c}function bU(a){var b=a.length,c=a[0];while(b--)a[b]>c&&(c=a[b]);return c}function bV(a,b){var c;for(c in a)a[c]&&a[c]!==b&&a[c].destroy&&a[c].destroy(),delete a[c]}function bW(a){B||(B=bJ(I)),a&&B.appendChild(a),B.innerHTML=""}function bX(a,b){var d="Highcharts error #"+a+": www.highcharts.com/errors/"+a;if(b)throw d;c.console&&console.log(d)}function bY(a){return parseFloat(a.toPrecision(14))}function bZ(a,b){E=bH(a,b.animation)}function ct(){var a=C.global.useUTC,b=a?"getUTC":"get",c=a?"setUTC":"set";bh=a?Date.UTC:function(a,b,c,d,e,f){return(new Date(a,b,bH(c,1),bH(d,0),bH(e,0),bH(f,0))).getTime()},bi=b+"Minutes",bj=b+"Hours",bk=b+"Day",bl=b+"Date",bm=b+"Month",bn=b+"FullYear",bo=c+"Minutes",bp=c+"Hours",bq=c+"Date",br=c+"Month",bs=c+"FullYear"}function cu(a){return C=cg(C,a),ct(),C}function cv(){return C}function cx(){}function cE(a,b,c){this.axis=a,this.pos=b,this.type=c||"",this.isNew=!0,c||this.addLabel()}function cF(a,b){return this.axis=a,b&&(this.options=b,this.id=b.id),this}function cG(a,b,c,d,e){var f=a.chart.inverted;this.axis=a,this.isNegative=c,this.options=b,this.x=d,this.stack=e,this.alignOptions={align:b.align||(f?c?"left":"right":"center"),verticalAlign:b.verticalAlign||(f?"middle":c?"bottom":"top"),y:bH(b.y,f?4:c?14:-6),x:bH(b.x,f?c?-6:6:0)},this.textAlign=b.textAlign||(f?c?"right":"left":"center")}function cH(){this.init.apply(this,arguments)}function cI(a,b){var c=b.borderWidth,d=b.style,e=b.shared,f=bw(d.padding);this.chart=a,this.options=b,d.padding=0,this.crosshairs=[],this.currentX=0,this.currentY=0,this.tooltipIsHidden=!0,this.label=a.renderer.label("",0,0,null,null,null,b.useHTML,null,"tooltip").attr({padding:f,fill:b.backgroundColor,"stroke-width":c,r:b.borderRadius,zIndex:8}).css(d).hide().add(),w||this.label.shadow(b.shadow),this.shared=e}function cJ(a,b){var c=w?"":b.chart.zoomType;this.zoomX=/x/.test(c),this.zoomY=/y/.test(c),this.options=b,this.chart=a,this.init(a,b.tooltip)}function cK(a){this.init(a)}function cL(a,b){var c,d=a.series;a.series=null,c=cg(C,a),c.series=a.series=d;var e=c.chart,f=e.margin,g=by(f)?f:[f,f,f,f];this.optionsMarginTop=bH(e.marginTop,g[0]),this.optionsMarginRight=bH(e.marginRight,g[1]),this.optionsMarginBottom=bH(e.marginBottom,g[2]),this.optionsMarginLeft=bH(e.marginLeft,g[3]);var h=e.events;this.runChartClick=h&&!!h.click,this.callback=b,this.isResizing=0,this.options=c,this.axes=[],this.series=[],this.hasCartesianSeries=e.showAxes,this.init(h)}var a,b=document,c=window,d=Math,e=d.round,f=d.floor,g=d.ceil,h=d.max,i=d.min,j=d.abs,k=d.cos,l=d.sin,m=d.PI,n=m*2/360,o=navigator.userAgent,p=/msie/i.test(o)&&!c.opera,q=b.documentMode===8,r=/AppleWebKit/.test(o),s=/Firefox/.test(o),t="http://www.w3.org/2000/svg",u=!!b.createElementNS&&!!b.createElementNS(t,"svg").createSVGRect,v=s&&parseInt(o.split("Firefox/")[1],10)<4,w=!u&&!p&&!!b.createElement("canvas").getContext,x,y=b.documentElement.ontouchstart!==a,z={},A=0,B,C,D,E,F,G,H=function(){},I="div",J="absolute",K="relative",L="hidden",M="highcharts-",N="visible",O="px",P="none",Q="M",R="L",S="rgba(192,192,192,"+(u?1e-6:.002)+")",T="",U="hover",V="select",W="millisecond",X="second",Y="minute",Z="hour",$="day",_="week",ba="month",bb="year",bc="fill",bd="linearGradient",be="stops",bf="stroke",bg="stroke-width",bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt={};c.Highcharts={},D=function(a,b,c){if(!bE(b)||isNaN(b))return"Invalid date";a=bH(a,"%Y-%m-%d %H:%M:%S");var d=new Date(b),f,g=d[bj](),h=d[bk](),i=d[bl](),j=d[bm](),k=d[bn](),l=C.lang,m=l.weekdays,n={a:m[h].substr(0,3),A:m[h],d:bN(i),e:i,b:l.shortMonths[j],B:l.months[j],m:bN(j+1),y:k.toString().substr(2,2),Y:k,H:bN(g),I:bN(g%12||12),l:g%12||12,M:bN(d[bi]()),p:g<12?"AM":"PM",P:g<12?"am":"pm",S:bN(d.getSeconds()),L:bN(e(b%1e3),3)};for(f in n)a=a.replace("%"+f,n[f]);return c?a.substr(0,1).toUpperCase()+a.substr(1):a},bR.prototype={wrapColor:function(a){this.color>=a&&(this.color=0)},wrapSymbol:function(a){this.symbol>=a&&(this.symbol=0)}},G=bv(W,1,X,1e3,Y,6e4,Z,36e5,$,864e5,_,6048e5,ba,2592e6,bb,31556952e3),F={init:function(a,b,c){b=b||"";var d=a.shift,e=b.indexOf("C")>-1,f=e?7:3,g,h,i,j=b.split(" "),k=[].concat(c),l,m,n=function(a){i=a.length;while(i--)a[i]===Q&&a.splice(i+1,0,a[i+1],a[i+2],a[i+1],a[i+2])};e&&(n(j),n(k)),a.isArea&&(l=j.splice(j.length-6,6),m=k.splice(k.length-6,6));if(d<=k.length/f)while(d--)k=[].concat(k).splice(0,f).concat(k);a.shift=0;if(j.length){g=k.length;while(j.length<g)h=[].concat(j).splice(j.length-f,f),e&&(h[f-6]=h[f-2],h[f-5]=h[f-1]),j=j.concat(h)}return l&&(j=j.concat(l),k=k.concat(m)),[j,k]},step:function(a,b,c,d){var e=[],f=a.length,g;if(c===1)e=d;else if(f===b.length&&c<1)while(f--)g=parseFloat(a[f]),e[f]=isNaN(g)?a[f]:c*parseFloat(b[f]-g)+g;else e=b;return e}};var b$=c.HighchartsAdapter,b_=b$||{},ca=b_.adapterRun,cb=b_.getScript,cc=b_.each,cd=b_.grep,ce=b_.offset,cf=b_.map,cg=b_.merge,ch=b_.addEvent,ci=b_.removeEvent,cj=b_.fireEvent,ck=b_.washMouseEvent,cl=b_.animate,cm=b_.stop;b$&&b$.init&&b$.init(F);if(!b$&&c.jQuery){var cn=jQuery;cb=cn.getScript,ca=function(a,b){return cn(a)[b]()},cc=function(a,b){var c=0,d=a.length;for(;c<d;c++)if(b.call(a[c],a[c],c,a)===!1)return c},cd=cn.grep,cf=function(a,b){var c=[],d=0,e=a.length;for(;d<e;d++)c[d]=b.call(a[d],a[d],d,a);return c},cg=function(){var a=arguments;return cn.extend(!0,null,a[0],a[1],a[2],a[3])},ce=function(a){return cn(a).offset()},ch=function(a,b,c){cn(a).bind(b,c)},ci=function(a,c,d){var e=b.removeEventListener?"removeEventListener":"detachEvent";b[e]&&!a[e]&&(a[e]=function(){}),cn(a).unbind(c,d)},cj=function(a,b,c,d){var e=cn.Event(b),f="detached"+b,g;!p&&c&&(delete c.layerX,delete c.layerY),bu(e,c),a[b]&&(a[f]=a[b],a[b]=null),cc(["preventDefault","stopPropagation"],function(a){var b=e[a];e[a]=function(){try{b.call(e)}catch(c){a==="preventDefault"&&(g=!0)}}}),cn(a).trigger(e),a[f]&&(a[b]=a[f],a[f]=null),d&&!e.isDefaultPrevented()&&!g&&d(e)},ck=function(a){return a},cl=function(a,b,c){var d=cn(a);b.d&&(a.toD=b.d,b.d=1),d.stop(),d.animate(b,c)},cm=function(a){cn(a).stop()},cn.extend(cn.easing,{easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c}});var co=cn.fx,cp=co.step;cc(["cur","_default","width","height"],function(b,c){var d=cp,e,f;b==="cur"?d=co.prototype:b==="_default"&&cn.Tween&&(d=cn.Tween.propHooks[b],b="set"),e=d[b],e&&(d[b]=function(d){return d=c?d:this,f=d.elem,f.attr?f.attr(d.prop,b==="cur"?a:d.now):e.apply(this,arguments)})}),cp.d=function(a){var b=a.elem;if(!a.started){var c=F.init(b,b.d,b.toD);a.start=c[0],a.end=c[1],a.started=!0}b.attr("d",F.step(a.start,a.end,a.pos,b.toD))}}var cq={enabled:!0,align:"center",x:0,y:15,style:{color:"#666",fontSize:"11px",lineHeight:"14px"}};C={colors:["#4572A7","#AA4643","#89A54E","#80699B","#3D96AE","#DB843D","#92A8CD","#A47D7C","#B5CA92"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/2.2.5/modules/canvas-tools.js"},chart:{borderColor:"#4572A7",borderRadius:5,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacingTop:10,spacingRight:10,spacingBottom:15,spacingLeft:10,style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:"12px"},backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",y:15,style:{color:"#3E576F",fontSize:"16px"}},subtitle:{text:"",align:"center",y:30,style:{color:"#6D869F"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,shadow:!0,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:cg(cq,{enabled:!1,y:-6,formatter:function(){return this.y}}),cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0}},labels:{style:{position:J,color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderWidth:1,borderColor:"#909090",borderRadius:5,navigation:{activeColor:"#3E576F",inactiveColor:"#CCC"},shadow:!1,itemStyle:{cursor:"pointer",color:"#3E576F",fontSize:"12px"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:J,width:"13px",height:"13px"},symbolWidth:16,symbolPadding:5,verticalAlign:"bottom",x:0,y:0},loading:{labelStyle:{fontWeight:"bold",position:K,top:"1em"},style:{position:J,backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:2,borderRadius:5,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',shadow:!0,shared:w,snap:y?25:10,style:{color:"#333333",fontSize:"12px",padding:"5px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"10px"}}};var cr=C.plotOptions,cs=cr.line;ct();var cw=function(a){function d(a){c=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/.exec(a),c?b=[bw(c[1]),bw(c[2]),bw(c[3]),parseFloat(c[4],10)]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a),c&&(b=[bw(c[1],16),bw(c[2],16),bw(c[3],16),1]))}function e(c){var d;return b&&!isNaN(b[0])?c==="rgb"?d="rgb("+b[0]+","+b[1]+","+b[2]+")":c==="a"?d=b[3]:d="rgba("+b.join(",")+")":d=a,d}function f(a){if(bA(a)&&a!==0){var c;for(c=0;c<3;c++)b[c]+=bw(a*255),b[c]<0&&(b[c]=0),b[c]>255&&(b[c]=255)}return this}function g(a){return b[3]=a,this}var b=[],c;return d(a),{get:e,brighten:f,setOpacity:g}};cx.prototype={init:function(a,c){var d=this;d.element=c==="span"?bJ(c):b.createElementNS(t,c),d.renderer=a,d.attrSetters={}},animate:function(a,b,c){var d=bH(b,E,!0);cm(this),d?(d=cg(d),c&&(d.complete=c),cl(this,a,d)):(this.attr(a),c&&c())},attr:function(c,d){var e=this,f,g,i,j,k,l=e.element,m=l.nodeName,n=e.renderer,p,q,s=e.attrSetters,u=e.shadows,v,w,x=e;bx(c)&&bE(d)&&(f=c,c={},c[f]=d);if(bx(c))f=c,m==="circle"?f={x:"cx",y:"cy"}[f]||f:f==="strokeWidth"&&(f="stroke-width"),x=bF(l,f)||e[f]||0,f!=="d"&&f!=="visibility"&&(x=parseFloat(x));else for(f in c){p=!1,g=c[f],i=s[f]&&s[f](g,f);if(i!==!1){i!==a&&(g=i);if(f==="d")g&&g.join&&(g=g.join(" ")),/(NaN| {2}|^$)/.test(g)&&(g="M 0 0");else if(f==="x"&&m==="text"){for(j=0;j<l.childNodes.length;j++)k=l.childNodes[j],bF(k,"x")===bF(l,"x")&&bF(k,"x",g);e.rotation&&bF(l,"transform","rotate("+e.rotation+" "+g+" "+bw(c.y||bF(l,"y"))+")")}else if(f==="fill")g=n.color(g,l,f);else if(m!=="circle"||f!=="x"&&f!=="y")if(m==="rect"&&f==="r")bF(l,{rx:g,ry:g}),p=!0;else if(f==="translateX"||f==="translateY"||f==="rotation"||f==="verticalAlign")w=!0,p=!0;else if(f==="stroke")g=n.color(g,l,f);else if(f==="dashstyle"){f="stroke-dasharray",g=g&&g.toLowerCase();if(g==="solid")g=P;else if(g){g=g.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),j=g.length;while(j--)g[j]=bw(g[j])*c["stroke-width"];g=g.join(",")}}else f==="isTracker"?e[f]=g:f==="width"?g=bw(g):f==="align"?(f="text-anchor",g={left:"start",center:"middle",right:"end"}[g]):f==="title"&&(q=l.getElementsByTagName("title")[0],q||(q=b.createElementNS(t,"title"),l.appendChild(q)),q.textContent=g);else f={x:"cx",y:"cy"}[f]||f;f==="strokeWidth"&&(f="stroke-width"),r&&f==="stroke-width"&&g===0&&(g=1e-6),e.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(f)&&(v||(e.symbolAttr(c),v=!0),p=!0);if(u&&/^(width|height|visibility|x|y|d|transform)$/.test(f)){j=u.length;while(j--)bF(u[j],f,f==="height"?h(g-(u[j].cutHeight||0),0):g)}(f==="width"||f==="height")&&m==="rect"&&g<0&&(g=0),e[f]=g,w&&e.updateTransform(),f==="text"?(e.textStr=g,e.added&&n.buildText(e)):p||bF(l,f,g)}}if(r&&/Chrome\/(18|19)/.test(o)&&m==="text"&&(c.x!==a||c.y!==a)){var y=l.parentNode,z=l.nextSibling;y&&(y.removeChild(l),z?y.insertBefore(l,z):y.appendChild(l))}return x},symbolAttr:function(a){var b=this;cc(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(c){b[c]=bH(a[c],b[c])}),b.attr({d:b.renderer.symbols[b.symbolName](b.x,b.y,b.width,b.height,b)})},clip:function(a){return this.attr("clip-path","url("+this.renderer.url+"#"+a.id+")")},crisp:function(a,b,c,d,g){var h=this,i,j={},k={},l;a=a||h.strokeWidth||h.attr&&h.attr("stroke-width")||0,l=e(a)%2/2,k.x=f(b||h.x||0)+l,k.y=f(c||h.y||0)+l,k.width=f((d||h.width||0)-2*l),k.height=f((g||h.height||0)-2*l),k.strokeWidth=a;for(i in k)h[i]!==k[i]&&(h[i]=j[i]=k[i]);return j},css:function(a){var b=this,c=b.element,d=a&&a.width&&c.nodeName==="text",e,f="",g=function(a,b){return"-"+b.toLowerCase()};a&&a.color&&(a.fill=a.color),a=bu(b.styles,a),b.styles=a;if(p&&!u)d&&delete a.width,bI(b.element,a);else{for(e in a)f+=e.replace(/([A-Z])/g,g)+":"+a[e]+";";b.attr({style:f})}return d&&b.added&&b.renderer.buildText(b),b},on:function(a,b){var c=b;return y&&a==="click"&&(a="touchstart",c=function(a){a.preventDefault(),b()}),this.element["on"+a]=c,this},setRadialReference:function(a){return this.element.radialReference=a,this},translate:function(a,b){return this.attr({translateX:a,translateY:b})},invert:function(){var a=this;return a.inverted=!0,a.updateTransform(),a},htmlCss:function(a){var b=this,c=b.element,d=a&&c.tagName==="SPAN"&&a.width;return d&&(delete a.width,b.textWidth=d,b.updateTransform()),b.styles=bu(b.styles,a),bI(b.element,a),b},htmlGetBBox:function(a){var b=this,c=b.element,d=b.bBox;if(!d||a)c.nodeName==="text"&&(c.style.position=J),d=b.bBox={x:c.offsetLeft,y:c.offsetTop,width:c.offsetWidth,height:c.offsetHeight};return d},htmlUpdateTransform:function(){if(!this.added){this.alignOnAdd=!0;return}var a=this,b=a.renderer,c=a.element,d=a.translateX||0,e=a.translateY||0,f=a.x||0,g=a.y||0,h=a.textAlign||"left",i={left:0,center:.5,right:1}[h],j=h&&h!=="left",m=a.shadows;if(d||e)bI(c,{marginLeft:d,marginTop:e}),m&&cc(m,function(a){bI(a,{marginLeft:d+1,marginTop:e+1})});a.inverted&&cc(c.childNodes,function(a){b.invertChild(a,c)});if(c.tagName==="SPAN"){var o,p,q=a.rotation,r,s=0,t=1,u=0,v,w=bw(a.textWidth),x=a.xCorr||0,y=a.yCorr||0,z=[q,h,c.innerHTML,a.textWidth].join(",");z!==a.cTT&&(bE(q)&&(s=q*n,t=k(s),u=l(s),bI(c,{filter:q?["progid:DXImageTransform.Microsoft.Matrix(M11=",t,", M12=",-u,", M21=",u,", M22=",t,", sizingMethod='auto expand')"].join(""):P})),o=bH(a.elemWidth,c.offsetWidth),p=bH(a.elemHeight,c.offsetHeight),o>w&&/[ \-]/.test(c.innerText)&&(bI(c,{width:w+O,display:"block",whiteSpace:"normal"}),o=w),r=b.fontMetrics(c.style.fontSize).b,x=t<0&&-o,y=u<0&&-p,v=t*u<0,x+=u*r*(v?1-i:i),y-=t*r*(q?v?i:1-i:1),j&&(x-=o*i*(t<0?-1:1),q&&(y-=p*i*(u<0?-1:1)),bI(c,{textAlign:h})),a.xCorr=x,a.yCorr=y),bI(c,{left:f+x+O,top:g+y+O}),a.cTT=z}},updateTransform:function(){var a=this,b=a.translateX||0,c=a.translateY||0,d=a.inverted,e=a.rotation,f=[];d&&(b+=a.attr("width"),c+=a.attr("height")),(b||c)&&f.push("translate("+b+","+c+")"),d?f.push("rotate(90) scale(-1,1)"):e&&f.push("rotate("+e+" "+(a.x||0)+" "+(a.y||0)+")"),f.length&&bF(a.element,"transform",f.join(" "))},toFront:function(){var a=this.element;return a.parentNode.appendChild(a),this},align:function(a,b,c){var d=this;a?(d.alignOptions=a,d.alignByTranslate=b,c||d.renderer.alignedObjects.push(d)):(a=d.alignOptions,b=d.alignByTranslate),c=bH(c,d.renderer);var f=a.align,g=a.verticalAlign,h=(c.x||0)+(a.x||0),i=(c.y||0)+(a.y||0),j={};return/^(right|center)$/.test(f)&&(h+=(c.width-(a.width||0))/{right:1,center:2}[f]),j[b?"translateX":"x"]=e(h),/^(bottom|middle)$/.test(g)&&(i+=(c.height-(a.height||0))/({bottom:1,middle:2}[g]||1)),j[b?"translateY":"y"]=e(i),d[d.placed?"animate":"attr"](j),d.placed=!0,d.alignAttr=j,d},getBBox:function(a){var b=this,c,d,e,f=b.rotation,g=b.element,h=f*n;if(g.namespaceURI===t||b.renderer.forExport){try{c=g.getBBox?bu({},g.getBBox()):{width:g.offsetWidth,height:g.offsetHeight}}catch(i){}if(!c||c.width<0)c={width:0,height:0};d=c.width,e=c.height,f&&(c.width=j(e*l(h))+j(d*k(h)),c.height=j(e*k(h))+j(d*l(h)))}else c=b.htmlGetBBox(a);return c},show:function(){return this.attr({visibility:N})},hide:function(){return this.attr({visibility:L})},add:function(a){var b=this.renderer,c=a||b,d=c.element||b.box,e=d.childNodes,f=this.element,g=bF(f,"zIndex"),h,i,j,k;this.parentInverted=a&&a.inverted,this.textStr!==undefined&&b.buildText(this),g&&(c.handleZ=!0,g=bw(g));if(c.handleZ)for(j=0;j<e.length;j++){h=e[j],i=bF(h,"zIndex");if(h!==f&&(bw(i)>g||!bE(g)&&bE(i))){d.insertBefore(f,h),k=!0;break}}return k||d.appendChild(f),this.added=!0,cj(this,"add"),this},safeRemoveChild:function(a){var b=a.parentNode;b&&b.removeChild(a)},destroy:function(){var a=this,b=a.element||{},c=a.shadows,d=a.box,e,f;b.onclick=b.onmouseout=b.onmouseover=b.onmousemove=null,cm(a),a.clipPath&&(a.clipPath=a.clipPath.destroy());if(a.stops){for(f=0;f<a.stops.length;f++)a.stops[f]=a.stops[f].destroy();a.stops=null}a.safeRemoveChild(b),c&&cc(c,function(b){a.safeRemoveChild(b)}),d&&d.destroy(),bD(a.renderer.alignedObjects,a);for(e in a)delete a[e];return null},empty:function(){var a=this.element,b=a.childNodes,c=b.length;while(c--)a.removeChild(b[c])},shadow:function(a,b,c){var d=[],e,f,g=this.element,i,j=this.parentInverted?"(-1,-1)":"(1,1)";if(a){for(e=1;e<=3;e++)f=g.cloneNode(0),i=7-2*e,bF(f,{isShadow:"true",stroke:"rgb(0, 0, 0)","stroke-opacity":.05*e,"stroke-width":i,transform:"translate"+j,fill:P}),c&&(bF(f,"height",h(bF(f,"height")-i,0)),f.cutHeight=i),b?b.element.appendChild(f):g.parentNode.insertBefore(f,g),d.push(f);this.shadows=d}return this}};var cy=function(){this.init.apply(this,arguments)};cy.prototype={Element:cx,init:function(a,b,d,e){var f=this,h=location,i;i=f.createElement("svg").attr({xmlns:t,version:"1.1"}),a.appendChild(i.element),f.isSVG=!0,f.box=i.element,f.boxWrapper=i,f.alignedObjects=[],f.url=p?"":h.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1"),f.defs=this.createElement("defs").add(),f.forExport=e,f.gradients={},f.setSize(b,d,!1);var j,k;s&&a.getBoundingClientRect&&(f.subPixelFix=j=function(){bI(a,{left:0,top:0}),k=a.getBoundingClientRect(),bI(a,{left:g(k.left)-k.left+O,top:g(k.top)-k.top+O})},j(),ch(c,"resize",j))},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var a=this,b=a.defs;return a.box=null,a.boxWrapper=a.boxWrapper.destroy(),bV(a.gradients||{}),a.gradients=null,b&&(a.defs=b.destroy()),a.subPixelFix&&ci(c,"resize",a.subPixelFix),a.alignedObjects=null,null},createElement:function(a){var b=new this.Element;return b.init(this,a),b},draw:function(){},buildText:function(a){function r(a){return q[a]=d.getBBox().height,e(q[a]-(q[a-1]||0))}var d=a.element,f=bH(a.textStr,"").toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g),g=d.childNodes,h=/style="([^"]+)"/,i=/href="([^"]+)"/,j=bF(d,"x"),k=a.styles,l=k&&bw(k.width),m=k&&k.lineHeight,n,o="getComputedStyle",p=g.length,q=[];while(p--)d.removeChild(g[p]);l&&!a.added&&this.box.appendChild(d),f[f.length-1]===""&&f.pop(),cc(f,function(e,f){var g,k=0,p;e=e.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),g=e.split("|||"),cc(g,function(e){if(e!==""||g.length===1){var q={},s=b.createElementNS(t,"tspan");h.test(e)&&bF(s,"style",e.match(h)[1].replace(/(;| |^)color([ :])/,"$1fill$2")),i.test(e)&&(bF(s,"onclick",'location.href="'+e.match(i)[1]+'"'),bI(s,{cursor:"pointer"})),e=(e.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">"),s.appendChild(b.createTextNode(e)),k?q.dx=3:q.x=j;if(!k){if(f){!u&&a.renderer.forExport&&bI(s,{display:"block"}),p=c[o]&&bw(c[o](n,null).getPropertyValue("line-height"));if(!p||isNaN(p))p=m||n.offsetHeight||
r(f)||18;bF(s,"dy",p)}n=s}bF(s,q),d.appendChild(s),k++;if(l){var v=e.replace(/-/g,"- ").split(" "),w,x,y=[];while(v.length||y.length)x=a.getBBox().width,w=x>l,!w||v.length===1?(v=y,y=[],v.length&&(s=b.createElementNS(t,"tspan"),bF(s,{dy:m||16,x:j}),d.appendChild(s),x>l&&(l=x))):(s.removeChild(s.firstChild),y.unshift(v.pop())),v.length&&s.appendChild(b.createTextNode(v.join(" ").replace(/- /g,"-")))}}})})},button:function(a,b,c,d,e,f,g){var h=this.label(a,b,c),i=0,j,k,l,m,n,o="style",p={x1:0,y1:0,x2:0,y2:1};return e=cg(bv(bg,1,bf,"#999",bc,bv(bd,p,be,[[0,"#FFF"],[1,"#DDD"]]),"r",3,"padding",3,o,bv("color","black")),e),l=e[o],delete e[o],f=cg(e,bv(bf,"#68A",bc,bv(bd,p,be,[[0,"#FFF"],[1,"#ACF"]])),f),m=f[o],delete f[o],g=cg(e,bv(bf,"#68A",bc,bv(bd,p,be,[[0,"#9BD"],[1,"#CDF"]])),g),n=g[o],delete g[o],ch(h.element,"mouseenter",function(){h.attr(f).css(m)}),ch(h.element,"mouseleave",function(){j=[e,f,g][i],k=[l,m,n][i],h.attr(j).css(k)}),h.setState=function(a){i=a,a?a===2&&h.attr(g).css(n):h.attr(e).css(l)},h.on("click",function(){d.call(h)}).attr(e).css(bu({cursor:"default"},l))},crispLine:function(a,b){return a[1]===a[4]&&(a[1]=a[4]=e(a[1])+b%2/2),a[2]===a[5]&&(a[2]=a[5]=e(a[2])+b%2/2),a},path:function(a){var b={fill:P};return bz(a)?b.d=a:by(a)&&bu(b,a),this.createElement("path").attr(b)},circle:function(a,b,c){var d=by(a)?a:{x:a,y:b,r:c};return this.createElement("circle").attr(d)},arc:function(a,b,c,d,e,f){return by(a)&&(b=a.y,c=a.r,d=a.innerR,e=a.start,f=a.end,a=a.x),this.symbol("arc",a||0,b||0,c||0,c||0,{innerR:d||0,start:e||0,end:f||0})},rect:function(a,b,c,d,e,f){e=by(a)?a.r:e;var g=this.createElement("rect").attr({rx:e,ry:e,fill:P});return g.attr(by(a)?a:g.crisp(f,a,b,h(c,0),h(d,0)))},setSize:function(a,b,c){var d=this,e=d.alignedObjects,f=e.length;d.width=a,d.height=b,d.boxWrapper[bH(c,!0)?"animate":"attr"]({width:a,height:b});while(f--)e[f].align()},g:function(a){var b=this.createElement("g");return bE(a)?b.attr({"class":M+a}):b},image:function(a,b,c,d,e){var f={preserveAspectRatio:P},g;return arguments.length>1&&bu(f,{x:b,y:c,width:d,height:e}),g=this.createElement("image").attr(f),g.element.setAttributeNS?g.element.setAttributeNS("http://www.w3.org/1999/xlink","href",a):g.element.setAttribute("hc-svg-href",a),g},symbol:function(a,b,c,d,f,g){var h,i=this.symbols[a],j=i&&i(e(b),e(c),d,f,g),k=/^url\((.*?)\)$/,l,m,n;return j?(h=this.path(j),bu(h,{symbolName:a,x:b,y:c,width:d,height:f}),g&&bu(h,g)):k.test(a)&&(n=function(a,b){a.attr({width:b[0],height:b[1]}),a.alignByTranslate||a.translate(-e(b[0]/2),-e(b[1]/2))},l=a.match(k)[1],m=z[l],h=this.image(l).attr({x:b,y:c}),m?n(h,m):(h.attr({width:0,height:0}),bJ("img",{onload:function(){var a=this;n(h,z[l]=[a.width,a.height])},src:l}))),h},symbols:{circle:function(a,b,c,d){var e=.166*c;return[Q,a+c/2,b,"C",a+c+e,b,a+c+e,b+d,a+c/2,b+d,"C",a-e,b+d,a-e,b,a+c/2,b,"Z"]},square:function(a,b,c,d){return[Q,a,b,R,a+c,b,a+c,b+d,a,b+d,"Z"]},triangle:function(a,b,c,d){return[Q,a+c/2,b,R,a+c,b+d,a,b+d,"Z"]},"triangle-down":function(a,b,c,d){return[Q,a,b,R,a+c,b,a+c/2,b+d,"Z"]},diamond:function(a,b,c,d){return[Q,a+c/2,b,R,a+c,b+d/2,a+c/2,b+d,a,b+d/2,"Z"]},arc:function(a,b,c,d,e){var f=e.start,g=e.r||c||d,h=e.end-1e-6,i=e.innerR,j=e.open,n=k(f),o=l(f),p=k(h),q=l(h),r=e.end-f<m?0:1;return[Q,a+g*n,b+g*o,"A",g,g,0,r,1,a+g*p,b+g*q,j?Q:R,a+i*p,b+i*q,"A",i,i,0,r,0,a+i*n,b+i*o,j?"":"Z"]}},clipRect:function(a,b,c,d){var e,f=M+A++,g=this.createElement("clipPath").attr({id:f}).add(this.defs);return e=this.rect(a,b,c,d,0).add(g),e.id=f,e.clipPath=g,e},color:function(a,b,c){var d=this,e,f=/^rgba/,g;a&&a.linearGradient?g="linearGradient":a&&a.radialGradient&&(g="radialGradient");if(g){var h=a[g],i=d.gradients,j,k,l,m=b.radialReference;if(!h.id||!i[h.id])bz(h)&&(a[g]=h={x1:h[0],y1:h[1],x2:h[2],y2:h[3],gradientUnits:"userSpaceOnUse"}),g==="radialGradient"&&m&&!bE(h.gradientUnits)&&bu(h,{cx:m[0]-m[2]/2+h.cx*m[2],cy:m[1]-m[2]/2+h.cy*m[2],r:h.r*m[2],gradientUnits:"userSpaceOnUse"}),h.id=M+A++,i[h.id]=j=d.createElement(g).attr(h).add(d.defs),j.stops=[],cc(a.stops,function(a){var b;f.test(a[1])?(e=cw(a[1]),k=e.get("rgb"),l=e.get("a")):(k=a[1],l=1),b=d.createElement("stop").attr({offset:a[0],"stop-color":k,"stop-opacity":l}).add(j),j.stops.push(b)});return"url("+d.url+"#"+h.id+")"}return f.test(a)?(e=cw(a),bF(b,c+"-opacity",e.get("a")),e.get("rgb")):(b.removeAttribute(c+"-opacity"),a)},text:function(a,b,c,d){var f=this,g=C.chart.style,h;return d&&!f.forExport?f.html(a,b,c):(b=e(bH(b,0)),c=e(bH(c,0)),h=f.createElement("text").attr({x:b,y:c,text:a}).css({fontFamily:g.fontFamily,fontSize:g.fontSize}),h.x=b,h.y=c,h)},html:function(a,b,c){var d=C.chart.style,f=this.createElement("span"),g=f.attrSetters,h=f.element,i=f.renderer;return g.text=function(a){return h.innerHTML=a,!1},g.x=g.y=g.align=function(a,b){return b==="align"&&(b="textAlign"),f[b]=a,f.htmlUpdateTransform(),!1},f.attr({text:a,x:e(b),y:e(c)}).css({position:J,whiteSpace:"nowrap",fontFamily:d.fontFamily,fontSize:d.fontSize}),f.css=f.htmlCss,i.isSVG&&(f.add=function(a){var b,c,d=i.box.parentNode;return a?(b=a.div,b||(b=a.div=bJ(I,{className:bF(a.element,"class")},{position:J,left:a.attr("translateX")+O,top:a.attr("translateY")+O},d),c=b.style,bu(a.attrSetters,{translateX:function(a){c.left=a+O},translateY:function(a){c.top=a+O},visibility:function(a,b){c[b]=a}}))):b=d,b.appendChild(h),f.added=!0,f.alignOnAdd&&f.htmlUpdateTransform(),f}),f},fontMetrics:function(a){a=bw(a||11);var b=a<24?a+4:e(a*1.2),c=e(b*.8);return{h:b,b:c}},label:function(b,c,d,f,g,h,i,j,k){function A(){var a,b=n.element.style;p=(s===undefined||t===undefined||m.styles.textAlign)&&n.getBBox(!0),m.width=(s||p.width||0)+2*r,m.height=(t||p.height||0)+2*r,y=r+l.fontMetrics(b&&b.fontSize).b,o||(a=j?-y:0,m.box=o=f?l.symbol(f,-q*r,a,m.width,m.height):l.rect(-q*r,a,m.width,m.height,0,x[bg]),o.add(m)),o.attr(cg({width:m.width,height:m.height},x)),x=null}function B(){var a=m.styles,b=a&&a.textAlign,c=r*(1-q),d;d=j?0:y,bE(s)&&(b==="center"||b==="right")&&(c+={center:.5,right:1}[b]*(s-p.width)),(c!==n.x||d!==n.y)&&n.attr({x:c,y:d}),n.x=c,n.y=d}function C(a,b){o?o.attr(a,b):x[a]=b}function D(){m.attr({text:b,x:c,y:d}),bE(g)&&m.attr({anchorX:g,anchorY:h})}var l=this,m=l.g(k),n=l.text("",0,0,i).attr({zIndex:1}).add(m),o,p,q=0,r=3,s,t,u,v,w=0,x={},y,z=m.attrSetters;ch(m,"add",D),z.width=function(a){return s=a,!1},z.height=function(a){return t=a,!1},z.padding=function(a){return bE(a)&&a!==r&&(r=a,B()),!1},z.align=function(a){return q={left:0,center:.5,right:1}[a],!1},z.text=function(a,b){return n.attr(b,a),A(),B(),!1},z[bg]=function(a,b){return w=a%2/2,C(b,a),!1},z.stroke=z.fill=z.r=function(a,b){return C(b,a),!1},z.anchorX=function(a,b){return g=a,C(b,a+w-u),!1},z.anchorY=function(a,b){return h=a,C(b,a-v),!1},z.x=function(a){return m.x=a,a-=q*((s||p.width)+r),u=e(a),m.attr("translateX",u),!1},z.y=function(a){return v=m.y=e(a),m.attr("translateY",a),!1};var E=m.css;return bu(m,{css:function(b){if(b){var c={};b=cg({},b),cc(["fontSize","fontWeight","fontFamily","color","lineHeight","width"],function(d){b[d]!==a&&(c[d]=b[d],delete b[d])}),n.css(c)}return E.call(m,b)},getBBox:function(){return o.getBBox()},shadow:function(a){return o.shadow(a),m},destroy:function(){ci(m,"add",D),ci(m.element,"mouseenter"),ci(m.element,"mouseleave"),n&&(n=n.destroy()),cx.prototype.destroy.call(m)}})}},x=cy;var cz;if(!u&&!w){var cA={init:function(a,b){var c=this,d=["<",b,' filled="f" stroked="f"'],e=["position: ",J,";"];(b==="shape"||b===I)&&e.push("left:0;top:0;width:1px;height:1px;"),q&&e.push("visibility: ",b===I?L:N),d.push(' style="',e.join(""),'"/>'),b&&(d=b===I||b==="span"||b==="img"?d.join(""):a.prepVML(d),c.element=bJ(d)),c.renderer=a,c.attrSetters={}},add:function(a){var b=this,c=b.renderer,d=b.element,e=c.box,f=a&&a.inverted,g=a?a.element||a:e;return f&&c.invertChild(d,g),q&&g.gVis===L&&bI(d,{visibility:L}),g.appendChild(d),b.added=!0,b.alignOnAdd&&!b.deferUpdateTransform&&b.updateTransform(),cj(b,"add"),b},toggleChildren:function(a,b){var c=a.childNodes,d=c.length;while(d--)bI(c[d],{visibility:b}),c[d].nodeName==="DIV"&&this.toggleChildren(c[d],b)},updateTransform:cx.prototype.htmlUpdateTransform,attr:function(b,c){var d=this,f,g,i,j,k=d.element||{},l=k.style,m=k.nodeName,n=d.renderer,o=d.symbolName,p,r=d.shadows,s,t=d.attrSetters,u=d;bx(b)&&bE(c)&&(f=b,b={},b[f]=c);if(bx(b))f=b,f==="strokeWidth"||f==="stroke-width"?u=d.strokeweight:u=d[f];else for(f in b){g=b[f],s=!1,j=t[f]&&t[f](g,f);if(j!==!1&&g!==null){j!==a&&(g=j);if(o&&/^(x|y|r|start|end|width|height|innerR|anchorX|anchorY)/.test(f))p||(d.symbolAttr(b),p=!0),s=!0;else if(f==="d"){g=g||[],d.d=g.join(" "),i=g.length;var v=[];while(i--)bA(g[i])?v[i]=e(g[i]*10)-5:g[i]==="Z"?v[i]="x":v[i]=g[i];g=v.join(" ")||"x",k.path=g;if(r){i=r.length;while(i--)r[i].path=r[i].cutOff?this.cutOffPath(g,r[i].cutOff):g}s=!0}else if(f==="zIndex"||f==="visibility")q&&f==="visibility"&&m==="DIV"&&(k.gVis=g,d.toggleChildren(k,g),g===N&&(g=null)),g&&(l[f]=g),s=!0;else if(f==="width"||f==="height")g=h(0,g),this[f]=g,d.updateClipping?(d[f]=g,d.updateClipping()):l[f]=g,s=!0;else if(f==="x"||f==="y")d[f]=g,l[{x:"left",y:"top"}[f]]=g;else if(f==="class")k.className=g;else if(f==="stroke")g=n.color(g,k,f),f="strokecolor";else if(f==="stroke-width"||f==="strokeWidth")k.stroked=g?!0:!1,f="strokeweight",d[f]=g,bA(g)&&(g+=O);else if(f==="dashstyle"){var w=k.getElementsByTagName("stroke")[0]||bJ(n.prepVML(["<stroke/>"]),null,null,k);w[f]=g||"solid",d.dashstyle=g,s=!0}else f==="fill"?m==="SPAN"?l.color=g:(k.filled=g!==P?!0:!1,g=n.color(g,k,f),f="fillcolor"):m==="shape"&&f==="rotation"?d[f]=g:f==="translateX"||f==="translateY"||f==="rotation"?(d[f]=g,d.updateTransform(),s=!0):f==="text"&&(this.bBox=null,k.innerHTML=g,s=!0);if(r&&f==="visibility"){i=r.length;while(i--)r[i].style[f]=g}s||(q?k[f]=g:bF(k,f,g))}}return u},clip:function(a){var b=this,c=a.members,d=b.element,e=d.parentNode;return c.push(b),b.destroyClip=function(){bD(c,b)},e&&e.className==="highcharts-tracker"&&!q&&bI(d,{visibility:L}),b.css(a.getCSS(b))},css:cx.prototype.htmlCss,safeRemoveChild:function(a){var b=a.parentNode;b&&bW(a)},destroy:function(){var a=this;return a.destroyClip&&a.destroyClip(),cx.prototype.destroy.apply(a)},empty:function(){var a=this.element,b=a.childNodes,c=b.length,d;while(c--)d=b[c],d.parentNode.removeChild(d)},on:function(a,b){return this.element["on"+a]=function(){var a=c.event;a.target=a.srcElement,b(a)},this},cutOffPath:function(a,b){var c;a=a.split(/[ ,]/),c=a.length;if(c===9||c===11)a[c-4]=a[c-2]=bw(a[c-2])-10*b;return a.join(" ")},shadow:function(a,b,c){var d=[],e,f=this.element,g=this.renderer,h,i=f.style,j,k=f.path,l,m;k&&typeof k.value!="string"&&(k="x"),m=k;if(a){for(e=1;e<=3;e++)l=7-2*e,c&&(m=this.cutOffPath(k.value,l+.5)),j=['<shape isShadow="true" strokeweight="',7-2*e,'" filled="false" path="',m,'" coordsize="10 10" style="',f.style.cssText,'" />'],h=bJ(g.prepVML(j),null,{left:bw(i.left)+1,top:bw(i.top)+1}),c&&(h.cutOff=l+1),j=['<stroke color="black" opacity="',.05*e,'"/>'],bJ(g.prepVML(j),null,null,h),b?b.element.appendChild(h):f.parentNode.insertBefore(h,f),d.push(h);this.shadows=d}return this}};cA=bK(cx,cA);var cB={Element:cA,isIE8:o.indexOf("MSIE 8.0")>-1,init:function(a,c,d){var e=this,f,g;e.alignedObjects=[],f=e.createElement(I),g=f.element,g.style.position=K,a.appendChild(f.element),e.box=g,e.boxWrapper=f,e.setSize(c,d,!1),b.namespaces.hcv||(b.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),b.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ")},isHidden:function(){return!this.box.offsetWidth},clipRect:function(a,b,c,d){var f=this.createElement();return bu(f,{members:[],left:a,top:b,width:c,height:d,getCSS:function(a){var b=a.inverted,c=this,d=c.top,f=c.left,g=f+c.width,h=d+c.height,i={clip:"rect("+e(b?f:d)+"px,"+e(b?h:g)+"px,"+e(b?g:h)+"px,"+e(b?d:f)+"px)"};return!b&&q&&a.element.nodeName!=="IMG"&&bu(i,{width:g+O,height:h+O}),i},updateClipping:function(){cc(f.members,function(a){a.css(f.getCSS(a))})}})},color:function(a,b,c){var e,f=/^rgba/,g,h,i=P;a&&a.linearGradient?h="gradient":a&&a.radialGradient&&(h="pattern");if(h){var j,k,l=a.linearGradient||a.radialGradient,n,o,p,q,r,s,t,u,v,w="",x=a.stops,y,z,A=[];y=x[0],z=x[x.length-1],y[0]>0&&x.unshift([0,y[1]]),z[0]<1&&x.push([1,z[1]]),cc(x,function(a,b){f.test(a[1])?(e=cw(a[1]),j=e.get("rgb"),k=e.get("a")):(j=a[1],k=1),A.push(a[0]*100+"% "+j),b?(t=k,u=j):(s=k,v=j)});if(h==="gradient")n=l.x1||l[0]||0,o=l.y1||l[1]||0,p=l.x2||l[2]||0,q=l.y2||l[3]||0,r=90-d.atan((q-o)/(p-n))*180/m;else{var B=l.r,C=B*2,D=l.cx,E=l.cy;w='src="http://code.highcharts.com/gfx/radial-gradient.png" size="'+C+","+C+'" '+'origin="0.5,0.5" '+'position="'+D+","+E+'" '+'color2="'+v+'" ',i=u}c==="fill"?(g=['<fill colors="'+A.join(",")+'" angle="',r,'" opacity="',t,'" o:opacity2="',s,'" type="',h,'" ',w,'focus="100%" method="any" />'],bJ(this.prepVML(g),null,null,b)):i=j}else if(f.test(a)&&b.tagName!=="IMG")e=cw(a),g=["<",c,' opacity="',e.get("a"),'"/>'],bJ(this.prepVML(g),null,null,b),i=e.get("rgb");else{var F=b.getElementsByTagName(c);F.length&&(F[0].opacity=1),i=a}return i},prepVML:function(a){var b="display:inline-block;behavior:url(#default#VML);",c=this.isIE8;return a=a.join(""),c?(a=a.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),a.indexOf('style="')===-1?a=a.replace("/>",' style="'+b+'" />'):a=a.replace('style="','style="'+b)):a=a.replace("<","<hcv:"),a},text:cy.prototype.html,path:function(a){var b={coordsize:"10 10"};return bz(a)?b.d=a:by(a)&&bu(b,a),this.createElement("shape").attr(b)},circle:function(a,b,c){return this.symbol("circle").attr({x:a-c,y:b-c,width:2*c,height:2*c})},g:function(a){var b,c;return a&&(c={className:M+a,"class":M+a}),b=this.createElement(I).attr(c),b},image:function(a,b,c,d,e){var f=this.createElement("img").attr({src:a});return arguments.length>1&&f.css({left:b,top:c,width:d,height:e}),f},rect:function(a,b,c,d,e,f){by(a)&&(b=a.y,c=a.width,d=a.height,f=a.strokeWidth,a=a.x);var g=this.symbol("rect");return g.r=e,g.attr(g.crisp(f,a,b,h(c,0),h(d,0)))},invertChild:function(a,b){var c=b.style;bI(a,{flip:"x",left:bw(c.width)-1,top:bw(c.height)-1,rotation:-90})},symbols:{arc:function(a,b,c,d,e){var f=e.start,g=e.end,h=e.r||c||d,i=k(f),j=l(f),n=k(g),o=l(g),p=e.innerR,q=.08/h,r=p&&.1/p||0,s;return g-f===0?["x"]:(2*m-g+f<q?n=-q:g-f<r&&(n=k(f+r)),s=["wa",a-h,b-h,a+h,b+h,a+h*i,b+h*j,a+h*n,b+h*o],e.open&&s.push(Q,a-p,b-p),s.push("at",a-p,b-p,a+p,b+p,a+p*n,b+p*o,a+p*i,b+p*j,"x","e"),s)},circle:function(a,b,c,d){return["wa",a,b,a+c,b+d,a+c,b+d/2,a+c,b+d/2,"e"]},rect:function(a,b,c,d,e){var f=a+c,g=b+d,h,j;return!bE(e)||!e.r?h=cy.prototype.symbols.square.apply(0,arguments):(j=i(e.r,c,d),h=[Q,a+j,b,R,f-j,b,"wa",f-2*j,b,f,b+2*j,f-j,b,f,b+j,R,f,g-j,"wa",f-2*j,g-2*j,f,g,f,g-j,f-j,g,R,a+j,g,"wa",a,g-2*j,a+2*j,g,a+j,g,a,g-j,R,a,b+j,"wa",a,b,a+2*j,b+2*j,a,b+j,a+j,b,"x","e"]),h}}};cz=function(){this.init.apply(this,arguments)},cz.prototype=cg(cy.prototype,cB),x=cz}var cC,cD;w&&(cC=function(){},cC.prototype.symbols={},cD=function(){function b(){var b=a.length,c;for(c=0;c<b;c++)a[c]();a=[]}var a=[];return{push:function(c,d){a.length===0&&cb(d,b),a.push(c)}}}()),x=cz||cC||cy,cE.prototype={addLabel:function(){var a=this,b=a.axis,c=b.options,d=b.chart,f=b.horiz,g=b.categories,i=a.pos,j=c.labels,k,l=b.tickPositions,m=g&&f&&g.length&&!j.step&&!j.staggerLines&&!j.rotation&&d.plotWidth/l.length||!f&&d.plotWidth/2,n=i===l[0],o=i===l[l.length-1],p,q,r=g&&bE(g[i])?g[i]:i,s=a.label,t=l.info,u;b.isDatetimeAxis&&t&&(u=c.dateTimeLabelFormats[t.higherRanks[i]||t.unitName]),a.isFirst=n,a.isLast=o,k=b.labelFormatter.call({axis:b,chart:d,isFirst:n,isLast:o,dateTimeLabelFormat:u,value:b.isLog?bY(bC(r)):r}),p=m&&{width:h(1,e(m-2*(j.padding||10)))+O},p=bu(p,j.style),bE(s)?s&&s.attr({text:k}).css(p):(q={align:j.align},bA(j.rotation)&&(q.rotation=j.rotation),a.label=bE(k)&&j.enabled?d.renderer.text(k,0,0,j.useHTML).attr(q).css(p).add(b.axisGroup):null)},getLabelSize:function(){var a=this.label,b=this.axis;return a?(this.labelBBox=a.getBBox(!0))[b.horiz?"height":"width"]:0},getLabelSides:function(){var a=this.labelBBox,b=this.axis,c=b.options,d=c.labels,e=a.width,f=e*{left:0,center:.5,right:1}[d.align]-d.x;return[-f,e-f]},handleOverflow:function(a,b){var c=!0,d=this.axis,e=d.chart,f=this.isFirst,g=this.isLast,h=b.x,i=d.reversed,j=d.tickPositions;if(f||g){var k=this.getLabelSides(),l=k[0],m=k[1],n=e.plotLeft,o=n+d.len,p=d.ticks[j[a+(f?1:-1)]],q=p&&p.label.xy.x+p.getLabelSides()[f?0:1];f&&!i||g&&i?h+l<n&&(h=n-l,p&&h+m>q&&(c=!1)):h+m>o&&(h=o-m,p&&h+l<q&&(c=!1)),b.x=h}return c},getPosition:function(a,b,c,d){var e=this.axis,f=e.chart,g=d&&f.oldChartHeight||f.chartHeight;return{x:a?e.translate(b+c,null,null,d)+e.transB:e.left+e.offset+(e.opposite?(d&&f.oldChartWidth||f.chartWidth)-e.right-e.left:0),y:a?g-e.bottom+e.offset-(e.opposite?e.height:0):g-e.translate(b+c,null,null,d)-e.transB}},getLabelPosition:function(a,b,c,d,e,f,g,h){var i=this.axis,j=i.transA,k=i.reversed,l=i.staggerLines;return a=a+e.x-(f&&d?f*j*(k?-1:1):0),b=b+e.y-(f&&!d?f*j*(k?1:-1):0),bE(e.y)||(b+=bw(c.styles.lineHeight)*.9-c.getBBox().height/2),l&&(b+=g/(h||1)%l*16),{x:a,y:b}},getMarkPath:function(a,b,c,d,e,f){return f.crispLine([Q,a,b,R,a+(e?0:-c),b+(e?c:0)],d)},render:function(b,c){var d=this,e=d.axis,f=e.options,g=e.chart,h=g.renderer,i=e.horiz,j=d.type,k=d.label,l=d.pos,m=f.labels,n=d.gridLine,o=j?j+"Grid":"grid",p=j?j+"Tick":"tick",q=f[o+"LineWidth"],r=f[o+"LineColor"],s=f[o+"LineDashStyle"],t=f[p+"Length"],u=f[p+"Width"]||0,v=f[p+"Color"],w=f[p+"Position"],x,y=d.mark,z,A=m.step,B,C=!0,D=f.categories&&f.tickmarkPlacement==="between"?.5:0,E=d.getPosition(i,l,D,c),F=E.x,G=E.y,H=e.staggerLines;q&&(x=e.getPlotLinePath(l+D,q,c),n===a&&(B={stroke:r,"stroke-width":q},s&&(B.dashstyle=s),j||(B.zIndex=1),d.gridLine=n=q?h.path(x).attr(B).add(e.gridGroup):null),!c&&n&&x&&n[d.isNew?"attr":"animate"]({d:x})),u&&(w==="inside"&&(t=-t),e.opposite&&(t=-t),z=d.getMarkPath(F,G,t,u,i,h),y?y.animate({d:z}):d.mark=h.path(z).attr({stroke:v,"stroke-width":u}).add(e.axisGroup)),k&&!isNaN(F)&&(k.xy=E=d.getLabelPosition(F,G,k,i,m,D,b,A),d.isFirst&&!bH(f.showFirstLabel,1)||d.isLast&&!bH(f.showLastLabel,1)?C=!1:!H&&i&&m.overflow==="justify"&&!d.handleOverflow(b,E)&&(C=!1),A&&b%A&&(C=!1),C?(k[d.isNew?"attr":"animate"](E),k.show(),d.isNew=!1):k.hide())},destroy:function(){bV(this,this.axis)}},cF.prototype={render:function(){var a=this,b=a.axis,c=b.horiz,d=(b.pointRange||0)/2,e=a.options,f=e.label,g=a.label,j=e.width,k=e.to,l=e.from,m=bE(l)&&bE(k),n=e.value,o=e.dashStyle,p=a.svgElem,q=[],r,s,t,u,v,w,x=e.color,y=e.zIndex,z=e.events,A,B=b.chart.renderer;b.isLog&&(l=bB(l),k=bB(k),n=bB(n));if(j)q=b.getPlotLinePath(n,j),A={stroke:x,"stroke-width":j},o&&(A.dashstyle=o);else if(m)l=h(l,b.min-d),k=i(k,b.max+d),q=b.getPlotBandPath(l,k,e),A={fill:x},e.borderWidth&&(A.stroke=e.borderColor,A["stroke-width"]=e.borderWidth);else return;bE(y)&&(A.zIndex=y);if(p)q?p.animate({d:q},null,p.onGetPath):(p.hide(),p.onGetPath=function(){p.show()});else if(q&&q.length){a.svgElem=p=B.path(q).attr(A).add();if(z){r=function(b){p.on(b,function(c){z[b].apply(a,[c])})};for(s in z)r(s)}}return f&&bE(f.text)&&q&&q.length&&b.width>0&&b.height>0?(f=cg({align:c&&m&&"center",x:c?!m&&4:10,verticalAlign:!c&&m&&"middle",y:c?m?16:10:m?6:-4,rotation:c&&!m&&90},f),g||(a.label=g=B.text(f.text,0,0).attr({align:f.textAlign||f.align,rotation:f.rotation,zIndex:y}).css(f.style).add()),t=[q[1],q[4],bH(q[6],q[1])],u=[q[2],q[5],bH(q[7],q[2])],v=bT(t),w=bT(u),g.align(f,!1,{x:v,y:w,width:bU(t)-v,height:bU(u)-w}),g.show()):g&&g.hide(),a},destroy:function(){var a=this,b=a.axis;bD(b.plotLinesAndBands,a),bV(a,this.axis)}},cG.prototype={destroy:function(){bV(this,this.axis)},setTotal:function(a){this.total=a,this.cum=a},render:function(a){var b=this.options.formatter.call(this);this.label?this.label.attr({text:b,visibility:L}):this.label=this.axis.chart.renderer.text(b,0,0).css(this.options.style).attr({align:this.textAlign,rotation:this.options.rotation,visibility:L}).add(a)},setOffset:function(a,b){var c=this,d=c.axis,e=d.chart,f=e.inverted,g=this.isNegative,h=d.translate(this.total,0,0,0,1),i=d.translate(0),k=j(h-i),l=e.xAxis[0].translate(this.x)+a,m=e.plotHeight,n={x:f?g?h:h-k:l,y:f?m-l-b:g?m-h-k:m-h,width:f?k:b,height:f?b:k};this.label&&this.label.align(this.alignOptions,null,n).attr({visibility:N})}},cH.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:cq,lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:5,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#6D869F",fontWeight:"bold"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{align:"right",x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Y-values"},stackLabels:{enabled:!1,formatter:function(){return this.total},style:cq.style}},defaultLeftAxisOptions:{labels:{align:"right",x:-8,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{align:"left",x:8,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{align:"center",x:0,y:14},title:{rotation:0}},defaultTopAxisOptions:{labels:{align:"center",x:0,y:-5},title:{rotation:0}},init:function(b,c){var d=c.isX,e=this;e.horiz=b.inverted?!d:d,e.isXAxis=d,e.xOrY=d?"x":"y",e.opposite=c.opposite,e.side=e.horiz?e.opposite?0:2:e.opposite?1:3,e.setOptions(c);var f=this.options,g=f.type,h=g==="datetime";e.labelFormatter=f.labels.formatter||e.defaultLabelFormatter,e.staggerLines=e.horiz&&f.labels.staggerLines,e.userOptions=c,e.minPixelPadding=0,e.chart=b,e.reversed=f.reversed,e.categories=f.categories,e.isLog=g==="logarithmic",e.isLinked=bE(f.linkedTo),e.isDatetimeAxis=h,e.ticks={},e.minorTicks={},e.plotLinesAndBands=[],e.alternateBands={},e.len=0,e.minRange=e.userMinRange=f.minRange||f.maxZoom,e.range=f.range,e.offset=f.offset||0,e.stacks={},e.max=null,e.min=null;var i,j=e.options.events;b.axes.push(e),b[d?"xAxis":"yAxis"].push(e),e.series=[],b.inverted&&d&&e.reversed===a&&(e.reversed=!0),e.removePlotBand=e.removePlotBandOrLine,e.removePlotLine=e.removePlotBandOrLine,e.addPlotBand=e.addPlotBandOrLine,e.addPlotLine=e.addPlotBandOrLine;for(i in j)ch(e,i,j[i]);e.isLog&&(e.val2lin=bB,e.lin2val=bC)},setOptions:function(a){this.options=cg(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],a)},defaultLabelFormatter:function(){var a=this.axis,b=this.value,c=a.categories,d=a.tickInterval,e=this.dateTimeLabelFormat,f;return c?f=b:e?f=D(e,b):d%1e6===0?f=b/1e6+"M":d%1e3===0?f=b/1e3+"k":b>=1e3?f=bM(b,0):f=bM(b,-1),f},getSeriesExtremes:function(){var b=this,c=b.chart,d=b.stacks,e=[],f=[],g;b.dataMin=b.dataMax=null,cc(b.series,function(j){if(j.visible||!c.options.chart.ignoreHiddenSeries){var k=j.options,l,m,n,o,p,q,r,s,t,u,v=k.threshold,w,x=[],y=0;b.isLog&&v<=0&&(v=k.threshold=null);if(b.isXAxis)r=j.xData,r.length&&(b.dataMin=i(bH(b.dataMin,r[0]),bT(r)),b.dataMax=h(bH(b.dataMax,r[0]),bU(r)));else{var z,A,B,C=j.cropped,D=j.xAxis.getExtremes(),E,F=!!j.modifyValue;l=k.stacking,b.usePercentage=l==="percent",l&&(p=k.stack,o=j.type+bH(p,""),q="-"+o,j.stackKey=o,m=e[o]||[],e[o]=m,n=f[q]||[],f[q]=n),b.usePercentage&&(b.dataMin=0,b.dataMax=99),r=j.processedXData,s=j.processedYData,w=s.length;for(g=0;g<w;g++){t=r[g],u=s[g];if(u!==null&&u!==a){l?(z=u<v,A=z?n:m,B=z?q:o,u=A[t]=bE(A[t])?A[t]+u:u,d[B]||(d[B]={}),d[B][t]||(d[B][t]=new cG(b,b.options.stackLabels,z,t,p)),d[B][t].setTotal(u)):F&&(u=j.modifyValue(u));if(C||(r[g+1]||t)>=D.min&&(r[g-1]||t)<=D.max){E=u.length;if(E)while(E--)u[E]!==null&&(x[y++]=u[E]);else x[y++]=u}}}!b.usePercentage&&x.length&&(b.dataMin=i(bH(b.dataMin,x[0]),bT(x)),b.dataMax=h(bH(b.dataMax,x[0]),bU(x))),bE(v)&&(b.dataMin>=v?(b.dataMin=v,b.ignoreMinPadding=!0):b.dataMax<v&&(b.dataMax=v,b.ignoreMaxPadding=!0))}}})},translate:function(a,b,c,d,e){var f=this,g=f.len,h=1,i=0,j=d?f.oldTransA:f.transA,k=d?f.oldMin:f.min,l,m=f.options.ordinal||f.isLog&&e;return j||(j=f.transA),c&&(h*=-1,i=g),f.reversed&&(h*=-1,i-=h*g),b?(f.reversed&&(a=g-a),l=a/j+k,m&&(l=f.lin2val(l))):(m&&(a=f.val2lin(a)),l=h*(a-k)*j+i+h*f.minPixelPadding),l},getPlotLinePath:function(a,b,c){var d=this,f=d.chart,g=d.left,h=d.top,i,j,k,l,m=d.translate(a,null,null,c),n=c&&f.oldChartHeight||f.chartHeight,o=c&&f.oldChartWidth||f.chartWidth,p,q=d.transB;i=k=e(m+q),j=l=e(n-m-q);if(isNaN(m))p=!0;else if(d.horiz){j=h,l=n-d.bottom;if(i<g||i>g+d.width)p=!0}else{i=g,k=o-d.right;if(j<h||j>h+d.height)p=!0}return p?null:f.renderer.crispLine([Q,i,j,R,k,l],b||0)},getPlotBandPath:function(a,b){var c=this.getPlotLinePath(b),d=this.getPlotLinePath(a);return d&&c?d.push(c[4],c[5],c[1],c[2]):d=null,d},getLinearTickPositions:function(a,b,c){var d,e,h=bY(f(b/a)*a),i=bY(g(c/a)*a),j=[];d=h;while(d<=i){j.push(d),d=bY(d+a);if(d===e)break;e=d}return j},getLogTickPositions:function(a,b,c,g){var h=this,i=h.options,j=h.len,k=[];g||(h._minorAutoInterval=null);if(a>=.5)a=e(a),k=h.getLinearTickPositions(a,b,c);else if(a>=.08){var l=f(b),m,n,o,p,q,r,s;a>.3?m=[1,2,4]:a>.15?m=[1,2,4,6,8]:m=[1,2,3,4,5,6,7,8,9];for(n=l;n<c+1&&!s;n++){p=m.length;for(o=0;o<p&&!s;o++)q=bB(bC(n)*m[o]),q>b&&k.push(r),r>c&&(s=!0),r=q}}else{var t=bC(b),u=bC(c),v=i[g?"minorTickInterval":"tickInterval"],w=v==="auto"?null:v,x=i.tickPixelInterval/(g?5:1),y=g?j/h.tickPositions.length:j;a=bH(w,h._minorAutoInterval,(u-t)*x/(y||1)),a=bO(a,null,d.pow(10,f(d.log(a)/d.LN10))),k=cf(h.getLinearTickPositions(a,t,u),bB),g||(h._minorAutoInterval=a/5)}return g||(h.tickInterval=a),k},getMinorTickPositions:function(){var a=this,b=a.tickPositions,c=a.minorTickInterval,d=[],e,f,g;if(a.isLog){g=b.length;for(f=1;f<g;f++)d=d.concat(a.getLogTickPositions(c,b[f-1],b[f],!0))}else for(e=a.min+(b[0]-a.min)%c;e<=a.max;e+=c)d.push(e);return d},adjustForMinRange:function(){var b=this,c=b.options,d=b.min,e=b.max,f,g=b.dataMax-b.dataMin>=b.minRange,h,j,k,l,m,n,o;b.isXAxis&&b.minRange===a&&!b.isLog&&(bE(c.min)||bE(c.max)?b.minRange=null:(cc(b.series,function(b){l=b.xData,m=b.xIncrement?1:l.length-1;for(j=m;j>0;j--){k=l[j]-l[j-1];if(h===a||k<h)h=k}}),b.minRange=i(h*5,b.dataMax-b.dataMin)));if(e-d<b.minRange){var p=b.minRange;f=(p-e+d)/2,n=[d-f,bH(c.min,d-f)],g&&(n[2]=b.dataMin),d=bU(n),o=[d+p,bH(c.max,d+p)],g&&(o[2]=b.dataMax),e=bT(o),e-d<p&&(n[0]=e-p,n[1]=bH(c.min,e-p),d=bU(n))}b.min=d,b.max=e},setAxisTranslation:function(){var a=this,b=a.max-a.min,c=0,d,e,f=a.transA;a.isXAxis&&(a.isLinked?c=a.linkedParent.pointRange:cc(a.series,function(a){c=h(c,a.pointRange),e=a.closestPointRange,!a.noSharedTooltip&&bE(e)&&(d=bE(d)?i(d,e):e)}),a.pointRange=c,a.closestPointRange=d),a.oldTransA=f,a.translationSlope=a.transA=f=a.len/(b+c||1),a.transB=a.horiz?a.left:a.bottom,a.minPixelPadding=f*(c/2)},setTickPositions:function(a){var b=this,c=b.chart,e=b.options,g=b.isLog,j=b.isDatetimeAxis,k=b.isXAxis,l=b.isLinked,m=b.options.tickPositioner,n,o=e.maxPadding,p=e.minPadding,q,r,s=e.tickInterval,t=e.tickPixelInterval,u,v=b.categories;l?(b.linkedParent=c[k?"xAxis":"yAxis"][e.linkedTo],r=b.linkedParent.getExtremes(),b.min=bH(r.min,r.dataMin),b.max=bH(r.max,r.dataMax),e.type!==b.linkedParent.options.type&&bX(11,1)):(b.min=bH(b.userMin,e.min,b.dataMin),b.max=bH(b.userMax,e.max,b.dataMax)),g&&(!a&&i(b.min,bH(b.dataMin,b.min))<=0&&bX(10,1),b.min=bY(bB(b.min)),b.max=bY(bB(b.max))),b.range&&(b.userMin=b.min=h(b.min,b.max-b.range),b.userMax=b.max,a&&(b.range=null)),b.adjustForMinRange(),!v&&!b.usePercentage&&!l&&bE(b.min)&&bE(b.max)&&(q=b.max-b.min||1,!bE(e.min)&&!bE(b.userMin)&&p&&(b.dataMin<0||!b.ignoreMinPadding)&&(b.min-=q*p),!bE(e.max)&&!bE(b.userMax)&&o&&(b.dataMax>0||!b.ignoreMaxPadding)&&(b.max+=q*o)),b.min===b.max||b.min===undefined||b.max===undefined?b.tickInterval=1:l&&!s&&t===b.linkedParent.options.tickPixelInterval?b.tickInterval=b.linkedParent.tickInterval:b.tickInterval=bH(s,v?1:(b.max-b.min)*t/(b.len||1)),k&&!a&&cc(b.series,function(a){a.processData(b.min!==b.oldMin||b.max!==b.oldMax)}),b.setAxisTranslation(),b.beforeSetTickPositions&&b.beforeSetTickPositions(),b.postProcessTickInterval&&(b.tickInterval=b.postProcessTickInterval(b.tickInterval)),!j&&!g&&(n=d.pow(10,f(d.log(b.tickInterval)/d.LN10)),bE(e.tickInterval)||(b.tickInterval=bO(b.tickInterval,null,n,e))),b.minorTickInterval=e.minorTickInterval==="auto"&&b.tickInterval?b.tickInterval/5:e.minorTickInterval,b.tickPositions=u=e.tickPositions||m&&m.apply(b,[b.min,b.max]),u||(j?u=(b.getNonLinearTimeTicks||bQ)(bP(b.tickInterval,e.units),b.min,b.max,e.startOfWeek,b.ordinalPositions,b.closestPointRange,!0):g?u=b.getLogTickPositions(b.tickInterval,b.min,b.max):u=b.getLinearTickPositions(b.tickInterval,b.min,b.max),b.tickPositions=u);if(!l){var w=u[0],x=u[u.length-1];e.startOnTick?b.min=w:b.min>w&&u.shift(),e.endOnTick?b.max=x:b.max<x&&u.pop()}},setMaxTicks:function(){var a=this.chart,b=a.maxTicks,c=this.tickPositions,d=this.xOrY;b||(b={x:0,y:0}),!this.isLinked&&!this.isDatetimeAxis&&c.length>b[d]&&this.options.alignTicks!==!1&&(b[d]=c.length),a.maxTicks=b},adjustTickAmount:function(){var a=this,b=a.chart,c=a.xOrY,d=a.tickPositions,e=b.maxTicks;if(e&&e[c]&&!a.isDatetimeAxis&&!a.categories&&!a.isLinked&&a.options.alignTicks!==!1){var f=a.tickAmount,g=d.length,h;a.tickAmount=h=e[c];if(g<h){while(d.length<h)d.push(bY(d[d.length-1]+a.tickInterval));a.transA*=(g-1)/(h-1),a.max=d[d.length-1]}bE(f)&&h!==f&&(a.isDirty=!0)}},setScale:function(){var a=this,b=a.stacks,c,d,e,f;a.oldMin=a.min,a.oldMax=a.max,a.oldAxisLength=a.len,a.setAxisSize(),f=a.len!==a.oldAxisLength,cc(a.series,function(a){if(a.isDirtyData||a.isDirty||a.xAxis.isDirty)e=!0});if(f||e||a.isLinked||a.userMin!==a.oldUserMin||a.userMax!==a.oldUserMax)a.getSeriesExtremes(),a.setTickPositions(),a.oldUserMin=a.userMin,a.oldUserMax=a.userMax,a.isDirty||(a.isDirty=f||a.min!==a.oldMin||a.max!==a.oldMax);if(!a.isXAxis)for(c in b)for(d in b[c])b[c][d].cum=b[c][d].total;a.setMaxTicks()},setExtremes:function(a,b,c,d,e){var f=this,g=f.chart;c=bH(c,!0),e=bu(e,{min:a,max:b}),cj(f,"setExtremes",e,function(){f.userMin=a,f.userMax=b,f.isDirtyExtremes=!0,c&&g.redraw(d)})},setAxisSize:function(){var a=this,b=a.chart,c=a.options,d=c.offsetLeft||0,e=c.offsetRight||0;a.left=bH(c.left,b.plotLeft+d),a.top=bH(c.top,b.plotTop),a.width=bH(c.width,b.plotWidth-d+e),a.height=bH(c.height,b.plotHeight),a.bottom=b.chartHeight-a.height-a.top,a.right=b.chartWidth-a.width-a.left,a.len=h(a.horiz?a.width:a.height,0)},getExtremes:function(){var a=this,b=a.isLog;return{min:b?bY(bC(a.min)):a.min,max:b?bY(bC(a.max)):a.max,dataMin:a.dataMin,dataMax:a.dataMax,userMin:a.userMin,userMax:a.userMax}},getThreshold:function(a){var b=this,c=b.isLog,d=c?bC(b.min):b.min,e=c?bC(b.max):b.max;return d>a||a===null?a=d:e<a&&(a=e),b.translate(a,0,1,0,1)},addPlotBandOrLine:function(a){var b=(new cF(this,a)).render();return this.plotLinesAndBands.push(b),b},getOffset:function(){var a=this,b=a.chart,c=b.renderer,d=a.options,e=a.tickPositions,f=a.ticks,g=a.horiz,i=a.side,j,k,l=0,m,n=0,o=d.title,p=d.labels,q=0,r=b.axisOffset,s=[-1,1,1,-1][i],t;a.hasData=j=a.series.length&&bE(a.min)&&bE(a.max),a.showAxis=k=j||bH(d.showEmpty,!0),a.axisGroup||(a.axisGroup=c.g("axis").attr({zIndex:d.zIndex||7}).add(),a.gridGroup=c.g("grid").attr({zIndex:d.gridZIndex||1}).add());if(j||a.isLinked)cc(e,function(b){f[b]?f[b].addLabel():f[b]=new cE(a,b)}),cc(e,function(a){if(i===0||i===2||{1:"left",3:"right"}[i]===p.align)q=h(f[a].getLabelSize(),q)}),a.staggerLines&&(q+=(a.staggerLines-1)*16);else for(t in f)f[t].destroy(),delete f[t];o&&o.text&&(a.axisTitle||(a.axisTitle=c.text(o.text,0,0,o.useHTML).attr({zIndex:7,rotation:o.rotation||0,align:o.textAlign||{low:"left",middle:"center",high:"right"}[o.align]}).css(o.style).add(a.axisGroup),a.axisTitle.isNew=!0),k&&(l=a.axisTitle.getBBox()[g?"height":"width"],n=bH(o.margin,g?5:10),m=o.offset),a.axisTitle[k?"show":"hide"]()),a.offset=s*bH(d.offset,r[i]),a.axisTitleMargin=bH(m,q+n+(i!==2&&q&&s*d.labels[g?"y":"x"])),r[i]=h(r[i],a.axisTitleMargin+l+s*a.offset)},getLinePath:function(a){var b=this.chart,c=this.opposite,d=this.offset,e=this.horiz,f=this.left+(c?this.width:0)+d,g=b.chartHeight-this.bottom-(c?this.height:0)+d;return b.renderer.crispLine([Q,e?this.left:f,e?g:this.top,R,e?b.chartWidth-this.right:f,e?g:b.chartHeight-this.bottom],a)},getTitlePosition
:function(){var a=this.horiz,b=this.left,c=this.top,d=this.len,e=this.options.title,f=a?b:c,g=this.opposite,h=this.offset,i=bw(e.style.fontSize||12),j={low:f+(a?0:d),middle:f+d/2,high:f+(a?d:0)}[e.align],k=(a?c+this.height:b)+(a?1:-1)*(g?-1:1)*this.axisTitleMargin+(this.side===2?i:0);return{x:a?j:k+(g?this.width:0)+h+(e.x||0),y:a?k-(g?this.height:0)+h:j+(e.y||0)}},render:function(){var b=this,c=b.chart,d=c.renderer,e=b.options,f=b.isLog,g=b.isLinked,h=b.tickPositions,i=b.axisTitle,j=b.stacks,k=b.ticks,l=b.minorTicks,m=b.alternateBands,n=e.stackLabels,o=e.alternateGridColor,p=e.lineWidth,q,r=c.hasRendered,s=r&&bE(b.oldMin)&&!isNaN(b.oldMin),t=b.hasData,u=b.showAxis,v,w;if(t||g)b.minorTickInterval&&!b.categories&&cc(b.getMinorTickPositions(),function(a){l[a]||(l[a]=new cE(b,a,"minor")),s&&l[a].isNew&&l[a].render(null,!0),l[a].isActive=!0,l[a].render()}),cc(h.slice(1).concat([h[0]]),function(a,c){c=c===h.length-1?0:c+1;if(!g||a>=b.min&&a<=b.max)k[a]||(k[a]=new cE(b,a)),s&&k[a].isNew&&k[a].render(c,!0),k[a].isActive=!0,k[a].render(c)}),o&&cc(h,function(c,d){d%2===0&&c<b.max&&(m[c]||(m[c]=new cF(b)),v=c,w=h[d+1]!==a?h[d+1]:b.max,m[c].options={from:f?bC(v):v,to:f?bC(w):w,color:o},m[c].render(),m[c].isActive=!0)}),b._addedPlotLB||(cc((e.plotLines||[]).concat(e.plotBands||[]),function(a){b.addPlotBandOrLine(a)}),b._addedPlotLB=!0);cc([k,l,m],function(a){var b;for(b in a)a[b].isActive?a[b].isActive=!1:(a[b].destroy(),delete a[b])}),p&&(q=b.getLinePath(p),b.axisLine?b.axisLine.animate({d:q}):b.axisLine=d.path(q).attr({stroke:e.lineColor,"stroke-width":p,zIndex:7}).add(),b.axisLine[u?"show":"hide"]()),i&&u&&(i[i.isNew?"attr":"animate"](b.getTitlePosition()),i.isNew=!1);if(n&&n.enabled){var x,y,z,A=b.stackTotalGroup;A||(b.stackTotalGroup=A=d.g("stack-labels").attr({visibility:N,zIndex:6}).add()),A.translate(c.plotLeft,c.plotTop);for(x in j){y=j[x];for(z in y)y[z].render(A)}}b.isDirty=!1},removePlotBandOrLine:function(a){var b=this.plotLinesAndBands,c=b.length;while(c--)b[c].id===a&&b[c].destroy()},setTitle:function(a,b){var c=this,d=c.chart,e=c.options,f;e.title=cg(e.title,a),c.axisTitle=f&&f.destroy(),c.isDirty=!0,bH(b,!0)&&d.redraw()},redraw:function(){var a=this,b=a.chart;b.tracker.resetTracker&&b.tracker.resetTracker(!0),a.render(),cc(a.plotLinesAndBands,function(a){a.render()}),cc(a.series,function(a){a.isDirty=!0})},setCategories:function(a,b){var c=this,d=c.chart;c.categories=c.userOptions.categories=a,cc(c.series,function(a){a.translate(),a.setTooltipPoints(!0)}),c.isDirty=!0,bH(b,!0)&&d.redraw()},destroy:function(){var a=this,b=a.stacks,c;ci(a);for(c in b)bV(b[c]),b[c]=null;cc([a.ticks,a.minorTicks,a.alternateBands,a.plotLinesAndBands],function(a){bV(a)}),cc(["stackTotalGroup","axisLine","axisGroup","gridGroup","axisTitle"],function(b){a[b]&&(a[b]=a[b].destroy())})}},cI.prototype={destroy:function(){cc(this.crosshairs,function(a){a&&a.destroy()}),this.label&&(this.label=this.label.destroy())},move:function(a,b){var c=this;c.currentX=c.tooltipIsHidden?a:(2*c.currentX+a)/3,c.currentY=c.tooltipIsHidden?b:(c.currentY+b)/2,c.label.attr({x:c.currentX,y:c.currentY}),j(a-c.currentX)>1||j(b-c.currentY)>1?c.tooltipTick=function(){c.move(a,b)}:c.tooltipTick=null},hide:function(){if(!this.tooltipIsHidden){var a=this.chart.hoverPoints;this.label.hide(),a&&cc(a,function(a){a.setState()}),this.chart.hoverPoints=null,this.tooltipIsHidden=!0}},hideCrosshairs:function(){cc(this.crosshairs,function(a){a&&a.hide()})},getAnchor:function(a,b){var c,d=this.chart,f=d.inverted,g=0,h=0;return a=bG(a),c=a[0].tooltipPos,c||(cc(a,function(a){g+=a.plotX,h+=a.plotLow?(a.plotLow+a.plotHigh)/2:a.plotY}),g/=a.length,h/=a.length,c=[f?d.plotWidth-h:g,this.shared&&!f&&a.length>1&&b?b.chartY-d.plotTop:f?d.plotHeight-g:h]),cf(c,e)},getPosition:function(a,b,c){var d=this.chart,e=d.plotLeft,f=d.plotTop,g=d.plotWidth,i=d.plotHeight,j=bH(this.options.distance,12),k=c.plotX,l=c.plotY,m=k+e+(d.inverted?j:-a-j),n=l-b+f+15,o;return m<7&&(m=e+k+j),m+a>e+g&&(m-=m+a-(e+g),n=l-b+f-j,o=!0),n<f+5&&(n=f+5,o&&l>=n&&l<=n+b&&(n=l+f+j)),n+b>f+i&&(n=h(f,f+i-b-j)),{x:m,y:n}},refresh:function(a,b){function h(){var a=this,b=a.points||bG(a),c=b[0].series,d;return d=[c.tooltipHeaderFormatter(b[0].key)],cc(b,function(a){c=a.series,d.push(c.tooltipFormatter&&c.tooltipFormatter(a)||a.point.tooltipFormatter(c.tooltipOptions.pointFormat))}),d.push(g.footerFormat||""),d.join("")}var c=this,d=c.chart,f=c.label,g=c.options,i,j,k,l,m={},n,o=[],p=g.formatter||h,q=d.hoverPoints,r,s,t=g.crosshairs,u=c.shared,v;l=c.getAnchor(a,b),i=l[0],j=l[1],u&&(!a.series||!a.series.noSharedTooltip)?(q&&cc(q,function(a){a.setState()}),d.hoverPoints=a,cc(a,function(a){a.setState(U),o.push(a.getLabelConfig())}),m={x:a[0].category,y:a[0].y},m.points=o,a=a[0]):m=a.getLabelConfig(),n=p.call(m),v=a.series,k=u||!v.isCartesian||v.tooltipOutsidePlot||d.isInsidePlot(i,j),n===!1||!k?this.hide():(c.tooltipIsHidden&&f.show(),f.attr({text:n}),s=g.borderColor||a.color||v.color||"#606060",f.attr({stroke:s}),r=(g.positioner||c.getPosition).call(c,f.width,f.height,{plotX:i,plotY:j}),c.move(e(r.x),e(r.y)),c.tooltipIsHidden=!1);if(t){t=bG(t);var w,x=t.length,y,z;while(x--)z=a.series[x?"yAxis":"xAxis"],t[x]&&z&&(w=z.getPlotLinePath(x?bH(a.stackY,a.y):a.x,1),c.crosshairs[x]?c.crosshairs[x].attr({d:w,visibility:N}):(y={"stroke-width":t[x].width||1,stroke:t[x].color||"#C0C0C0",zIndex:t[x].zIndex||2},t[x].dashStyle&&(y.dashstyle=t[x].dashStyle),c.crosshairs[x]=d.renderer.path(w).attr(y).add()))}cj(d,"tooltipRefresh",{text:n,x:i+d.plotLeft,y:j+d.plotTop,borderColor:s})},tick:function(){this.tooltipTick&&this.tooltipTick()}},cJ.prototype={normalizeMouseEvent:function(b){var d,f,g,h;return b=b||c.event,b.target||(b.target=b.srcElement),b.originalEvent&&(b=b.originalEvent),b.event&&(b=b.event),h=b.touches?b.touches.item(0):b,this.chartPosition=d=ce(this.chart.container),h.pageX===a?(f=b.x,g=b.y):(f=h.pageX-d.left,g=h.pageY-d.top),bu(b,{chartX:e(f),chartY:e(g)})},getMouseCoordinates:function(a){var b={xAxis:[],yAxis:[]},c=this.chart;return cc(c.axes,function(d){var e=d.isXAxis,f=c.inverted?!e:e;b[e?"xAxis":"yAxis"].push({axis:d,value:d.translate(f?a.chartX-c.plotLeft:c.plotHeight-a.chartY+c.plotTop,!0)})}),b},onmousemove:function(a){var b=this,c=b.chart,d=c.series,e,f,g=c.hoverPoint,h=c.hoverSeries,k,l,m=c.chartWidth,n=c.inverted?c.plotHeight+c.plotTop-a.chartY:a.chartX-c.plotLeft;if(c.tooltip&&b.options.tooltip.shared&&(!h||!h.noSharedTooltip)){f=[],k=d.length;for(l=0;l<k;l++)d[l].visible&&d[l].options.enableMouseTracking!==!1&&!d[l].noSharedTooltip&&d[l].tooltipPoints.length&&(e=d[l].tooltipPoints[n],e._dist=j(n-e.plotX),m=i(m,e._dist),f.push(e));k=f.length;while(k--)f[k]._dist>m&&f.splice(k,1);f.length&&f[0].plotX!==b.hoverX&&(c.tooltip.refresh(f,a),b.hoverX=f[0].plotX)}h&&h.tracker&&(e=h.tooltipPoints[n],e&&e!==g&&e.onMouseOver())},resetTracker:function(b){var c=this,d=c.chart,e=d.hoverSeries,f=d.hoverPoint,g=d.hoverPoints||f,h=d.tooltip;b=b&&h&&g,b&&bG(g)[0].plotX===a&&(b=!1),b?h.refresh(g):(f&&f.onMouseOut(),e&&e.onMouseOut(),h&&(h.hide(),h.hideCrosshairs()),c.hoverX=null)},setDOMEvents:function(){function l(){if(c.selectionMarker){var a={xAxis:[],yAxis:[]},g=c.selectionMarker.getBBox(),j=g.x-d.plotLeft,k=g.y-d.plotTop,m;f&&(cc(d.axes,function(b){if(b.options.zoomEnabled!==!1){var c=b.isXAxis,e=d.inverted?!c:c,f=b.translate(e?j:d.plotHeight-k-g.height,!0,0,0,1),l=b.translate(e?j+g.width:d.plotHeight-k,!0,0,0,1);!isNaN(f)&&!isNaN(l)&&(a[c?"xAxis":"yAxis"].push({axis:b,min:i(f,l),max:h(f,l)}),m=!0)}}),m&&cj(d,"selection",a,function(a){d.zoom(a)})),c.selectionMarker=c.selectionMarker.destroy()}d&&(bI(e,{cursor:"auto"}),d.cancelClick=f,d.mouseIsDown=f=!1),ci(b,y?"touchend":"mouseup",l)}var a=!0,c=this,d=c.chart,e=d.container,f,g=c.zoomX&&!d.inverted||c.zoomY&&d.inverted,k=c.zoomY&&!d.inverted||c.zoomX&&d.inverted;c.hideTooltipOnMouseMove=function(a){ck(a),c.chartPosition&&d.hoverSeries&&d.hoverSeries.isCartesian&&!d.isInsidePlot(a.pageX-c.chartPosition.left-d.plotLeft,a.pageY-c.chartPosition.top-d.plotTop)&&c.resetTracker()},c.hideTooltipOnMouseLeave=function(){c.resetTracker(),c.chartPosition=null},e.onmousedown=function(a){a=c.normalizeMouseEvent(a),!y&&a.preventDefault&&a.preventDefault(),d.mouseIsDown=!0,d.cancelClick=!1,d.mouseDownX=c.mouseDownX=a.chartX,c.mouseDownY=a.chartY,ch(b,y?"touchend":"mouseup",l)};var m=function(b){if(b&&b.touches&&b.touches.length>1)return;b=c.normalizeMouseEvent(b),y||(b.returnValue=!1);var e=b.chartX,h=b.chartY,i=!d.isInsidePlot(e-d.plotLeft,h-d.plotTop);y&&b.type==="touchstart"&&(bF(b.target,"isTracker")?d.runTrackerClick||b.preventDefault():!d.runChartClick&&!i&&b.preventDefault()),i&&(e<d.plotLeft?e=d.plotLeft:e>d.plotLeft+d.plotWidth&&(e=d.plotLeft+d.plotWidth),h<d.plotTop?h=d.plotTop:h>d.plotTop+d.plotHeight&&(h=d.plotTop+d.plotHeight));if(d.mouseIsDown&&b.type!=="touchstart"){f=Math.sqrt(Math.pow(c.mouseDownX-e,2)+Math.pow(c.mouseDownY-h,2));if(f>10){var l=d.isInsidePlot(c.mouseDownX-d.plotLeft,c.mouseDownY-d.plotTop);d.hasCartesianSeries&&(c.zoomX||c.zoomY)&&l&&(c.selectionMarker||(c.selectionMarker=d.renderer.rect(d.plotLeft,d.plotTop,g?1:d.plotWidth,k?1:d.plotHeight,0).attr({fill:c.options.chart.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add()));if(c.selectionMarker&&g){var m=e-c.mouseDownX;c.selectionMarker.attr({width:j(m),x:(m>0?0:m)+c.mouseDownX})}if(c.selectionMarker&&k){var n=h-c.mouseDownY;c.selectionMarker.attr({height:j(n),y:(n>0?0:n)+c.mouseDownY})}l&&!c.selectionMarker&&c.options.chart.panning&&d.pan(e)}}else i||c.onmousemove(b);return a=i,i||!d.hasCartesianSeries};e.onmousemove=m,ch(e,"mouseleave",c.hideTooltipOnMouseLeave),ch(b,"mousemove",c.hideTooltipOnMouseMove),e.ontouchstart=function(a){(c.zoomX||c.zoomY)&&e.onmousedown(a),m(a)},e.ontouchmove=m,e.ontouchend=function(){f&&c.resetTracker()},e.onclick=function(a){var b=d.hoverPoint,e,f;a=c.normalizeMouseEvent(a),a.cancelBubble=!0,d.cancelClick||(b&&(bF(a.target,"isTracker")||bF(a.target.parentNode,"isTracker"))?(e=b.plotX,f=b.plotY,bu(b,{pageX:c.chartPosition.left+d.plotLeft+(d.inverted?d.plotWidth-f:e),pageY:c.chartPosition.top+d.plotTop+(d.inverted?d.plotHeight-e:f)}),cj(b.series,"click",bu(a,{point:b})),b.firePointEvent("click",a)):(bu(a,c.getMouseCoordinates(a)),d.isInsidePlot(a.chartX-d.plotLeft,a.chartY-d.plotTop)&&cj(d,"click",a)))}},destroy:function(){var a=this,c=a.chart,d=c.container;c.trackerGroup&&(c.trackerGroup=c.trackerGroup.destroy()),ci(d,"mouseleave",a.hideTooltipOnMouseLeave),ci(b,"mousemove",a.hideTooltipOnMouseMove),d.onclick=d.onmousedown=d.onmousemove=d.ontouchstart=d.ontouchend=d.ontouchmove=null,clearInterval(this.tooltipInterval)},init:function(a,b){a.trackerGroup||(a.trackerGroup=a.renderer.g("tracker").attr({zIndex:9}).add()),b.enabled&&(a.tooltip=new cI(a,b),this.tooltipInterval=setInterval(function(){a.tooltip.tick()},32)),this.setDOMEvents()}},cK.prototype={init:function(a){var b=this,c=b.options=a.options.legend;if(!c.enabled)return;var d=c.itemStyle,e=bH(c.padding,8),f=c.itemMarginTop||0;b.baseline=bw(d.fontSize)+3+f,b.itemStyle=d,b.itemHiddenStyle=cg(d,c.itemHiddenStyle),b.itemMarginTop=f,b.padding=e,b.initialItemX=e,b.initialItemY=e-5,b.maxItemWidth=0,b.chart=a,b.itemHeight=0,b.lastLineHeight=0,b.render(),ch(b.chart,"endResize",function(){b.positionCheckboxes()})},colorizeItem:function(a,b){var c=this,d=c.options,e=a.legendItem,f=a.legendLine,g=a.legendSymbol,h=c.itemHiddenStyle.color,i=b?d.itemStyle.color:h,j=b?a.color:h;e&&e.css({fill:i}),f&&f.attr({stroke:j}),g&&g.attr({stroke:j,fill:j})},positionItem:function(a){var b=this,c=b.options,d=c.symbolPadding,e=!c.rtl,f=a._legendItemPos,g=f[0],h=f[1],i=a.checkbox;a.legendGroup&&a.legendGroup.translate(e?g:b.legendWidth-g-2*d-4,h),i&&(i.x=g,i.y=h)},destroyItem:function(a){var b=a.checkbox;cc(["legendItem","legendLine","legendSymbol","legendGroup"],function(b){a[b]&&a[b].destroy()}),b&&bW(a.checkbox)},destroy:function(){var a=this,b=a.group,c=a.box;c&&(a.box=c.destroy()),b&&(a.group=b.destroy())},positionCheckboxes:function(){var a=this;cc(a.allItems,function(b){var c=b.checkbox,d=a.group.alignAttr;c&&bI(c,{left:d.translateX+b.legendItemWidth+c.x-20+O,top:d.translateY+c.y+3+O})})},renderItem:function(a){var b=this,c=b.chart,d=c.renderer,e=b.options,f=e.layout==="horizontal",g=e.symbolWidth,i=e.symbolPadding,j=b.itemStyle,k=b.itemHiddenStyle,l=b.padding,m=!e.rtl,n,o=e.width,p=e.itemMarginBottom||0,q=b.itemMarginTop,r=b.initialItemX,s,t,u=a.legendItem,v=a.series||a,w=v.options,x=w.showCheckbox;u||(a.legendGroup=d.g("legend-item").attr({zIndex:1}).add(b.scrollGroup),v.drawLegendSymbol(b,a),a.legendItem=u=d.text(e.labelFormatter.call(a),m?g+i:-i,b.baseline,e.useHTML).css(cg(a.visible?j:k)).attr({align:m?"left":"right",zIndex:2}).add(a.legendGroup),a.legendGroup.on("mouseover",function(){a.setState(U),u.css(b.options.itemHoverStyle)}).on("mouseout",function(){u.css(a.visible?j:k),a.setState()}).on("click",function(b){var c="legendItemClick",d=function(){a.setVisible()};b={browserEvent:b},a.firePointEvent?a.firePointEvent(c,b,d):cj(a,c,b,d)}),b.colorizeItem(a,a.visible),w&&x&&(a.checkbox=bJ("input",{type:"checkbox",checked:a.selected,defaultChecked:a.selected},e.itemCheckboxStyle,c.container),ch(a.checkbox,"click",function(b){var c=b.target;cj(a,"checkboxClick",{checked:c.checked},function(){a.select()})}))),s=u.getBBox(),t=a.legendItemWidth=e.itemWidth||g+i+s.width+l+(x?20:0),b.itemHeight=n=s.height,f&&b.itemX-r+t>(o||c.chartWidth-2*l-r)&&(b.itemX=r,b.itemY+=q+b.lastLineHeight+p,b.lastLineHeight=0),b.maxItemWidth=h(b.maxItemWidth,t),b.lastItemY=q+b.itemY+p,b.lastLineHeight=h(n,b.lastLineHeight),a._legendItemPos=[b.itemX,b.itemY],f?b.itemX+=t:(b.itemY+=q+n+p,b.lastLineHeight=n),b.offsetWidth=o||h(f?b.itemX-r:t,b.offsetWidth)},render:function(){var a=this,b=a.chart,c=b.renderer,d=a.group,e,f,g,h,i=a.box,j=a.options,k=a.padding,l=j.borderWidth,m=j.backgroundColor;a.itemX=a.initialItemX,a.itemY=a.initialItemY,a.offsetWidth=0,a.lastItemY=0,d||(a.group=d=c.g("legend").attr({zIndex:7}).add(),a.contentGroup=c.g().attr({zIndex:1}).add(d),a.scrollGroup=c.g().add(a.contentGroup),a.clipRect=c.clipRect(0,0,9999,b.chartHeight),a.contentGroup.clip(a.clipRect)),e=[],cc(b.series,function(a){var b=a.options;if(!b.showInLegend)return;e=e.concat(a.legendItems||(b.legendType==="point"?a.data:a))}),bS(e,function(a,b){return(a.options.legendIndex||0)-(b.options.legendIndex||0)}),j.reversed&&e.reverse(),a.allItems=e,a.display=f=!!e.length,cc(e,function(b){a.renderItem(b)}),g=j.width||a.offsetWidth,h=a.lastItemY+a.lastLineHeight,h=a.handleOverflow(h);if(l||m)g+=k,h+=k,i?g>0&&h>0&&(i[i.isNew?"attr":"animate"](i.crisp(null,null,null,g,h)),i.isNew=!1):(a.box=i=c.rect(0,0,g,h,j.borderRadius,l||0).attr({stroke:j.borderColor,"stroke-width":l||0,fill:m||P}).add(d).shadow(j.shadow),i.isNew=!0),i[f?"show":"hide"]();a.legendWidth=g,a.legendHeight=h,cc(e,function(b){a.positionItem(b)}),f&&d.align(bu({width:g,height:h},j),!0,b.spacingBox),b.isResizing||this.positionCheckboxes()},handleOverflow:function(a){var b=this,c=this.chart,d=c.renderer,e,f=this.options,h=f.y,j=f.verticalAlign==="top",k=c.spacingBox.height+(j?-h:h)-this.padding,l=f.maxHeight,m,n=this.clipRect,o=f.navigation,p=bH(o.animation,!0),q=o.arrowSize||12,r=this.nav;return f.layout==="horizontal"&&(k/=2),l&&(k=i(k,l)),a>k?(this.clipHeight=m=k-20,this.pageCount=e=g(a/m),this.currentPage=bH(this.currentPage,1),this.fullHeight=a,n.attr({height:m}),r||(this.nav=r=d.g().attr({zIndex:1}).add(this.group),this.up=d.symbol("triangle",0,0,q,q).on("click",function(){b.scroll(-1,p)}).add(r),this.pager=d.text("",15,10).css(o.style).add(r),this.down=d.symbol("triangle-down",0,0,q,q).on("click",function(){b.scroll(1,p)}).add(r)),b.scroll(0),a=k):r&&(n.attr({height:c.chartHeight}),r.hide(),this.scrollGroup.attr({translateY:1})),a},scroll:function(b,c){var d=this.pageCount,e=this.currentPage+b,f=this.clipHeight,g=this.options.navigation,h=g.activeColor,j=g.inactiveColor,k=this.pager,l=this.padding;e>d&&(e=d),e>0&&(c!==a&&bZ(c,this.chart),this.nav.attr({translateX:l,translateY:f+7,visibility:N}),this.up.attr({fill:e===1?j:h}).css({cursor:e===1?"default":"pointer"}),k.attr({text:e+"/"+this.pageCount}),this.down.attr({x:18+this.pager.getBBox().width,fill:e===d?j:h}).css({cursor:e===d?"default":"pointer"}),this.scrollGroup.animate({translateY:-i(f*(e-1),this.fullHeight-f+l)+1}),k.attr({text:e+"/"+d}),this.currentPage=e)}},cL.prototype={initSeries:function(a){var b=this,c=b.options.chart,d=a.type||c.type||c.defaultSeriesType,e=new bt[d];return e.init(this,a),e},addSeries:function(a,b,c){var d,e=this;return a&&(bZ(c,e),b=bH(b,!0),cj(e,"addSeries",{options:a},function(){e.initSeries(a),e.isDirtyLegend=!0,b&&e.redraw()})),d},isInsidePlot:function(a,b){return a>=0&&a<=this.plotWidth&&b>=0&&b<=this.plotHeight},adjustTickAmounts:function(){this.options.chart.alignTicks!==!1&&cc(this.axes,function(a){a.adjustTickAmount()}),this.maxTicks=null},redraw:function(a){var b=this,c=b.axes,d=b.series,e=b.tracker,f=b.legend,g=b.isDirtyLegend,h,i=b.isDirtyBox,j=d.length,k=j,l=b.clipRect,m,n=b.renderer,o=n.isHidden();bZ(a,b),o&&b.cloneRenderTo();while(k--){m=d[k];if(m.isDirty&&m.options.stacking){h=!0;break}}if(h){k=j;while(k--)m=d[k],m.options.stacking&&(m.isDirty=!0)}cc(d,function(a){a.isDirty&&a.options.legendType==="point"&&(g=!0)}),g&&f.options.enabled&&(f.render(),b.isDirtyLegend=!1),b.hasCartesianSeries&&(b.isResizing||(b.maxTicks=null,cc(c,function(a){a.setScale()})),b.adjustTickAmounts(),b.getMargins(),cc(c,function(a){a.isDirtyExtremes&&(a.isDirtyExtremes=!1,cj(a,"afterSetExtremes",a.getExtremes()));if(a.isDirty||i||h)a.redraw(),i=!0})),i&&(b.drawChartBox(),l&&(cm(l),l.animate({width:b.plotSizeX,height:b.plotSizeY+1}))),cc(d,function(a){a.isDirty&&a.visible&&(!a.isCartesian||a.xAxis)&&a.redraw()}),e&&e.resetTracker&&e.resetTracker(!0),n.draw(),cj(b,"redraw"),o&&b.cloneRenderTo(!0)},showLoading:function(a){var b=this,c=b.options,d=b.loadingDiv,e=c.loading;d||(b.loadingDiv=d=bJ(I,{className:M+"loading"},bu(e.style,{left:b.plotLeft+O,top:b.plotTop+O,width:b.plotWidth+O,height:b.plotHeight+O,zIndex:10,display:P}),b.container),b.loadingSpan=bJ("span",null,e.labelStyle,d)),b.loadingSpan.innerHTML=a||c.lang.loading,b.loadingShown||(bI(d,{opacity:0,display:""}),cl(d,{opacity:e.style.opacity},{duration:e.showDuration||0}),b.loadingShown=!0)},hideLoading:function(){var a=this.options,b=this.loadingDiv;b&&cl(b,{opacity:0},{duration:a.loading.hideDuration||100,complete:function(){bI(b,{display:P})}}),this.loadingShown=!1},get:function(a){var b=this,c=b.axes,d=b.series,e,f,g;for(e=0;e<c.length;e++)if(c[e].options.id===a)return c[e];for(e=0;e<d.length;e++)if(d[e].options.id===a)return d[e];for(e=0;e<d.length;e++){g=d[e].points||[];for(f=0;f<g.length;f++)if(g[f].id===a)return g[f]}return null},getAxes:function(){var a=this,b=this.options,c=b.xAxis||{},d=b.yAxis||{},e,f;c=bG(c),cc(c,function(a,b){a.index=b,a.isX=!0}),d=bG(d),cc(d,function(a,b){a.index=b}),e=c.concat(d),cc(e,function(b){f=new cH(a,b)}),a.adjustTickAmounts()},getSelectedPoints:function(){var a=[];return cc(this.series,function(b){a=a.concat(cd(b.points,function(a){return a.selected}))}),a},getSelectedSeries:function(){return cd(this.series,function(a){return a.selected})},showResetZoom:function(){var a=this,b=C.lang,c=a.options.chart.resetZoomButton,d=c.theme,e=d.states,f=c.relativeTo==="chart"?null:{x:a.plotLeft,y:a.plotTop,width:a.plotWidth,height:a.plotHeight};this.resetZoomButton=a.renderer.button(b.resetZoom,null,null,function(){a.zoomOut()},d,e&&e.hover).attr({align:c.position.align,title:b.resetZoomTitle}).add().align(c.position,!1,f)},zoomOut:function(){var a=this,b=a.resetZoomButton;cj(a,"selection",{resetSelection:!0},function(){a.zoom()}),b&&(a.resetZoomButton=b.destroy())},zoom:function(a){var b=this,c=b.options.chart,d;b.resetZoomEnabled!==!1&&!b.resetZoomButton&&b.showResetZoom(),!a||a.resetSelection?cc(b.axes,function(a){a.options.zoomEnabled!==!1&&(a.setExtremes(null,null,!1),d=!0)}):cc(a.xAxis.concat(a.yAxis),function(a){var c=a.axis;b.tracker[c.isXAxis?"zoomX":"zoomY"]&&(c.setExtremes(a.min,a.max,!1),d=!0)}),d&&b.redraw(bH(c.animation,b.pointCount<100))},pan:function(a){var b=this,c=b.xAxis[0],d=b.mouseDownX,e=c.pointRange/2,f=c.getExtremes(),g=c.translate(d-a,!0)+e,j=c.translate(d+b.plotWidth-a,!0)-e,k=b.hoverPoints;k&&cc(k,function(a){a.setState()}),c.series.length&&g>i(f.dataMin,f.min)&&j<h(f.dataMax,f.max)&&c.setExtremes(g,j,!0,!1),b.mouseDownX=a,bI(b.container,{cursor:"move"})},setTitle:function(a,b){var c=this,d=c.options,e,f;c.chartTitleOptions=e=cg(d.title,a),c.chartSubtitleOptions=f=cg(d.subtitle,b),cc([["title",a,e],["subtitle",b,f]],function(a){var b=a[0],d=c[b],e=a[1],f=a[2];d&&e&&(d=d.destroy()),f&&f.text&&!d&&(c[b]=c.renderer.text(f.text,0,0,f.useHTML).attr({align:f.align,"class":M+b,zIndex:f.zIndex||4}).css(f.style).add().align(f,!1,c.spacingBox))})},getChartSize:function(){var a=this,b=a.options.chart,c=a.renderToClone||a.renderTo;a.containerWidth=ca(c,"width"),a.containerHeight=ca(c,"height"),a.chartWidth=b.width||a.containerWidth||600,a.chartHeight=b.height||(a.containerHeight>19?a.containerHeight:400)},cloneRenderTo:function(a){var c=this.renderToClone,d=this.container;a?c&&(this.renderTo.appendChild(d),bW(c),delete this.renderToClone):(d&&this.renderTo.removeChild(d),this.renderToClone=c=this.renderTo.cloneNode(0),bI(c,{position:J,top:"-9999px",display:"block"}),b.body.appendChild(c),d&&c.appendChild(d))},getContainer:function(){var a=this,c,d=a.options.chart,e,f,g,h;a.renderTo=g=d.renderTo,h=M+A++,bx(g)&&(a.renderTo=g=b.getElementById(g)),g||bX(13,!0),g.innerHTML="",g.offsetWidth||a.cloneRenderTo(),a.getChartSize(),e=a.chartWidth,f=a.chartHeight,a.container=c=bJ(I,{className:M+"container"+(d.className?" "+d.className:""),id:h},bu({position:K,overflow:L,width:e+O,height:f+O,textAlign:"left",lineHeight:"normal"},d.style),a.renderToClone||g),a.renderer=d.forExport?new cy(c,e,f,!0):new x(c,e,f),w&&a.renderer.create(a,c,e,f)},getMargins:function(){var a=this,b=a.options.chart,c=b.spacingTop,d=b.spacingRight,e=b.spacingBottom,f=b.spacingLeft,g,i=a.legend,j=a.optionsMarginTop,k=a.optionsMarginLeft,l=a.optionsMarginRight,m=a.optionsMarginBottom,n=a.chartTitleOptions,o=a.chartSubtitleOptions,p=a.options.legend,q=bH(p.margin,10),r=p.x,s=p.y,t=p.align,u=p.verticalAlign,v;a.resetMargins(),g=a.axisOffset,(a.title||a.subtitle)&&!bE(a.optionsMarginTop)&&(v=h(a.title&&!n.floating&&!n.verticalAlign&&n.y||0,a.subtitle&&!o.floating&&!o.verticalAlign&&o.y||0),v&&(a.plotTop=h(a.plotTop,v+bH(n.margin,15)+c))),i.display&&!p.floating&&(t==="right"?bE(l)||(a.marginRight=h(a.marginRight,i.legendWidth-r+q+d)):t==="left"?bE(k)||(a.plotLeft=h(a.plotLeft,i.legendWidth+r+q+f)):u==="top"?bE(j)||(a.plotTop=h(a.plotTop,i.legendHeight+s+q+c)):u==="bottom"&&(bE(m)||(a.marginBottom=h(a.marginBottom,i.legendHeight-s+q+e)))),a.extraBottomMargin&&(a.marginBottom+=a.extraBottomMargin),a.extraTopMargin&&(a.plotTop+=a.extraTopMargin),a.hasCartesianSeries&&cc(a.axes,function(a){a.getOffset()}),bE(k)||(a.plotLeft+=g[3]),bE(j)||(a.plotTop+=g[0]),bE(m)||(a.marginBottom+=g[2]),bE(l)||(a.marginRight+=g[1]),a.setChartSize()},initReflow:function(){function g(g){var h=d.width||ca(e,"width"),i=d.height||ca(e,"height"),j=g?g.target:c;if(h&&i&&(j===c||j===b)){if(h!==a.containerWidth||i!==a.containerHeight)clearTimeout(f),f=setTimeout(function(){a.resize(h,i,!1)},100);a.containerWidth=h,a.containerHeight=i}}var a=this,d=a.options.chart,e=a.renderTo,f;ch(c,"resize",g),ch(a,"destroy",function(){ci(c,"resize",g)})},fireEndResize:function(){var a=this;a&&cj(a,"endResize",null,function(){a.isResizing-=1})},resize:function(a,b,c){var d=this,f,g,h,i=d.title,j=d.subtitle;d.isResizing+=1,bZ(c,d),d.oldChartHeight=d.chartHeight,d.oldChartWidth=d.chartWidth,bE(a)&&(d.chartWidth=f=e(a)),bE(b)&&(d.chartHeight=g=e(b)),bI(d.container,{width:f+O,height:g+O}),d.renderer.setSize(f,g,c),d.plotWidth=f-d.plotLeft-d.marginRight,d.plotHeight=g-d.plotTop-d.marginBottom,d.maxTicks=null,cc(d.axes,function(a){a.isDirty=!0,a.setScale()}),cc(d.series,function(a){a.isDirty=!0}),d.isDirtyLegend=!0,d.isDirtyBox=!0,d.getMargins(),h=d.spacingBox,i&&i.align(null,null,h),j&&j.align(null,null,h),d.redraw(c),d.oldChartHeight=null,cj(d,"resize"),E===!1?d.fireEndResize():setTimeout(d.fireEndResize,E&&E.duration||500)},setChartSize:function(){var a=this,b=a.inverted,c=a.chartWidth,d=a.chartHeight,f=a.options.chart,g=f.spacingTop,h=f.spacingRight,i=f.spacingBottom,j=f.spacingLeft;a.plotLeft=e(a.plotLeft),a.plotTop=e(a.plotTop),a.plotWidth=e(c-a.plotLeft-a.marginRight),a.plotHeight=e(d-a.plotTop-a.marginBottom),a.plotSizeX=b?a.plotHeight:a.plotWidth,a.plotSizeY=b?a.plotWidth:a.plotHeight,a.spacingBox={x:j,y:g,width:c-j-h,height:d-g-i},cc(a.axes,function(a){a.setAxisSize(),a.setAxisTranslation()})},resetMargins:function(){var a=this,b=a.options.chart,c=b.spacingTop,d=b.spacingRight,e=b.spacingBottom,f=b.spacingLeft;a.plotTop=bH(a.optionsMarginTop,c),a.marginRight=bH(a.optionsMarginRight,d),a.marginBottom=bH(a.optionsMarginBottom,e),a.plotLeft=bH(a.optionsMarginLeft,f),a.axisOffset=[0,0,0,0]},drawChartBox:function(){var a=this,b=a.options.chart,c=a.renderer,d=a.chartWidth,e=a.chartHeight,f=a.chartBackground,g=a.plotBackground,h=a.plotBorder,i=a.plotBGImage,j=b.borderWidth||0,k=b.backgroundColor,l=b.plotBackgroundColor,m=b.plotBackgroundImage,n,o,p={x:a.plotLeft,y:a.plotTop,width:a.plotWidth,height:a.plotHeight};n=j+(b.shadow?8:0);if(j||k)f?f.animate(f.crisp(null,null,null,d-n,e-n)):(o={fill:k||P},j&&(o.stroke=b.borderColor,o["stroke-width"]=j),a.chartBackground=c.rect(n/2,n/2,d-n,e-n,b.borderRadius,j).attr(o).add().shadow(b.shadow));l&&(g?g.animate(p):a.plotBackground=c.rect(a.plotLeft,a.plotTop,a.plotWidth,a.plotHeight,0).attr({fill:l}).add().shadow(b.plotShadow)),m&&(i?i.animate(p):a.plotBGImage=c.image(m,a.plotLeft,a.plotTop,a.plotWidth,a.plotHeight).add()),b.plotBorderWidth&&(h?h.animate(h.crisp(null,a.plotLeft,a.plotTop,a.plotWidth,a.plotHeight)):a.plotBorder=c.rect(a.plotLeft,a.plotTop,a.plotWidth,a.plotHeight,0,b.plotBorderWidth).attr({stroke:b.plotBorderColor,"stroke-width":b.plotBorderWidth,zIndex:4}).add()),a.isDirtyBox=!1},propFromSeries:function(){var a=this,b=a.options.chart,c,d=a.options.series,e,f;cc(["inverted","angular","polar"],function(g){c=bt[b.type||b.defaultSeriesType],f=a[g]||b[g]||c&&c.prototype[g],e=d&&d.length;while(!f&&e--)c=bt[d[e].type],c&&c.prototype[g]&&(f=!0);a[g]=f})},render:function(){var a=this,b=a.axes,c=a.renderer,d=a.options,e=d.labels,f=d.credits,g;a.setTitle(),a.legend=new cK(a),cc(b,function(a){a.setScale()}),a.getMargins(),a.maxTicks=null,cc(b,function(a){a.setTickPositions(!0),a.setMaxTicks()}),a.adjustTickAmounts(),a.getMargins(),a.drawChartBox(),a.hasCartesianSeries&&cc(b,function(a){a.render()}),a.seriesGroup||(a.seriesGroup=c.g("series-group").attr({zIndex:3}).add()),cc(a.series,function(a){a.translate(),a.setTooltipPoints(),a.render()}),e.items&&cc(e.items,function(){var b=bu(e.style,this.style),d=bw(b.left)+a.plotLeft,f=bw(b.top)+a.plotTop+12;delete b.left,delete b.top,c.text(this.html,d,f).attr({zIndex:2}).css(b).add()}),f.enabled&&!a.credits&&(g=f.href,a.credits=c.text(f.text,0,0).on("click",function(){g&&(location.href=g)}).attr({align:f.position.align,zIndex:8}).css(f.style).add().align(f.position)),a.hasRendered=!0},destroy:function(){var a=this,b=a.axes,c=a.series,d=a.container,e,f=d&&d.parentNode;if(a===null)return;cj(a,"destroy"),ci(a),e=b.length;while(e--)b[e]=b[e].destroy();e=c.length;while(e--)c[e]=c[e].destroy();cc(["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","tracker","scroller","rangeSelector","legend","resetZoomButton","tooltip","renderer"],function(b){var c=a[b];c&&(a[b]=c.destroy())}),d&&(d.innerHTML="",ci(d),f&&bW(d),d=null);for(e in a)delete a[e];a.options=null,a=null},firstRender:function(){var a=this,d=a.options,e=a.callback,f="onreadystatechange",g="complete";if(!u&&c==c.top&&b.readyState!==g||w&&!c.canvg){w?cD.push(function(){a.firstRender()},d.global.canvasToolsURL):b.attachEvent(f,function(){b.detachEvent(f,a.firstRender),b.readyState===g&&a.firstRender()});return}a.getContainer(),cj(a,"init"),Highcharts.RangeSelector&&d.rangeSelector.enabled&&(a.rangeSelector=new Highcharts.RangeSelector(a)),a.resetMargins(),a.setChartSize(),a.propFromSeries(),a.getAxes(),cc(d.series||[],function(b){a.initSeries(b)}),Highcharts.Scroller&&(d.navigator.enabled||d.scrollbar.enabled)&&(a.scroller=new Highcharts.Scroller(a)),a.tracker=new cJ(a,d),a.render(),a.renderer.draw(),e&&e.apply(a,[a]),cc(a.callbacks,function(b){b.apply(a,[a])}),a.cloneRenderTo(!0),cj(a,"load")},init:function(a){var b=this,c=b.options.chart,d;this.addCustomEvent=function(a,c){ch(b,a,c)},c.reflow!==!1&&ch(b,"load",b.initReflow);if(a)for(d in a)ch(b,d,a[d]);b.xAxis=[],b.yAxis=[],b.animation=w?!1:bH(c.animation,!0),b.setSize=b.resize,b.pointCount=0,b.counters=new bR,b.firstRender()}},cL.prototype.callbacks=[];var cM=function(){};cM.prototype={init:function(a,b,c){var d=this,e=a.chart.counters,f;return d.series=a,d.applyOptions(b,c),d.pointAttr={},a.options.colorByPoint&&(f=a.chart.options.colors,d.options||(d.options={}),d.color=d.options.color=d.color||f[e.color++],e.wrapColor(f.length)),a.chart.pointCount++,d},applyOptions:function(b,c){var d=this,e=d.series,f=typeof b;d.config=b,f==="number"||b===null?d.y=b:typeof b[0]=="number"?(d.x=b[0],d.y=b[1]):f==="object"&&typeof b.length!="number"?(bu(d,b),d.options=b,b.dataLabels&&(e._hasPointLabels=!0)):typeof b[0]=="string"&&(d.name=b[0],d.y=b[1]),d.x===a&&(d.x=c===a?e.autoIncrement():c)},destroy:function(){var a=this,b=a.series,c=b.chart,d=c.hoverPoints,e;c.pointCount--,d&&(a.setState(),bD(d,a),d.length||(c.hoverPoints=null)),a===c.hoverPoint&&a.onMouseOut();if(a.graphic||a.dataLabel)ci(a),a.destroyElements();a.legendItem&&c.legend.destroyItem(a);for(e in a)a[e]=null},destroyElements:function(){var a=this,b=["graphic","tracker","dataLabel","group","connector","shadowGroup"],c,d=6;while(d--)c=b[d],a[c]&&(a[c]=a[c].destroy())},getLabelConfig:function(){var a=this;return{x:a.category,y:a.y,key:a.name||a.category,series:a.series,point:a,percentage:a.percentage,total:a.total||a.stackTotal}},select:function(a,b){var c=this,d=c.series,e=d.chart;a=bH(a,!c.selected),c.firePointEvent(a?"select":"unselect",{accumulate:b},function(){c.selected=a,c.setState(a&&V),b||cc(e.getSelectedPoints(),function(a){a.selected&&a!==c&&(a.selected=!1,a.setState(T),a.firePointEvent("unselect"))})})},onMouseOver:function(){var a=this,b=a.series,c=b.chart,d=c.tooltip,e=c.hoverPoint;e&&e!==a&&e.onMouseOut(),a.firePointEvent("mouseOver"),d&&(!d.shared||b.noSharedTooltip)&&d.refresh(a),a.setState(U),c.hoverPoint=a},onMouseOut:function(){var a=this;a.firePointEvent("mouseOut"),a.setState(),a.series.chart.hoverPoint=null},tooltipFormatter:function(a){var b=this,c=b.series,d=c.tooltipOptions,e=a.match(/\{(series|point)\.[a-zA-Z]+\}/g),f=/[{\.}]/,g,h,i,j,k,l,m,n={y:0,open:0,high:0,low:0,close:0,percentage:1,total:1};d.valuePrefix=d.valuePrefix||d.yPrefix,d.valueDecimals=d.valueDecimals||d.yDecimals,d.valueSuffix=d.valueSuffix||d.ySuffix;for(m in e)h=e[m],bx(h)&&h!==a&&(k=(" "+h).split(f),g={point:b,series:c}[k[1]],l=k[2],g===b&&n.hasOwnProperty(l)?(j=n[l]?l:"value",i=(d[j+"Prefix"]||"")+bM(b[l],bH(d[j+"Decimals"],-1))+(d[j+"Suffix"]||"")):i=g[l],a=a.replace(h,i));return a},update:function(a,b,c){var d=this,e=d.series,f=d.graphic,g,h=e.data,i=h.length,j=e.chart;b=bH(b,!0),d.firePointEvent("update",{options:a},function(){d.applyOptions(a),by(a)&&(e.getAttribs(),f&&f.attr(d.pointAttr[e.state]));for(g=0;g<i;g++)if(h[g]===d){e.xData[g]=d.x,e.yData[g]=d.y,e.options.data[g]=a;break}e.isDirty=!0,e.isDirtyData=!0,b&&j.redraw(c)})},remove:function(a,b){var c=this,d=c.series,e=d.chart,f,g=d.data,h=g.length;bZ(b,e),a=bH(a,!0),c.firePointEvent("remove",null,function(){for(f=0;f<h;f++)if(g[f]===c){g.splice(f,1),d.options.data.splice(f,1),d.xData.splice(f,1),d.yData.splice(f,1);break}c.destroy(),d.isDirty=!0,d.isDirtyData=!0,a&&e.redraw()})},firePointEvent:function(a,b,c){var d=this,e=this.series,f=e.options;(f.point.events[a]||d.options&&d.options.events&&d.options.events[a])&&this.importEvents(),a==="click"&&f.allowPointSelect&&(c=function(a){d.select(null,a.ctrlKey||a.metaKey||a.shiftKey)}),cj(this,a,b,c)},importEvents:function(){if(!this.hasImportedEvents){var a=this,b=cg(a.series.options.point,a.options),c=b.events,d;a.events=c;for(d in c)ch(a,d,c[d]);this.hasImportedEvents=!0}},setState:function(a){var b=this,c=b.plotX,d=b.plotY,e=b.series,f=e.options.states,g=cr[e.type].marker&&e.options.marker,h=g&&!g.enabled,i=g&&g.states[a],j=i&&i.enabled===!1,k=e.stateMarkerGraphic,l=e.chart,
m,n=b.pointAttr;a=a||T;if(a===b.state||b.selected&&a!==V||f[a]&&f[a].enabled===!1||a&&(j||h&&!i.enabled))return;b.graphic?(m=g&&b.graphic.symbolName&&n[a].r,b.graphic.attr(cg(n[a],m?{x:c-m,y:d-m,width:2*m,height:2*m}:{}))):(a&&i&&(k||(m=i.radius,e.stateMarkerGraphic=k=l.renderer.symbol(e.symbol,-m,-m,2*m,2*m).attr(n[a]).add(e.group)),k.translate(c,d)),k&&k[a?"show":"hide"]()),b.state=a}};var cN=function(){};cN.prototype={isCartesian:!0,type:"line",pointClass:cM,sorted:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},init:function(a,b){var c=this,d,e,f=a.series.length;c.chart=a,c.options=b=c.setOptions(b),c.bindAxes(),bu(c,{index:f,name:b.name||"Series "+(f+1),state:T,pointAttr:{},visible:b.visible!==!1,selected:b.selected===!0}),w&&(b.animation=!1),e=b.events;for(d in e)ch(c,d,e[d]);if(e&&e.click||b.point&&b.point.events&&b.point.events.click||b.allowPointSelect)a.runTrackerClick=!0;c.getColor(),c.getSymbol(),c.setData(b.data,!1),c.isCartesian&&(a.hasCartesianSeries=!0),a.series.push(c)},bindAxes:function(){var b=this,c=b.options,d=b.chart,e;b.isCartesian&&cc(["xAxis","yAxis"],function(f){cc(d[f],function(d){e=d.options;if(c[f]===e.index||c[f]===a&&e.index===0)d.series.push(b),b[f]=d,d.isDirty=!0})})},autoIncrement:function(){var a=this,b=a.options,c=a.xIncrement;return c=bH(c,b.pointStart,0),a.pointInterval=bH(a.pointInterval,b.pointInterval,1),a.xIncrement=c+a.pointInterval,c},getSegments:function(){var a=this,b=-1,c=[],d,e=a.points,f=e.length;if(f)if(a.options.connectNulls){d=f;while(d--)e[d].y===null&&e.splice(d,1);e.length&&(c=[e])}else cc(e,function(a,d){a.y===null?(d>b+1&&c.push(e.slice(b+1,d)),b=d):d===f-1&&c.push(e.slice(b+1,d+1))});a.segments=c},setOptions:function(a){var b=this,c=b.chart,d=c.options,e=d.plotOptions,f=a.data,g;return a.data=null,g=cg(e[this.type],e.series,a),g.data=a.data=f,b.tooltipOptions=cg(d.tooltip,g.tooltip),g},getColor:function(){var a=this.options,b=this.chart.options.colors,c=this.chart.counters;this.color=a.color||!a.colorByPoint&&b[c.color++]||"gray",c.wrapColor(b.length)},getSymbol:function(){var a=this,b=a.options.marker,c=a.chart,d=c.options.symbols,e=c.counters;a.symbol=b.symbol||d[e.symbol++],/^url/.test(a.symbol)&&(b.radius=0),e.wrapSymbol(d.length)},drawLegendSymbol:function(a){var b=this.options,c=b.marker,d,e=a.options,f,g=e.symbolWidth,h=this.chart.renderer,i=this.legendGroup,j=a.baseline,k;b.lineWidth&&(k={"stroke-width":b.lineWidth},b.dashStyle&&(k.dashstyle=b.dashStyle),this.legendLine=h.path([Q,0,j-4,R,g,j-4]).attr(k).add(i)),c&&c.enabled&&(d=c.radius,this.legendSymbol=f=h.symbol(this.symbol,g/2-d,j-4-d,2*d,2*d).attr(this.pointAttr[T]).add(i))},addPoint:function(a,b,c,d){var e=this,f=e.data,g=e.graph,h=e.area,i=e.chart,j=e.xData,k=e.yData,l=g&&g.shift||0,m=e.options.data,n;bZ(d,i),g&&c&&(g.shift=l+1),h&&(c&&(h.shift=l+1),h.isArea=!0),b=bH(b,!0),n={series:e},e.pointClass.prototype.applyOptions.apply(n,[a]),j.push(n.x),k.push(e.valueCount===4?[n.open,n.high,n.low,n.close]:n.y),m.push(a),c&&(f[0]&&f[0].remove?f[0].remove(!1):(f.shift(),j.shift(),k.shift(),m.shift())),e.getAttribs(),e.isDirty=!0,e.isDirtyData=!0,b&&i.redraw()},setData:function(a,b){var c=this,d=c.points,e=c.options,f=c.initialColor,g=c.chart,h=null,i=c.xAxis,j,k=c.pointClass.prototype;c.xIncrement=null,c.pointRange=i&&i.categories&&1||e.pointRange,bE(f)&&(g.counters.color=f);var l=[],m=[],n=a?a.length:[],o=e.turboThreshold||1e3,p,q=c.valueCount;if(n>o){j=0;while(h===null&&j<n)h=a[j],j++;if(bA(h)){var r=bH(e.pointStart,0),s=bH(e.pointInterval,1);for(j=0;j<n;j++)l[j]=r,m[j]=a[j],r+=s;c.xIncrement=r}else if(bz(h))if(q)for(j=0;j<n;j++)p=a[j],l[j]=p[0],m[j]=p.slice(1,q+1);else for(j=0;j<n;j++)p=a[j],l[j]=p[0],m[j]=p[1]}else for(j=0;j<n;j++)p={series:c},k.applyOptions.apply(p,[a[j]]),l[j]=p.x,m[j]=k.toYData?k.toYData.apply(p):p.y;c.data=[],c.options.data=a,c.xData=l,c.yData=m,j=d&&d.length||0;while(j--)d[j]&&d[j].destroy&&d[j].destroy();i&&(i.minRange=i.userMinRange),c.isDirty=c.isDirtyData=g.isDirtyBox=!0,bH(b,!0)&&g.redraw(!1)},remove:function(a,b){var c=this,d=c.chart;a=bH(a,!0),c.isRemoving||(c.isRemoving=!0,cj(c,"remove",null,function(){c.destroy(),d.isDirtyLegend=d.isDirtyBox=!0,a&&d.redraw(b)})),c.isRemoving=!1},processData:function(b){var c=this,d=c.xData,e=c.yData,f=d.length,g=0,i=f,j,k,l,m=c.xAxis,n,o=c.options,p=o.cropThreshold,q=c.isCartesian;if(q&&!c.isDirty&&!m.isDirty&&!c.yAxis.isDirty&&!b)return!1;if(q&&c.sorted&&(!p||f>p||c.forceCrop)){var r=m.getExtremes(),s=r.min,t=r.max;if(d[f-1]<s||d[0]>t)d=[],e=[];else if(d[0]<s||d[f-1]>t){for(n=0;n<f;n++)if(d[n]>=s){g=h(0,n-1);break}for(;n<f;n++)if(d[n]>t){i=n+1;break}d=d.slice(g,i),e=e.slice(g,i),j=!0}}for(n=d.length-1;n>0;n--)k=d[n]-d[n-1],k>0&&(l===a||k<l)&&(l=k);c.cropped=j,c.cropStart=g,c.processedXData=d,c.processedYData=e,o.pointRange===null&&(c.pointRange=l||1),c.closestPointRange=l},generatePoints:function(){var b=this,c=b.options,d=c.data,e=b.data,f,g=b.processedXData,h=b.processedYData,i=b.pointClass,j=g.length,k=b.cropStart||0,l,m=b.hasGroupedData,n,o=[],p;if(!e&&!m){var q=[];q.length=d.length,e=b.data=q}for(p=0;p<j;p++)l=k+p,m?o[p]=(new i).init(b,[g[p]].concat(bG(h[p]))):(e[l]?n=e[l]:d[l]!==a&&(e[l]=n=(new i).init(b,d[l],g[p])),o[p]=n);if(e&&(j!==(f=e.length)||m))for(p=0;p<f;p++)p===k&&!m&&(p+=j),e[p]&&(e[p].destroyElements(),e[p].plotX=a);b.data=e,b.points=o},translate:function(){this.processedXData||this.processData(),this.generatePoints();var b=this,c=b.chart,d=b.options,f=d.stacking,g=b.xAxis,h=g.categories,i=b.yAxis,j=b.points,k=j.length,l=!!b.modifyValue,m,n=i.series,o=n.length;while(o--)if(n[o].visible){o===b.index&&(m=!0);break}for(o=0;o<k;o++){var p=j[o],q=p.x,r=p.y,s=p.low,t=i.stacks[(r<d.threshold?"-":"")+b.stackKey],u,v;p.plotX=g.translate(q,0,0,0,1),f&&b.visible&&t&&t[q]&&(u=t[q],v=u.total,u.cum=s=u.cum-r,r=s+r,m&&(s=d.threshold),f==="percent"&&(s=v?s*100/v:0,r=v?r*100/v:0),p.percentage=v?p.y*100/v:0,p.stackTotal=v,p.stackY=r),p.yBottom=bE(s)?i.translate(s,0,1,0,1):null,l&&(r=b.modifyValue(r,p)),p.plotY=typeof r=="number"?e(i.translate(r,0,1,0,1)*10)/10:a,p.clientX=c.inverted?c.plotHeight-p.plotX:p.plotX,p.category=h&&h[p.x]!==a?h[p.x]:p.x}b.getSegments()},setTooltipPoints:function(a){var b=this,c=b.chart,d=[],e,g=c.plotSizeX,i,j,k=b.xAxis,l,m,n=[];if(b.options.enableMouseTracking===!1)return;a&&(b.tooltipPoints=null),cc(b.segments||b.points,function(a){d=d.concat(a)}),k&&k.reversed&&(d=d.reverse()),e=d.length;for(m=0;m<e;m++){l=d[m],i=d[m-1]?d[m-1]._high+1:0,l._high=j=d[m+1]?h(0,f((l.plotX+(d[m+1]?d[m+1].plotX:g))/2)):g;while(i>=0&&i<=j)n[i++]=l}b.tooltipPoints=n},tooltipHeaderFormatter:function(a){var b=this,c=b.tooltipOptions,d=c.xDateFormat,e=b.xAxis,f=e&&e.options.type==="datetime",g;if(f&&!d)for(g in G)if(G[g]>=e.closestPointRange){d=c.dateTimeLabelFormats[g];break}return c.headerFormat.replace("{point.key}",f?D(d,a):a).replace("{series.name}",b.name).replace("{series.color}",b.color)},onMouseOver:function(){var a=this,b=a.chart,c=b.hoverSeries;if(!y&&b.mouseIsDown)return;c&&c!==a&&c.onMouseOut(),a.options.events.mouseOver&&cj(a,"mouseOver"),a.setState(U),b.hoverSeries=a},onMouseOut:function(){var a=this,b=a.options,c=a.chart,d=c.tooltip,e=c.hoverPoint;e&&e.onMouseOut(),a&&b.events.mouseOut&&cj(a,"mouseOut"),d&&!b.stickyTracking&&!d.shared&&d.hide(),a.setState(),c.hoverSeries=null},animate:function(a){var b=this,c=b.chart,d=b.clipRect,e=b.options.animation;e&&!by(e)&&(e={}),a?d.isAnimating||(d.attr("width",0),d.isAnimating=!0):(d.animate({width:c.plotSizeX},e),this.animate=null)},drawPoints:function(){var b=this,c,d=b.points,e=b.chart,f,g,h,i,j,k,l,m;if(b.options.marker.enabled){h=d.length;while(h--){i=d[h],f=i.plotX,g=i.plotY,m=i.graphic;if(g!==a&&!isNaN(g)){c=i.pointAttr[i.selected?V:T],j=c.r,k=bH(i.marker&&i.marker.symbol,b.symbol),l=k.indexOf("url")===0;if(m)m.animate(bu({x:f-j,y:g-j},m.symbolName?{width:2*j,height:2*j}:{}));else if(j>0||l)i.graphic=e.renderer.symbol(k,f-j,g-j,2*j,2*j).attr(c).add(b.group)}}}},convertAttribs:function(a,b,c,d){var e=this.pointAttrToOptions,f,g,h={};a=a||{},b=b||{},c=c||{},d=d||{};for(f in e)g=e[f],h[f]=bH(a[g],b[f],c[f],d[f]);return h},getAttribs:function(){var a=this,b=cr[a.type].marker?a.options.marker:a.options,c=b.states,d=c[U],e,f=a.color,g={stroke:f,fill:f},h=a.points||[],i,j,k=[],l,m=a.pointAttrToOptions,n,o;a.options.marker?(d.radius=d.radius||b.radius+2,d.lineWidth=d.lineWidth||b.lineWidth+1):d.color=d.color||cw(d.color||f).brighten(d.brightness).get(),k[T]=a.convertAttribs(b,g),cc([U,V],function(b){k[b]=a.convertAttribs(c[b],k[T])}),a.pointAttr=k,i=h.length;while(i--){j=h[i],b=j.options&&j.options.marker||j.options,b&&b.enabled===!1&&(b.radius=0),n=!1;if(j.options)for(o in m)bE(b[m[o]])&&(n=!0);n?(l=[],c=b.states||{},e=c[U]=c[U]||{},a.options.marker||(e.color=cw(e.color||j.options.color).brighten(e.brightness||d.brightness).get()),l[T]=a.convertAttribs(b,k[T]),l[U]=a.convertAttribs(c[U],k[U],l[T]),l[V]=a.convertAttribs(c[V],k[V],l[T])):l=k,j.pointAttr=l}},destroy:function(){var a=this,b=a.chart,c=a.clipRect,d=/AppleWebKit\/533/.test(o),e,f,g=a.data||[],h,i,j;cj(a,"destroy"),ci(a),cc(["xAxis","yAxis"],function(b){j=a[b],j&&(bD(j.series,a),j.isDirty=!0)}),a.legendItem&&a.chart.legend.destroyItem(a),f=g.length;while(f--)h=g[f],h&&h.destroy&&h.destroy();a.points=null,c&&c!==b.clipRect&&(a.clipRect=c.destroy()),cc(["area","graph","dataLabelsGroup","group","tracker","trackerGroup"],function(b){a[b]&&(e=d&&b==="group"?"hide":"destroy",a[b][e]())}),b.hoverSeries===a&&(b.hoverSeries=null),bD(b.series,a);for(i in a)delete a[i]},drawDataLabels:function(){var b=this,c=b.options,d=c.dataLabels;if(d.enabled||b._hasPointLabels){var f,g,h=b.points,i,j,k,l=b.dataLabelsGroup,m=b.chart,n=b.xAxis,o=n?n.left:m.plotLeft,p=b.yAxis,q=p?p.top:m.plotTop,r=m.renderer,s=m.inverted,t=b.type,u=c.stacking,v=t==="column"||t==="bar",w=d.verticalAlign===null,x=d.y===null,y=r.fontMetrics(d.style.fontSize),z=y.h,A=y.b,B,C;if(v){var D={top:A,middle:A-z/2,bottom:-z+A};u?(w&&(d=cg(d,{verticalAlign:"middle"})),x&&(d=cg(d,{y:D[d.verticalAlign]}))):w?d=cg(d,{verticalAlign:"top"}):x&&(d=cg(d,{y:D[d.verticalAlign]}))}l?l.translate(o,q):l=b.dataLabelsGroup=r.g("data-labels").attr({visibility:b.visible?N:L,zIndex:6}).translate(o,q).add(),j=d,cc(h,function(h){B=h.dataLabel,d=j,i=h.options,i&&i.dataLabels&&(d=cg(d,i.dataLabels)),C=d.enabled;if(C){var n=h.barX&&h.barX+h.barW/2||bH(h.plotX,-999),o=bH(h.plotY,-999),p=d.y===null?h.y>=c.threshold?-z+A:A:d.y;f=(s?m.plotWidth-o:n)+d.x,g=e((s?m.plotHeight-n:o)+p)}if(B&&b.isCartesian&&(!m.isInsidePlot(f,g)||!C))h.dataLabel=B.destroy();else if(C){var q=d.align,w,x;k=d.formatter.call(h.getLabelConfig(),d),t==="column"&&(f+={left:-1,right:1}[q]*h.barW/2||0),!u&&s&&h.y<0&&(q="right",f-=10),d.style.color=bH(d.color,d.style.color,b.color,"black");if(B)B.attr({text:k}).animate({x:f,y:g});else if(bE(k)){w={align:q,fill:d.backgroundColor,stroke:d.borderColor,"stroke-width":d.borderWidth,r:d.borderRadius||0,rotation:d.rotation,padding:d.padding,zIndex:1};for(x in w)w[x]===a&&delete w[x];B=h.dataLabel=r[d.rotation?"text":"label"](k,f,g,null,null,null,d.useHTML,!0).attr(w).css(d.style).add(l).shadow(d.shadow)}if(v&&c.stacking&&B){var y=h.barX,D=h.barY,E=h.barW,F=h.barH;B.align(d,null,{x:s?m.plotWidth-D-F:y,y:s?m.plotHeight-y-E:D,width:s?F:E,height:s?E:F})}}})}},getSegmentPath:function(a){var b=this,c=[];return cc(a,function(d,e){if(b.getPointSpline)c.push.apply(c,b.getPointSpline(a,d,e));else{c.push(e?R:Q);if(e&&b.options.step){var f=a[e-1];c.push(d.plotX,f.plotY)}c.push(d.plotX,d.plotY)}}),c},drawGraph:function(){var a=this,b=a.options,c=a.chart,d=a.graph,e=[],f=a.group,g=b.lineColor||a.color,h=b.lineWidth,i=b.dashStyle,j,k=c.renderer,l=[],m;cc(a.segments,function(b){j=a.getSegmentPath(b),b.length>1?e=e.concat(j):l.push(b[0])}),a.graphPath=e,a.singlePoints=l,d?(cm(d),d.animate({d:e})):h&&(m={stroke:g,"stroke-width":h},i&&(m.dashstyle=i),a.graph=k.path(e).attr(m).add(f).shadow(b.shadow))},invertGroups:function(){function e(){var d={width:a.yAxis.len,height:a.xAxis.len};b.attr(d).invert(),c&&c.attr(d).invert()}var a=this,b=a.group,c=a.trackerGroup,d=a.chart;ch(d,"resize",e),ch(a,"destroy",function(){ci(d,"resize",e)}),e(),a.invertGroups=e},createGroup:function(){var a=this.chart,b=this.group=a.renderer.g("series");b.attr({visibility:this.visible?N:L,zIndex:this.options.zIndex}).translate(this.xAxis.left,this.yAxis.top).add(a.seriesGroup),this.createGroup=H},render:function(){var a=this,b=a.chart,c,d=a.options,e=d.clip!==!1,f=d.animation,g=f&&a.animate,h=g?f&&f.duration||500:0,i=a.clipRect,j=b.renderer;i||(i=a.clipRect=!b.hasRendered&&b.clipRect?b.clipRect:j.clipRect(0,0,b.plotSizeX,b.plotSizeY+1),b.clipRect||(b.clipRect=i)),a.createGroup(),c=a.group,a.drawDataLabels(),g&&a.animate(!0),a.getAttribs(),a.drawGraph&&a.drawGraph(),a.drawPoints(),a.options.enableMouseTracking!==!1&&a.drawTracker(),b.inverted&&a.invertGroups(),e&&!a.hasRendered&&(c.clip(i),a.trackerGroup&&a.trackerGroup.clip(b.clipRect)),g&&a.animate(),setTimeout(function(){i.isAnimating=!1,c=a.group,c&&i!==b.clipRect&&i.renderer&&(e&&c.clip(a.clipRect=b.clipRect),i.destroy())},h),a.isDirty=a.isDirtyData=!1,a.hasRendered=!0},redraw:function(){var a=this,b=a.chart,c=a.isDirtyData,d=a.group;d&&(b.inverted&&d.attr({width:b.plotWidth,height:b.plotHeight}),d.animate({translateX:a.xAxis.left,translateY:a.yAxis.top})),a.translate(),a.setTooltipPoints(!0),a.render(),c&&cj(a,"updatedData")},setState:function(a){var b=this,c=b.options,d=b.graph,e=c.states,f=c.lineWidth;a=a||T;if(b.state!==a){b.state=a;if(e[a]&&e[a].enabled===!1)return;a&&(f=e[a].lineWidth||f+1),d&&!d.dashstyle&&d.attr({"stroke-width":f},a?0:500)}},setVisible:function(b,c){var d=this,e=d.chart,f=d.legendItem,g=d.group,h=d.tracker,i=d.dataLabelsGroup,j,k,l=d.points,m,n=e.options.chart.ignoreHiddenSeries,o=d.visible;d.visible=b=b===a?!o:b,j=b?"show":"hide",g&&g[j]();if(h)h[j]();else if(l){k=l.length;while(k--)m=l[k],m.tracker&&m.tracker[j]()}i&&i[j](),f&&e.legend.colorizeItem(d,b),d.isDirty=!0,d.options.stacking&&cc(e.series,function(a){a.options.stacking&&a.visible&&(a.isDirty=!0)}),n&&(e.isDirtyBox=!0),c!==!1&&e.redraw(),cj(d,j)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(b){var c=this;c.selected=b=b===a?!c.selected:b,c.checkbox&&(c.checkbox.checked=b),cj(c,b?"select":"unselect")},drawTrackerGroup:function(){var a=this.trackerGroup,b=this.chart;return this.isCartesian&&(a||(this.trackerGroup=a=b.renderer.g().attr({zIndex:this.options.zIndex||1}).add(b.trackerGroup)),a.translate(this.xAxis.left,this.yAxis.top)),a},drawTracker:function(){var a=this,b=a.options,c=b.trackByArea,d=[].concat(c?a.areaPath:a.graphPath),e=d.length,f=a.chart,g=f.renderer,h=f.options.tooltip.snap,i=a.tracker,j=b.cursor,k=j&&{cursor:j},l=a.singlePoints,m=a.drawTrackerGroup(),n,o;if(e&&!c){o=e+1;while(o--)d[o]===Q&&d.splice(o+1,0,d[o+1]-h,d[o+2],R),(o&&d[o]===Q||o===e)&&d.splice(o,0,R,d[o-2]+h,d[o-1])}for(o=0;o<l.length;o++)n=l[o],d.push(Q,n.plotX-h,n.plotY,R,n.plotX+h,n.plotY);i?i.attr({d:d}):a.tracker=g.path(d).attr({isTracker:!0,"stroke-linejoin":"bevel",visibility:a.visible?N:L,stroke:S,fill:c?S:P,"stroke-width":b.lineWidth+(c?0:2*h)}).on(y?"touchstart":"mouseover",function(){f.hoverSeries!==a&&a.onMouseOver()}).on("mouseout",function(){b.stickyTracking||a.onMouseOut()}).css(k).add(m)}};var cO=bK(cN);bt.line=cO,cr.area=cg(cs,{threshold:0});var cP=bK(cN,{type:"area",getSegmentPath:function(a){var b=cN.prototype.getSegmentPath.call(this,a),c=[].concat(b),d,e=this.options,f=b.length,g=this.yAxis.getThreshold(e.threshold);f===3&&c.push(R,b[1],b[2]);if(e.stacking&&this.type!=="areaspline")for(d=a.length-1;d>=0;d--)d<a.length-1&&e.step&&c.push(a[d+1].plotX,a[d].yBottom),c.push(a[d].plotX,a[d].yBottom);else c.push(R,a[a.length-1].plotX,g,R,a[0].plotX,g);return this.areaPath=this.areaPath.concat(c),b},drawGraph:function(){this.areaPath=[],cN.prototype.drawGraph.apply(this);var a=this.areaPath,b=this.options,c=this.area;c?c.animate({d:a}):this.area=this.chart.renderer.path(a).attr({fill:bH(b.fillColor,cw(this.color).setOpacity(b.fillOpacity||.75).get())}).add(this.group)},drawLegendSymbol:function(a,b){b.legendSymbol=this.chart.renderer.rect(0,a.baseline-11,a.options.symbolWidth,12,2).attr({zIndex:3}).add(b.legendGroup)}});bt.area=cP,cr.spline=cg(cs);var cQ=bK(cN,{type:"spline",getPointSpline:function(a,b,c){var d=1.5,e=d+1,f=b.plotX,g=b.plotY,j=a[c-1],k=a[c+1],l,m,n,o,p;if(c&&c<a.length-1){var q=j.plotX,r=j.plotY,s=k.plotX,t=k.plotY,u;l=(d*f+q)/e,m=(d*g+r)/e,n=(d*f+s)/e,o=(d*g+t)/e,u=(o-m)*(n-f)/(n-l)+g-o,m+=u,o+=u,m>r&&m>g?(m=h(r,g),o=2*g-m):m<r&&m<g&&(m=i(r,g),o=2*g-m),o>t&&o>g?(o=h(t,g),m=2*g-o):o<t&&o<g&&(o=i(t,g),m=2*g-o),b.rightContX=n,b.rightContY=o}return c?(p=["C",j.rightContX||j.plotX,j.rightContY||j.plotY,l||f,m||g,f,g],j.rightContX=j.rightContY=null):p=[Q,f,g],p}});bt.spline=cQ,cr.areaspline=cg(cr.area);var cR=cP.prototype,cS=bK(cQ,{type:"areaspline",getSegmentPath:cR.getSegmentPath,drawGraph:cR.drawGraph});bt.areaspline=cS,cr.column=cg(cs,{borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{y:null,verticalAlign:null},threshold:0});var cT=bK(cN,{type:"column",tooltipOutsidePlot:!0,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",r:"borderRadius"},init:function(){cN.prototype.init.apply(this,arguments);var a=this,b=a.chart;b.hasRendered&&cc(b.series,function(b){b.type===a.type&&(b.isDirty=!0)})},translate:function(){var b=this,c=b.chart,d=b.options,e=d.stacking,f=d.borderWidth,k=0,l=b.xAxis,m=l.reversed,n={},o,p;cN.prototype.translate.apply(b),cc(c.series,function(c){c.type===b.type&&c.visible&&b.options.group===c.options.group&&(c.options.stacking?(o=c.stackKey,n[o]===a&&(n[o]=k++),p=n[o]):p=k++,c.columnIndex=p)});var q=b.points,r=j(l.transA)*(l.ordinalSlope||d.pointRange||l.closestPointRange||1),s=r*d.groupPadding,t=r-2*s,u=t/k,v=d.pointWidth,w=bE(v)?(u-v)/2:u*d.pointPadding,x=bH(v,u-2*w),y=g(h(x,1+2*f)),z=(m?k-b.columnIndex:b.columnIndex)||0,A=w+(s+z*u-r/2)*(m?-1:1),B=d.threshold,C=b.yAxis.getThreshold(B),D=bH(d.minPointLength,5);cc(q,function(a){var d=a.plotY,k=bH(a.yBottom,C),l=a.plotX+A,m=g(i(d,k)),n=g(h(d,k)-m),o=b.yAxis.stacks[(a.y<0?"-":"")+b.stackKey],p;e&&b.visible&&o&&o[a.x]&&o[a.x].setOffset(A,y),j(n)<D&&D&&(n=D,m=j(m-C)>D?k-D:C-(d<=C?D:0)),bu(a,{barX:l,barY:m,barW:y,barH:n,pointWidth:x}),a.shapeType="rect",a.shapeArgs=p=c.renderer.Element.prototype.crisp.call(0,f,l,m,y,n),f%2&&(p.y-=1,p.height+=1),a.trackerArgs=j(n)<3&&cg(a.shapeArgs,{height:6,y:m-3})})},getSymbol:function(){},drawLegendSymbol:cP.prototype.drawLegendSymbol,drawGraph:function(){},drawPoints:function(){var b=this,c=b.options,d=b.chart.renderer,e,f;cc(b.points,function(g){var h=g.plotY;h!==a&&!isNaN(h)&&g.y!==null&&(e=g.graphic,f=g.shapeArgs,e?(cm(e),e.animate(cg(f))):g.graphic=e=d[g.shapeType](f).attr(g.pointAttr[g.selected?V:T]).add(b.group).shadow(c.shadow,null,c.stacking&&!c.borderRadius))})},drawTracker:function(){var b=this,c=b.chart,d=c.renderer,e,f,g=+(new Date),h=b.options,i=h.cursor,j=i&&{cursor:i},k=b.drawTrackerGroup(),l,m,n;cc(b.points,function(i){f=i.tracker,e=i.trackerArgs||i.shapeArgs,m=i.plotY,n=!b.isCartesian||m!==a&&!isNaN(m),delete e.strokeWidth,i.y!==null&&n&&(f?f.attr(e):i.tracker=d[i.shapeType](e).attr({isTracker:g,fill:S,visibility:b.visible?N:L}).on(y?"touchstart":"mouseover",function(a){l=a.relatedTarget||a.fromElement,c.hoverSeries!==b&&bF(l,"isTracker")!==g&&b.onMouseOver(),i.onMouseOver()}).on("mouseout",function(a){h.stickyTracking||(l=a.relatedTarget||a.toElement,bF(l,"isTracker")!==g&&b.onMouseOut())}).css(j).add(i.group||k))})},animate:function(a){var b=this,c=b.points,d=b.options;a||(cc(c,function(a){var c=a.graphic,e=a.shapeArgs,f=b.yAxis,g=d.threshold;c&&(c.attr({height:0,y:bE(g)?f.getThreshold(g):f.translate(f.getExtremes().min,0,1,0,1)}),c.animate({height:e.height,y:e.y},d.animation))}),b.animate=null)},remove:function(){var a=this,b=a.chart;b.hasRendered&&cc(b.series,function(b){b.type===a.type&&(b.isDirty=!0)}),cN.prototype.remove.apply(a,arguments)}});bt.column=cT,cr.bar=cg(cr.column,{dataLabels:{align:"left",x:5,y:null,verticalAlign:"middle"}});var cU=bK(cT,{type:"bar",inverted:!0});bt.bar=cU,cr.scatter=cg(cs,{lineWidth:0,states:{hover:{lineWidth:0}},tooltip:{headerFormat:'<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}});var cV=bK(cN,{type:"scatter",sorted:!1,translate:function(){var a=this;cN.prototype.translate.apply(a),cc(a.points,function(b){b.shapeType="circle",b.shapeArgs={x:b.plotX,y:b.plotY,r:a.chart.options.tooltip.snap}})},drawTracker:function(){var b=this,c=b.options.cursor,d=c&&{cursor:c},e=b.points,f=e.length,g;while(f--)g=e[f].graphic,g&&(g.element._i=f);b._hasTracking?b._hasTracking=!0:b.group.attr({isTracker:!0}).on(y?"touchstart":"mouseover",function(c){b.onMouseOver(),c.target._i!==a&&e[c.target._i].onMouseOver()}).on("mouseout",function(){b.options.stickyTracking||b.onMouseOut()}).css(d)}});bt.scatter=cV,cr.pie=cg(cs,{borderColor:"#FFFFFF",borderWidth:1,center:["50%","50%"],colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name},y:5},legendType:"point",marker:null,size:"75%",showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}}});var cW=bK(cM,{init:function(){cM.prototype.init.apply(this,arguments);var a=this,b;return bu(a,{visible:a.visible!==!1,name:bH(a.name,"Slice")}),b=function(){a.slice()},ch(a,"select",b),ch(a,"unselect",b),a},setVisible:function(b){var c=this,d=c.series.chart,e=c.tracker,f=c.dataLabel,g=c.connector,h=c.shadowGroup,i;c.visible=b=b===a?!c.visible:b,i=b?"show":"hide",c.group[i](),e&&e[i](),f&&f[i](),g&&g[i](),h&&h[i](),c.legendItem&&d.legend.colorizeItem(c,b)},slice:function(a,b,c){var d=this,e=d.series,f=e.chart,g=d.slicedTranslation,h;bZ(c,f),b=bH(b,!0),a=d.sliced=bE(a)?a:!d.sliced,h={translateX:a?g[0]:f.plotLeft,translateY:a?g[1]:f.plotTop},d.group.animate(h),d.shadowGroup&&d.shadowGroup.animate(h)}}),cX={type:"pie",isCartesian:!1,pointClass:cW,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},getColor:function(){this.initialColor=this.chart.counters.color},animate:function(){var a=this,b=a.points;cc(b,function(b){var c=b.graphic,d=b.shapeArgs,e=-m/2;c&&(c.attr({r:0,start:e,end:e}),c.animate({r:d.r,start:d.start,end:d.end},a.options.animation))}),a.animate=null},setData:function(a,b){cN.prototype.setData.call(this,a,!1),this.processData(),this.generatePoints(),bH(b,!0)&&this.chart.redraw()},getCenter:function(){var a=this.options,b=this.chart,c=b.plotWidth,d=b.plotHeight,e=a.center.concat([a.size,a.innerSize||0]),f=i(c,d),g;return cf(e,function(a,b){return g=/%$/.test(a),g?[c,d,f,f][b]*bw(a)/100:a})},translate:function(){this.generatePoints();var a=0,b=this,c=-0.25,f=1e3,g=b.options,h=g.slicedOffset,i=h+g.borderWidth,j,n=b.chart,o,p,q,r=b.points,s=2*m,t,u,v,w=g.dataLabels.distance;b.center=j=b.getCenter(),b.getX=function(a,b){return q=d.asin((a-j[1])/(j[2]/2+w)),j[0]+(b?-1:1)*k(q)*(j[2]/2+w)},cc(r,function(b){a+=b.y}),cc(r,function(b){t=a?b.y/a:0,o=e(c*s*f)/f,c+=t,p=e(c*s*f)/f,b.shapeType="arc",b.shapeArgs={x:j[0],y:j[1],r:j[2]/2,innerR:j[3]/2,start:o,end:p},q=(p+o)/2,b.slicedTranslation=cf([k(q)*h+n.plotLeft,l(q)*h+n.plotTop],e),u=k(q)*j[2]/2,v=l(q)*j[2]/2,b.tooltipPos=[j[0]+u*.7,j[1]+v*.7],b.labelPos=[j[0]+u+k(q)*w,j[1]+v+l(q)*w,j[0]+u+k(q)*i,j[1]+v+l(q)*i,j[0]+u,j[1]+v,w<0?"center":q<s/4?"left":"right",q],b.percentage=t*100,b.total=a}),this.setTooltipPoints()},render:function(){var a=this;a.getAttribs(),this.drawPoints(),a.options.enableMouseTracking!==!1&&a.drawTracker(),this.drawDataLabels(),a.options.animation&&a.animate&&a.animate(),a.isDirty=!1},drawPoints:function(){var a=this,b=a.chart,c=b.renderer,d,e,f,g=a.options.shadow,h,i;cc(a.points,function(j){e=j.graphic,i=j.shapeArgs,f=j.group,h=j.shadowGroup,g&&!h&&(h=j.shadowGroup=c.g("shadow").attr({zIndex:4}).add()),f||(f=j.group=c.g("point").attr({zIndex:5}).add()),d=j.sliced?j.slicedTranslation:[b.plotLeft,b.plotTop],f.translate(d[0],d[1]),h&&h.translate(d[0],d[1]),e?e.animate(i):j.graphic=e=c.arc(i).setRadialReference(a.center).attr(bu(j.pointAttr[T],{"stroke-linejoin":"round"})).add(j.group).shadow(g,h),j.visible===!1&&j.setVisible(!1)})},drawDataLabels:function(){var a=this,b=a.data,c,d=a.chart,e=a.options.dataLabels,f=bH(e.connectorPadding,10),g=bH(e.connectorWidth,1),h,i,k=bH(e.softConnector,!0),l=e.distance,n=a.center,o=n[2]/2,p=n[1],q=l>0,r,s,t,u=[[],[]],v,w,x,y,z,A=2,B;if(!e.enabled)return;cN.prototype.drawDataLabels.apply(a),cc(b,function(a){a.dataLabel&&u[a.labelPos[7]<m/2?0:1].push(a)}),u[1].reverse(),z=function(a,b){return b.y-a.y},t=u[0][0]&&u[0][0].dataLabel&&(u[0][0].dataLabel.getBBox().height||21);while(A--){var C=[],D,E=[],F=u[A],G,H=F.length,I;if(l>0){for(G=p-o-l;G<=p+o+l;G+=t)C.push(G);D=C.length;if(H>D){y=[].concat(F),y.sort(z),B=H;while(B--)y[B].rank=B;B=H;while(B--)F[B].rank>=D&&F.splice(B,1);H=F.length}for(B=0;B<H;B++){c=F[B],s=c.labelPos;var J=9999,K,M;for(M=0;M<D;M++)K=j(C[M]-s[1]),K<J&&(J=K,I=M);if(I<B&&C[B]!==null)I=B;else if(D<H-B+I&&C[B]!==null){I=D-H+B;while(C[I]===null)I++}else while(C[I]===null)I++;E.push({i:I,y:C[I]}),C[I]=null}E.sort(z)}for(B=0;B<H;B++){var O,P;c=F[B],s=c.labelPos,r=c.dataLabel,x=c.visible===!1?L:N,P=s[1];if(l>0){O=E.pop(),I=O.i,w=O.y;if(P>w&&C[I+1]!==null||P<w&&C[I-1]!==null)w=P}else w=P;v=e.justify?n[0]+(A?-1:1)*(o+l):a.getX(I===0||I===C.length-1?P:w,A),r.attr({visibility:x,align:s[6]})[r.moved?"animate":"attr"]({x:v+e.x+({left:f,right:-f}[s[6]]||0),y:w+e.y}),r.moved=!0,q&&g&&(h=c.connector,i=k?[Q,v+(s[6]==="left"?5:-5),w,"C",v,w,2*s[2]-s[4],2*s[3]-s[5],s[2],s[3],R,s[4],s[5]]:[Q,v+(s[6]==="left"?5:-5),w,R,s[2],s[3],R,s[4],s[5]],h?(h.animate({d:i}),h.attr("visibility",x)):c.connector=h=a.chart.renderer.path(i).attr({"stroke-width":g,stroke:e.connectorColor||c.color||"#606060",visibility:x,zIndex:3}).translate(d.plotLeft,d.plotTop).add())}}},drawTracker:cT.prototype.drawTracker,drawLegendSymbol:cP.prototype.drawLegendSymbol,getSymbol:function(){}};cX=bK(cN,cX),bt.pie=cX,bu(Highcharts,{Axis:cH,CanVGRenderer:cC,Chart:cL,Color:cw,Legend:cK,Point:cM,Tick:cE,Tooltip:cI,Renderer:x,Series:cN,SVGRenderer:cy,VMLRenderer:cz,dateFormat:D,pathAnim:F,getOptions:cv,hasBidiBug:v,numberFormat:bM,seriesTypes:bt,setOptions:cu,addEvent:ch,removeEvent:ci,createElement:bJ,discardElement:bW,css:bI,each:cc,extend:bu,map:cf,merge:cg,pick:bH,splat:bG,extendClass:bK,pInt:bw,product:"Highcharts",version:"2.2.5"})}(),jQuery.cookie=function(a,b,c){if(arguments.length>1&&String(b)!=="[object Object]"){c=jQuery.extend({},c);if(b===null||b===undefined)c.expires=-1;if(typeof c.expires=="number"){var d=c.expires,e=c.expires=new Date;e.setDate(e.getDate()+d)}return b=String(b),document.cookie=[encodeURIComponent(a),"=",c.raw?b:encodeURIComponent(b),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}c=b||{};var f,g=c.raw?function(a){return a}:decodeURIComponent;return(f=(new RegExp("(?:^|; )"+encodeURIComponent(a)+"=([^;]*)")).exec(document.cookie))?g(f[1]):null},function(a){function b(a,b){b=b||{};var c=a.text().trim();b.currencyInvert&&a.is(b.currencyInvert)?(c=c.replace(/[^\-\d\.]/g,""),c=(-1*Math.abs(parseFloat(c))).toFixed(2)):b.currency&&a.is(b.currency)&&(c=c.replace(/[^\-\d\.]/g,""),c=parseFloat(c).toFixed(2));if(b.modifyCell)for(var d in b.modifyCell)d=b.modifyCell[d],a.is(d.selector)&&(d.prepend&&(c=d.prepend+c),d.append&&(c+=d.append));return b.ignore&&a.is(b.ignore)&&(c=""),c}function c(c,d){d=d||{};var f=c.find("tr").map(function(){return a(this).find("th, td").map(function(){return b(a(this),d)}).get().join(",")}).get();if(d.header){var g=d.header.map(function(a){return a.join(",")});g.push(""),f=g.concat(f)}return f}a.fn.tableToCSV=function(b,d){var f=[];return this.each(function(){var g="",h=a(this);f.push(c(a(this),b)),d&&d(f)})}}(jQuery),function(){var a=this,b=a.Backbone,c;typeof exports!="undefined"?c=exports:c=a.Backbone={},c.VERSION="0.5.3";var d=a._;!d&&typeof require!="undefined"&&(d=require("underscore")._);var e=a.jQuery||a.Zepto;c.noConflict=function(){return a.Backbone=b,this},c.emulateHTTP=!1,c.emulateJSON=!1,c.EventLog={},c.Events={bind:function(a,b,c){var d=this._callbacks||(this._callbacks={}),e=d[a]||(d[a]=[]);return e.push([b,c]),this},unbind:function(a,b){var c;if(!a)this._callbacks={};else if(c=this._callbacks)if(!b)c[a]=[];else{var d=c[a];if(!d)return this;for(var e=0,f=d.length;e<f;e++)if(d[e]&&b===d[e][0]){d[e]=null;break}}return this},logEvent:function(a,b){window.DEBUG&&(c.EventLog.total=c.EventLog.total||0,c.EventLog.total++,c.EventLog.callbacks=c.EventLog.callbacks||[],c.EventLog.callbacks.push(b),c.EventLog[this.cid]=c.EventLog[this.cid]||{},c.EventLog[this.cid].object=this,c.EventLog[this.cid].count=c.EventLog[this.cid].count||0,c.EventLog[this.cid].count++,c.EventLog[this.cid].events=c.EventLog[this.cid].events||[],c.EventLog[this.cid].events.push(a))},trigger:function(a){var b,c,d,e,f,g=2;if(!(c=this._callbacks))return this;while(g--){d=g?a:"all";if(b=c[d])for(var h=0,i=b.length;h<i;h++)(e=b[h])?(f=g?Array.prototype.slice.call(arguments,1):arguments,e[0].apply(e[1]||this,f),this.logEvent(a,e)):(b.splice(h,1),h--,i--)}return this}},c.Model=function(a,b){var c;a||(a={});if(c=this.defaults)d.isFunction(c)&&(c=c.call(this)),a=d.extend({},c,a);this.attributes={},this._escapedAttributes={},this.cid=d.uniqueId("c"),this.set(a,{silent:!0}),this._changed=!1,this._previousAttributes=d.clone(this.attributes),b&&b.collection&&(this.collection=b.collection),this.initialize(a,b)},d.extend(c.Model.prototype,c.Events,{_previousAttributes:null,_changed:!1,idAttribute:"id",initialize:function(){},toJSON:function(){return d.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var b;if(b=this._escapedAttributes[a])return b;var c=this.attributes[a];return this._escapedAttributes[a]=w(c==null?"":""+c)},has:function(a){return this.attributes[a]!=null},set:function(a,b){b||(b={});if(!a)return this;a.attributes&&(a=a.attributes);var c=this.attributes,e=this._escapedAttributes;if(!b.silent&&this.validate&&!this._performValidation(a,b))return!1;this.idAttribute in a&&(this.id=a[this.idAttribute]);var f=this._changing;this._changing=!0;for(var g in a){var h=a[g];d.isEqual(c[g],h)||(c[g]=h,delete e[g],this._changed=!0,b.silent||this.trigger("change:"+g,this,h,b))}return!f&&!b.silent&&this._changed&&this.change(b),this._changing=!1,this},unset:function(a,b){if(a in this.attributes){b||(b={});var c=this.attributes[a],d={};return d[a]=void 0,!b.silent&&this.validate&&!this._performValidation(d,b)?!1:(delete this.attributes[a],delete this._escapedAttributes[a],a==this.idAttribute&&delete this.id,this._changed=!0,b.silent||(this.trigger("change:"+a,this,void 0,b),this.change(b)),this)}return this},clear:function(a){a||(a={});var b,c=this.attributes,d={};for(b in c)d[b]=void 0;if(!a.silent&&this.validate&&!this._performValidation(d,a))return!1;this.attributes={},this._escapedAttributes={},this._changed=!0;if(!a.silent){for(b in c)this.trigger("change:"+b,this,void 0,a);this.change(a)}return this},fetch:function(a){a||(a={});var b=this,d=a.success;return a.success=function(c,e,f){if(!b.set(b.parse(c,f),a))return!1;d&&d(b,c)},a.error=v(a.error,b,a),(this.sync||c.sync).call(this,"read",this,a)},save:function(a,b){b||(b={});if(a&&!this.set(a,b))return!1;var d=this,e=b.success;b.success=function(a,c,f){if(!d.set(d.parse(a,f),b))return!1;e&&e(d,a,f)},b.error=v(b.error,d,b);var f=this.isNew()?"create":"update";return(this.sync||c.sync).call(this,f,this,b)},destroy:function(a){a||(a={});if(this.isNew())return this.trigger("destroy",this,this.collection,a);var b=this,d=a.success;return a.success=function(c){b.trigger("destroy",b,b.collection,a),d&&d(b,c)},a.error=v(a.error,b,a),(this.sync||c.sync).call(this,"delete",this,a)},url:function(){var a=t(this.collection)||this.urlRoot||u();return this.isNew()?a:a+(a.charAt(a.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this)},isNew:function(){return this.id==null},change:function(a){this.trigger("change",this,a),this._previousAttributes=d.clone(this.attributes),this._changed=!1},hasChanged:function(a){return a?this._previousAttributes[a]!=this.attributes[a]:this._changed},changedAttributes:function(a){a||(a=this.attributes
);var b=this._previousAttributes,c=!1;for(var e in a)d.isEqual(b[e],a[e])||(c=c||{},c[e]=a[e]);return c},previous:function(a){return!a||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return d.clone(this._previousAttributes)},_performValidation:function(a,b){var c=this.validate(a);return c?(b.error?b.error(this,c,b):this.trigger("error",this,c,b),!1):!0}}),c.Collection=function(a,b){b||(b={}),b.comparator&&(this.comparator=b.comparator),d.bindAll(this,"_onModelEvent","_removeReference"),this._reset(),a&&this.reset(a,{silent:!0}),this.initialize.apply(this,arguments)},d.extend(c.Collection.prototype,c.Events,{model:c.Model,initialize:function(){},toJSON:function(){return this.map(function(a){return a.toJSON()})},add:function(a,b){if(d.isArray(a))for(var c=0,e=a.length;c<e;c++)this._add(a[c],b);else this._add(a,b);return this},remove:function(a,b){if(d.isArray(a))for(var c=0,e=a.length;c<e;c++)this._remove(a[c],b);else this._remove(a,b);return this},get:function(a){return a==null?null:this._byId[a.id!=null?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},sort:function(a){a||(a={});if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return this.models=this.sortBy(this.comparator),a.silent||this.trigger("reset",this,a),this},pluck:function(a){return d.map(this.models,function(b){return b.get(a)})},reset:function(a,b){return a||(a=[]),b||(b={}),this.each(this._removeReference),this._reset(),this.add(a,{silent:!0}),b.silent||this.trigger("reset",this,b),this},fetch:function(a){a||(a={});var b=this,d=a.success;return a.success=function(c,e,f){b[a.add?"add":"reset"](b.parse(c,f),a),d&&d(b,c)},a.error=v(a.error,b,a),(this.sync||c.sync).call(this,"read",this,a)},create:function(a,b){var c=this;b||(b={}),a=this._prepareModel(a,b);if(!a)return!1;var d=b.success;return b.success=function(a,e,f){c.add(a,b),d&&d(a,e,f)},a.save(null,b),a},parse:function(a,b){return a},chain:function(){return d(this.models).chain()},_reset:function(a){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(a,b){if(a instanceof c.Model)a.collection||(a.collection=this);else{var d=a;a=new this.model(d,{collection:this}),a.validate&&!a._performValidation(d,b)&&(a=!1)}return a},_add:function(a,b){b||(b={}),a=this._prepareModel(a,b);if(!a)return!1;var c=this.getByCid(a);if(c)throw new Error(["Can't add the same model to a set twice",c.id]);this._byId[a.id]=a,this._byCid[a.cid]=a;var d=b.at!=null?b.at:this.comparator?this.sortedIndex(a,this.comparator):this.length;return this.models.splice(d,0,a),a.bind("all",this._onModelEvent),this.length++,b.silent||a.trigger("add",a,this,b),a},_remove:function(a,b){return b||(b={}),a=this.getByCid(a)||this.get(a),a?(delete this._byId[a.id],delete this._byCid[a.cid],this.models.splice(this.indexOf(a),1),this.length--,b.silent||a.trigger("remove",a,this,b),this._removeReference(a),a):null},_removeReference:function(a){this==a.collection&&delete a.collection,a.unbind("all",this._onModelEvent)},_onModelEvent:function(a,b,c,d){if(a!="add"&&a!="remove"||c==this)a=="destroy"&&this._remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],this._byId[b.id]=b),this.trigger.apply(this,arguments);else return}});var f=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","rest","last","without","indexOf","lastIndexOf","isEmpty","groupBy"];d.each(f,function(a){c.Collection.prototype[a]=function(){return d[a].apply(d,[this.models].concat(d.toArray(arguments)))}}),c.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)};var g=/:([\w\d]+)/g,h=/\*([\w\d]+)/g,i=/[-[\]{}()+?.,\\^$|#\s]/g;d.extend(c.Router.prototype,c.Events,{initialize:function(){},route:function(a,b,e){c.history||(c.history=new c.History),d.isRegExp(a)||(a=this._routeToRegExp(a)),c.history.route(a,d.bind(function(c){var d=this._extractParameters(a,c);e.apply(this,d),this.trigger.apply(this,["route:"+b].concat(d))},this))},navigate:function(a,b){c.history.navigate(a,b)},_bindRoutes:function(){if(!this.routes)return;var a=[];for(var b in this.routes)a.unshift([b,this.routes[b]]);for(var c=0,d=a.length;c<d;c++)this.route(a[c][0],a[c][1],this[a[c][1]])},_routeToRegExp:function(a){return a=a.replace(i,"\\$&").replace(g,"([^/]*)").replace(h,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}}),c.History=function(){this.handlers=[],d.bindAll(this,"checkUrl")};var j=/^#*/,k=/msie [\w.]+/,l=!1;d.extend(c.History.prototype,{interval:50,getFragment:function(a,b){if(a==null)if(this._hasPushState||b){a=window.location.pathname;var c=window.location.search;c&&(a+=c),a.indexOf(this.options.root)==0&&(a=a.substr(this.options.root.length))}else a=window.location.hash;return decodeURIComponent(a.replace(j,""))},start:function(a){if(l)throw new Error("Backbone.history has already been started");this.options=d.extend({},{root:"/"},this.options,a),this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var b=this.getFragment(),c=document.documentMode,f=k.exec(navigator.userAgent.toLowerCase())&&(!c||c<=7);f&&(this.iframe=e('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(b)),this._hasPushState?e(window).bind("popstate",this.checkUrl):"onhashchange"in window&&!f?e(window).bind("hashchange",this.checkUrl):setInterval(this.checkUrl,this.interval),this.fragment=b,l=!0;var g=window.location,h=g.pathname==this.options.root;if(this._wantsPushState&&!this._hasPushState&&!h)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&h&&g.hash&&(this.fragment=g.hash.replace(j,""),window.history.replaceState({},document.title,g.protocol+"//"+g.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();b==this.fragment&&this.iframe&&(b=this.getFragment(this.iframe.location.hash));if(b==this.fragment||b==decodeURIComponent(this.fragment))return!1;this.iframe&&this.navigate(b),this.loadUrl()||this.loadUrl(window.location.hash)},loadUrl:function(a){var b=this.fragment=this.getFragment(a),c=d.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0});return c},navigate:function(a,b){var c=(a||"").replace(j,"");if(this.fragment==c||this.fragment==decodeURIComponent(c))return;if(this._hasPushState){var d=window.location;c.indexOf(this.options.root)!=0&&(c=this.options.root+c),this.fragment=c,window.history.pushState({},document.title,d.protocol+"//"+d.host+c)}else window.location.hash=this.fragment=c,this.iframe&&c!=this.getFragment(this.iframe.location.hash)&&(this.iframe.document.open().close(),this.iframe.location.hash=c);b&&this.loadUrl(a)}}),c.View=function(a){this.cid=d.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.delegateEvents(),this.initialize.apply(this,arguments)};var m=function(a){return e(a,this.el)},n=/^(\S+)\s*(.*)$/,o=["model","collection","el","id","attributes","className","tagName"];d.extend(c.View.prototype,c.Events,{tagName:"div",$:m,initialize:function(){},render:function(){return this},remove:function(){return e(this.el).remove(),this},make:function(a,b,c){var d=document.createElement(a);return b&&e(d).attr(b),c&&e(d).html(c),d},delegateEvents:function(a){if(!a&&!(a=this.events))return;d.isFunction(a)&&(a=a.call(this)),e(this.el).unbind(".delegateEvents"+this.cid);for(var b in a){var c=this[a[b]];if(!c)throw new Error('Event "'+a[b]+'" does not exist');var f=b.match(n),g=f[1],h=f[2];c=d.bind(c,this),g+=".delegateEvents"+this.cid,h===""?e(this.el).bind(g,c):e(this.el).delegate(h,g,c)}},_configure:function(a){this.options&&(a=d.extend({},this.options,a));for(var b=0,c=o.length;b<c;b++){var e=o[b];a[e]&&(this[e]=a[e])}this.options=a},_ensureElement:function(){if(!this.el){var a=this.attributes||{};this.id&&(a.id=this.id),this.className&&(a["class"]=this.className),this.el=this.make(this.tagName,a)}else d.isString(this.el)&&(this.el=e(this.el).get(0))}});var p=function(a,b){var c=s(this,a,b);return c.extend=this.extend,c};c.Model.extend=c.Collection.extend=c.Router.extend=c.View.extend=p;var q={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};c.sync=function(a,b,f){var g=q[a],h=d.extend({type:g,dataType:"json"},f);return h.url||(h.url=t(b)||u()),!h.data&&b&&(a=="create"||a=="update")&&(h.contentType="application/json",h.data=JSON.stringify(b.toJSON())),c.emulateJSON&&(h.contentType="application/x-www-form-urlencoded",h.data=h.data?{model:h.data}:{}),c.emulateHTTP&&(g==="PUT"||g==="DELETE")&&(c.emulateJSON&&(h.data._method=g),h.type="POST",h.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",g)}),h.type!=="GET"&&!c.emulateJSON&&(h.processData=!1),e.ajax(h)};var r=function(){},s=function(a,b,c){var e;return b&&b.hasOwnProperty("constructor")?e=b.constructor:e=function(){return a.apply(this,arguments)},d.extend(e,a),r.prototype=a.prototype,e.prototype=new r,b&&d.extend(e.prototype,b),c&&d.extend(e,c),e.prototype.constructor=e,e.__super__=a.prototype,e},t=function(a){return!a||!a.url?null:d.isFunction(a.url)?a.url():a.url},u=function(){throw new Error('A "url" property or function must be specified')},v=function(a,b,c){return function(d){a?a(b,d,c):b.trigger("error",b,d,c)}},w=function(a){return a.replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}}.call(this),function(){var a=this,b={},c=a._;!c&&typeof require!="undefined"&&(c=require("underscore")._),Backbone.Subset=function(a,b){b=b||{},this.model=this.parent().model,this.comparator=this.comparator||b.comparator||this.parent().comparator,this.liveupdate_keys=b.liveupdate_keys||"all",c.bindAll(this,"_onModelEvent","_unbindModelEvents","_proxyEvents"),this.parent().bind("all",this._proxyEvents),this._reset(),this.reset(a||this.parent().models,{silent:!0}),this.initialize.apply(this,arguments)},b.reset=function(a,b){return a=a||[],a=c.isArray(a)?a:[a],b=b||{},this.each(function(a){this.parent()._remove(a,c.extend(b,{noproxy:!0}))},this),c.each(a,function(a){this.parent()._add(a,c.extend(b,{noproxy:!0}))},this),this._resetSubset(a,b)},b._resetSubset=function(a,b){return a=a||[],a=c.isArray(a)?a:[a],b=b||{},this.each(this._unbindModelEvents),this._reset(),this.parent().each(function(a){this.sieve(a)&&this._addToSubset(a,{silent:!0})},this),b.silent||this.trigger("reset",this,b),this},b._add=function(a,b){return this.parent()._add(a,b)},b._addToSubset=function(a,b){return Backbone.Collection.prototype._add.call(this,a,b)},b._remove=function(a,b){return this.parent()._remove(a,b)},b._removeFromSubset=function(a,b){return Backbone.Collection.prototype._remove.call(this,a,b)},b._prepareModel=function(a,b){if(a instanceof Backbone.Model)a.collection||(a.collection=this.parent());else{var c=a;a=new this.model(c,{collection:this.parent()}),a.validate&&!a._performValidation(a.attributes,b)&&(a=!1)}return a=this.sieve(a)?a:!1,a},b._proxyEvents=function(a,b,d,e){e=e||{},d!==this&&(e.noproxy||(a==="change"&&this.liveupdate_keys==="all"?this._updateModelMembership(b):a.slice(0,7)=="change:"&&c.isArray(this.liveupdate_keys)&&c.include(this.liveupdate_keys,a.slice(7))&&this._updateModelMembership(b)),a==="add"&&this.sieve(b)&&!e.noproxy&&this._addToSubset(b,e),a==="remove"&&this.sieve(b)&&!e.noproxy&&this._removeFromSubset(b,e)),a==="reset"&&b!==this&&b.any(this.sieve)&&this._resetSubset(b.models,d)},b._updateModelMembership=function(a){var b=a.id!=null,c=this._byCid[a.cid]||b&&this._byId[a.id];this.sieve(a)?!c&&this._addToSubset(a):c&&this._removeFromSubset(a)},b._unbindModelEvents=function(a){a.unbind("all",this._onModelEvent)},c.extend(Backbone.Subset.prototype,Backbone.Collection.prototype,b),Backbone.Subset.extend=Backbone.Collection.extend}.call(this),function(){var a;a={bindMultiple:function(a,b,c){var d=this;return _.each(a.split(" "),function(a){return d.bind(a,b,c)})}},_.extend(window.Backbone.Model.prototype,a),_.extend(window.Backbone.Collection.prototype,a),_.extend(window.Backbone.Subset.prototype,a)}.call(this),function(a){typeof define=="function"&&define.amd?define(["underscore","jquery","backbone"],a):a(_,$,Backbone)}(function(a,b,c){if(!c)throw"Please include Backbone.js before Backbone.ModelBinder.js";return c.ModelBinder=function(){a.bindAll(this)},c.ModelBinder.VERSION="0.1.5",c.ModelBinder.Constants={},c.ModelBinder.Constants.ModelToView="ModelToView",c.ModelBinder.Constants.ViewToModel="ViewToModel",a.extend(c.ModelBinder.prototype,{bind:function(a,c,d){this.unbind(),this._model=a,this._rootEl=c;if(!this._model)throw"model must be specified";if(!this._rootEl)throw"rootEl must be specified";d?(this._attributeBindings=b.extend(!0,{},d),this._initializeAttributeBindings(),this._initializeElBindings()):this._initializeDefaultBindings(),this._bindModelToView(),this._bindViewToModel()},unbind:function(){this._unbindModelToView(),this._unbindViewToModel(),this._attributeBindings&&(delete this._attributeBindings,this._attributeBindings=undefined)},_initializeAttributeBindings:function(){var b,c,d,e,f;for(b in this._attributeBindings){c=this._attributeBindings[b];if(a.isString(c))d={elementBindings:[{selector:c}]};else if(a.isArray(c))d={elementBindings:c};else if(a.isObject(c))d={elementBindings:[c]};else throw"Unsupported type passed to Model Binder "+d;for(e=0;e<d.elementBindings.length;e++)f=d.elementBindings[e],f.attributeBinding=d;d.attributeName=b,this._attributeBindings[b]=d}},_initializeDefaultBindings:function(){var a,c,d,e;this._attributeBindings={},c=b("[name]",this._rootEl);for(a=0;a<c.length;a++){d=c[a],e=b(d).attr("name");if(!this._attributeBindings[e]){var f={attributeName:e};f.elementBindings=[{attributeBinding:f,boundEls:[d]}],this._attributeBindings[e]=f}else this._attributeBindings[e].elementBindings.push({attributeBinding:this._attributeBindings[e],boundEls:[d]})}},_initializeElBindings:function(){var a,c,d,e,f,g,h;for(a in this._attributeBindings){c=this._attributeBindings[a];for(d=0;d<c.elementBindings.length;d++){e=c.elementBindings[d],e.selector===""?f=b(this._rootEl):f=b(e.selector,this._rootEl);if(f.length===0)throw"Bad binding found. No elements returned for binding selector "+e.selector;e.boundEls=[];for(g=0;g<f.length;g++)h=f[g],e.boundEls.push(h)}}},_bindModelToView:function(){this._model.bind("change",this._onModelChange,this),this.copyModelAttributesToView()},copyModelAttributesToView:function(b){var c,d;for(c in this._attributeBindings)if(b===undefined||a.indexOf(b,c)!==-1)d=this._attributeBindings[c],this._copyModelToView(d)},_unbindModelToView:function(){this._model&&(this._model.off("change",this._onModelChange),this._model=undefined)},_bindViewToModel:function(){b(this._rootEl).delegate("","change",this._onElChanged),b(this._rootEl).delegate("[contenteditable]","blur",this._onElChanged)},_unbindViewToModel:function(){this._rootEl&&(b(this._rootEl).undelegate("","change",this._onElChanged),b(this._rootEl).undelegate("[contenteditable]","blur",this._onElChanged))},_onElChanged:function(a){var c,d,e,f;c=b(a.target)[0],d=this._getElBindings(c);for(e=0;e<d.length;e++)f=d[e],this._isBindingUserEditable(f)&&this._copyViewToModel(f,c)},_isBindingUserEditable:function(a){return a.elAttribute===undefined||a.elAttribute==="text"||a.elAttribute==="html"},_getElBindings:function(a){var b,c,d,e,f,g,h=[];for(b in this._attributeBindings){c=this._attributeBindings[b];for(d=0;d<c.elementBindings.length;d++){e=c.elementBindings[d];for(f=0;f<e.boundEls.length;f++)g=e.boundEls[f],g===a&&h.push(e)}}return h},_onModelChange:function(){var a,b;for(a in this._model.changedAttributes())b=this._attributeBindings[a],b&&this._copyModelToView(b)},_copyModelToView:function(a){var d,e,f,g,h=this._model.get(a.attributeName);for(d=0;d<a.elementBindings.length;d++){e=a.elementBindings[d];if(!e.isSetting){var i=this._getConvertedValue(c.ModelBinder.Constants.ModelToView,e,h);for(f=0;f<e.boundEls.length;f++)g=e.boundEls[f],this._setEl(b(g),e,i)}}},_setEl:function(a,b,c){b.elAttribute?this._setElAttribute(a,b,c):this._setElValue(a,c)},_setElAttribute:function(b,d,e){switch(d.elAttribute){case"html":b.html(e);break;case"text":b.text(e);break;case"enabled":b.attr("disabled",!e);break;case"displayed":b[e?"show":"hide"]();break;case"hidden":b[e?"hide":"show"]();break;case"css":b.css(d.cssAttribute,e);break;case"class":var f=this._model.previous(d.attributeBinding.attributeName);a.isUndefined(f)||(f=this._getConvertedValue(c.ModelBinder.Constants.ModelToView,d,f),b.removeClass(f)),e&&b.addClass(e);break;default:b.attr(d.elAttribute,e)}},_setElValue:function(a,b){if(a.attr("type"))switch(a.attr("type")){case"radio":a.val()===b&&a.attr("checked","checked");break;case"checkbox":b?a.attr("checked","checked"):a.removeAttr("checked");break;default:a.val(b)}else a.is("input")||a.is("select")||a.is("textarea")?a.val(b):a.text(b)},_copyViewToModel:function(a,c){a.isSetting||(a.isSetting=!0,this._setModel(a,b(c)),a.converter&&this._copyModelToView(a.attributeBinding),a.isSetting=!1)},_getElValue:function(a,b){switch(b.attr("type")){case"checkbox":return b.prop("checked")?!0:!1;default:return b.attr("contenteditable")!==undefined?b.html():b.val()}},_setModel:function(a,b){var d={},e=this._getElValue(a,b);e=this._getConvertedValue(c.ModelBinder.Constants.ViewToModel,a,e),d[a.attributeBinding.attributeName]=e,this._model.set(d,{changeSource:"ModelBinder"})},_getConvertedValue:function(a,b,c){return b.converter&&(c=b.converter(a,c,b.attributeBinding.attributeName,this._model)),c}}),c.ModelBinder.CollectionConverter=function(b){this._collection=b;if(!this._collection)throw"Collection must be defined";a.bindAll(this,"convert")},a.extend(c.ModelBinder.CollectionConverter.prototype,{convert:function(a,b){return a===c.ModelBinder.Constants.ModelToView?b?b.id:undefined:this._collection.get(b)}}),c.ModelBinder.createDefaultBindings=function(a,c,d,e){var f,g,h,i,j={};f=b("["+c+"]",a);for(g=0;g<f.length;g++){h=f[g],i=b(h).attr(c);if(!j[i]){var k={selector:"["+c+'="'+i+'"]'};j[i]=k,d&&(j[i].converter=d),e&&(j[i].elAttribute=e)}}return j},c.ModelBinder.combineBindings=function(b,c){a.each(c,function(a,c){var d={selector:a.selector};a.converter&&(d.converter=a.converter),a.elAttribute&&(d.elAttribute=a.elAttribute),b[c]?b[c]=[b[c],d]:b[c]=d})},c.ModelBinder}),Backbone.Marionette=function(a,b,c){var d={};d.version="0.2.6",d.RegionManager=function(a){this.options=a||(a={});if(!this.el){var b=new Error("An 'el' must be specified");throw b.name="NoElError",b}this.el=c(this.el)},b.extend(d.RegionManager.prototype,a.Events,{show:function(a){var b=this.currentView;this.currentView=a,this._closeView(b),this._openView(a)},_closeView:function(a){a&&a.close&&a.close()},_openView:function(a){a.render(),this.el.html(a.el),a.onShow&&a.onShow()}}),d.ItemView=a.View.extend({constructor:function(){var d=e.call(arguments);a.View.prototype.constructor.apply(this,d),this.el=c(this.el),b.bindAll(this,"render")},serializeData:function(){var a;return this.collection&&(a={},a.items=this.collection.toJSON()),this.model&&(a=this.model.toJSON()),a},template:function(){return c(this.options.template)},render:function(){var a=this.getTemplate(),b=this.serializeData(),c=this.renderTemplate(a,b);return this.el.html(c),this.onRender&&this.onRender(),this},renderTemplate:function(a,c){if(!a||a.length===0){var d=new Error("A template must be specified");throw d.name="NoTemplateError",d}return b.template(a.html(),c)},getTemplate:function(){var a=this.template,c;return b.isFunction(a)?c=a.call(this):c=d.TemplateManager.get(a),c},close:function(){this.unbindAll(),this.unbind(),this.remove(),this.onClose&&this.onClose()}}),d.CollectionView=a.View.extend({itemView:d.ItemView,modelView:d.ItemView,constructor:function(){a.View.prototype.constructor.apply(this,arguments),this.el=c(this.el),b.bindAll(this,"addChildView","render"),this.bindTo(this.collection,"add",this.addChildView,this),this.bindTo(this.collection,"remove",this.removeChildView,this)},render:function(){return this.renderModel(),this.collection.each(this.addChildView),this.onRender&&this.onRender(),this},renderModel:function(){if(this.model){var a=new this.modelView({model:this.model,template:this.template});a.render(),this.el.append(a.el)}},addChildView:function(a){var b=this.renderItem(a);this.appendHtml(this.el,b)},removeChildView:function(a){var b=this.children[a.cid];b&&(b.close(),delete this.children[a.cid])},appendHtml:function(a,b){a.append(b)},renderItem:function(a){var b=new this.itemView({model:a});return b.render(),this.storeChild(b),b.el},storeChild:function(a){this.children||(this.children={}),this.children[a.model.cid]=a},close:function(){this.unbind(),this.unbindAll(),this.remove(),this.children&&b.each(this.children,function(a){a.close()}),this.onClose&&this.onClose()}}),d.BindTo={bindTo:function(a,b,c,d){d=d||this,a.bind(b,c,d),this.bindings||(this.bindings=[]),this.bindings.push({obj:a,eventName:b,callback:c,context:d})},unbindAll:function(){b.each(this.bindings,function(a){a.obj.unbind(a.eventName,a.callback)}),this.bindings=[]}},d.AppRouter=a.Router.extend({constructor:function(b){a.Router.prototype.constructor.call(this,b),this.appRoutes&&this.processAppRoutes(b.controller,this.appRoutes)},processAppRoutes:function(a,b){var c,d,e,f,g=[],h=this;for(e in b)g.unshift([e,b[e]]);f=g.length;for(var i=0;i<f;i++)e=g[i][0],d=g[i][1],c=a[d],h.route(e,d,c)}}),d.Application=function(c){this.initializers=[],this.vent=b.extend({},a.Events,d.BindTo),b.extend(this,c)},b.extend(d.Application.prototype,a.Events,{addInitializer:function(a){this.initializers.push(a)},start:function(a){this.trigger("initialize:before",a);for(var b=0;b<this.initializers.length;b++){var c=this.initializers[b];c.call(this,a)}this.trigger("initialize:after",a)},addRegions:function(a){this.regions||(this.regions={},this.addInitializer(b.bind(this._initializeRegions,this)));var c=this.regions;for(var e in a)if(a.hasOwnProperty(e)){var f=a[e];typeof f=="string"?c[e]=d.RegionManager.extend({el:f}):c[e]=f}},_initializeRegions:function(){if(!this.regions)return;for(var a in this.regions)this.regions.hasOwnProperty(a)&&(this[a]=new this.regions[a])}}),d.TemplateManager={templates:{},get:function(a){var b=this.templates[a];return b||(b=this.loadTemplate(a),this.templates[a]=b),b},loadTemplate:function(a){return c(a)},clear:function(){var a=arguments.length;if(a>1)for(var b=0;b<a;b++)delete this.templates[arguments[b]];else this.templates={}}};var e=Array.prototype.slice,f=a.View.extend;return d.RegionManager.extend=f,d.Application.extend=f,b.extend(d.ItemView.prototype,d.BindTo),b.extend(d.CollectionView.prototype,d.BindTo),b.extend(d.Application.prototype,d.BindTo),d}(Backbone,_,window.jQuery||window.Zepto||window.ender),Backbone.Marionette.Callbacks=function(){this.deferred=$.Deferred(),this.promise=this.deferred.promise()},_.extend(Backbone.Marionette.Callbacks.prototype,{add:function(a,b){this.promise.done(function(c,d){b&&(c=b),a.call(c,d)})},run:function(a,b){this.deferred.resolve(b,a)}}),Backbone.Marionette.BindTo={bindTo:function(a,b,c,d){d=d||this,a.bind(b,c,d),this.bindings||(this.bindings=[]);var e={obj:a,eventName:b,callback:c,context:d};return this.bindings.push(e),e},unbindFrom:function(a){a.obj.unbind(a.eventName,a.callback,a.context),this.bindings=_.reject(this.bindings,function(b){return b===a})},unbindAll:function(){var a=this,b=_.map(this.bindings,_.identity);_.each(b,function(b,c){a.unbindFrom(b)})}},function(){var a={create:"POST",update:"PUT","delete":"DELETE",read:"GET"},b=function(a){return!a||!a.url?null:_.isFunction(a.url)?a.url():a.url},c=function(){throw new Error("A 'url' property or function must be specified")};Backbone.sync=function(d,e,f){var g=a[d],h=_.extend({type:g,dataType:"json",beforeSend:function(a){var b=$('meta[name="csrf-token"]').attr("content");b&&a.setRequestHeader("X-CSRF-Token",b),e.trigger("sync:start")}},f);h.url||(h.url=b(e)||c());if(!h.data&&e&&(d=="create"||d=="update")){h.contentType="application/json";var i={};e.paramRoot?i[e.paramRoot]=e.toJSON():i=e.toJSON(),h.data=JSON.stringify(i)}h.type!=="GET"&&(h.processData=!1);var j=f.complete;return h.complete=function(a,b){e.trigger("sync:end"),j&&j(a,b)},$.ajax(h)}}.call(this),function(a){return a.extend(a.fn,{backboneParseForm:function(b,c){var d=a(this);c=c||"";var e={};return a(this).find(":input").not(":radio, :checkbox").not(c).each(function(){var b,c;b=a(this),c=b.attr("name"),e[b.attr("name")]=b.val()}),a(this).find(":radio").not(c).each(function(){var b,c,f;b=a(this),c=b.attr("name"),c=b.attr("name"),f=d.find('input:radio[name="'+c+'"]:checked').val(),e[c]=f}),a(this).find(":checkbox").each(function(){var b,c;b=a(this),c=b.attr("name"),e[c]=b.is(":checked")}),b.set(e)},backboneFillForm:function(b,c){var d=a(this);c=c||"",a(this).find(":input").not(":radio, :checkbox").not(c).each(function(){var c,d;c=a(this),d=c.attr("name"),b.toJSON()[d]&&c.val(b.toJSON()[d])}),a(this).find(":radio").not(c).each(function(){var c,e;c=a(this),e=c.attr("name");if(b.toJSON()[e]){var f=b.toJSON()[e];d.find('input:radio[name="'+e+'"]').filter('[value="'+f+'"]').attr("checked",!0)}}),a(this).find(":checkbox").each(function(){var c,d;c=a(this),d=c.attr("name");if(b.toJSON()[d]){var e=b.toJSON()[d];c.attr("checked",e)}})},backboneLink:function(b,c){var d=a(this);c=c||"",a(this).find(":input").not(":radio, :checkbox").not(c).each(function(){var c,d;return c=a(this),d=c.attr("name"),b.toJSON()[d]&&c.val(b.toJSON()[d]),b.bind("change:"+d,function(){return c.val(b.toJSON()[d])}),a(this).bind("change",function(){var d;return c=a(this),d={},d[c.attr("name")]=c.val(),b.set(d)})}),a(this).find(":radio").not(c).each(function(){var c,e;c=a(this),e=c.attr("name");if(b.toJSON()[e]){var f=b.toJSON()[e];d.find('input:radio[name="'+e+'"]').filter('[value="'+f+'"]').attr("checked",!0)}b.bind("change:"+e,function(){var a=b.toJSON()[e];return d.find('input:radio[name="'+e+'"]').filter('[value="'+a+'"]').attr("checked",!0)}),a(this).bind("change",function(){var c,e,f,g;return c=a(this),g=c.attr("name"),f=d.find('input:radio[name="'+g+'"]:checked').val(),e={},e[g]=f,b.set(e)})}),a(this).find(":checkbox").each(function(){var c,d;c=a(this),d=c.attr("name");if(b.toJSON()[d]){var e=b.toJSON()[d];c.attr("checked",e)}b.bind("change:"+d,function(){var a=b.toJSON()[d];c.attr("checked",a)}),a(this).bind("change",function(){var c,d,e,f;return c=a(this),f=c.attr("name"),d={},d[f]=c.is(":checked"),b.set(d)})})}})}(jQuery),function(a){if(typeof window=="undefined")var b=require("underscore"),c=require("backbone"),d=module.exports=c;else var b=this._,c=this.Backbone,d=this;c.Relational={showWarnings:!0},c.Semaphore={_permitsAvailable:null,_permitsUsed:0,acquire:function(){if(this._permitsAvailable&&this._permitsUsed>=this._permitsAvailable)throw new Error("Max permits acquired");this._permitsUsed++},release:function(){if(this._permitsUsed===0)throw new Error("All permits released");this._permitsUsed--},isLocked:function(){return this._permitsUsed>0},setAvailablePermits:function(a){if(this._permitsUsed>a)throw new Error("Available permits cannot be less than used permits");this._permitsAvailable=a}},c.BlockingQueue=function(){this._queue=[]},b.extend(c.BlockingQueue.prototype,c.Semaphore,{_queue:null,add:function(a){this.isBlocked()?this._queue.push(a):a()},process:function(){while(this._queue&&this._queue.length)this._queue.shift()()},block:function(){this.acquire()},unblock:function(){this.release(),this.isBlocked()||this.process()},isBlocked:function(){return this.isLocked()}}),c.Relational.eventQueue=new c.BlockingQueue,c.Store=function(){this._collections=[],this._reverseRelations=[]},b.extend(c.Store.prototype,c.Events,{_collections:null,_reverseRelations:null,addReverseRelation:function(a){var c=b.any(this._reverseRelations,function(c){return b.all(a,function(a,b){return a===c[b]})});!c&&a.model&&a.type&&(this._reverseRelations.push(a),a.model.prototype.relations||(a.model.prototype.relations=[]),a.model.prototype.relations.push(a),this.retroFitRelation(a))},retroFitRelation:function(a){var b=this.getCollection(a.model);b.each(function(b){var c=new a.type(b,a)},this)},getCollection:function(a){var c=b.detect(this._collections,function(b){return a===b.model||a.constructor===b.model});return c||(c=this._createCollection(a)),c},getObjectByName:function(a){var c=b.reduce(a.split("."),function(a,b){return a[b]},d);return c!==d?c:null},_createCollection:function(a){var b;return a instanceof c.RelationalModel&&(a=a.constructor),a.prototype instanceof c.RelationalModel.prototype.constructor&&(b=new c.Collection,b.model=a,this._collections.push(b)),b},find:function(a,b){var c=this.getCollection(a);return c&&c.get(b)},register:function(a){var b=a.collection,c=this.getCollection(a);c&&c._add(a),a.bind("destroy",this.unregister,this),a.collection=b},update:function(a){var b=this.getCollection(a);b._onModelEvent("change:"+a.idAttribute,a,b)},unregister:function(a){a.unbind("destroy",this.unregister);var b=this.getCollection(a);b&&b.remove(a)}}),c.Relational.store=new c.Store,c.Relation=function(a,d){this.instance=a,d=typeof d=="object"&&d||{},this.reverseRelation=b.defaults(d.reverseRelation||{},this.options.reverseRelation),this.reverseRelation.type=b.isString(this.reverseRelation.type)?c[this.reverseRelation.type]||c.Relational.store.getObjectByName(this.reverseRelation.type):this.reverseRelation.type,this.options=b.defaults(d,this.options,c.Relation.prototype.options),this.key=this.options.key,this.keyContents=this.instance.get(this.key),this.relatedModel=this.options.relatedModel,b.isString(this.relatedModel)&&(this.relatedModel=c.Relational.store.getObjectByName(this.relatedModel));if(!this.checkPreconditions())return!1;this.instance._relations.push(this),!this.options.isAutoRelation&&this.reverseRelation.type&&this.reverseRelation.key&&c.Relational.store.addReverseRelation(b.defaults({isAutoRelation:!0,model:this.relatedModel,relatedModel:this.instance.constructor,reverseRelation:this.options},this.reverseRelation)),this.initialize(),b.bindAll(this,"_modelRemovedFromCollection","_relatedModelAdded","_relatedModelRemoved"),c.Relational.store.getCollection(this.instance).bind("relational:remove",this._modelRemovedFromCollection),c.Relational.store.getCollection(this.relatedModel).bind("relational:add",this._relatedModelAdded).bind("relational:remove",this._relatedModelRemoved)},c.Relation.extend=c.Model.extend,b.extend(c.Relation.prototype,c.Events,c.Semaphore,{options:{createModels:!0,includeInJSON:!0,isAutoRelation:!1},instance:null,key:null,keyContents:null,relatedModel:null,reverseRelation:null,related:null,_relatedModelAdded:function(a,b,c){var d=this;a.queue(function(){d.tryAddRelated(a,c)})},_relatedModelRemoved:function(a,b,c){this.removeRelated(a,c)},_modelRemovedFromCollection:function(a){a===this.instance&&this.destroy()},checkPreconditions:function(){var a=this.instance,d=this.key,e=this.relatedModel,f=c.Relational.showWarnings;if(!a||!d||!e)return f&&console&&console.warn("Relation=%o; no instance, key or relatedModel (%o, %o, %o)",this,a,d,e),!1;if(a instanceof c.RelationalModel){if(e.prototype instanceof c.RelationalModel.prototype.constructor){if(this instanceof c.HasMany&&this.reverseRelation.type===c.HasMany.prototype.constructor)return f&&console&&console.warn("Relation=%o; relation is a HasMany, and the reverseRelation is HasMany as well.",this),!1;if(a._relations.length){var g=b.any(a._relations,function(a){var b=this.reverseRelation.key&&a.reverseRelation.key;return a.relatedModel===e&&a.key===d&&(!b||this.reverseRelation.key===a.reverseRelation.key)},this);if(g)return f&&console.warn("Relation=%o between instance=%o.%s and relatedModel=%o.%s already exists",this,a,d,e,this.reverseRelation.key),!1}return!0}return f&&console&&console.warn("Relation=%o; relatedModel does not inherit from Backbone.RelationalModel (%o)",this,e),!1}return f&&console&&console.warn("Relation=%o; instance=%o is not a Backbone.RelationalModel",this,a),!1},setRelated:function(a,c){this.related=a;var d={};d[this.key]=a,this.instance.acquire(),this.instance.set(d,b.defaults(c||{},{silent:!0})),this.instance.release()},createModel:function(a){if(this.options.createModels&&typeof a=="object")return new this
.relatedModel(a)},_isReverseRelation:function(a){return a.instance instanceof this.relatedModel&&this.reverseRelation.key===a.key&&this.key===a.reverseRelation.key?!0:!1},getReverseRelations:function(a){var c=[],d=b.isUndefined(a)?this.related&&(this.related.models||[this.related]):[a];return b.each(d,function(a){b.each(a.getRelations(),function(a){this._isReverseRelation(a)&&c.push(a)},this)},this),c},sanitizeOptions:function(a){return a||(a={}),a.silent&&(a=b.extend({},a,{silentChange:!0}),delete a.silent),a},destroy:function(){c.Relational.store.getCollection(this.instance).unbind("relational:remove",this._modelRemovedFromCollection),c.Relational.store.getCollection(this.relatedModel).unbind("relational:add",this._relatedModelAdded).unbind("relational:remove",this._relatedModelRemoved),b.each(this.getReverseRelations(),function(a){a.removeRelated(this.instance)},this)}}),c.HasOne=c.Relation.extend({options:{reverseRelation:{type:"HasMany"}},initialize:function(){b.bindAll(this,"onChange"),this.instance.bind("relational:change:"+this.key,this.onChange);var a=this.findRelated({silent:!0});this.setRelated(a);var c=this;b.each(c.getReverseRelations(),function(a){a.addRelated(c.instance)})},findRelated:function(a){var d=this.keyContents,e=null;if(d instanceof this.relatedModel)e=d;else if(d&&(b.isString(d)||b.isNumber(d)||typeof d=="object")){var f=b.isString(d)||b.isNumber(d)?d:d[this.relatedModel.prototype.idAttribute];e=c.Relational.store.find(this.relatedModel,f),e&&b.isObject(d)?e.set(d,a):e||(e=this.createModel(d))}return e},onChange:function(a,d,e){if(this.isLocked())return;this.acquire(),e=this.sanitizeOptions(e);var f=b.isUndefined(e._related),g=f?this.related:e._related;if(f){this.keyContents=d;if(d instanceof this.relatedModel)this.related=d;else if(d){var h=this.findRelated(e);this.setRelated(h)}else this.setRelated(null)}g&&this.related!==g&&b.each(this.getReverseRelations(g),function(a){a.removeRelated(this.instance,e)},this),b.each(this.getReverseRelations(),function(a){a.addRelated(this.instance,e)},this);if(!e.silentChange&&this.related!==g){var i=this;c.Relational.eventQueue.add(function(){i.instance.trigger("update:"+i.key,i.instance,i.related,e)})}this.release()},tryAddRelated:function(a,c){if(this.related)return;c=this.sanitizeOptions(c);var d=this.keyContents;if(d&&(b.isString(d)||b.isNumber(d)||typeof d=="object")){var e=b.isString(d)||b.isNumber(d)?d:d[this.relatedModel.prototype.idAttribute];a.id===e&&this.addRelated(a,c)}},addRelated:function(a,b){if(a!==this.related){var c=this.related||null;this.setRelated(a),this.onChange(this.instance,a,{_related:c})}},removeRelated:function(a,d){if(!this.related)return;if(a===this.related){var e=this.related||null,f=null;b.isFunction(this.instance.relationalDefaultKey)&&(f=c.Relational.store.find(e,this.instance.relationalDefaultKey())),this.setRelated(f),this.onChange(this.instance,a,{_related:e})}}}),c.HasMany=c.Relation.extend({collectionType:null,options:{reverseRelation:{type:"HasOne"},collectionType:c.Collection},initialize:function(){b.bindAll(this,"onChange","handleAddition","handleRemoval"),this.instance.bind("relational:change:"+this.key,this.onChange),this.collectionType=this.options.collectionType,b(this.collectionType).isString()&&(this.collectionType=c.Relational.store.getObjectByName(this.collectionType));if(!this.collectionType.prototype instanceof c.Collection.prototype.constructor)throw new Error("collectionType must inherit from Backbone.Collection");this.setRelated(this.prepareCollection(new this.collectionType)),this.findRelated({silent:!0})},prepareCollection:function(a){return this.related&&this.related.unbind("relational:add",this.handleAddition).unbind("relational:remove",this.handleRemoval),a.reset(),a.model=this.relatedModel,a.bind("relational:add",this.handleAddition).bind("relational:remove",this.handleRemoval),a},findRelated:function(a){this.keyContents&&b.isArray(this.keyContents)&&b.each(this.keyContents,function(d){var e=b.isString(d)||b.isNumber(d)?d:d[this.relatedModel.prototype.idAttribute],f=c.Relational.store.find(this.relatedModel,e);f&&b.isObject(d)?f.set(d,a):f||(f=this.createModel(d)),f&&!this.related.getByCid(f)&&!this.related.get(f)&&this.related._add(f)},this)},onChange:function(a,d,e){e=this.sanitizeOptions(e),this.keyContents=d,b.each(this.getReverseRelations(),function(a){a.removeRelated(this.instance,e)},this);if(d instanceof c.Collection)this.prepareCollection(d),this.related=d;else{var f=this.related instanceof c.Collection?this.related:new this.collectionType;this.setRelated(this.prepareCollection(f)),this.findRelated(e)}b.each(this.getReverseRelations(),function(a){a.addRelated(this.instance,e)},this);var g=this;c.Relational.eventQueue.add(function(){!e.silentChange&&g.instance.trigger("update:"+g.key,g.instance,g.related,e)})},tryAddRelated:function(a,c){c=this.sanitizeOptions(c);if(!this.related.getByCid(a)&&!this.related.get(a)){var d=b.any(this.keyContents,function(c){var d=b.isString(c)||b.isNumber(c)?c:c[this.relatedModel.prototype.idAttribute];return d&&d===a.id},this);d&&this.related._add(a,c)}},handleAddition:function(a,d,e){if(!(a instanceof c.Model))return;e=this.sanitizeOptions(e);var f=this;b.each(this.getReverseRelations(a),function(a){a.addRelated(this.instance,e)},this),c.Relational.eventQueue.add(function(){!e.silentChange&&f.instance.trigger("add:"+f.key,a,f.related,e)})},handleRemoval:function(a,d,e){e=this.sanitizeOptions(e),b.each(this.getReverseRelations(a),function(a){a.removeRelated(this.instance,e)},this);var f=this;c.Relational.eventQueue.add(function(){!e.silentChange&&f.instance.trigger("remove:"+f.key,a,f.related,e)})},addRelated:function(a,b){var c=this;a.queue(function(){c.related&&!c.related.getByCid(a)&&!c.related.get(a)&&c.related._add(a,b)})},removeRelated:function(a,b){(this.related.getByCid(a)||this.related.get(a))&&this.related.remove(a,b)}}),c.RelationalModel=c.Model.extend({relations:null,_relations:null,_isInitialized:!1,_deferProcessing:!1,_queue:null,constructor:function(a,d){var e=this;if(d&&d.collection){this._deferProcessing=!0;var f=function(a,b){a===e&&(e._deferProcessing=!1,e.processQueue(),d.collection.unbind("relational:add",f))};d.collection.bind("relational:add",f),b.defer(function(){f(e)})}this._queue=new c.BlockingQueue,this._queue.block(),c.Relational.eventQueue.block(),c.Model.prototype.constructor.apply(this,arguments),c.Relational.eventQueue.unblock()},trigger:function(a){if(a.length>5&&"change"===a.substr(0,6)){var b=this,d=arguments;c.Relational.eventQueue.add(function(){c.Model.prototype.trigger.apply(b,d)})}else c.Model.prototype.trigger.apply(this,arguments);return this},initializeRelations:function(){this.acquire(),this._relations=[],b.each(this.relations,function(a){var d=b.isString(a.type)?c[a.type]||c.Relational.store.getObjectByName(a.type):a.type;d&&d.prototype instanceof c.Relation.prototype.constructor?new d(this,a):c.Relational.showWarnings&&console&&console.warn("Relation=%o; missing or invalid type!",a)},this),this._isInitialized=!0,this.release(),this.processQueue()},updateRelations:function(a){this._isInitialized&&!this.isLocked()&&b.each(this._relations,function(b){var c=this.attributes[b.key];b.related!==c&&this.trigger("relational:change:"+b.key,this,c,a||{})},this)},queue:function(a){this._queue.add(a)},processQueue:function(){this._isInitialized&&!this._deferProcessing&&this._queue.isBlocked()&&this._queue.unblock()},getRelation:function(a){return b.detect(this._relations,function(b){if(b.key===a)return!0},this)},getRelations:function(){return this._relations},fetchRelated:function(a,d){d||(d={});var e=this.getRelation(a),f=e&&e.keyContents,g=f&&b.select(b.isArray(f)?f:[f],function(a){var d=b.isString(a)||b.isNumber(a)?a:a[e.relatedModel.prototype.idAttribute];return d&&!c.Relational.store.find(e.relatedModel,d)},this);if(g&&g.length){var h=b.map(g,function(a){if(typeof a=="object")var b=new e.relatedModel(a);else{var c={};c[e.relatedModel.prototype.idAttribute]=a;var b=new e.relatedModel(c)}return b},this);if(e.related instanceof c.Collection&&b.isFunction(e.related.url))var i=e.related.url(h);if(i&&i!==e.related.url())var j=b.defaults({error:function(){var a=arguments;b.each(h,function(b){b.destroy(),d.error&&d.error.apply(b,a)})},url:i},d,{add:!0}),k=[e.related.fetch(j)];else var k=b.map(h,function(a){var c=b.defaults({error:function(){a.destroy(),d.error&&d.error.apply(a,arguments)}},d);return a.fetch(c)},this)}return b.isUndefined(k)?[]:k},set:function(a,b){c.Relational.eventQueue.block();var d=c.Model.prototype.set.apply(this,arguments);return!this._isInitialized&&!this.isLocked()?(c.Relational.store.register(this),this.initializeRelations()):a&&this.idAttribute in a&&c.Relational.store.update(this),this.updateRelations(b),c.Relational.eventQueue.unblock(),d},unset:function(a,b){c.Relational.eventQueue.block();var d=c.Model.prototype.unset.apply(this,arguments);return this.updateRelations(b),c.Relational.eventQueue.unblock(),d},clear:function(a){c.Relational.eventQueue.block();var b=c.Model.prototype.clear.apply(this,arguments);return this.updateRelations(a),c.Relational.eventQueue.unblock(),b},change:function(a){var b=this;c.Relational.eventQueue.add(function(){c.Model.prototype.change.apply(b,arguments)})},toJSON:function(){if(this.isLocked())return this.id;this.acquire();var a=c.Model.prototype.toJSON.call(this);return b.each(this._relations,function(d){var e=a[d.key];d.options.includeInJSON===!0&&e&&b.isFunction(e.toJSON)?a[d.key]=e.toJSON():b.isString(d.options.includeInJSON)?e instanceof c.Collection?a[d.key]=e.pluck(d.options.includeInJSON):e instanceof c.Model&&(a[d.key]=e.get(d.options.includeInJSON)):delete a[d.key]},this),this.release(),a}}),b.extend(c.RelationalModel.prototype,c.Semaphore);var e=c.Collection.prototype._add;c.Collection.prototype._add=function(a,b){if(!(a instanceof c.Model)){var d=c.Relational.store.find(this.model,a[this.model.prototype.idAttribute]);d&&(a=d.set(a,b))}if(!(a instanceof c.Model)||!this.get(a)&&!this.getByCid(a))a=e.call(this,a,b);return a&&this.trigger("relational:add",a,this,b),a};var f=c.Collection.prototype._remove;c.Collection.prototype._remove=function(a,b){return a=f.call(this,a,b),a&&this.trigger("relational:remove",a,this,b),a};var g=c.Collection.prototype.trigger;c.Collection.prototype.trigger=function(a){if(a==="add"||a==="remove"||a==="reset"){var b=this,d=arguments;c.Relational.eventQueue.add(function(){g.apply(b,d)})}else g.apply(this,arguments);return this}}(),function(a){if(typeof window=="undefined")var b=require("underscore"),c=require("backbone"),d=module.exports=c;else var b=this._,c=this.Backbone,d=this;c.DataTypes={},b.isFunction(_date)&&(c.DataTypes.date=function(a){if(b.isString(a)){var a=b.first(a.split("T"));return b.date(a,"YYYY-MM-DD")}return a}),b.isFunction(SimpleDecimal)&&(c.DataTypes.decimal=function(a){if(b.isString(a)){var c=a.replace(/[^\d\.\-]/g,""),d=b.decimal(c);return d}return a}),c.DataTypes.integer=function(a){return b.isString(a)?parseInt(a,10):a},c.Model.prototype.set=function(a,d){d||(d={});if(!a)return this;a.attributes&&(a=a.attributes);var e=this.attributes,f=this._escapedAttributes;if(b.isFunction(this.datatypes))var g=this.datatypes();else var g=this.datatypes;var h=this;if(g)for(var i in g)a[i]&&(b.isFunction(g[i])?a[i]=g[i](a[i],this):b.isFunction(c.DataTypes[g[i]])&&(a[i]=c.DataTypes[g[i]](a[i])));if(!d.silent&&this.validate&&!this._performValidation(a,d))return!1;this.idAttribute in a&&(this.id=a[this.idAttribute]);var j=this._changing;this._changing=!0;for(var i in a){var k=a[i];b.isEqual(e[i],k)||(e[i]=k,delete f[i],this._changed=!0,d.silent||this.trigger("change:"+i,this,k,d))}return!j&&!d.silent&&this._changed&&this.change(d),this._changing=!1,this}}(),function(a){return a.extend(a.fn,{formErrors:function(b){var c=a(this);b&&a.each(b,function(b,d){var e=b.split(".");b=e[e.length-1];var f=c.find("input[name*="+b+"]"),g=a("<span>").addClass("help-inline error-message").text(d[0]),h=f.closest(".clearfix");f.addClass("error"),h.addClass("error"),h.find(".error-message").length==0&&(h.find(".errors-placeholder").length>0?h.find(".errors-placeholder").append(g):h.append(g))})}})}(jQuery),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};Backbone.ScopedCollection=function(b){function d(){this.subset=a(this.subset,this),this.createScope=a(this.createScope,this),this.setupScopes=a(this.setupScopes,this),this.setupScopes(),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="ScopedCollection",d.prototype.scopes=null,d.prototype.setupScopes=function(){var a,b,c,d;c=this.scopes,d=[];for(a in c)b=c[a],d.push(this.createScope(a,b));return d},d.prototype.createScope=function(a,b){var c,d=this;return _.isFunction(b)&&(c=b),_.isString(b)&&(c=function(a){return a[b]()}),this[a]=function(a,b){return a==null&&(a=!1),b==null&&(b={}),d.subset(c,a,b)}},d.prototype.subset=function(a,b,c){var d,e,f;return b==null&&(b=!1),c==null&&(c={}),b?(f=this,e={},_.extend(e,c,{parent:function(){return f},sieve:a}),d=Backbone.Subset.extend(e),this.onSubsetClass&&this.onSubsetClass(d),new d):new this.constructor(this.filter(a))},d}(Backbone.Collection)}.call(this),function(){(function(a){return a.extend(a,{noBubble:function(a){return a.stopPropagation(),a.preventDefault()}}),a.extend(a.fn,{expandingList:function(b){var c,d,e,f;b=a.extend({limit:10,showText:"Show more",hideText:"Show less",startExpanded:!1},b),d=a(this);if(d.find("li").length>b.limit)return c=a("<a>"),e=function(e){return a.noBubble(e),d.find("li").slice(b.limit).hide(),c.text(b.showText)},f=function(e){return a.noBubble(e),d.find("li").show(),c.text(b.hideText)},c.toggle(e,f),b.startExpanded||c.click(),c.insertAfter(d)}})})(jQuery)}.call(this),function(){var a={},b=this,c=b.async;typeof module!="undefined"&&module.exports?module.exports=a:b.async=a,a.noConflict=function(){return b.async=c,a};var d=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c+=1)b(a[c],c,a)},e=function(a,b){if(a.map)return a.map(b);var c=[];return d(a,function(a,d,e){c.push(b(a,d,e))}),c},f=function(a,b,c){return a.reduce?a.reduce(b,c):(d(a,function(a,d,e){c=b(c,a,d,e)}),c)},g=function(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},h=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c+=1)if(a[c]===b)return c;return-1};typeof process=="undefined"||!process.nextTick?a.nextTick=function(a){setTimeout(a,0)}:a.nextTick=process.nextTick,a.forEach=function(a,b,c){if(!a.length)return c();var e=0;d(a,function(d){b(d,function(b){b?(c(b),c=function(){}):(e+=1,e===a.length&&c())})})},a.forEachSeries=function(a,b,c){if(!a.length)return c();var d=0,e=function(){b(a[d],function(b){b?(c(b),c=function(){}):(d+=1,d===a.length?c():e())})};e()},a.forEachLimit=function(a,b,c,d){if(!a.length||b<=0)return d();var e=0,f=0,g=0;(function h(){if(e===a.length)return d();while(g<b&&f<a.length)c(a[f],function(b){b?(d(b),d=function(){}):(e+=1,g-=1,e===a.length?d():h())}),f+=1,g+=1})()};var i=function(b){return function(){var c=Array.prototype.slice.call(arguments);return b.apply(null,[a.forEach].concat(c))}},j=function(b){return function(){var c=Array.prototype.slice.call(arguments);return b.apply(null,[a.forEachSeries].concat(c))}},k=function(a,b,c,d){var f=[];b=e(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c,d){f[a.index]=d,b(c)})},function(a){d(a,f)})};a.map=i(k),a.mapSeries=j(k),a.reduce=function(b,c,d,e){a.forEachSeries(b,function(a,b){d(c,a,function(a,d){c=d,b(a)})},function(a){e(a,c)})},a.inject=a.reduce,a.foldl=a.reduce,a.reduceRight=function(b,c,d,f){var g=e(b,function(a){return a}).reverse();a.reduce(g,c,d,f)},a.foldr=a.reduceRight;var l=function(a,b,c,d){var f=[];b=e(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c&&f.push(a),b()})},function(a){d(e(f.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};a.filter=i(l),a.filterSeries=j(l),a.select=a.filter,a.selectSeries=a.filterSeries;var m=function(a,b,c,d){var f=[];b=e(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c||f.push(a),b()})},function(a){d(e(f.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};a.reject=i(m),a.rejectSeries=j(m);var n=function(a,b,c,d){a(b,function(a,b){c(a,function(c){c?(d(a),d=function(){}):b()})},function(a){d()})};a.detect=i(n),a.detectSeries=j(n),a.some=function(b,c,d){a.forEach(b,function(a,b){c(a,function(a){a&&(d(!0),d=function(){}),b()})},function(a){d(!1)})},a.any=a.some,a.every=function(b,c,d){a.forEach(b,function(a,b){c(a,function(a){a||(d(!1),d=function(){}),b()})},function(a){d(!0)})},a.all=a.every,a.sortBy=function(b,c,d){a.map(b,function(a,b){c(a,function(c,d){c?b(c):b(null,{value:a,criteria:d})})},function(a,b){if(a)return d(a);var c=function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0};d(null,e(b.sort(c),function(a){return a.value}))})},a.auto=function(a,b){b=b||function(){};var c=g(a);if(!c.length)return b(null);var e=[],i=[],j=function(a){i.unshift(a)},k=function(a){for(var b=0;b<i.length;b+=1)if(i[b]===a){i.splice(b,1);return}},l=function(){d(i,function(a){a()})};j(function(){e.length===c.length&&b(null)}),d(c,function(c){var d=a[c]instanceof Function?[a[c]]:a[c],g=function(a){a?(b(a),b=function(){}):(e.push(c),l())},i=d.slice(0,Math.abs(d.length-1))||[],m=function(){return f(i,function(a,b){return a&&h(e,b)!==-1},!0)};if(m())d[d.length-1](g);else{var n=function(){m()&&(k(n),d[d.length-1](g))};j(n)}})},a.waterfall=function(b,c){if(!b.length)return c();c=c||function(){};var d=function(b){return function(e){if(e)c(e),c=function(){};else{var f=Array.prototype.slice.call(arguments,1),g=b.next();g?f.push(d(g)):f.push(c),a.nextTick(function(){b.apply(null,f)})}}};d(a.iterator(b))()},a.parallel=function(b,c){c=c||function(){};if(b.constructor===Array)a.map(b,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},c);else{var d={};a.forEach(g(b),function(a,c){b[a](function(b){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),d[a]=e,c(b)})},function(a){c(a,d)})}},a.series=function(b,c){c=c||function(){};if(b.constructor===Array)a.mapSeries(b,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},c);else{var d={};a.forEachSeries(g(b),function(a,c){b[a](function(b){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),d[a]=e,c(b)})},function(a){c(a,d)})}},a.iterator=function(a){var b=function(c){var d=function(){return a.length&&a[c].apply(null,arguments),d.next()};return d.next=function(){return c<a.length-1?b(c+1):null},d};return b(0)},a.apply=function(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b.concat(Array.prototype.slice.call(arguments)))}};var o=function(a,b,c,d){var e=[];a(b,function(a,b){c(a,function(a,c){e=e.concat(c||[]),b(a)})},function(a){d(a,e)})};a.concat=i(o),a.concatSeries=j(o),a.whilst=function(b,c,d){b()?c(function(e){if(e)return d(e);a.whilst(b,c,d)}):d()},a.until=function(b,c,d){b()?d():c(function(e){if(e)return d(e);a.until(b,c,d)})},a.queue=function(b,c){var d=0,e=[],f={concurrency:c,saturated:null,empty:null,drain:null,push:function(b,d){e.push({data:b,callback:d}),f.saturated&&e.length==c&&f.saturated(),a.nextTick(f.process)},process:function(){if(d<f.concurrency&&e.length){var a=e.shift();f.empty&&e.length==0&&f.empty(),d+=1,b(a.data,function(){d-=1,a.callback&&a.callback.apply(a,arguments),f.drain&&e.length+d==0&&f.drain(),f.process()})}},length:function(){return e.length},running:function(){return d}};return f};var p=function(a){return function(b){var c=Array.prototype.slice.call(arguments,1);b.apply(null,c.concat([function(b){var c=Array.prototype.slice.call(arguments,1);typeof console!="undefined"&&(b?console.error&&console.error(b):console[a]&&d(c,function(b){console[a](b)}))}]))}};a.log=p("log"),a.dir=p("dir"),a.memoize=function(a,b){var c={};return b=b||function(a){return a},function(){var d=Array.prototype.slice.call(arguments),e=d.pop(),f=b.apply(null,d);f in c?e.apply(null,c[f]):a.apply(null,d.concat([function(){c[f]=arguments,e.apply(null,arguments)}]))}}}(),function(){window.FloatApp={Models:{},Collections:{},Routers:{},Views:{},Modules:{},PubSub:_.extend({},Backbone.Events),Polls:{},Logger:{_incr:function(a,b){var c,d,e;return b?((c=FloatApp.Logger)[a]||(c[a]={}),(d=FloatApp.Logger[a])[b]||(d[b]=0),FloatApp.Logger[a][b]++):((e=FloatApp.Logger)[a]||(e[a]=0),FloatApp.Logger[a]++)},reset:function(){var a,b,c,d;c=FloatApp.Logger,d=[];for(a in c)b=c[a],d.push(function(a,b){if(a[0]!=="_")return delete FloatApp.Logger[a]}(a,b));return d}},initCallbacks:new Backbone.Marionette.Callbacks,addInitializer:function(a){return this.initCallbacks.add(a)},start:function(a){return this.trigger("initialize:before",a),this.initCallbacks.run(a,this),this.trigger("initialize:after",a),this.trigger("start",a)},"throw":function(a){throw FloatApp.log&&FloatApp.log(a),a}},_.extend(FloatApp,Backbone.Events),FloatApp.vent=FloatApp.PubSub}.call(this),function(){this.FloatApp.Colors={income:{budgeted:"#DDFFAA",projected:"#CCFF99",invoiced:"#99CC33",recurring:"#004020",paid:"#0D8800"},expenditure:{budgeted:"#FFDDFF",projected:"#FFCCFF",invoiced:"#FF6700",recurring:"#990000",paid:"#ED1C24"},design:{darkblue:"#223B68",mediumblue:"#0E3C6B",brightblue:"#4272CA",lightblue:"#1E77D1",fadedblue:"#CBE0F3",earthbrown:"#5D4F44",mediumbrown:"#AD9B86",lightbrown:"#CFBAA1",sweetorange:"#FF6600",seablue:"#0E3C6B",grassgreen:"#A3DAC8",thegrassisgreener:"#009966",sandwhite:"#F7F3ED",sandbrown:"#EADDCD",peachy:"#FFCC99",bluegray:"#9FB0BA"}}}.call(this),function(){(function(){return SimpleDecimal.addFormatter("default",function(a,b){var c;return c={absolute:!1,symbol:"",precision:0,thousand:",",format:{pos:"%s %v",neg:"%s-%v",zero:"%s %v"}},b&&b.absolute&&(c.format.zero="%s%v",c.format.pos="%s%v",c.format.neg="%s%v"),b=$.extend(!0,{},c,b),accounting.formatMoney(a.toFloat(),b)}),SimpleDecimal.addFormatter("income",function(a,b){return a.format("default",b)}),SimpleDecimal.addFormatter("ACCREC",function(a,b){return a.format("default",b)}),SimpleDecimal.addFormatter("expense",function(a,b){return a.invert().format("default",b)}),SimpleDecimal.addFormatter("ACCPAY",function(a,b){return a.invert().format("default",b)}),SimpleDecimal.addFormatter("editable",function(a,b){return a.format("default",$.extend(!0,{},{thousand:"",precision:2,symbol:"",absolute:!0},b))})})()}.call(this),function(){(function(){return _.date.addFormatter("human","D MMM YYYY"),_.date.addFormatter("human with time","D MMM YYYY H:mm:ss"),_.date.addFormatter("fromNowInDays",function(a){var b;b=Math.ceil((a-_.date().endOfDay())/24/60/60/1e3);if(b<-1)return""+Math.abs(b)+" days ago";if(b===-1)return"yesterday";if(b===0)return"today";if(b===1)return"tomorrow";if(b>1)return"in "+b+" days"})})()}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/accounting_categories/_edit"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push('<form>\n  <input name="name" type="text" val="'),b.push(d(this.name)),b.push("\">\n  <button class='save btn primary small'>Save</button>\n  <a class='cancel'>cancel</a>\n  <a class='delete btn danger small'></button>\n</form>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/accounting_categories/_mapping_section"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<tr class='section-header'>\n  <td colspan=2 class='description'>\n    "),b.push(d(this.description)),b.push("\n  </td>\n</tr>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/accounting_categories/_new_button"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<tr class='new-row'>\n  <td colspan=2>\n    <a href='#' class='btn'><span class='plus'>+</span> Add new "),b.push(d(this.expense_income)),b.push(" row</a>\n  </td>\n</tr>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/accounting_categories/_show"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<td class='budget description'>\n  <div class='table-cell-wrapper'>\n    <span>\n      "),b.push(d(this.name)),b.push("\n      "),this.type!=="Misc"&&b.push("\n        <a class='edit' rel='edit-budget'>edit</a>\n      "),b.push("\n    </span>\n  </div>\n</td>\n<td class='accounting-categories'>\n  <em>Drag FreeAgent categories here to map transactions.\n</td>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/accounting_categories/_spacer"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<tbody class='spacer'>\n  <tr>\n    <td></td>\n    <td></td>\n  </tr>\n</tbody>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/accounting_categories/mapping"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div class='panel panel-page'>\n  <div class='panel-header'>\n    <h1>Map Your Categories</h1>\n  </div>\n\n  <div class='panel-body'>\n\n    "),this.wizard&&b.push("\n      <div class='alert-message block-message info wizard'>\n        <ul>\n          <li>Float has set up some default categories for your cash flow.</li>\n          <li>First you should edit/add/delete rows to set up the categories you would like to see.</li>\n          <li>Then drag and drop the FreeAgent categories to set how the invoices should be imported.</li>\n          <li>It's okay to have multiple FreeAgent categories going into one Float category.</li>\n        </ul>\n        <br>\n        <a href='/welcome/next_step' class='btn info wizard-next'>Finished? Next, setup your budgets </a>\n      </div>\n    "),b.push("\n\n    <table class='cashflow-table'>\n      <thead>\n        <tr>\n          <th>Float Category<span class='arrow'></span></th>\n          <th>FreeAgent Categories</th>\n        </tr>\n      </thead>\n    </table>\n\n\n    "),this.wizard&&b.push("\n      <a href='/welcome/next_step' class='btn large info wizard-next'>Finished? Next, setup your budgets </a>\n    "),b.push("\n  </div>\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/bank_account_entries/_index_row"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<td class='datab-cl-date'>\n  "),b.push(d(this.dated_on.format("DD MMM YYYY"))),b.push("\n</td>\n\n<td class='datab-cl-large'>\n  "),b.push(d(this.description)),b.push("\n</td>\n\n<td class='datab-cl-money'>\n  "),this.expense_income==="income"&&b.push(d(this.total.format({absolute:!0,precision:2}))),b.push("\n</td>\n\n<td class='datab-cl-money'>\n  "),this.expense_income==="expense"&&b.push(d(this.total.format({absolute:!0,precision:2}))),b.push("\n</td>\n\n<td class='datab-cl-select datab-cl-edit'>\n  <div class=\"table-cell-wrapper\">\n      "),this.transfer?(b.push("\n        "),this.expense_income==="expense"?b.push("\n          Transfer to another account\n        "):b.push("\n          Transfer from another account\n        "),b.push("\n      ")):b.push("\n        <select name='cashflow_set' />\n\n        <span class='loading loading-outside-right'></span>\n      "),b.push("\n  </div>\n</td>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/bank_account_entries/form"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){this.errors||(this.errors={}),b.push('\n<div class="modal-header">\n      <a class="close"></a>\n\n      <h3>Bank Account Entry</h3>\n    </div>\n\n    <form id="edit-invoice" name="bank_account_entry">\n      <div class="modal-body">\n        <div class="details">\n          <dl>\n            <dt>Description</dt>\n            <dd>'),b.push(d(this.description)),b.push("</dd>\n            <dt>Paid on</dt>\n            <dd>"),b.push(d(this.dated_on.format("YYYY-MM-DD"))),b.push("</dd>\n            <dt>Total</dt>\n            <dd>"),b.push(d(this.total.format({precision:2}))),b.push("</dd>\n          </dl>\n        </div>\n\n        "),this.is_credit_card_payment||b.push('\n          <div class="input clearfix select required">\n            <label class="select required" for="bank_account_entry_cashflow_set">\n              <abbr title="required">*</abbr>\n              Budget/Target\n            </label>\n            <select class="select required" id="bank_account_entry_cashflow_set" name="cashflow_set">\n            </select>\n          </div>\n        '),b.push('\n      </div>\n\n      <div class="actions modal-footer">\n        <input class="button btn primary" name="commit" type="submit" value="Save" />\n        <a class="cancel btn">Cancel</a>\n      </div>\n    </form>\n  </div>\n'
)}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/bank_account_entries/index"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div class='panel-header'>\n  <h1>Transactions</h1>\n</div>\n\n<div class='panel-subheader'>\n  <a class='prev-page btn' href='#' rel='prev'> See newer transactions</a>\n  <a class='next-page btn' href='#' rel='next'>See older transactions </a>\n  <div class=search>\n    <input type='search' class='search-input' rel='search' placeholder='Type to search'>\n  </div>\n</div>\n\n<div class='panel-body'>\n\n  <p class='search-message'>\n\n\n  <table class='zebra-striped condensed-table datab'>\n    <thead>\n      <tr>\n        <th class='datab-cl-date'>Dated on</th>\n        <th class='datab-cl-large'>Description</th>\n        <th class='datab-cl-money'>Money In</th>\n        <th class='datab-cl-money'>Money Out</th>\n        <th class='datab-cl-select datab-cl-edit'>Budget</th>\n    <tbody></tbody>\n  </table>\n</div>\n\n<div class='panel-subfooter'>\n  <a class='prev-page btn' href='#' rel='prev'> See newer transactions</a>\n  <a class='next-page btn' href='#' rel='next'>See older transactions </a>\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/bank_accounts/index"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<h2>Bank Accounts</h2>\n<div class='scrollarea'>\n  <ul></ul>\n  <a class='add-more-accounts' href='/bank_accounts'>Add more accounts</a>\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/bank_accounts/show"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<input type=checkbox name=included>\n<span class='name'>"),b.push(d(this.name)),b.push("</span>\n<span class='balance "),b.push(d(this.posneg)),b.push("'>"),b.push(d(this.current_balance.format("income",{precision:2,absolute:!1}))),b.push("</span>\n<span class='date'>on "),b.push(d(this.current_balance_date.format("Do MMM"))),b.push("</span>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow/budget"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div id='entries'>\n  <h1>Set up your budget forecasts</h1>\n\n  <div class='alert-message block-message wizard info'>\n    <ul>\n      <li>\n        For each of your categories, set a rough projected budget based on your past 3 months of transactions, and hit update budget.\n      </li>\n      <li>\n        To help you forecast, you can see a list of the transactions that happened in previous months by clicking in the cells.\n      </li>\n      <li>\n        It's okay to set a rough budget for now, as Float will replace the budgets with actuals when they have happened.\n      </li>\n    </ul>\n    <br>\n    <a href='/welcome/prev_step' class='btn wizard-back'><span class='back-arrow'></span> Back</a>\n    <a href='/welcome/next_step' class='btn success wizard-next'>All done? Check out your cashflow! </a>\n  </div>\n\n  <table id=\"cashflow_sets-table\" class=\"cashflow-table\">\n    <thead></thead>\n\n    <tbody class='start_balances'></tbody>\n    <tbody class='spacer'><tr></tr></tbody>\n\n    <tbody class='inflow'></tbody>\n    <tbody class='spacer'><tr></tr></tbody>\n\n    <tbody class='outflow'></tbody>\n    <tbody class='spacer'><tr></tr></tbody>\n\n    <tbody class='summary'></tbody>\n    <tbody class='spacer'><tr></tr></tbody>\n\n    <tbody class='end_balances'></tbody>\n  </table>\n\n\n    <a href='/welcome/prev_step' class='btn large wizard-back'><span class='back-arrow'></span> Back</a>\n    <a href='/welcome/next_step' class='btn large success wizard-next'>All done? Check out your cashflow! </a>\n\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow/chart"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div id='chart_container'>\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow/layout_chart_single"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div id='overview' class='with_bank_accounts panel panel-widget chart-accounts'>\n  <div class='panel-body'>\n    <div id='bank_accounts' class='chart-accounts-accounts'></div>\n    <div id='chart' class='chart-accounts-chart'></div>\n  </div>\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow/layout_chart_split"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div id='overview' class='panel panel-widget chart-accounts'>\n  <div class='panel-body'>\n    <div id='chart' class='chart-accounts-chart'>\n      <div id='chart-cash' class='chart-accounts-chart-cash'></div>\n      <div id='chart-pipe' class='chart-accounts-chart-pipe'></div>\n    </div>\n  </div>\n  <div data-yield='chart-controls'></div>\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow/overview"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div id=\"subnav\"></div>\n\n<div class='table-nav'>\n  <ul class='tabs'>\n    <li class='active'>\n      <a href='cashflow#overview'>Overview</a>\n    </li>\n    <li>\n      <a href='cashflow#'>Table</a>\n    </li>\n    <li>\n      <a href='cashflow#projects/all'>Pipeline</a>\n    </li>\n  </ul>\n</div>\n\n<div id=\"entries\" class='overview'>\n  <div id=\"balances\">\n    <div class='current-balance'>\n      <span class='balance-type'>Current bank balance<small>(as of today)</small></span>\n      <span class='value'>"),b.push(d(this.current_balance)),b.push("\n    </div>\n    <div class='end-of-month-balance'>\n      <span class='balance-type'>End of month balance<small>(projected)</small></span>\n      <span class='value'>"),b.push(d(this.end_of_month_balance)),b.push('</span>\n    </div>\n  </div>\n\n  <div id="incomes"></div>\n  <div id="expenses"></div>\n</div>\n')}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow/overview_row"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<td class='due_on'>\n  "),b.push(d(this.expected_on)),b.push("\n</td>\n\n<td class='description'>\n  "),b.push(d(this.description)),b.push("\n  \n  "),this.project&&(b.push("\n    <span class='project'>\n      <a href=\"#projects/"),b.push(d(this.project.id)),b.push('" style="color: '),b.push(d(this.project.color)),b.push('">['),b.push(d(this.project.name)),b.push("]</a>\n    <span>\n  ")),b.push("\n</td>\n<td class='total'>\n  "),b.push(d(this.total)),b.push("\n</td>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow/overview_section"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div class=\"totals\">\n  <div class='total'>\n    <span class='total-type'>Total "),b.push(d(this.in_out)),b.push(":</span><span class='value'>"),b.push(d(this.total)),b.push("</span>\n  </div>\n  <div class='invoiced-total'>\n    "),this.invoice_type==="Invoice"?(b.push("\n      <span class='total-type'>Total invoiced:</span><span class='value'>"),b.push(d(this.invoiced_total)),b.push("</span>\n    ")):(b.push("\n      <span class='total-type'>Total billed:</span><span class='value'>"),b.push(d(this.invoiced_total)),b.push("</span>\n    ")),b.push("\n    </div>\n  <div class='projected-total'>\n    <span class='total-type'>Total projected:</span><span class='value'>"),b.push(d(this.projected_total)),b.push("</span>\n  </div>\n</div>\n\n<table class='zebra-striped condensed-table'>\n  <thead>\n    <tr>\n      <th>Due</th><th>Description</th><th>Total</th>\n    </tr>\n  </thead>\n\n  <tbody class='invoices'>\n    <tr class='section-header'><td colspan=2>Outstanding "),b.push(d(this.invoice_type)),b.push("s</td><td></td></tr>\n  </tbody>\n\n  <tbody class='projections'>\n    <tr class='section-header'><td colspan=2>Upcoming Projections</td><td></td></tr>\n  </tbody>\n</table>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow/pipeline_chart"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div id='chart_container_pipeline'>\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow/show"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("\n<div class='cashflow-nav'>\n</div>\n\n<div id='detail' class='table'>\n  <div id='subnav'>\n    <ul class='left-nav'>\n      <li><a class='new-projection btn primary first'>+ Add a projection</a></li\n      ><li><a class='new-budget btn primary last'>+ Add budget row</a></li>\n    </ul>\n\n    <ul class='right-nav'>\n      <li><a rel='navigate:prev-month' title='backwards' class='btn backwards first primary' href='#'>&larr;</a></li\n      ><li><a rel='navigate:current-month' title='current-month' class='btn current_month primary' href='#'>Current Month</a></li\n      ><li><a rel='navigate:next-month' title='forwards' class='btn forwards primary last' href='#'>&rarr;</a></li>\n    </ul>\n  </div>\n\n  <table id=\"cashflow_sets-table\" class=\"cashflow-table\">\n    <thead></thead>\n\n    <tbody class='start_balances'></tbody>\n    <tbody class='spacer'><tr><td></td></tr></tbody>\n\n    <tbody class='inflow'></tbody>\n    <tbody class='spacer'><tr><td></td></tr></tbody>\n\n    <tbody class='outflow'></tbody>\n    <tbody class='spacer'><tr><td></td></tr></tbody>\n\n    <tbody class='transfers'></tbody>\n    <tbody class='spacer'><tr><td></td></tr></tbody>\n\n    <tbody class='summary'></tbody>\n    <tbody class='spacer'><tr><td></td></tr></tbody>\n\n    <tbody class='end_balances'>\n    </tbody>\n    </tbody>\n  </table>\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow/subnav"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<ul class='left-nav'>\n  <li><a class='new-budget btn small'>Add new</a></li>\n</ul>\n\n<ul class='center-nav'>\n  <li><a class='grid btn' href='#'><span>Grid View</span></a></li>\n  <li><a class='projects btn' href='#scenario-planning/all'><span>Pipeline</span></a></li>\n</ul>\n\n<ul class='right-nav'>\n  <li><a title='backwards' class='btn small' href=\"#"),b.push(d(this.cashflow.frequency)),b.push("/"),b.push(d(this.cashflow.prev_view_range)),b.push("\">&larr;</a></li>\n  <li><a title='current month' class='btn small'>Current Month</a></li>\n  <li><a title='forwards' class='btn small' href=\"#"),b.push(d(this.cashflow.frequency)),b.push("/"),b.push(d(this.cashflow.next_view_range)),b.push('">&rarr;</a></li>\n</ul>\n')}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow/subnav_projects"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<ul class='left-nav'>\n  <li><a class='new-budget btn small'>Add new</a></li>\n</ul>\n\n<!--\n<ul class='center-nav'>\n  <li><a class='grid btn' href='#'><span>Grid View</span></a></li>\n  <li class='active'><a class='projects btn' href='#projects/all'><span>Projects</span></a></li>\n</ul>\n-->\n\n<ul class='right-nav'>\n  <li><a class='btn small' href='#scenario-planning/"),b.push(d(this.view.project_id)),b.push("/30-days'>30 days</a></li>\n  <li><a class='btn small' href='#scenario-planning/"),b.push(d(this.view.project_id)),b.push("/60-days'>60 days</a></li>\n  <li><a class='btn small' href='#scenario-planning/"),b.push(d(this.view.project_id)),b.push("/90-days'>90 days</a</li>\n  <li><a class='btn small' href='#scenario-planning/"),b.push(d(this.view.project_id)),b.push("'>All</a></li>\n</ul>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow/subnav_show"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<ul class='left-nav'>\n  <li><a class='new-projection btn info'>+ Add a one off</a></li>\n  <li><a class='new-budget btn info'>+ Add budget row</a></li>\n</ul>\n\n<!--\n<ul class='center-nav'>\n  <li class='active'><a class='grid btn' href='#'><span>Grid View</span></a></li>\n  <li><a class='projects btn' href='#projects/all'><span>Projects</span></a></li>\n</ul>\n-->\n\n<ul class='right-nav'>\n  <li><a title='backwards' class='btn backwards info' href='#'>&larr;</a></li>\n  <li><a title='current-month' class='btn current_month info' href='#'>Current Month</a></li>\n  <li><a title='forwards' class='btn forwards info' href='#'>&rarr;</a></li>\n</ul>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow/table_header_month"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div class='table-cell-wrapper'>\n  "),b.push(d(this.monthName)),b.push("\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow_navigation/nav"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<li class='"),this.viewState.isCashflow()&&b.push(d("active")),b.push('\'>\n  <a href="cashflow#">Table</a>\n</li>\n\n'),FloatApp.Settings.serverSettings.get("only_new_pipeline")?(b.push("\n  <li class='"),this.viewState.isPipeline()&&b.push(d("active")),b.push('\'>\n    <a href="cashflow#pipeline/all">Pipeline</a>\n  </li>\n')):(b.push("\n  <li class='"),this.viewState.isProjects()&&b.push(d("active")),b.push('\'>\n    <a href="cashflow#projects/all">Pipeline</a>\n  </li>\n\n  '),FloatApp.Settings.serverSettings.get("new_pipeline")&&(b.push("\n    <li class='"),this.viewState.isPipeline()&&b.push(d("active")),b.push('\'>\n      <a href="cashflow#pipeline/all">New Pipeline</a>\n    </li>\n  ')),b.push("\n")),b.push("\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow_sets/budget_forecast_edit"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<td class='description' scope='rowgroup'>\n  <div class='table-cell-wrapper'>\n    <a class='edit'>"),b.push(d(this.set.name)),b.push("</a>\n  </div>\n</td>\n<td class='forecast'>\n  "),this.set.type!=="Misc"&&(b.push('\n    <input type="text" name="budget" class=\'span1\' value="'),b.push(d(this.budget_total)),b.push("\"> every month\n    <button class='btn primary small save'>Set budget </button>\n    <a rel='destroy' href='#'>I don't want to set a budget for this category<a>\n  ")),b.push("\n</td>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow_sets/budget_forecast_show"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<td class='description' scope='rowgroup'>\n  <div class='table-cell-wrapper'>\n    <a class='edit'>"),b.push(d(this.set.name)),b.push("</a>\n  </div>\n</td>\n<td class='forecast'>\n  "),this.set.type!=="Misc"&&(b.push("\n    "),b.push(d(this.budget_total)),b.push(" every month, \n    <button class='btn small edit'>Edit budget</button>\n  ")),b.push("\n</td>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow_sets/budgets/budget_bars"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){this.hide_budget_bars||(b.push("\n\n  "),this.overbudget?(b.push("\n    <div class='budget-bar budget-over'>\n      <div class='budgeted-bar' style='width: "),b.push(d(this.budget_bars.budgeted)),b.push("%' title='Budgeted: "),b.push(d(this.budgeted_total)),b.push("'></div>\n      \n    "),this.budget_bars.paid!==0&&(b.push("\n      <div class='paid-bar' style='width: "),b.push(d(this.budget_bars.paid)),b.push("%' title='Paid: "),b.push(d(this.paid_total)),b.push("'></div>\n    ")),b.push("\n\n    "),this.budget_bars.invoiced!==0&&(b.push("\n      <div class='invoiced-bar' style='width: "),b.push(d(this.budget_bars.invoiced)),b.push("%' title='Invoiced: "),b.push(d(this.invoiced_total)),b.push("'></div>\n    ")),b.push("\n\n    "),this.budget_bars.projected!==0&&(b.push("\n      <div class='projected-bar' style='width: "),b.push(d(this.budget_bars.projected)),b.push("%' title='Projected: "),b.push(d(this.projected_total)),b.push("'></div>")),b.push("\n  </div>\n\n  ")):(b.push("\n\n  <div class='budget-bar'><div class='budgeted-bar' style='width: "),b.push(d(this.budget_bars.budgeted)),b.push("%' title='Budgeted: "),b.push(d(this.budgeted_total)),b.push("'></div>"),this.budget_bars.paid!==0&&(b.push("<div class='paid-bar' style='width: "),b.push(d(this.budget_bars.paid)),b.push("%' title='Paid: "),b.push(d(this.paid_total)),b.push("'></div>")),b.push("\n    "),this.budget_bars.invoiced!==0&&(b.push("<div class='invoiced-bar' style='width: "),b.push(d(this.budget_bars.invoiced)),b.push("%' title='Invoiced: "),b.push(d(this.invoiced_total)),b.push("'></div>")),b.push("\n    "),this.budget_bars.projected!==0&&(b.push("<div class='projected-bar' style='width: "),b.push(d(this.budget_bars.projected)),b.push("%' title='Projected: "),b.push(d(this.projected_total)),b.push("'></div>")),b.push("\n  </div>\n\n  ")),b.push("\n\n  <p>\n    "),this.budget_type==="Target"?(b.push("\n      "),this.overbudget?(b.push("\n        Over target by:\n        <span class='overbudget'>"),b.push(d(this.overbudget_by.format({absolute:!0,precision:2}))),b.push("</span>\n      ")):(b.push("\n        Remaining: "),b.push(d(this.overbudget_by.format({absolute:!0,precision:2}))),b.push("\n      ")),b.push("\n    ")):(b.push("\n      "),this.overbudget?(b.push("\n        Overbudget by:\n        <span class='overbudget'>"),b.push(d(this.overbudget_by.format({absolute:!0,precision:2}))),b.push("</span>\n      ")):(b.push("\n        Remaining: "),b.push(d(this.overbudget_by.format({absolute:!0,precision:2}))),b.push("\n      ")),b.push("\n    ")),b.push("\n  </p>\n")),b.push("\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow_sets/budgets/entries_list"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,c,e,f,g,h,i,j,k,l;if(this.projections.length>0){b.push("\n<div class='projected'>\n  <h4>\n    <span class='budget-bar-key budget-bar-key-projected'></span>\n    Projected:\n    <span class='total'>"),b.push(d(this.projected_total.format({absolute:!0,precision:2}))),b.push("</span>\n  </h4>\n  <ul class='projections'>\n    "),j=this.projections;for(c=0,g=j.length;c<g;c++)a=j[c],b.push('\n    <li class="'),a.isIncluded()||b.push(d("ignored")),b.push("\">\n      <span class='status'></span>\n      <span class='date'>"),b.push(d(a.hits_cashflow_on().format("Do"))),b.push("</span>\n      <span class='description'>\n        <a href=\"#projections/"),b.push(d(a.get("id"))),b.push("\" rel='edit-projection'>\n          "),b.push(d(a.get("description"))),b.push("\n        </a>\n      </span>\n      <span class='total'>"),b.push(d(a.hits_cashflow_total().format({absolute:!0,precision:2}))),b.push("</span>\n    </li>\n    ");b.push("\n  </ul>\n</div>\n")}b.push("\n");if(this.invoices.length>0){b.push("\n<div class='invoiced'>\n  <h4>\n    <span class='budget-bar-key budget-bar-key-invoiced'></span>\n    Open "),b.push(d(this.expense_income==="expense"?"Bills":"Invoices")),b.push("\n    <span class='total'>"),b.push(d(this.invoiced_total.format({absolute:!0,precision:2}))),b.push("</span>\n  </h4>\n  <ul class='invoices'>\n    "),k=this.invoices;for(e=0,h=k.length;e<h;e++)a=k[e],b.push('\n    <li class="'),a.get("ignored")&&b.push(d("ignored")),b.push("\">\n      <span class='status'>\n        <i class='status status-"),b.push(d(a.invoiceStatus())),b.push(" %>' title='"),b.push(d(a.invoiceStatusDescription())),b.push("'></i>\n      </span>\n      <span class='date'>"),b.push(d(a.hits_cashflow_on().format("Do"))),b.push("</span>\n      <span class='description'>\n        <a href=\"#invoices/"),b.push(d(a.get("id"))),b.push("\" rel='edit-invoice'>\n          "),b.push(d(a.get("reference"))),b.push("\n        </a>\n      </span>\n      <span class='total'>"),b.push(d(a.hits_cashflow_total().format({absolute:!0,precision:2}))),b.push("</span>\n    </li>\n    ");b.push("\n  </ul>\n</div>\n")}b.push("\n");if(this.bank_account_entries.length>0){b.push("\n<div class='paid'>\n  <h4>\n    <span class='budget-bar-key budget-bar-key-paid'></span>\n    Paid:\n    <span class='total'>"),b.push(d(this.paid_total.format({absolute:!0,precision:2}))),b.push("</span>\n  </h4>\n  <ul class='bank_account_entries'>\n    "),l=this.bank_account_entries;for(f=0,i=l.length;f<i;f++)a=l[f],b.push('\n    <li class="'),a.isIncluded()||b.push(d("ignored")),b.push("\">\n      <span class='status'></span>\n      <span class='date'>"),b.push(d(a.hits_cashflow_on().format("Do"))),b.push("</span>\n      <span class='description'>\n        <a href=\"#bank_account_entries/"),b.push(d(a.get("id"))),b.push("\" rel='edit-bank_account_entry'>\n          "),b.push(d(a.get("description"))),b.push("\n        </a>\n      </span>\n      <span class='total'>"),b.push(d(a.hits_cashflow_total().format({absolute:!0,precision:2}))),b.push("</span>\n    </li>\n    ");b.push("\n  </ul>\n</div>\n")}b.push("\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow_sets/budgets/month_popover"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div class='arrow'></div>\n<div class='inner'>\n  <div class='title'>\n    <a class='close'></a>\n    <h3>\n      "),b.push(d(this.name)),b.push(" "),b.push(d(this.budget_type)),b.push("\n      <small>"),b.push(d(this.date.format("MMM 'YY"))),b.push("</small>\n    </h3>\n  </div>\n  <div class='budget-total'>\n    "),this.editing?(b.push("\n    <a class='cancel' href=\"#\">cancel</a>\n    <a class='save btn primary' href=\"#\">save</a>\n    <label for='total'>Target</label>\n    <input type='text' name='total' value='"),b.push(d(this.budgeted_total.format("editable"))),b.push("'>\n    <label class='update-future'>Also update all future budgets<input type='checkbox' name='modify_future_events'></label>\n    ")):(b.push("\n    "),!this.uneditable&&this.cashflow_entries[0]&&(b.push("\n    <a class='edit btn small' href=\"#cashflow_entries/"),b.push(d(this.cashflow_entries[0].get("id"))),b.push('">edit</a>\n    ')),b.push("\n    <h4>\n      Allocated:\n      <span class='allocated'>"),b.push(d(this.allocated_total.format({absolute:!0,precision:2}))),b.push("</span>\n      of\n      <span class='budgeted'>"),b.push(d(this
.budgeted_total.format({absolute:!0,precision:2}))),b.push("</span>\n    </h4>\n    ")),b.push("\n  </div>\n  "),this.editing||b.push("\n  <div class='budget'></div>\n  <div class='content'></div>\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow_sets/budgets/new"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){this.errors||(this.errors={}),b.push('\n<div class="arrow"></div>\n<div class="inner" style="display: block; ">\n  <h3 class="title">\n    Add a row\n    <a class="close"></a>\n  </h3>\n  <div class="content">\n    <form id="new-cashflow_set" name="cashflow_set">\n      \n      <div class="clearfix description">\n        <label>\n          <span>Description</span>\n          &nbsp;\n        </label>\n        <input name="name" placeholder="Description" type="text">\n      </div>\n      <div class="clearfix total">\n        <label>\n          <span>Total Amount</span>\n        </label>\n        <input name="total" placeholder="Amount" type="text">\n        <span class="toggle-buttons expense_income-toggle">\n          <label class="green"><span><input type="radio" name="expense_income" value="income">In</span></label><label class="red"><span><input type="radio" name="expense_income" value="expense">Out</span></label>\n        </span>\n      </div>\n      <div class="clearfix starts_on">\n        <label>\n          <span>Starts On</span>\n          &nbsp;\n        </label>\n        <input class="datepicker-text" name="starts_on" placeholder="Starts on" type="text">\n      </div>\n      <div class="actions">\n        <a class="cancel" href="#">Cancel</a>\n        <input class="button btn primary" name="commit" type="submit" value="Save">\n      </div>\n    </form>\n  </div>\n</div>\n')}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow_sets/cashflow_set"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<td class='description' scope='rowgroup'>\n  <div class=\"table-cell-wrapper\">\n    <a class='edit'>"),b.push(d(this.name)),b.push("</a>\n  </div>\n</td>\n<td class='include'>\n  <input type='checkbox' value='1' class='included' "),this.ignored||b.push(d("checked='checked'")),b.push(" >\n</td>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow_sets/edit"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,c,e,f,g,h,i;this.errors||(this.errors={}),b.push("\n<div class='arrow'></div>\n<div class='inner'>\n  ");if(this.subtype!=="transfer"){b.push('\n  <form id=\'new-cashflow_set\' name=\'cashflow_set\'>\n    <div class=\'title\'>\n      <a class=\'close\'></a>\n      <input class="string required" id="cashflow_set_name" name="name" required="required" size="50" type="text">\n    </div>\n    <div class=\'content\'>\n      ');if(!this.hide_mappings){b.push("\n      ");if(this.mapped_categories&&this.mapped_categories.length>0){b.push("\n      <div class='mapped-categories'>\n        FreeAgent categories mapped to this budget:\n        <a href='/welcome/map_categories'>edit</a>\n        <div class='categories'>\n          "),h=this.mapped_categories;for(c=0,f=h.length;c<f;c++)a=h[c],b.push("\n          <span class='label'>"),b.push(d(a)),b.push("</span>\n          ");b.push("\n        </div>\n      </div>\n      ")}else b.push("\n      <div class='mapped-categories'>\n        No FreeAgent categories are mapped to this budget.\n        <a href='/welcome/map_categories'>edit</a>\n      </div>\n      ");b.push("\n      ")}b.push('\n      <div class=\'actions\'>\n        <input class="button btn primary" name="commit" type="submit" value="Save">\n        <a class=\'destroy btn danger small\'>Delete</a>\n      </div>\n    </div>\n  </form>\n  ')}else{b.push("\n  <div class='title'>\n    <a class='close'></a>\n    <h4 style='color: #eee'>"),b.push(d(this.name)),b.push("</h4>\n  </div>\n  <div class='content'>\n    ");if(!this.hide_mappings){b.push("\n    ");if(this.mapped_categories&&this.mapped_categories.length>0){b.push("\n    <div class='mapped-categories'>\n      FreeAgent categories mapped to this budget:\n      <div class='categories'>\n        "),i=this.mapped_categories;for(e=0,g=i.length;e<g;e++)a=i[e],b.push("\n        <span class='label'>"),b.push(d(a)),b.push("</span>\n        ");b.push("\n      </div>\n    </div>\n    ")}else b.push("\n    <div class='mapped-categories'>\n      No FreeAgent categories are mapped to this budget.\n      <a href='/welcome/map_categories'>edit</a>\n    </div>\n    ");b.push("\n    ")}b.push("\n  </div>\n  ")}b.push("\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow_sets/entries_list"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,c,e,f,g,h,i,j,k,l,m,n,o;if(this.cashflow_entries.length>0){b.push("\n<h4>Budgeted</h4>\n<ul>\n  "),l=this.cashflow_entries;for(c=0,h=l.length;c<h;c++)a=l[c],b.push("\n  <li>\n    <span class='date'>"),b.push(d(a.hits_cashflow_on().format("Do"))),b.push("</span>\n    <span class='description'>Budget</span>\n    <span class='total'>"),b.push(d(a.hits_cashflow_total().format())),b.push("</span>\n  </li>\n  ");b.push("\n</ul>\n")}b.push("\n");if(this.projections.length>0){b.push("\n<h4>Projections</h4>\n<ul class='projections'>\n  "),m=this.projections;for(e=0,i=m.length;e<i;e++)a=m[e],b.push("\n  <li>\n    <span class='date'>"),b.push(d(a.hits_cashflow_on().format("Do"))),b.push("</span>\n    <span class='description'>\n      <a href=\"#projections/"),b.push(d(a.get("id"))),b.push('">\n        '),b.push(d(a.get("description"))),b.push("\n      </a>\n    </span>\n    <span class='total'>"),b.push(d(a.hits_cashflow_total().format())),b.push("</span>\n  </li>\n  ");b.push("\n</ul>\n")}b.push("\n");if(this.invoices.length>0){b.push("\n<h4>Open "),b.push(d(this.expense_income==="expense"?"Bills":"Invoices")),b.push("</h4>\n<ul class='invoices'>\n  "),n=this.invoices;for(f=0,j=n.length;f<j;f++)a=n[f],b.push("\n  <li>\n    <span class='date'>"),b.push(d(a.hits_cashflow_on().format("Do"))),b.push("</span>\n    <span class='description'>\n      <a href=\"#invoices/"),b.push(d(a.get("id"))),b.push('">\n        '),b.push(d(a.get("reference"))),b.push("\n      </a>\n    </span>\n    <span class='total'>"),b.push(d(a.hits_cashflow_total().format())),b.push("</span>\n  </li>\n  ");b.push("\n</ul>\n")}b.push("\n");if(this.bank_account_entries.length>0){b.push("\n<h4>Paid</h4>\n<ul class='bank_account_entries'>\n  "),o=this.bank_account_entries;for(g=0,k=o.length;g<k;g++)a=o[g],b.push("\n  <li>\n    <span class='date'>"),b.push(d(a.hits_cashflow_on().format("Do"))),b.push("</span>\n    <span class='description'>\n      <a href=\"#bank_account_entries/&"),b.push(d(a.get("id"))),b.push('">\n        '),b.push(d(a.get("description"))),b.push("\n      </a>\n    </span>\n    <span class='total'>"),b.push(d(a.hits_cashflow_total().format())),b.push("</span>\n  </li>\n  ");b.push("\n</ul>\n")}b.push("\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow_sets/expanded_month"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div class='table-cell-wrapper'>\n  "),this.budget&&(b.push("\n    <div class='budget-bar mini-budget-bar "),this.budget.overbudget&&b.push(d("budget-over")),b.push("'>\n      <div class='budgeted-bar' style='width: 100%'></div>\n      "),this.budget.allocated_percentage!==0&&(b.push("\n      <div class='actual-bar' style='width: "),b.push(d(this.budget.allocated_percentage)),b.push("%'></div>\n      ")),b.push("\n    </div>\n  ")),b.push("\n  \n  <div class=value>\n  "),this.totals.budgeted?(b.push("\n    <span class='actual'>"),b.push(d(this.totals.actual.format({absolute:!0}))),b.push("</span><span class='slash'> of </span><span class='budget'>"),b.push(d(this.totals.budgeted.format({absolute:!0}))),b.push("</span>\n  ")):(b.push("\n    <span class='actual'>"),b.push(d(this.totals.actual.format({absolute:!0}))),b.push("</span>\n  ")),b.push("\n  </div>\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow_sets/misc/cashflow_set"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<td class='description' scope='rowgroup'>\n  "),b.push(d(this.name)),b.push("\n</td>\n<td class='include'>\n  <input type='checkbox' value='1' class='included' "),this.ignored||b.push(d("checked='checked'")),b.push(" >\n</td>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow_sets/misc/entries_list"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,c,e,f,g,h,i,j,k,l;if(this.projections.length>0){b.push("\n  <h4>\n    Projections\n    <span class='total'>"),b.push(d(this.projected_total.format({absolute:!0,precision:2}))),b.push("</span>\n  </h4>\n  <ul class='projections'>\n    "),j=this.projections;for(c=0,g=j.length;c<g;c++)a=j[c],b.push("\n      <li class='"),a.get("ignored")&&b.push(d("ignored")),b.push("'>\n        <span class='status'></span>\n        <span class=date>"),b.push(d(a.hits_cashflow_on().format("Do"))),b.push("</span>\n        <span class=description>\n          <a href='#projections/"),b.push(d(a.get("id"))),b.push("' rel='edit-projection'>"),b.push(d(a.get("description"))),b.push("</a>\n        </span>\n        <span class=total>\n          "),b.push(d(a.hits_cashflow_total().format({absolute:!0,precision:2}))),b.push("\n        </span>\n    ");b.push("\n  </ul>\n")}b.push("\n\n");if(this.invoices.length>0){b.push("\n  <h4>\n    Open "),b.push(d(this.expense_income==="expense"?"Bills":"Invoices")),b.push("\n    <span class='total'>"),b.push(d(this.invoiced_total.format({absolute:!0,precision:2}))),b.push("</span>\n  </h4>\n  <ul class='invoices'>\n    "),k=this.invoices;for(e=0,h=k.length;e<h;e++)a=k[e],b.push("\n      <li class='"),a.get("ignored")&&b.push(d("ignored")),b.push("'>\n        <span class='status'>\n          <i class='status status-"),b.push(d(a.invoiceStatus())),b.push(" %>' title='"),b.push(d(a.invoiceStatusDescription())),b.push("'></i>\n        </span>\n        <span class=date>"),b.push(d(a.hits_cashflow_on().format("Do"))),b.push("</span>\n        <span class=description>\n          <a href='#invoices/"),b.push(d(a.get("id"))),b.push("' rel='edit-invoice'>"),b.push(d(a.get("reference"))),b.push("</a>\n        </span>\n        <span class=total>\n          "),b.push(d(a.hits_cashflow_total().format({absolute:!0,precision:2}))),b.push("\n        </span>\n    ");b.push("\n  </ul>\n")}b.push("\n\n");if(this.bank_account_entries.length>0){b.push("\n  <h4>\n    Paid\n    <span class=total>"),b.push(d(this.paid_total.format({absolute:!0,precision:2}))),b.push("\n  </h4>\n  <ul class='bank_account_entries'>\n    "),l=this.bank_account_entries;for(f=0,i=l.length;f<i;f++)a=l[f],b.push("\n      <li class='"),a.get("ignored")&&b.push(d("ignored")),b.push("'>\n        <span class='status'></span>\n        <span class=date>"),b.push(d(a.hits_cashflow_on().format("Do"))),b.push("</span>\n        <span class=description>\n          <a href='#bank_account_entries/"),b.push(d(a.get("id"))),b.push("' rel='edit-bank_account_entry'>"),b.push(d(a.get("description"))),b.push("</a>\n        </span>\n        <span class=total>\n          "),b.push(d(a.hits_cashflow_total().format({absolute:!0,precision:2}))),b.push("\n        </span>\n    ");b.push("\n  </ul>\n")}b.push("\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow_sets/misc/month_popover"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div class='arrow'></div>\n<div class='inner'>\n  <div class='title'>\n    <a class='close'>x</a>\n    <h3>\n      "),b.push(d(this.name)),b.push("\n      <small>"),b.push(d(this.date.format("MMM 'YY"))),b.push("</small>\n    </h3>\n  </div>\n  <div class='content'></div>\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow_sets/month"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div class='table-cell-wrapper'>\n  "),this.change>0?b.push("\n    <span class='up-arrow change-arrow'></span>\n  "):this.change<0&&b.push("\n    <span class='down-arrow change-arrow'></span>\n  "),b.push("\n\n  "),this.transfer_row?(b.push("\n    <div class=value>"),b.push(d(this.totals.display.format({absolute:!1}))),b.push("</div>\n  ")):(b.push("\n    <div class=value>"),b.push(d(this.totals.display.format({absolute:!0}))),b.push("</div>\n  ")),b.push("\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow_sets/month_popover"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div class='popover below'>\n  <div class='arrow'></div>\n  <div class='inner'>\n    <div class='title'>\n      <a class='close'>x</a>\n      <h3>\n        "),b.push(d(this.date.format("DD MMM YY"))),b.push("\n      </h3>\n    </div>\n    <div class='content'></div>\n  </div>\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow_sets/select_option"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push('<option value="'),b.push(d(this.id)),b.push('">\n  <!--'),this.visual_group_name?(b.push("\n    "),b.push(d([this.visual_group_name,this.name].join(": "))),b.push("\n  ")):(b.push("\n    "),b.push(d(this.name)),b.push("\n  ")),b.push("-->\n  "),b.push(d(this.name)),b.push("\n</option>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow_sets/simple_entries_list"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,c,e,f,g,h,i;if(this.invoices.length>0){b.push("\n<h4>Open Invoices</h4>\n<ul class='invoices'>\n  "),h=this.invoices;for(c=0,f=h.length;c<f;c++)a=h[c],b.push("\n  <li>\n    <span class='date'>"),b.push(d(a.hits_cashflow_on().format("Do"))),b.push("</span>\n    <span class='description'>"),b.push(d(a.get("reference"))),b.push("</span>\n    <span class='total'>"),b.push(d(a.hits_cashflow_total().format())),b.push("</span>\n  </li>\n  ");b.push("\n</ul>\n")}b.push("\n");if(this.bank_account_entries.length>0){b.push("\n<h4>Paid</h4>\n<ul class='bank_account_entries'>\n  "),i=this.bank_account_entries;for(e=0,g=i.length;e<g;e++)a=i[e],b.push("\n  <li>\n    <span class='date'>"),b.push(d(a.hits_cashflow_on().format("Do"))),b.push("</span>\n    <span class='description'>"),b.push(d(a.get("description"))),b.push("</span>\n    <span class='total'>"),b.push(d(a.hits_cashflow_total().format())),b.push("</span>\n  </li>\n  ");b.push("\n</ul>\n")}b.push("\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow_sets/simple_month_popover"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div class='arrow'></div>\n<div class='inner'>\n  <div class='title'>\n    <a class='close'></a>\n    <h3>\n      "),b.push(d(this.name)),b.push("\n      <small>"),b.push(d(this.date)),b.push("</small>\n    </h3>\n  </div>\n  <div class='content'>\n  </div>\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow_sets/transfer/cashflow_set"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<td class='description' scope='rowgroup'>\n  "),b.push(d(this.name)),b.push("\n</td>\n<td class='include'>\n  <input type='checkbox' value='1' class='included' "),this.ignored||b.push(d("checked='checked'")),b.push(" >\n</td>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow_sets/transfer/entries_list"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,c,e,f,g,h,i,j,k,l;if(this.projections.length>0){b.push("\n  <h4>\n    Projections\n    <span class='total'>"),b.push(d(this.projected_total.format({absolute:!1,precision:2}))),b.push("</span>\n  </h4>\n  <ul class='projections'>\n    "),j=this.projections;for(c=0,g=j.length;c<g;c++)a=j[c],b.push("\n      <li class='"),a.get("ignored")&&b.push(d("ignored")),b.push("'>\n        <span class=date>"),b.push(d(a.hits_cashflow_on().format("Do"))),b.push("</span>\n        <span class=description>\n          <a href='#projections/"),b.push(d(a.get("id"))),b.push("' rel='edit-projection'>"),b.push(d(a.get("description"))),b.push("</a>\n        </span>\n        <span class=total>\n          "),b.push(d(a.hits_cashflow_total().format({absolute:!1,precision:2}))),b.push("\n        </span>\n    ");b.push("\n  </ul>\n")}b.push("\n\n");if(this.invoices.length>0){b.push("\n  <h4>\n    Open "),b.push(d(this.expense_income==="expense"?"Bills":"Invoices")),b.push("\n    <span class='total'>"),b.push(d(this.invoiced_total.format({absolute:!1,precision:2}))),b.push("</span>\n  </h4>\n  <ul class='invoices'>\n    "),k=this.invoices;for(e=0,h=k.length;e<h;e++)a=k[e],b.push("\n      <li class='"),a.get("ignored")&&b.push(d("ignored")),b.push("'>\n        <span class=date>"),b.push(d(a.hits_cashflow_on().format("Do"))),b.push("</span>\n        <span class=description>\n          <a href='#invoices/"),b.push(d(a.get("id"))),b.push("' rel='edit-invoice'>"),b.push(d(a.get("reference"))),b.push("</a>\n        </span>\n        <span class=total>\n          "),b.push(d(a.hits_cashflow_total().format({absolute:!1,precision:2}))),b.push("\n        </span>\n    ");b.push("\n  </ul>\n")}b.push("\n\n");if(this.bank_account_entries.length>0){b.push("\n  <h4>\n    Paid\n    <span class=total>"),b.push(d(this.paid_total.format({absolute:!1,precision:2}))),b.push("\n  </h4>\n  <ul class='bank_account_entries'>\n    "),l=this.bank_account_entries;for(f=0,i=l.length;f<i;f++)a=l[f],b.push("\n      <li class='"),a.get("ignored")&&b.push(d("ignored")),b.push("'>\n        <span class=date>"),b.push(d(a.hits_cashflow_on().format("Do"))),b.push("</span>\n        <span class=description>\n          <a href='#bank_account_entries/"),b.push(d(a.get("id"))),b.push("' rel='edit-bank_account_entry'>"),b.push(d(a.get("description"))),b.push("</a>\n        </span>\n        <span class=total>\n          "),b.push(d(a.hits_cashflow_total().format({absolute:!1,precision:2}))),b.push("\n        </span>\n    ");b.push("\n  </ul>\n")}b.push("\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow_sets/transfer/month_popover"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div class='arrow'></div>\n<div class='inner'>\n  <div class='title'>\n    <a class='close'>x</a>\n    <h3>\n      "),b.push(d(this.name)),b.push("\n      <small>"),b.push(d(this.date.format("MMM 'YY"))),b.push("</small>\n    </h3>\n  </div>\n  <div class='content'></div>\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow_sets/vat_row/cashflow_set"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<td class='description' scope='rowgroup'>\n  "),b.push(d(this.name)),b.push("\n</td>\n<td class='include'>\n  <input type='checkbox' value='1' class='included' "),this.ignored||b.push(d("checked='checked'")),b.push(" >\n</td>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow_sets/vat_row/entries_list"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,c,e,f,g,h,i,j;this.vat_return&&(b.push("\n  <div class='popover-vatreturn-vatreturnpanel'>\n    <h4>\n      "),c=this.vat_return.get("status"),b.push("\n      "),c==="PAID"?b.push("\n        Vat return due this month is paid\n      "):c==="DUE"||c==="OVERDUE"?b.push("\n        Vat return due this month is not paid\n      "):b.push("\n        A Vat return will be due this month\n      "),b.push("\n        \n    </h4>\n\n    <ul class='vat-returns'>\n      <li class='"),this.vat_return.get("projection").get("ignored")&&b.push(d("ignored")),b.push("'>\n        <span class=date>"),b.push(d(this.vat_return.get("projection").hits_cashflow_on().format("Do"))),b.push("</span>\n        <span class=description>\n          <a href='#projections/"),b.push(d(this.vat_return.get("projection").get("id"))),b.push("' rel='edit-projection'>Return for period ending "),b.push(d(this.vat_return.get("period_ends_on").format("YYYY-MM"))),b.push("</a>\n        </span>\n        <span class=total>"),b.push(d(this.vat_return.get("projection").hits_cashflow_total().format("expense",{precision:2}))),b.push("</span>\n      </li>\n    </ul>\n  </div>\n")),b.push("\n\n");if(this.invoices.length>0){b.push("\n  <h4>\n    Open "),b.push(d(this.expense_income==="expense"?"Bills":"Invoices")),b.push("\n    <span class='total'>"),b.push(d(this.invoiced_total.format({absolute:!0,precision:2}))),b.push("</span>\n  </h4>\n  <ul class='invoices'>\n    "),i=this.invoices;for(e=0,g=i.length;e<g;e++)a=i[e],b.push("\n      <li class='"),a.get("ignored")&&b.push(d("ignored")),b.push("'>\n        <span class=date>"),b.push(d(a.hits_cashflow_on().format("Do"))),b.push("</span>\n        <span class=description>\n          <a href='#invoices/"),b.push(d(a.get("id"))),b.push("' rel='edit-invoice'>"),b.push(d(a.get("reference"))),b.push("</a>\n        </span>\n        <span class=total>\n          "),b.push(d(a.hits_cashflow_total().format({absolute:!0,precision:2}))),b.push("\n        </span>\n    ");b.push("\n  </ul>\n")}b.push("\n\n");if(this.bank_account_entries.length>0){b.push("\n  <h4>\n    Vat Payments Made\n    <span class=total>"),b.push(d(this.paid_total.format({absolute:!0,precision:2}))),b.push("\n  </h4>\n  <ul class='bank_account_entries'>\n    "),j=this.bank_account_entries;for(f=0,h=j.length;f<h;f++)a=j[f],b.push("\n      <li class='"),a.get("ignored")&&b.push(d("ignored")),b.push("'>\n        <span class=date>"),b.push(d(a.hits_cashflow_on().format("Do"))),b.push("</span>\n        <span class=description>\n          <a href='#bank_account_entries/"),b.push(d(a.get("id"))),b.push("' rel='edit-bank_account_entry'>"),b.push(d(a.get("description"))),b.push("</a>\n        </span>\n        <span class=total>\n          "),b.push(d(a.hits_cashflow_total().format({absolute:!0,precision:2}))),b.push("\n        </span>\n    ");b.push("\n  </ul>\n")}b.push("\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/cashflow_sets/vat_row/month_popover"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div class='arrow'></div>\n<div class='inner'>\n  <div class='title'>\n    <a class='close'>x</a>\n    <h3>\n      "),b.push(d(this.name)),b.push("\n      <small>"),b.push(d(this.date.format("MMM 'YY"))),b.push("</small>\n    </h3>\n  </div>\n  <div class='content'></div>\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/chart_controls/main"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div class='chartctrl panel-footer'>\n  <!--<a href=\"#\" rel=\"hide-chart-ctrls\" class=\"chartctrl-hide is-open\"><span></span></a>\n  <h6 class='chartctrl-header'><a rel=\"hide-chart-ctrls\">Controls</a></h6>-->\n  <div class='chartctrl-inner'>\n    <div class='chartctrl-ctrllist'>\n      <input type='checkbox' name='include-sales' "),this.include_sales&&b.push(d("checked"
)),b.push(">\n      Include sales targets in charts\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/entries/project"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<td class='description'>\n</td>\n<td class='total money'>\n  <input value=\""),b.push(d(this.total.format())),b.push("\" name = 'total' type='text'>\n</td>\n<td class='date'>\n  <input value=\""),b.push(d(this.dated_on.format("YYYY-MM-DD"))),b.push("\" name='dated_on' type='text' class='datepicker'>\n</td>\n\n<td class='included'>\n  <input name='included' type='checkbox' value='1' "),this.ignored||b.push(d("checked='checked'")),b.push(" >\n</td>\n<td class='save'>\n  <a class='save btn primary small'>Save</a>\n  <a class='reset'>Reset</a>\n</td>\n<td class='delete'>\n  <a style='color: red; font-size: 80%'>[delete]</a>\n</td>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/invoices/_index_row"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a;b.push("<td class='datab-cl datab-cl-icon'>\n  "),a=(this.status||"").toLowerCase(),b.push('\n  <i class="icon icon-'),b.push(d(a)),b.push(' tooltip tooltip-left" title="'),b.push(d(a)),b.push("\"></i>\n</td>\n\n<td class='datab-cl datab-cl-large'>\n  "),b.push(d(this.reference)),b.push("\n</td>\n\n<td class='datab-cl datab-cl-money'>\n  "),b.push(d(this.total.format(this.their_type,{precision:2}))),b.push("\n</td>\n\n<td class='datab-cl datab-cl-date'>\n  "),b.push(d(this.due_on.format("DD MMM YY"))),b.push("\n</td>\n\n<td class='datab-cl datab-cl-date datab-cl-edit'>\n  "),this.is_expected&&(b.push('\n    <input name="expected_on" class="date datepicker" type=text value="'),this.expected_on?b.push(d(this.expected_on.format("YYYY-MM-DD"))):b.push(d(this.due_on.format("YYYY-MM-DD"))),b.push('">\n  ')),b.push("\n</td>\n\n<td class='datab-cl datab-cl-select datab-cl-edit'>\n  <select name='cashflow_set'>\n</td>\n\n<td class='datab-cl datab-cl-select datab-cl-edit'>\n  <div class=\"table-cell-wrapper\">\n    <select name='project' />\n    <span class='loading loading-outside-right'></span>\n  </div>\n</td>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/invoices/form"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){this.errors||(this.errors={}),b.push('\n\n<div class="modal-header">\n  <a class="close"></a>\n  <h3>'),b.push(d(this.expense_income==="income"?"Invoice":"Bill")),b.push('</h3>\n</div>\n<form id="edit-invoice" name="invoice">\n  <div class="modal-body">\n    <div class="details">\n      <dl>\n        <dt>Contact &amp; Reference</dt>\n        <dd>'),b.push(d(this.reference)),b.push("</dd>\n        <dt>Due Date</dt>\n        <dd>"),b.push(d(this.due_on.format("YYYY-MM-DD"))),b.push("</dd>\n        <dt>Still due</dt>\n        <dd>"),b.push(d(this.expected_total.format({absolute:!0,precision:2}))),b.push(" of "),b.push(d(this.total.format({absolute:!0,precision:2}))),b.push('</dd>\n      </dl>\n    </div>\n    \n    \n    <div class="input clearfix datepicker required">\n      <label class="datepicker required" for="invoice_expected_on">\n        <abbr title="required">*</abbr>\n        Expected on\n      </label>\n      <input class="datepicker required" id="invoice_expected_on" name="expected_on" required="required" size="30" type="text" value="'),b.push(d(this.due_on.format("YYYY-MM-DD"))),b.push('">\n    </div>\n\n    <div class="input clearfix select required"><label class="select required" for="invoice_cashflow_set"><abbr title="required">*</abbr> Budget/Target</label><select class="select required" id="invoice_cashflow_set" name="cashflow_set"></select></div>\n\n    <div class="input clearfix select required"><label class="select required" for="invoice_project"><abbr title="required">*</abbr> Project</label><select class="select required" id="invoice_project" name="project"></select></div>\n\n    <div class="input clearfix boolean optional"><input name="ignored" type="hidden" value="0"><input class="boolean optional" id="invoice_ignored" name="ignored" type="checkbox" value="1"><label class="boolean optional" for="invoice_ignored"> Ignore in cash flow?</label></div>\n  </div>\n\n  <div class="actions modal-footer">\n    <input class="button btn primary" name="commit" type="submit" value="Save">\n    <a class="cancel btn">Cancel</a>\n  </div>\n</form>\n')}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/invoices/index"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div class='panel-header'>\n  <h1>"),b.push(d(this.invoice_type)),b.push("s</h1>\n</div>\n\n<div class='panel-subheader'>\n  <a class='prev-page btn' href='#' rel='prev'> See newer "),b.push(d(this.invoice_type)),b.push("s</a>\n  <a class='next-page btn' href='#' rel='next'>See older "),b.push(d(this.invoice_type)),b.push("s </a>\n  <div class=search>\n    <input type='search' class='search-input' rel='search' placeholder='Type to search'>\n  </div>\n</div>\n\n<div class='panel-body'>\n\n  <p class='search-message'>\n\n  <table class=\"zebra-striped condensed-table datab\">\n    <thead>\n      <tr>\n        <th class='datab-cl-icon'></th>\n        <th class='datab-cl-large'>Reference</th>\n        <th class='datab-cl-money'>Total</th>\n        <th class='datab-cl-date'>Due on</th>\n        <th class='datab-cl-date datab-cl-edit'>Expected On</th>\n        <th class='datab-cl-select datab-cl-edit'>Budget</th>\n        <th class='datab-cl-select datab-cl-edit'>Project</th>\n      </tr>\n    </thead>\n    <tbody>\n    </tbody>\n  </table>\n</div>\n\n<div class='panel-subfooter'>\n  <a class='prev-page btn' href='#' rel='prev'> See newer transactions</a>\n  <a class='next-page btn' href='#' rel='next'>See older transactions </a>\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/invoices/project"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<td class='description'>\n  "),b.push(d(this.reference)),b.push("\n</td>\n<td class='total money'>\n  "),b.push(d(this.total.format({absolute:!0}))),b.push("\n</td>\n<td class='date'>\n  <input value=\""),b.push(d(this.expected_on.format("YYYY-MM-DD"))),b.push("\" name='expected_on' type='text' class='datepicker'>\n</td>\n\n<td class='included'>\n  <input name='included' type='checkbox' value='1' "),this.ignored||b.push(d("checked='checked'")),b.push(" >\n</td>\n<td class='save'>\n  <a class='save btn primary small'>Save</a>\n  <a class='reset'>Reset</a>\n</td>\n<td class='delete'>\n  <a style='color: red; font-size: 80%'>[delete]</a>\n</td>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/project_detail/detail"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){this.id==="oneoff"?b.push("\n\n  <div class=''>\n    <div class='editable-title-ctrls editable-title-ctrls-noproject'>\n      <a href=\"#\" rel=\"projects-list\" class=\"btn small\"></a>\n    </div>\n    <h2>Invoices and Projections which are not part of a project</h2>\n    \n    <div class='alert-message alert-inline'>\n      <p>\n        These invoices/projections are not part of any Float projects. To add them to a project, just click on the <i class='edit'>&nbsp;</i> icon next to them and allocate them to a project in the popup.\n    </div>\n\n  </div>\n\n"):b.push("\n\n  <div class='editable-title-ctrls'>\n    <a href=\"#\" rel=\"projects-list\" class=\"btn small\"></a>\n  </div>\n  <div class='editable-title'>\n    <div class='titled-total'>\n      <span class='subtlelabel subtlelabel-inline'>Project net total:</span>\n      <span class='total' data-bind=\"project.total\"></span>\n    </div>\n    <div class='editable-title-input'>\n      <label for=\"name\" class='subtlelabel'>Project Name:</label>\n      <input type='text' name='name' class='projectdetail-name projectdetail-editable project subtleedit' />\n    </div>\n  </div>\n\n"),b.push("\n\n\n<div class='l-2coldata'>\n  <div class='l-2coldata-col projectentries projectentries-in'>\n    <div class='titled-total'>\n      <span class='subtlelabel subtlelabel-inline'>Total cash due in:</span>\n      <span class='total net-income' data-bind='project.incomes.includedTotal'></span>\n    </div>\n\n    <h2 class='projectentries-title'>Cash In</h2>\n    <table class='datab datab-cashin datab-subtleedit'>\n      <thead>\n        <th></th>\n        <th>Description</th>\n        <th>Date Expected</th>\n        <th>Amount</th>\n        <th class='datab-cl-status'>Status</th>\n        <th class='datab-cl-icon'></th>\n      </thead>\n      <tbody class='invoices' data-yield='invoices-in'></tbody>\n      <tbody class='projections' data-yield='projections-in'></tbody>\n      <tfoot>\n        "),this.id!=="oneoff"&&b.push("\n          <tr>\n            <td colspan=6>\n              <a href='#' rel='add-projection' class='btn small'>+ Add possible income to this project</a>\n            </td>\n          </tr>\n        "),b.push("\n      </tfoot>\n    </table>\n  </div>\n\n  <div class='l-2coldata-col projectentries projectentries-out'>\n    <div class='titled-total'>\n      <span class='subtlelabel subtlelabel-inline'>Total cash due out:</span>\n      <span class='total net-expense' data-bind='project.expenses.includedTotal'></span>\n    </div>\n\n    <h2 class='projectentries-title'>Cash Out</h2>\n    <table class='datab datab-cashout datab-subtleedit'>\n      <thead>\n        <th></th>\n        <th>Description</th>\n        <th>Date Expected</th>\n        <th>Amount</th>\n        <th class='datab-cl-status'>Status</th>\n        <th class='datab-cl-icon'></th>\n      </thead>\n      <tbody class='invoices' data-yield='invoices-out'></tbody>\n      <tbody class='projections' data-yield='projections-out'></tbody>\n      <tfoot class='footer'>\n        "),this.id!=="oneoff"&&b.push("\n          <tr>\n            <td colspan=6>\n              <a href='#' rel='add-projection' class='btn small'>+ Add possible expenditure to this project</a>\n            </td>\n          </tr>\n        "),b.push("\n      </tfoot>\n    </table>\n  </div>\n</div>\n\n\n"),this.id!=="oneoff"&&(b.push("\n  <div class='projectnotes'>\n    <label for='projectnotes' class='subtlelabel'>Project notes:</label>\n    <textarea id='projectnotes' name='notes' class='subtleedit' placeholder=\"You can keep notes about the project and it's progress here\">"),b.push(d((this.notes||"").trim())),b.push("</textarea>\n  </div>\n")),b.push("\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/project_detail/invoice"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<td class=''>\n  <input type=checkbox name=included value=\"1\" "),this.ignored||b.push(d("checked")),b.push(">\n</td>\n\n<td class='datab-cl-description'>"),b.push(d(this.reference)),b.push("</td>\n\n<td class='datab-cl-date datab-cl-edit'>\n  <input type='text' name='expected_on' class='subtleedit datepicker-text' value='"),b.push(d(this.expected_on.toString())),b.push("'>\n</td>\n\n<td class='datab-cl-money'>"),b.push(d(this.expected_total.format("editable"))),b.push("</td>\n\n\n<td class='datab-cl-status'>\n  "),this.their_type==="ACCPAY"&&this.expense_income==="income"?b.push("\n    <span class='label label-invoice'>invoiced</span>\n  "):this.their_type==="ACCPAY"&&this.expense_income==="expense"?b.push("\n    <span class='label label-bill'>billed</span>\n  "):this.their_type==="ACCREC"&&this.expense_income==="expense"?b.push("\n    <span class='label label-bill'>billed</span>\n  "):this.their_type==="ACCREC"&&this.expense_income==="income"&&b.push("\n    <span class='label label-invoice'>invoiced</span>\n  "),b.push("\n</td>\n\n<td class='datab-cl-icon'>\n  <a rel='edit-invoice' href='#'>\n    <i class='edit'></i>\n  </a>\n  <span class='loading'></span>\n</td>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/project_detail/main"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div class='cashflow-nav'></div>\n\n<div id='detail' class='projects'>\n  <div class='projectdetail-content panel panel-page panel-page-projectdetail'>\n  </div>\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/project_detail/new"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<h1>Add a new project</h1>\n<div class='editable-title'>\n  <label for=\"name\" class='subtlelabel'>Project Name:</label>\n  <input type='text' name='name' placeholder=\"Project name\"/>\n</div>\n\n<a class='btn primary large' rel='create-project'>Create project</a>\n<a class='btn small' rel='delete-project'>Cancel</a>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/project_detail/projection"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<td class=''>\n  <input type=checkbox name=included value=\"1\" "),this.ignored||b.push(d("checked")),b.push(">\n</td>\n\n<td class='datab-cl-edit projectdetail-cl-description'>\n  <input\n    type='text'\n    name='description'\n    class='projectdetail-editable subtleedit'\n    placeholder='Enter Description'\n</td>\n\n<td class='datab-cl-edit datab-cl-date projectdetail-dated_on'>\n  <input type='text' name='dated_on' class='subtleedit datepicker-text projectdetail-editable'>\n</td>\n\n<td class='datab-cl-money datab-cl-edit projectdetail-total'>\n  <input type='text' name='total' class='subtleedit projectdetail-editable'>\n</td>\n\n<td class='datab-cl-unsaved' colspan=2>\n  <div class=\"table-cell-wrapper\">\n    <a href='#' class='btn primary small' rel='Save'>Save</a>\n    <a href='#' class='btn small cancel' rel='cancel'>&times;</a>\n  </div>\n  <span class='loading'></span>\n</td>\n\n<td class='datab-cl-status datab-cl-saved'>\n  <span class='label label-projection'>projected</span>\n</td>\n\n<td class='datab-cl-icon datab-cl-saved'>\n  <a rel='edit-projection' href='#'>\n    <i class='edit'></i>\n  </a>\n  <span class='loading'></span>\n</td>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/projections/edit_form"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){this.errors||(this.errors={}),b.push('\n\n<div class="modal-header">\n  <a class="close"></a>\n  <h3>Edit Projection</h3>\n</div>\n<form id="edit-projection" name="projection">\n  <div class="modal-body">\n    <div class="input clearfix">\n      <label>\n        <span> Type </span>\n      </label>\n      <div class="toggle toggle-buttons expense_income-toggle">\n        <label class="green">\n          <input type="radio" name="expense_income" value="income" '),this.expense_income==="income"&&b.push(d('checked="checked"')),b.push('>\n          <span> In </span>\n        </label>\n        <label class="red">\n          <input type="radio" name="expense_income" value="expense" '),this.expense_income==="expense"&&b.push(d('checked="checked"')),b.push('>\n          <span>\n            Out\n          </span> </label>\n      </div>\n    </div>\n\n    <div class="input clearfix string required">\n      <label class="string required" for="cashflow_entry_description"><abbr title="required">*</abbr> Description</label>\n      <input class="string required" id="cashflow_entry_description" name="description" required="required" size="50" type="text" value="'),b.push(d(this.description)),b.push('">\n    </div>\n\n    <div class="input clearfix currency required"><label class="currency required" for="cashflow_entry_total"><abbr title="required">*</abbr> Total</label> <input class="currency required" id="cashflow_entry_total" name="total" required="required" size="30" type="text" value="'),b.push(d(this.total)),b.push('"></div>\n\n    <div class="input clearfix datepicker required">\n      <label class="datepicker required" for="cashflow_entry_dated_on"><abbr title="required">*</abbr> Dated on</label>\n      <input class="datepicker required" id="cashflow_entry_dated_on" name="dated_on" required="required" size="30" type="text" value="'),b.push(d(this.dated_on.format("YYYY-MM-DD"))),b.push('"></div>\n    <div class="input clearfix select required"><label class="select required" for="cashflow_entry_cashflow_set"><abbr title="required">*</abbr> Add to a budget?</label><select class="select required" id="cashflow_entry_cashflow_set" name="cashflow_set"></select></div>\n\n    <div class="input clearfix select required"><label class="select required" for="cashflow_entry_project"><abbr title="required">*</abbr> Project</label><select class="select required" id="cashflow_entry_project" name="project"></option></select></div>\n\n    <div class="input clearfix boolean optional"><input name="ignored" type="hidden" value="0"><input class="boolean optional" id="cashflow_entry_ignored" name="ignored" type="checkbox" value="1"><label class="boolean optional" for="cashflow_entry_ignored"> Ignore in cash flow?</label></div>\n  </div>\n\n  <div class="actions modal-footer">\n    <input class="button btn primary" name="commit" type="submit" value="Save">\n    <a class="cancel btn">Cancel</a>\n    <a class="destroy btn danger small">Delete</a>\n  </div>\n</form>\n')}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/projections/form"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){this.errors||(this.errors={}),b.push("\n<div class='arrow'></div>\n<div class='inner'>\n  <h3 class='title'>Add a one-off projection</h3>\n  <div class='content'>\n    <form id='edit-projection' name='projection'>\n      <div class='clearfix description'>\n        <label>\n          <span>Description</span>\n          &nbsp;\n        </label>\n        <input name='description' placeholder='Description' type='text' />\n      </div>\n      <div class='clearfix total'>\n        <label>\n          <span>Total Amount</span>\n        </label>\n        <input name='total' placeholder='Amount' type='text' />\n        <span class=\"toggle-buttons expense_income-toggle\">\n        <label class=\"green\"><span><input type=\"radio\" name=\"expense_income\" value=\"income\">In</span></label><label class=\"red\"><span><input type=\"radio\" name=\"expense_income\" value=\"expense\" checked=\"checked\">Out</span></label>\n        </span>\n      </div>\n      <div class='clearfix dated_on'>\n        <label>\n          <span>Dated On</span>\n          &nbsp;\n        </label>\n        <input class='datepicker-text' name='dated_on' placeholder='Starts on' type='text' />\n      </div>\n      <div class='clearfix budget'>\n        <label>\n          <span>Budget</span>\n          &nbsp;\n        </label>\n        <select name='cashflow_set'></select>\n      </div>\n      <div class='clearfix project'>\n        <label>\n          <span>Project</span>\n          &nbsp;\n        </label>\n        <select name='project'></select>\n      </div>\n      <div class='actions'>\n        <a class='cancel' href='#'>cancel</a>\n        <input class=\"button btn primary small\" name=\"commit\" type=\"submit\" value=\"Save\">\n      </div>\n    </form>\n  </div>\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/projects/edit"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){this.errors||(this.errors={}),b.push('\n<div class="modal-header">\n  <a class="close"></a>\n  <h3>Edit Project</h3>\n</div>\n<form id="edit-project" name="project">\n  <div class="modal-body">\n\n    <div class="input clearfix string required"><label class="string required" for="project_name"><abbr title="required">*</abbr> Name</label><input class="string required" id="project_name" name="name" required="required" size="50" type="text"></div>\n\n    <div class="input clearfix">\n      <label> Label Color </label>\n      <div class="colors"></div>\n    </div>\n\n  </div>\n  <div class="actions modal-footer">\n    <input class="button btn primary" name="commit" type="submit" value="Save">\n    <a class="cancel btn">Cancel</a>\n    <a class="destroy btn danger small">Delete</a>\n  </div>\n</form>\n')}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/projects/entry_item"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a;b.push("<td class='status '>\n  "),a=(this.status||"").toLowerCase(),b.push('\n  <i class="'),b.push(d(a)),b.push('" title="'),b.push(d(a)),b.push("\"></i>\n</td>\n\n<td class='date'>"),b.push(d((this.expected_on||this.dated_on).format("DD MMM"))),b.push("</td>\n\n<td class='description'>\n  <a rel='edit' href='#'>"),b.push(d(this.reference||this.description)),b.push("</a>\n  "),this.project&&(b.push("\n    <span class='label' style='background-color: "),b.push(d(this.project.color)),b.push("'><a style='color: white' href='#projects/"),b.push(d(this.project.id)),b.push("'>"),b.push(d(this.project.name)),b.push("</a></span>\n  ")),b.push("\n</td>\n\n<td class='money total'>"),b.push(d((this.expected_total||this.total).format({absolute:!0,precision:2}))),b.push("</td>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/projects/inout_list"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div class='totals'>\n  <h2><span class='total-type'>Total Due "),b.push(d(this.inout)),b.push(":</span>        <span class='amount total'>"),b.push(d(this.total)),b.push("</span></h2>\n  <h3><span class='total-type'>Total "),b.push(d(this.invoice_type+"s Due")),b.push("</span>  <span class='amount invoiced_total'>"),b.push(d(this.invoiced_total)),b.push("</span></h3>\n  <h3><span class='total-type'>Total Projected:</span> <span class='amount projected_total'>"),b.push(d(this.projected_total)),b.push("</span></h3>\n</div>\n\n<table class='condensed-table zebra-striped'>\n  <tbody class='invoices'>\n    <tr class='header-row'>\n      <td class=status></td>\n      <td colspan=2>"),b.push(d(this.invoice_type+"s Expected")),b.push("</td>\n      <td class='total invoiced_total'>"),b.push(d(this.invoiced_total)),b.push("</td>\n    </tr>\n  </tbody>\n\n  <tbody class='projections'>\n    <tr class='header-row'>\n      <td class=status></td>\n      <td colspan=2>Projected "),b.push(d(this.inout)),b.push("</td>\n      <td class='total projected_total'>"),b.push(d(this.projected_total)),b.push("</td>\n    </tr>\n  </tbody>\n</table>\n<div class='add-new' style='position: relative'>\n  <a href='#' rel='new-projection' class='btn small primary'>+ Add a projection</a>\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/projects/new"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){this.errors||(this.errors={}),b.push('\n\n<div class="arrow"></div>\n<div class="inner">\n  <div class="title">\n    <a class="close">x</a>\n    <h3>New Project</h3>\n  </div>\n  <div class="content">\n    <form class="form-stacked" id="new-project" name="project">\n      <div class="modal-body">\n        <div class="input clearfix string required"><label class="string required" for="project_name"><abbr title="required">*</abbr> Name</label><input class="string required" id="project_name" name="name" required="required" size="50" type="text"></div>\n        <div class="input clearfix">\n          <label>\n            Label Color\n          </label>\n          <div class="colors"></div>\n        </div>\n      </div>\n      <div class="actions">\n        <a class="cancel">cancel</a>\n        <input class="button btn primary small" name="commit" type="submit" value="Save">\n      </div>\n    </form>\n  </div>\n</div>\n')}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/projects/project_detail"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push('<h2>\n  <span class="color-box" style="background-color: '),b.push(d(this.color)),b.push('"></span>\n  '),b.push(d(this.name)),b.push("\n</h2>\n<a href='#' rel='edit-project'>edit details</a>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/projects/projects_panel"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(
){(function(){b.push("<div class='cashflow-nav'></div>\n\n<div id='detail' class='projects'>\n  <div id='subnav'>\n    <ul class='left-nav'>\n      <li><a rel='new-projection' class='btn primary first last'>+ Add a projection</a>\n    </ul>\n\n    <!--<ul class='right-nav'>\n      <li><a rel='navigate:prev-month' title='backwards' class='btn backwards first primary' href='#'>&larr;</a></li\n      ><li><a rel='navigate:current-month' title='current-month' class='btn current_month primary' href='#'>Current Month</a></li\n      ><li><a rel='navigate:next-month' title='forwards' class='btn forwards primary last' href='#'>&rarr;</a></li>\n    </ul>-->\n  </div>\n\n  <div id='projects-panel'>\n    <!--<div id=\"subnav\">\n      <a href='#projects' class='btn primary small first'>Overview</a\n      ><a href='#projects/booked' class='btn primary small'>Booked</a\n      ><a href='#projects/planned' class='btn primary small'>Planned</a\n      ><a href='#projects/completed' class='btn primary small last'>Completed</a>\n    </div>-->\n\n    <div id=\"projects-sidebar\">\n      <ul>\n        <li><a href='#projects' class='projects-overview'><span class='color-box'></span>Overview</a></li>\n      </ul>\n      <a href='#' rel='new-project' class='new-project btn'>+ Add a Project +</a>\n    </div>\n\n    <div id=\"projects-detail\">\n      <div id=\"project-detail\"></div>\n      \n      <div id=\"project-entries\">\n        <div id=\"project-incomes\"></div>\n        <div id=\"project-expenses\"></div>\n      </div>\n    </div>\n  </div>\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/projects/select_option"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push('<option value="'),b.push(d(this.id)),b.push('">'),b.push(d(this.name)),b.push("</option>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/projects/sidebar_item"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<a href='#projects/"),b.push(d(this.id)),b.push("'>\n  <span class='color-box' style='background-color: "),b.push(d(this.color)),b.push("'></span>\n  "),b.push(d(this.name)),b.push("\n</a>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/projects_overview/main"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div class='cashflow-nav'></div>\n\n\n<div id='detail' class='projects'>\n  \n  <div class='projectoverview-content panel panel-page'>\n\n    <div class='projectoverview-title'>\n      <h1>Projects</h1>\n      <a href='#' rel='add-project' class='btn small first last'>+ add another project</a>\n    </div>\n\n    <div class='projectoverview-projects'></div>\n    <div class='projectoverview-uncategorized'></div>\n  </div>\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/projects_overview/no_projects"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push('<h2>You haven\'t got any projects yet</h2>\n\n<p>Projects let you organise invoices (that you have raised in FreeAgent) and projections (that you have added in Float).</p>\n\n<p>Why not get started by adding a project.</p>\n\n<a href="#" rel="add-project" class="btn primary first last">+ Add a project</a>\n')}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/projects_overview/project_row"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<td class=''>\n  <input type=checkbox name=included value=\"1\" "),this.ignored||b.push(d("checked")),b.push(">\n</td>\n\n<td class='projectoverview-cl-name datab-cl-description'>\n  <a href='#' rel='project-detail'>\n    "),this.id==="oneoff"?b.push("\n      Invoices and projections <em>not in projects</em>\n    "):(b.push("\n      "),b.push(d(this.name)),b.push("\n    ")),b.push("\n  </a>\n</td>\n<td class='datab-cl-money projectoverview-cl-total'>\n  "),b.push(d(this.net_total.format())),b.push("\n</td>\n<td class='projectoverview-cl-progress'>\n  "),this.progress_percentage=Math.random()*100,b.push("\n  <div class='table-cell-wrapper'>\n    <div class='budget-bar mini-budget-bar'>\n      <div class='budgeted-bar' style='width: 100%'></div>\n      <div class='actual-bar' style='width: "),b.push(d(this.progress_percentage)),b.push("%'></div>\n    </div>\n  </div>\n</td>\n<!--<td class='datab-cl-checkbox'>\n  <input type='checkbox' name='include' val='1' checked />\n</td>-->\n<td class='datab-cl-icon'>\n  <a rel='project-destroy' href='#'><i class='destroy'></i></a>\n</td>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/projects_overview/project_table"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<thead>\n  <tr>\n    <th class='datab-cl-icon'></th>\n    <th class='datab-cl-description'>Name</th>\n    <th class='datab-cl-money'>Project Value</th>\n    <th class='projectoverview-cl-progress'>Progress</th>\n    <th class='datab-cl-icon'></th>\n  </tr>\n</thead>\n<tbody>\n</tbody>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/recent_import/invoices_table"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push('<h2 class="'),b.push(d(this.invoice_type.toLowerCase())),b.push('">'),b.push(d(this.invoice_type)),b.push("s</h2>\n\n<table class=\"zebra-striped condensed-table datab\">\n  <thead>\n    <tr>\n      <th class='datab-cl-icon'></th>\n      <th class='datab-cl-large'>Reference</th>\n      <th class='datab-cl-money'>Total</th>\n      <th class='datab-cl-date'>Due on</th>\n      <th class='datab-cl-date datab-cl-edit'>Expected On</th>\n      <th class='datab-cl-select datab-cl-edit'>Budget</th>\n      <th class='datab-cl-select datab-cl-edit'>Project</th>\n    </tr>\n  </thead>\n  <tbody>\n  </tbody>\n</table>\n\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/recent_import/main"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div class='panel panel-page'>\n  <div class='panel-header'>\n    <h1 class='panel-title'>Your most recent FreeAgent Import</h1>\n    <div class='panel-info'>\n      <p>Here is all the new data Float found in FreeAgent when you last updated.</p>\n      <p>You may wish to:</p>\n      <ul>\n        <li>Update the expected payment dates of your invoices and bills to tell Float when <em>you</em> think they will <em>actually</em> hit your bank account</li>\n        <li>Change the category that invoices/bills/transactions have been placed in. Float has mapped them automatically using the category mapping setup in <a href='/welcome/map_categories'>the categories screen</a> but you may wish to move one or two entries around yourself.</li>\n        <li>Place invoices/bills into one of your existing Float projects. If invoices replace projections you already have in Float, you will need to remove those manually from the pipeline screen.</li>\n      </ul>\n    </div>\n  </div>\n\n  <div class='panel-body'>\n    <div id='entries'></div>\n  </div>\n\n  <div class='panel-footer'>\n    <a class='btn large primary' rel='finish-import' href='#'>Finish my import</a>\n  </div>\n\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/recent_import/transactions_table"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<h2>Transactions</h2>\n\n<table class=\"zebra-striped condensed-table datab\">\n  <thead>\n    <tr>\n      <th class='datab-cl-date'>Paid on</th>\n      <th class='datab-cl-large'>Description</th>\n      <th class='datab-cl-money'>Money In</th>\n      <th class='datab-cl-money'>Money Out</th>\n      <th class='datab-cl-select datab-cl-edit'>Category</th>\n    </tr>\n  </thead>\n  <tbody>\n  </tbody>\n</table>\n\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/vat_returns/current/form_details"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<dl>\n  <dt>Return Period</dt>\n  <dd>"),b.push(d(this.period_starts_on.format("MMM"))),b.push(" - "),b.push(d(this.period_ends_on.format("MMM YYYY"))),b.push("</dd>\n\n  <dt>Submission &amp; Payment Due</dt>\n  <dd>"),b.push(d(this.due_on.format("human"))),b.push("</dd>\n</dl>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/vat_returns/current/form_fields"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<dl>\n  <dt>Estimated VAT Payment due</dt>\n  <dd>"),b.push(d(this.hits_cashflow_total.format())),b.push("</dd>\n</dl>\n  <p class='modal-vatreturn-greaterof'>This is the greater of:</p>\n\n<dl class='modal-vatreturn-greaterof'>\n  <dt>Total VAT accrued so far</dt>\n  <dd>"),b.push(d(this.actual_total.format("income"))),b.push("</dd>\n\n  <dt>Your estimated VAT total</dt>\n  <dd>"),b.push(d(this.estimated_total.format("income"))),b.push("<a href='#' rel='edit-estimate'>edit</a></dd>\n</dl>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/vat_returns/current/form_fields_edit"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<dl>\n  <dt>Estimated VAT Payment due</dt>\n  <dd>"),b.push(d(this.hits_cashflow_total.format())),b.push("</dd>\n</dl>\n  <p class='modal-vatreturn-greaterof'>This is the greater of:</p>\n\n<dl class='modal-vatreturn-greaterof'>\n  <dt>Total VAT accrued so far</dt>\n  <dd>"),b.push(d(this.actual_total.format("income"))),b.push('</dd>\n\n  <dt>Your estimated VAT total</dt>\n  <dd><input type="text" name="estimated_total" value="'),b.push(d(this.estimated_total.format("income"))),b.push("\"></dd>\n</dl>\n\n<div class=\"input clearfix input-checkbox input-checkbox-question\">\n  <label>\n    <input type='checkbox' name='modify_future_events'>\n    Update estimates on all future VAT returns?\n  </label>\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/vat_returns/due/form_details"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<dl>\n  <dt>Return Period</dt>\n  <dd>"),b.push(d(this.period_starts_on.format("MMM"))),b.push(" - "),b.push(d(this.period_ends_on.format("MMM YYYY"))),b.push("</dd>\n\n  <dt>Submission &amp; Payment Due</dt>\n  <dd>"),b.push(d(this.due_on.format("human"))),b.push("</dd>\n\n  <dt>Net VAT due</dt>\n  <dd>"),b.push(d(this.actual_total.format("income",{precision:2}))),b.push("</dd>\n</dl>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/vat_returns/due/form_fields"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div class='modal-vatreturn-overduenotice'>\n  "),this.status==="OVERDUE"?(b.push("\n    <p>This vat return was due "),b.push(d(this.due_on.format("fromNowInDays"))),b.push("</p>\n    <p> If you have paid it and the transaction has been brought into Float, you should mark it as paid so we don't double count it.\n    </p>\n  ")):(b.push("\n    <p>This vat return is due "),b.push(d(this.due_on.format("fromNowInDays"))),b.push("</p>\n    <p> Once you have paid it\n        and the transaction has been brought into Float, you should\n        mark it as paid so we don't double count it.\n    </p>\n  ")),b.push('\n  \n</div>\n\n<div class="input clearfix input-checkbox">\n  <label>\n    <input type="checkbox" name="marked_as_paid"> Mark this vat return as having been paid.\n  </label>\n</div>\n')}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/vat_returns/form"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){this.errors||(this.errors={}),b.push('\n\n<div class="modal-header">\n  <a class="close"></a>\n  <h3>\n    '),b.push(d(this.modal.title)),b.push("\n\n    "),this.modal.subtitle&&(b.push("\n      <small>"),b.push(d(this.modal.subtitle)),b.push("</small>\n    ")),b.push('\n  </h3>\n</div>\n\n<form id="edit-invoice" name="invoice">\n  <div class="modal-body">\n    <div class="details" data-yield="details"></div>\n    <div class="fields" data-yield="fields"></div>\n  </div>\n\n  <div class="actions modal-footer">\n    <input class="button btn primary" name="commit" type="submit" value="Save">\n    <a class="cancel btn">Cancel</a>\n  </div>\n</form>\n')}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/wizard/importing"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div id='title'>\n  <div class='inner'></div>\n</div>\n\n<div id='income' style='display: none'>\n  <h2>Set a Sales Target</h2>\n  <p>\n    Below are your last 3 months of total sales from FreeAgent. Using your recent sales, set a sales target for future months (don't worry you can change this later).\n  </p>\n  <div id='income-cloud' class='category-cloud'>\n  </div>\n\n  <div id='income-all'>\n    <table>\n      <thead>\n        <th class='description'>FreeAgent Category</th>\n        <th class='month month1'><div class=table-cell-wrapper>"),b.push(d(this.months[0])),b.push("</div></th>\n        <th class='month month2'><div class=table-cell-wrapper>"),b.push(d(this.months[1])),b.push("</div></th>\n        <th class='month month3'><div class=table-cell-wrapper>"),b.push(d(this.months[2])),b.push("</div></th>\n        <th class='set-budget'><div class=table-cell-wrapper>Set Sales Target in Float</div></th>\n      </thead>\n      <tbody id='income-categories'></tbody>\n    </table>\n  </div>\n</div>\n\n<div id='expenses' style='display: none'>\n  <h2>Set up your Expenditure Budgets</h2>\n  <div id='expense-cloud' class='category-cloud'>\n  </div>\n\n  <div id='expense-frequent'>\n    <h3 style='margin-left: 20px;'>Frequently used categories</h3>\n    <p>These are categories you use in FreeAgent quite a lot. You probably want to set a budget for them in Float. A rough budget is fine, you can improve it later.</p>\n    <table>\n      <thead>\n        <th class='description'>FreeAgent Category</th>\n        <th class='month month1'><div class=table-cell-wrapper>"),b.push(d(this.months[0])),b.push("</div></th>\n        <th class='month month2'><div class=table-cell-wrapper>"),b.push(d(this.months[1])),b.push("</div></th>\n        <th class='month month3'><div class=table-cell-wrapper>"),b.push(d(this.months[2])),b.push("</div></th>\n        <th class='set-budget'><div class=table-cell-wrapper>Set Float Budget</div></th>\n      </thead>\n      <tbody id='frequent-expense-categories'></tbody>\n    </table>\n  </div>\n\n  <div id='expense-infrequent'>\n    <h3 style='margin-left: 20px;'>Infrequently used categories</h3>\n    <p>You don't use these categories very often. You can set a budget for them if you like, otherwise Float will just put them into a \"Misc Expenditure\" category.</p>\n    <table>\n      <thead>\n        <th class='description'>FreeAgent Category</th>\n        <th class='month month1'><div class=table-cell-wrapper>Oct 11</div></th>\n        <th class='month month2'><div class=table-cell-wrapper>Nov 11</div></th>\n        <th class='month month3'><div class=table-cell-wrapper>Dec 11</div></th>\n        <th class='set-budget'><div class=table-cell-wrapper>Set Float Budget</div></th>\n      </thead>\n      <tbody id='infrequent-expense-categories'></tbody>\n    </table>\n  </div>\n</div>\n\n<div id='finish' class='panel' style='display: none'><div class='inner'></div></div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/wizard/importing_category"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<td class='description'>\n  "),b.push(d(this.tag)),b.push("\n  <!--<span class='label'>"),b.push(d(this.tag)),b.push("</span>-->\n</td>\n<td class='month month1 money' data-period='month' data-date='"),b.push(d(this.periods[0])),b.push("'>\n  <div class='table-cell-wrapper'>\n    "),b.push(d(this.totals[0])),b.push("\n  </div>\n</td>\n<td class='month month2 money' data-period='month' data-date='"),b.push(d(this.periods[1])),b.push("'>\n  <div class='table-cell-wrapper'>\n    "),b.push(d(this.totals[1])),b.push("\n  </div\n</td>\n<td class='month month3 money' data-period='month' data-date='"),b.push(d(this.periods[2])),b.push("'>\n  <div class='table-cell-wrapper'>\n    "),b.push(d(this.totals[2])),b.push("\n  </div>\n</td>\n<td class='set-budget money'>\n  <div class='table-cell-wrapper'>\n    <input type=text class='money' name='budget.total' placeholder='0' value='"),b.push(d(this.budget)),b.push("'>\n    every month\n    <!--<select name=frequency_interval>\n      <option value=week>every week</option>\n      <option value=month selected>every month</option>\n      <option value=quarter>every quarter</option>\n      <option value=year>every year</option>\n    </select>-->\n  </div>\n</td>\n\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/wizard/states/building-your-cashflow"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div class='wizpan panel panel-wizard panel-page'>\n  <div class='panel-header'>\n    <h1>Building your Cashflow\n      <div class='building-spinner spinner'></div>\n    </h1>\n  </div>\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/wizard/states/set-frequent-budgets"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div class='wizpan panel panel-wizard panel-page'>\n  <div class='panel-header'>\n    <h1>Set Budgets for Expenditure<br>\n    <small>These are the FreeAgent categories where you frequently spend money.</small>\n    </h1>\n  </div>\n  <div class='panel-body'>\n    <ul class='wizpan-instructions'>\n      <li><strong>Set budgets</strong> for your monthly spend in each FreeAgent category.</li>\n      <li>To help, your last few months of spending are shown.</li>\n      <li>You can <strong>click recent months</strong> to see a breakdown.</li>\n      <li>If you don't want to budget a category, just <strong>leave the field empty</strong>.</li>\n    </ul>\n    <div>\n      <table class='wizpan-category-table'>\n        <thead>\n          <th class='description'>FreeAgent Category</th>\n          <th class='month month1'><div class=table-cell-wrapper>"),b.push(d(this.months[0])),b.push("</div></th>\n          <th class='month month2'><div class=table-cell-wrapper>"),b.push(d(this.months[1])),b.push("</div></th>\n          <th class='month month3'><div class=table-cell-wrapper>"),b.push(d(this.months[2])),b.push("</div></th>\n          <th class='set-budget'><div class=table-cell-wrapper>Set budget in Float</div></th>\n        </thead>\n        <tbody id='expense-categories'></tbody>\n      </table>\n    </div>\n\n    <a class='btn primary success' rel='set-infrequent-budgets'>Next Step</a>\n  </div>\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/wizard/states/set-infrequent-budgets"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div class='wizpan panel panel-wizard panel-page'>\n  <div class='panel-header'>\n    <h1>Set Budgets for Other Expenditure<br>\n    <small>You don't spend much in these FreeAgent categories</small>\n  </div>\n  <div class='panel-body'>\n    <ul class='wizpan-instructions'>\n      <li>You don't spend in these categories very often, but you may still want to set a\n      budget for them.</li>\n      <li>If you don't want to budget a category, just leave the field empty.</li>\n    </ul>\n\n    <p>\n      <a class='btn primary success' rel='finish-wizard'>Next Step</a>\n    </p>\n    <div>\n      <table class='wizpan-category-table'>\n        <thead>\n          <th class='description'>FreeAgent Category</th>\n          <th class='month month1'><div class=table-cell-wrapper>"),b.push(d(this.months[0])),b.push("</div></th>\n          <th class='month month2'><div class=table-cell-wrapper>"),b.push(d(this.months[1])),b.push("</div></th>\n          <th class='month month3'><div class=table-cell-wrapper>"),b.push(d(this.months[2])),b.push("</div></th>\n          <th class='set-budget'><div class=table-cell-wrapper>Set budget in Float</div></th>\n        </thead>\n        <tbody id='infrequent-expense-categories'></tbody>\n      </table>\n    </div>\n\n    <a class='btn primary success' rel='finish-wizard'>Next Step</a>\n  </div>\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/wizard/states/set-sales-target"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div class='wizpan panel panel-wizard panel-page'>\n  <div class='panel-header'>\n    <h1>Set a Sales Target</h1>\n  </div>\n\n  <div class='panel-body'>\n    <ul class='wizpan-instructions'>\n\n      <li>Set a <strong>rough sales target</strong> for each month.</li>\n      <li>To help, your last few months of sales are shown.</li>\n      <li>You can <strong>click recent months</strong> to see a breakdown.</li>\n    </ul>\n    <div id='income-all'>\n      <table class='wizpan-category-table'>\n        <thead>\n          <th class='description'>FreeAgent Category</th>\n          <th class='month month1'><div class=table-cell-wrapper>"),b.push(d(this.months[0])),b.push("</div></th>\n          <th class='month month2'><div class=table-cell-wrapper>"),b.push(d(this.months[1])),b.push("</div></th>\n          <th class='month month3'><div class=table-cell-wrapper>"),b.push(d(this.months[2])),b.push("</div></th>\n          <th class='set-budget'><div class=table-cell-wrapper>Set Sales Target in Float</div></th>\n        </thead>\n        <tbody id='income-categories'></tbody>\n      </table>\n    </div>\n\n    <a class='btn primary success' rel='set-frequent-budgets'>Next Step</a>\n  </div>\n</div>\n")}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/wizard/states/start"]=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){b.push("<div class='panel panel-wizard wizpan panel-page'>\n  <div class='panel-header'>\n    <h1>\n      Welcome to Float<br>\n      <small>Float is importing your FreeAgent data.</small>\n    </h1>\n    <div id=\"import-spinner\"></div>\n  </div>\n\n  <div class='panel-body'>\n    <p class='wizpan-instructions'>To help you build a cash flow forecast quickly and easily, Float is importing some data from FreeAgent.<br>This should only take a minute or two.</p>\n\n    <ul class=\"importing-steps\">\n      <li class=\"\" rel=\"import-connecting\">Connecting to FreeAgent</li>\n      <li class=\"\" rel=\"importing-categories\">Importing your FreeAgent Categories</li>\n      <li class=\"\" rel=\"importing-transactions\">Importing your recent bills, invoices and transactions</li>\n    </ul>\n\n    <a class='btn large success' style='display: none' href='#' rel='import-done'>Next Step</a>\n  </div>\n</div>\n"
)}).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};FloatApp.WindowManager=function(){function b(b){this.bindResizeEvents=a(this.bindResizeEvents,this),this.nMonths=a(this.nMonths,this),this.cashflow=b.cashflow,this.offset=b.offset,this.minCellWidth=b.minCellWidth,this.currentMonthWidth=b.currentMonthWidth,b.bindResize!==!1&&this.bindResizeEvents()}return b.name="WindowManager",b.prototype.nMonths=function(){var a;return a=Math.floor((window.innerWidth-this.offset)/this.minCellWidth)-this.currentMonthWidth,_.min([a,12])},b.prototype.bindResizeEvents=function(){var a,b,c=this;return b=null,a=function(){var a,b;return a=c.cashflow.periods.months.length,b=c.nMonths(),c.cashflow.alterRange(b-a)},$(window).resize(function(){return clearTimeout(b),b=setTimeout(a,1e3)})},b}()}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};FloatApp.ViewManager=function(){function b(b){this.showView=a(this.showView,this),this.container=$(b)}return b.name="ViewManager",b.prototype.showView=function(a){return this.currentView&&this.currentView.dispose(),this.currentView=a,this.currentView.render(),this.container.html(this.currentView.el),this.currentView.onRender&&this.currentView.onRender(),this.currentView.onShow&&this.currentView.onShow(),this.trigger("show:view")},b.prototype.dispose=function(){return this.currentView.dispose()},b}(),_.extend(FloatApp.ViewManager.prototype,Backbone.Events)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=[].slice;FloatApp.Manager=function(){function c(){var c,d,e=this;c=arguments[0],d=2<=arguments.length?b.call(arguments,1):[],this.activate=a(this.activate,this),this.bindEvents=a(this.bindEvents,this),this.views=d,this.scope=c,_.each(d,function(a){return e.bindEvents(a)})}return c.name="Manager",c.prototype.views=[],c.prototype.addAndActivate=function(a){return this.add(a),this.activate(a)},c.prototype.add=function(a){return this.bindEvents(a),this.views.push(a)},c.prototype.bindEvents=function(a){var b,c=this;return b=function(){return c.activate(a)},a.bind("activate:"+this.scope,b)},c.prototype.activate=function(a){return $("body").unbind("click.manager"),_(this.views).chain().filter(function(b){return b.cid!==a.cid}).each(function(a){return a.deactivate()})},c}()}.call(this),function(){Backbone.Model.mixin=function(a){return _.extend(this.prototype,a)},Backbone.Mixins||(Backbone.Mixins={}),Backbone.Mixins.WithComputedProperties={initialize:function(){return this._setupProperties()},_collectionEvents:["destroy","remove","add","reset"],_bindProperty:function(a,b){var c,d,e,f,g,h,i,j,k;f=a.split("."),i=f.length===2?[this.get(f[0]),f[1]]:[this,f[0]],e=i[0],d=i[1];if(d==="collectionEvents"){j=this._collectionEvents,k=[];for(g=0,h=j.length;g<h;g++)c=j[g],k.push(function(a){return e.bind(a,b)}(c));return k}return e.bind(d,b)},_addProperty:function(a,b,c){var d,e,f,g,h=this;this._properties||(this._properties={}),e=function(){var b;return b={},b[a]=c.call(h),h.set(b)},e();for(f=0,g=b.length;f<g;f++)d=b[f],this._bindProperty(d,e);return this._properties[a]=e},_setupProperties:function(a){var b,c,d=this;a||(a=this.properties);for(c in a)b=a[c],this._addProperty(c,b.bindings,b.result);return this._doCalc=function(a){return d._properties[a]()}}}}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};FloatApp.Models.Entry=function(a){function c(){return this.modifyDate=b(this.modifyDate,this),this.toJSON=b(this.toJSON,this),this.setCashflowSet=b(this.setCashflowSet,this),this.hits_cashflow_total=b(this.hits_cashflow_total,this),this.hits_cashflow_on=b(this.hits_cashflow_on,this),this.isIncluded=b(this.isIncluded,this),this.isTransfer=b(this.isTransfer,this),this.isIncome=b(this.isIncome,this),this.isExpense=b(this.isExpense,this),this.correctSignOfValue=b(this.correctSignOfValue,this),this.datatypes=b(this.datatypes,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="Entry",c.prototype.paramRoot="",c.prototype.defaults=function(){return{total:"0",total_tax:"0",subtotal:"0",dated_on:_.date().format("YYYY-MM-DD"),ignored:!1,expense_income:"expense"}},c.prototype.datatypes=function(){return{day:"integer",dated_on:"date",expected_on:"date",total:this.correctSignOfValue,total_tax:this.correctSignOfValue,subtotal:this.correctSignOfValue,expected_total:this.correctSignOfValue}},c.prototype.correctSignOfValue=function(a){return a=Backbone.DataTypes.decimal(a),this.get("expense_income")&&(a=a.abs(),this.isExpense()&&(a=a.invert())),a},c.prototype.isExpense=function(){return this.get("expense_income")==="expense"},c.prototype.isIncome=function(){return this.get("expense_income")==="income"},c.prototype.isTransfer=function(){return!1},c.prototype.isIncluded=function(){return!this.get("ignored")},c.prototype.isProjection=function(){return!1},c.prototype.isInvoice=function(){return!1},c.prototype.hits_cashflow_on=function(){return this.get("dated_on")},c.prototype.hits_cashflow_total=function(){return this.get("total")},c.prototype.initialize=function(){return this.setCashflowSet(),this.bind("change:total",this.setCashflowSet),this.bind("change:cashflow_set",this.setCashflowSet)},c.prototype.setCashflowSet=function(){if(!this.toJSON().cashflow_set){if(this.isTransfer()&&_.isObject(this.get("bank_account")))return this.set({cashflow_set:"bank-account-"+this.get("bank_account").get("id")},{silent:!0});this.isExpense()&&this.set({cashflow_set:"expense"},{silent:!0});if(this.isIncome())return this.set({cashflow_set:"income"},{silent:!0})}},c.prototype.toJSON=function(){var a;a=c.__super__.toJSON.apply(this,arguments);if(a){if(a.cashflow_set==="expense"||a.cashflow_set==="income")a.cashflow_set=null;this.isIncome()&&(a.expense_income="income"),this.isExpense()&&(a.expense_income="expense"),a.transfer=this.isTransfer()}return a},c.prototype.modifyDate=function(a,b){var c,d;return c=this.get(a).clone().add(b),d={},d[a]=c,this.set(d)},c}(Backbone.RelationalModel),_.extend(FloatApp.Models.Entry.prototype,Backbone.Marionette.BindTo),a=function(){function a(){}return a.name="CollectionMethods",a.prototype.total=function(){return this.reduce(function(a,b){return a.add(b.hits_cashflow_total())},_.decimal("0"))},a.prototype.includedTotal=function(){return this.reduce(function(a,b){return b.isIncluded()&&(a=a.add(b.hits_cashflow_total())),a},_.decimal("0"))},a}(),FloatApp.Collections.EntriesCollection=function(c){function e(){return this.getPrevPage=b(this.getPrevPage,this),this.getNextPage=b(this.getNextPage,this),this.prevPage=b(this.prevPage,this),this.nextPage=b(this.nextPage,this),this.parse=b(this.parse,this),this.paginate=b(this.paginate,this),this.search=b(this.search,this),this.clearQuery=b(this.clearQuery,this),this.setQuery=b(this.setQuery,this),this.query=b(this.query,this),this.inImport=b(this.inImport,this),this.betweenDates=b(this.betweenDates,this),this.afterDate=b(this.afterDate,this),this.beforeDate=b(this.beforeDate,this),this.totalAfter=b(this.totalAfter,this),this.totalBefore=b(this.totalBefore,this),this.totalBetween=b(this.totalBetween,this),this.totalForMonth=b(this.totalForMonth,this),this.periodTotals=b(this.periodTotals,this),e.__super__.constructor.apply(this,arguments)}return d(e,c),e.name="EntriesCollection",e.prototype.model=FloatApp.Models.Entry,e.prototype.url="",e.prototype.comparator=function(a){return-1*a.hits_cashflow_on().valueOf()},e.prototype.periodTotals=function(a,b){var c,d=this;return c={},_.each(b,function(a){return c[a.valueOf()]=_.decimal("0")}),this.each(function(b){var d;d=b.hits_cashflow_on().clone().beginningOf(a).valueOf();if(c[d]&&!b.get("ignored"))return c[d]=c[d].add(b.hits_cashflow_total())}),c},e.prototype.totalForMonth=function(a){var b,c;return b=a.clone().beginningOfMonth(),c=a.clone().endOfMonth(),this.totalBetween(b,c)},e.prototype.totalBetween=function(a,b){return a=a.clone().beginningOfDay(),b=b.clone().endOfDay(),this.betweenDates(a,b).total()},e.prototype.totalBefore=function(a){return a=a.clone().endOfDay(),this.beforeDate(a).total()},e.prototype.totalAfter=function(a){return a=a.clone().endOfDay(),this.afterDate(a).total()},e.prototype.fetchRange=function(a,b,c){var d;return d={data:{after:a.format("YYYY-MM-DD"),before:b.format("YYYY-MM-DD")},add:!0},this.fetch(_.extend(d,c))},e.prototype.initialize=function(a,b){return b||(b={})},e.prototype.beforeDate=function(a,b){return b==null&&(b=!1),this.subset(function(b){return b.hits_cashflow_on()<=a},b)},e.prototype.afterDate=function(a,b){return b==null&&(b=!1),this.subset(function(b){return b.hits_cashflow_on()>=a},b)},e.prototype.betweenDates=function(a,b,c){return c==null&&(c=!1),this.subset(function(c){return c.hits_cashflow_on()>=a&&c.hits_cashflow_on()<=b},c)},e.prototype.inImport=function(a,b){return this.subset(function(b){return b.get("import_number")===a},b)},e.prototype.scopes={incomes:"isIncome",expenses:"isExpense",included:"isIncluded"},e.prototype.onSubsetClass=function(b){return _.extend(b.prototype,a.prototype)},e.prototype.metadata={},e.prototype.queries={per:25},e.prototype.query=function(){return this.fetch({data:this.queries})},e.prototype.setQuery=function(a,b){b==null&&(b={}),_.extend(this.queries,a),this.queries.page&&(this.queries.with_total_row_count=!0),this.queries.search||this.clearQuery("search");if(!b.no_fetch)return this.query()},e.prototype.clearQuery=function(a){return delete this.queries[a]},e.prototype.search=function(a){if(a!==this.queries.search)return this.setQuery({search:a,page:1})},e.prototype.paginate=function(a){if(!a)return this.setQuery({page:1});if(_.isString(a)){a==="prev"&&this.prevPage;if(a==="next")return this.nextPage}else if(_.isNumber(a))return this.setQuery({page:a})},e.prototype.parse=function(a){return a.items?(this.setQuery(a.queries,{no_fetch:!0}),this.metadata=a.metadata,a.items):a},e.prototype.nextPage=function(){var a;return a=this.queries.page+1,this.metadata.pages&&a>this.metadata.pages?!1:a},e.prototype.prevPage=function(){var a;return a=this.queries.page-1,a<=0?!1:a},e.prototype.getNextPage=function(){return this.nextPage()&&this.setQuery({page:this.nextPage()})},e.prototype.getPrevPage=function(){return this.prevPage()&&this.setQuery({page:this.prevPage()})},e}(Backbone.ScopedCollection),_.extend(FloatApp.Collections.EntriesCollection.prototype,a.prototype)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a},d=[].slice;FloatApp.Models.AccountingCategory=function(b){function e(){return this.periodTotals=a(this.periodTotals,this),this.toJSON=a(this.toJSON,this),this.isIgnored=a(this.isIgnored,this),this.isVeryFrequentlyUsed=a(this.isVeryFrequentlyUsed,this),this.isFrequentlyUsed=a(this.isFrequentlyUsed,this),this.setCashflowSet=a(this.setCashflowSet,this),this.isIncome=a(this.isIncome,this),this.isExpense=a(this.isExpense,this),this.averageMonthlyTotal=a(this.averageMonthlyTotal,this),this.periodTotals=a(this.periodTotals,this),this.relationalDefaultKey=a(this.relationalDefaultKey,this),e.__super__.constructor.apply(this,arguments)}return c(e,b),e.name="AccountingCategory",e.prototype.paramRoot="accounting_category",e.prototype.relations=[{type:Backbone.HasOne,key:"cashflow_set",relatedModel:"FloatApp.Models.CashflowSet",collectionType:"FloatApp.Collections.CashflowSetsCollection",includeInJSON:"id",reverseRelation:{key:"accounting_categories",includeInJSON:"id"}},{type:Backbone.HasMany,key:"bank_account_entries",relatedModel:"FloatApp.Models.BankAccountEntry",collectionType:"FloatApp.Collections.BankAccountEntriesCollection",includeInJSON:!1,reverseRelation:{key:"accounting_category",includeInJSON:"id"}},{type:Backbone.HasMany,key:"invoices",relatedModel:"FloatApp.Models.Invoice",collectionType:"FloatApp.Collections.InvoicesCollection",includeInJSON:!1,reverseRelation:{key:"accounting_category",includeInJSON:"id"}}],e.prototype.relationalDefaultKey=function(){return this.get("expense_income")},e.prototype.periodTotals=function(){var a,b;return a=1<=arguments.length?d.call(arguments,0):[],(b=this.get("bank_account_entries")).periodTotals.apply(b,a)},e.prototype.averageMonthlyTotal=function(a){var b,c;return b=_.date().subtract({M:a}).beginningOfMonth(),c=_.date().subtract({M:1}).endOfMonth(),_.decimal((this.get("bank_account_entries").totalBetween(b,c).toFloat()/3).toFixed(0))},e.prototype.isExpense=function(){return this.get("expense_income")==="expense"},e.prototype.isIncome=function(){return this.get("expense_income")==="income"},e.prototype.initialize=function(){return this.setCashflowSet(),this.bind("update:cashflow_set",this.setCashflowSet)},e.prototype.setCashflowSet=function(){if(!this.toJSON().cashflow_set){this.isExpense()&&this.set({cashflow_set:"expense"},{silent:!1});if(this.isIncome())return this.set({cashflow_set:"income"},{silent:!1})}},e.prototype.isFrequentlyUsed=function(){return this.get("bank_account_entries").afterDate(_.date().subtract({M:4}).beginningOfMonth()).length+this.get("invoices").afterDate(_.date().subtract({M:4}).beginningOfMonth()).length>0},e.prototype.isVeryFrequentlyUsed=function(){var a;return a=this.get("bank_account_entries").afterDate(_.date().subtract({M:4}).beginningOfMonth()).length+this.get("invoices").afterDate(_.date().subtract({M:4}).beginningOfMonth()).length,a>=3},e.prototype.isIgnored=function(){return this.get("ignored")},e.prototype.toJSON=function(){var a;return a=e.__super__.toJSON.apply(this,arguments),a&&(a.cashflow_set==="expense"||a.cashflow_set==="income")&&(a.cashflow_set=null),a},e.prototype.periodTotals=function(a,b){var c;return c={},this.sumTotalHashes(c,this.get("invoices").periodTotals(a,b),this.get("bank_account_entries").periodTotals(a,b))},e.prototype.sumTotalHashes=function(){var a,b,c,e,f,g;b=1<=arguments.length?d.call(arguments,0):[],c={},e=function(a){var b,d,e;e=[];for(b in a)d=a[b],e.push(c[b]=c[b]?c[b].add(d):d);return e};for(f=0,g=b.length;f<g;f++)a=b[f],e(a);return c},e}(Backbone.RelationalModel),FloatApp.Collections.AccountingCategoriesCollection=function(b){function d(){return this.updateAll=a(this.updateAll,this),this.notIgnored=a(this.notIgnored,this),this.infrequentlyUsed=a(this.infrequentlyUsed,this),this.frequentlyUsed=a(this.frequentlyUsed,this),this.comparator=a(this.comparator,this),this.expenses=a(this.expenses,this),this.incomes=a(this.incomes,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="AccountingCategoriesCollection",d.prototype.model=FloatApp.Models.AccountingCategory,d.prototype.url="/accounting_categories",d.prototype.incomes=function(){return new this.constructor(this.filter(function(a){return a.isIncome()}))},d.prototype.expenses=function(){return new this.constructor(this.filter(function(a){return a.isExpense()}))},d.prototype.comparator=function(a){return a.get("tag")},d.prototype.frequentlyUsed=function(){return new this.constructor(this.filter(function(a){return a.isFrequentlyUsed()}))},d.prototype.infrequentlyUsed=function(){return new this.constructor(this.filter(function(a){return!a.isFrequentlyUsed()}))},d.prototype.notIgnored=function(){return new this.constructor(this.filter(function(a){return!a.isIgnored()}))},d.prototype.updateAll=function(a){return Backbone.sync("update",this,a)},d}(Backbone.Collection)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Models.BankAccount=function(b){function d(){return this.startBalanceOn=a(this.startBalanceOn,this),this.balanceOn=a(this.balanceOn,this),this.ignore=a(this.ignore,this),this.include=a(this.include,this),this.isIgnored=a(this.isIgnored,this),this.isIncluded=a(this.isIncluded,this),this.isCreditCard=a(this.isCreditCard,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="BankAccount",d.prototype.defaults={name:null,current_balance:"0",current_balance_date:_.date(),included:null},d.prototype.initialize=function(){return this.bind("change:included",function(){return FloatApp.PubSub.trigger("bank_accounts:change:included",this)})},d.prototype.datatypes={current_balance:"decimal",current_balance_date:"date",opening_balance:"decimal",opening_balance_date:"date"},d.prototype.relations=[{type:Backbone.HasMany,key:"bank_account_entries",relatedModel:"FloatApp.Models.BankAccountEntry",collectionType:"FloatApp.Collections.BankAccountEntriesCollection",includeInJSON:!1,reverseRelation:{key:"bank_account",includeInJSON:"id"}}],d.prototype.isCreditCard=function(){return this.get("is_credit_card")},d.prototype.isIncluded=function(){return!!this.get("included")},d.prototype.isIgnored=function(){return!this.isIncluded()},d.prototype.include=function(){return this.set({included:!0})},d.prototype.ignore=function(){return this.set({included:!1})},d.prototype.balanceOn=function(a){var b,c,d,e,f;b=this.get("current_balance"),c=this.get("current_balance_date"),d=c.clone().endOfDay(),e=a.clone().endOfDay();if(d.valueOf()===e.valueOf())return b;if(e.valueOf()>d.valueOf())return f=d.clone().add({ms:1}),b.add(this.get("bank_account_entries").totalBetween(f,e));if(e.valueOf()<d.valueOf())return f=e.clone().add({ms:1}),b.subtract(this.get("bank_account_entries").totalBetween(f,d))},d.prototype.startBalanceOn=function(a){return this.balanceOn(a.clone().subtract({d:1}))},d}(Backbone.RelationalModel),FloatApp.Collections.BankAccountsCollection=function(b){function d(){return this.startBalanceOn=a(this.startBalanceOn,this),this.balanceOn=a(this.balanceOn,this),this.notCreditCards=a(this.notCreditCards,this),this.creditCards=a(this.creditCards,this),this.notIncluded=a(this.notIncluded,this),this.included=a(this.included,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="BankAccountsCollection",d.prototype.url="/bank_accounts",d.prototype.model=FloatApp.Models.BankAccount,d.prototype.included=function(){return new this.constructor(this.filter(function(a){return a.isIncluded()&&!a.isCreditCard()}))},d.prototype.notIncluded=function(){return new this.constructor(this.filter(function(a){return!a.isIncluded()}))},d.prototype.creditCards=function(){return new this.constructor(this.filter(function(a){return a.isCreditCard()}))},d.prototype.notCreditCards=function(){return new this.constructor(this.filter(function(a){return!a.isCreditCard()}))},d.prototype.balanceOn=function(a){return this.included().reduce(function(b,c){return b.add(c.balanceOn(a))},_.decimal("0"))},d.prototype.startBalanceOn=function(a){return this.balanceOn(a.clone().subtract({d:1}))},d.prototype.earliestCurrentBalanceDate=function(){return this.length===0?_.date():_.date(_.min(this.map(function(a){return a.get("current_balance_date").clone()})))},d}(Backbone.Collection)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Models.BankAccountEntry=function(b){function d(){return this.isTransfer=a(this.isTransfer,this),this.isIncluded=a(this.isIncluded,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="BankAccountEntry",d.prototype.paramRoot="bank_account_entry",d.prototype.isIncluded=function(){return this.get("bank_account").get("included")},d.prototype.isTransfer=function(){return this.get("is_transfer")},d}(FloatApp.Models.Entry),FloatApp.Collections.BankAccountEntriesCollection=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.name="BankAccountEntriesCollection",b.prototype.model=FloatApp.Models.BankAccountEntry,b.prototype.url="/bank_account_entries",b}(FloatApp.Collections.EntriesCollection)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a},d=[].slice;FloatApp.Models.Cashflow=function(b){function e(){return this.earliestCurrentBalanceDate=a(this.earliestCurrentBalanceDate,this),this.balanceOn=a(this.balanceOn,this),this.addBankAccountSet=a(this.addBankAccountSet,this),this.addAllBankAccountSets=a(this.addAllBankAccountSets,this),this.setupCollections=a(this.setupCollections,this),this.updateCollectionsInRange=a(this.updateCollectionsInRange,this),this.setViewRangeFromPeriods=a(this.setViewRangeFromPeriods,this),this.alterRange=a(this.alterRange,this),this.shiftRangeDown=a(this.shiftRangeDown,this),this.shiftRangeUp=a(this.shiftRangeUp,this),this.resetPeriods=a(this.resetPeriods,this),this.setViewRange=a(this.setViewRange,this),e.__super__.constructor.apply(this,arguments)}return c(e,b),e.name="Cashflow",e.prototype.defaults=function(){return{view_range:[null,null],loaded_range:[null,null]}},e.prototype.initialize=function(a,b){var c;return this.pubsub=FloatApp.PubSub,this.periods={months:new FloatApp.Collections.Periods([],"month"),weeks:new FloatApp.Collections.Periods([],"week")},b.loaded_range&&this.set({loaded_range:_.map(b.loaded_range,function(a){return _.date.fromJSON(a)})}),this.setupCollections(b),c=null,this.bind("change:view_range",function(a,b){var d=this;return clearTimeout(c),c=setTimeout(function(){return d.updateCollectionsInRange.apply(d,b)},1e3)})},e.prototype.setViewRange=function(a,b,c){return this.set({view_range:[a,b]},c),this.resetPeriods()},e.prototype.resetPeriods=function(){var a,b,c,d;c=this.periods,d=[];for(b in c)a=c[b],d.push(a.resetRange.apply(a,this.get("view_range")));return d},e.prototype.shiftRangeUp=function(a){var b,c,d;a==null&&(a=1),d=this.periods;for(c in d)b=d[c],b.shiftRangeUp(a);return this.setViewRangeFromPeriods()},e.prototype.shiftRangeDown=function(a){var b,c,d;a==null&&(a=1),d=this.periods;for(c in d)b=d[c],b.shiftRangeDown(a);return this.setViewRangeFromPeriods()},e.prototype.alterRange=function(a){var b,c,d,e;if(a>0){d=this.periods;for(c in d)b=d[c],b.addToEnd(a)}else{e=this.periods;for(c in e)b=e[c],b.removeFromEnd(a)}return this.setViewRangeFromPeriods()},e.prototype.setViewRangeFromPeriods=function(){var a,b,c,d;return d=function(){var b,d;b=this.periods,d=[];for(c in b)a=b[c],d.push(a.first().periodStart());return d}.call(this),b=function(){var b,d;b=this.periods,d=[];for(c in b)a=b[c],d.push(a.last().periodEnd());return d}.call(this),this.set({view_range:[_.date(_.min(d)),_.date(_.max(b))]})},e.prototype.updateCollectionsInRange=function(a,b){var c,e,f,g,h,i,j,k,l,m,n,o=this;m=this.get("loaded_range"),g=m[0],h=m[1],n=[null,null],e=n[0],f=n[1],j=[null,null],k={add:!0};if(!g&&!h)i=this.earliestCurrentBalanceDate(),e=i<a?i.clone():a.clone(),f=b.clone();else{if(g<=a&&b<=h)return!0;a<g?e=a.clone():(e=h.clone(),j[0]=g),h<b?f=b.clone():(f=g.clone(),j[1]=h)}return j[0]||(j[0]=e.clone()),j[1]||(j[1]=f.clone()),this.set({loaded_range:j}),c=[function(a){return o.bank_account_entries.fetchRange(e,f,_.extend({success:function(){return a(null,"bank_account_entries")}},k))},function(a){return o.cashflow_entries.fetchRange(e,f,_.extend({success:function(){return a(null,"cashflow_entries")}},k))}],f>=_.date().beginningOf("month")&&(c=c.concat([function(a){return o.projections.fetchRange(e,f,_.extend({success:function(){return a(null,"projections")}},k))},function(a){return o.invoices.fetchRange(e,f,_.extend({success:function(){return a(null,"invoices")}},k))}])),l=function(){var a;return a=1<=arguments.length?d.call(arguments,0):[],o.trigger("loaded_entries",e,f)},async.parallel(c,l)},e.prototype.setupCollections=function(a){return this.projects=new FloatApp.Collections.ProjectsCollection((a.projects||[]).concat([{id:"oneoff",name:"One Offs (no project)",color:"#ddd"}])),this.bank_accounts=new FloatApp.Collections.BankAccountsCollection(a.bank_accounts),this.cashflow_sets=new FloatApp.Collections.CashflowSetsCollection((a.cashflow_sets||[]).concat([{id:"income",name:"Misc Income",income:!0,expense:!1,expense_income:"income",type:"Misc"},{id:"expense",name:"Misc Expenses",income:!1,expense:!0,expense_income:"expense",type:"Misc"}])),this.bank_accounts.bind("reset",this.addAllBankAccountSets),this.bank_accounts.bind("add",this.addBankAccountSet),this.addAllBankAccountSets(),this.vat_returns=new FloatApp.Collections.VatReturns(a.vat_returns||[]),this.cashflow_entries=new FloatApp.Collections.CashflowEntriesCollection(a.cashflow_entries||[]),this.bank_account_entries=new FloatApp.Collections.BankAccountEntriesCollection(a.bank_account_entries||[]),this.invoices=new FloatApp.Collections.InvoicesCollection(a.invoices||[]),this.projections=new FloatApp.Collections.ProjectionsCollection(a.projections||[]),this.totals=new FloatApp.Models.CashflowTable(this)},e.prototype.addAllBankAccountSets=function(){return this.bank_accounts.each(this.addBankAccountSet)},e.prototype.addBankAccountSet=function(a){if(!a.isCreditCard())return this.cashflow_sets.add({id:"bank-account-"+a.get("id"),name:a.get("name"),type:"Transfer",income:!0,expense:!1,expense_income:"income"})},e.prototype.balanceOn=function(a){var b;return b=this.bank_accounts.balanceOn(a),b=b.add(this.projections.beforeDate(a).total()),b=b.add(this.cashflow_entries.beforeDate(a).total()),b=b.add(this.invoices.beforeDate(a).total()),b},e.prototype.earliestCurrentBalanceDate=function(){return this.bank_accounts.earliestCurrentBalanceDate()},e}(Backbone.Model)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Models.CashflowEntry=function(b){function d(){return this.isReplaced=a(this.isReplaced,this),this.changeDatedOn=a(this.changeDatedOn,this),this.changeDay=a(this.changeDay,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="CashflowEntry",d.prototype.paramRoot="cashflow_entry",d.prototype.defaults=function(){return _.extend(d.__super__.defaults.apply(this,arguments),{modify_future_events:!1})},d.prototype.initialize=function(){return d.__super__.initialize.call(this),this.bind("change:day",this.changeDay),this.bind("change:dated_on",this.changeDatedOn),this.changeDatedOn()},d.prototype.changeDay=function(){var a;if(this.get("day")!==this.get("dated_on").date.getDate())return a=this.get("dated_on").clone().beginningOfMonth().add({d:this.get("day")-1}),this.set({dated_on:a})},d.prototype.changeDatedOn=function(){if(this.get("dated_on")&&this.get("dated_on").date)return this.set({day:this.get("dated_on").date.getDate()})},d.prototype.isReplaced=function(){return!!this.get("replacement_id")},d}(FloatApp.Models.Entry),FloatApp.Collections.CashflowEntriesCollection=function(b){function d(){return this.notReplaced=a(this.notReplaced,this),this.replaced=a(this.replaced,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="CashflowEntriesCollection",d.prototype.model=FloatApp.Models.CashflowEntry,d.prototype.url="/cashflow_entries",d.prototype.replaced=function(){return new this.constructor(this.filter(function(a){return a.isReplaced()}))},d.prototype.notReplaced=function(){return new this.constructor(this.filter(function(a){return!a.isReplaced()}))},d}(FloatApp.Collections.EntriesCollection)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a},d=[].slice;FloatApp.Models.CashflowSet=function(b){function e(){return this.getPeriods=a(this.getPeriods,this),this.getPeriod=a(this.getPeriod,this),this.save=a(this.save,this),this.toJSON=a(this.toJSON,this),this.periodEntries=a(this.periodEntries,this),this.totalBefore=a(this.totalBefore,this),this.periodTotals=a(this.periodTotals,this),this.calcAllTotals=a(this.calcAllTotals,this),this.calcDisplayTotals=a(this.calcDisplayTotals,this),this.calcActualTotals=a(this.calcActualTotals,this),this.calcActualTotals=a(this.calcActualTotals,this),this.calcBudgetedTotals=a(this.calcBudgetedTotals,this),this.calcScheduledTotals=a(this.calcScheduledTotals,this),this.calcProjectedTotals=a(this.calcProjectedTotals,this),this.calcInvoicedTotals=a(this.calcInvoicedTotals,this),this.calcPaidTotals=a(this.calcPaidTotals,this),this.updateSignOfValue=a(this.updateSignOfValue,this),this.updateSignOfValues=a(this.updateSignOfValues,this),this.updateFutureCashflowEntries=a(this.updateFutureCashflowEntries,this),this.isIncluded=a(this.isIncluded,this),this.isIgnored=a(this.isIgnored,this),this.isVatRow=a(this.isVatRow,this),this.isMisc=a(this.isMisc,this),this.isScheduledPayment=a(this.isScheduledPayment,this),this.isBudgetAndNotCC=a(this.isBudgetAndNotCC,this),this.isBudget=a(this.isBudget,this),this.isTransfer=a(this.isTransfer,this),this.isCreditCardRow=a(this.isCreditCardRow,this),this.isExpense=a(this.isExpense,this),this.isIncome=a(this.isIncome,this),e.__super__.constructor.apply(this,arguments)}return c(e,b),e.name="CashflowSet",e.prototype.paramRoot="cashflow_set",e.prototype.defaults=function(){return{invoices:null,name:null,visual_group:null,total:"0",total_tax:"0",subtotal:"0",starts_on:_.date(),subtype:""}},e.prototype.datatypes={total:"decimal",total_tax:"decimal",subtotal:"decimal",starts_on:"date"},e.prototype.relations=[{type:Backbone.HasMany,key:"cashflow_entries",relatedModel:"FloatApp.Models.CashflowEntry",collectionType:"FloatApp.Collections.CashflowEntriesCollection",includeInJSON:!1,reverseRelation:{key:"cashflow_set",includeInJSON:"id"}},{type:Backbone.HasMany,key:"invoices",relatedModel:"FloatApp.Models.Invoice",collectionType:"FloatApp.Collections.InvoicesCollection",includeInJSON:!1,reverseRelation:{key:"cashflow_set",includeInJSON:"id"}},{type:Backbone.HasMany,key:"bank_account_entries",relatedModel:"FloatApp.Models.BankAccountEntry",collectionType:"FloatApp.Collections.BankAccountEntriesCollection",includeInJSON:!1,reverseRelation:{key:"cashflow_set",includeInJSON:"id"}},{type:Backbone.HasMany,key:"projections",relatedModel:"FloatApp.Models.Projection",collectionType:"FloatApp.Collections.ProjectionsCollection",includeInJSON:!1,reverseRelation:{key:"cashflow_set",includeInJSON:"id"}},{type:Backbone.HasMany,key:"accounting_categories",relatedModel:"FloatApp.Models.AccountingCategory",collectionType:"FloatApp.Collections.AccountingCategoriesCollection",includeInJSON:!1,reverseRelation:{key:"cashflow_set",includeInJSON:"id"}}],e.prototype.isIncome=function(){return this.get("expense_income")==="income"&&!this.isTransfer()},e.prototype.isExpense=function(){return this.get("expense_income")==="expense"&&!this.isTransfer()},e.prototype.isCreditCardRow=function(){return this.get("is_credit_card_row")},e.prototype.isTransfer=function(){return this.get("type")==="Transfer"},e.prototype.isBudget=function(){return this.get("type")==="Budget"},e.prototype.isBudgetAndNotCC=function(){return this.get("type")==="Budget"&&!this.get("is_credit_card_row")},e.prototype.isScheduledPayment=function(){return this.get("type")==="ScheduledPayment"},e.prototype.isMisc=function(){return this.get("type")==="Misc"||this.get("type")==="VatRow"},e.prototype.isVatRow=function(){return this.get("type")==="VatRow"},e.prototype.isIgnored=function(){return FloatApp.Settings&&FloatApp.Settings.serverSettings.get("enable_scenarios")?this.get("ignored"):!1},e.prototype.isIncluded=function(){return!this.isIgnored()},e.prototype.initialize=function(){return this.bindEvents()},e.prototype.bindEvents=function(){var a=this;return this.bind("add:cashflow_entries",function(){return a.trigger("add:entry")}),this.bind("add:invoices",function(){return a.trigger("add:entry")}),this.bind("add:bank_account_entries",function(){return a.trigger("add:entry")}),this.bind("change:expense_income",this.updateSignOfValues),this.bind("change:total",this.updateSignOfValues),this.bind("change:total_tax",this.updateSignOfValues),this.bind("change:subtotal",this.updateSignOfValues),this.get("cashflow_entries"
).bind("change",this.updateFutureCashflowEntries)},e.prototype.updateFutureCashflowEntries=function(a,b){var c=this;if(a.get("modify_future_events"))return this.get("cashflow_entries").afterDate(a.get("dated_on").clone().add({d:1})).each(function(b){if(b.id!==a.id)return b.set({total:a.get("total")})})},e.prototype.updateSignOfValues=function(){return this.updateSignOfValue("total"),this.updateSignOfValue("subtotal"),this.updateSignOfValue("total_tax")},e.prototype.updateSignOfValue=function(a){var b,c;if(this.get(a))return c=this.get(a).abs(),this.isExpense()&&(c=c.invert()),b={},b[a]=c,this.set(b)},e.prototype.paid_totals={},e.prototype.invoiced_totals={},e.prototype.scheduled_totals={},e.prototype.projected_totals={},e.prototype.budgeted_totals={},e.prototype.display_totals={},e.prototype.calcPaidTotals=function(a,b){return this.paid_totals=this.get("bank_account_entries").periodTotals(a,b)},e.prototype.calcInvoicedTotals=function(a,b){return this.invoiced_totals=this.get("invoices").periodTotals(a,b)},e.prototype.calcProjectedTotals=function(a,b){return this.projected_totals=this.get("projections").included().periodTotals(a,b)},e.prototype.calcScheduledTotals=function(a,b){return this.scheduled_totals={}},e.prototype.calcBudgetedTotals=function(a,b){var c,d;c=this.get("cashflow_entries").included(),d=_.date().beginningOfMonth(),c=new c.constructor(c.filter(function(a){return a.get("dated_on")>=d}));if(this.get("type")==="Budget")return this.budgeted_totals=c.periodTotals(a,b)},e.prototype.calcActualTotals=function(a,b){},e.prototype.sumTotalHashes=function(){var a,b,c,e,f,g;b=1<=arguments.length?d.call(arguments,0):[],c={},e=function(a){var b,d,e;e=[];for(b in a)d=a[b],e.push(c[b]=c[b]?c[b].add(d):d);return e};for(f=0,g=b.length;f<g;f++)a=b[f],e(a);return c},e.prototype.calcActualTotals=function(){return this.actual_totals=this.sumTotalHashes(this.paid_totals,this.invoiced_totals,this.projected_totals,this.scheduled_totals)},e.prototype.calcDisplayTotals=function(){var a;return a={},a=this.sumTotalHashes(a,this.paid_totals),this.isIncluded()&&(a=this.sumTotalHashes(a,this.invoiced_totals,this.projected_totals,this.scheduled_totals),_.each(this.budgeted_totals,function(b,c){if(!a[c])return a[c]=b;if(!(Math.abs(a[c].toFloat())>Math.abs(b.toFloat())))return a[c]=b})),this.display_totals=a},e.prototype.calcAllTotals=function(a,b){return this.calcPaidTotals(a,b),this.calcInvoicedTotals(a,b),this.calcBudgetedTotals(a,b),this.calcProjectedTotals(a,b),this.calcScheduledTotals(a,b),this.calcActualTotals(),this.calcDisplayTotals()},e.prototype.periodTotals=function(a,b){return this.calcAllTotals(a,b),this.display_totals},e.prototype.totalBefore=function(a){var b;return b=_.decimal("0"),b=b.add(this.get("projections").totalBefore(a)),b=b.add(this.get("cashflow_entries").totalBefore(a)),b=b.add(this.get("bank_account_entries").totalBefore(a)),b},e.prototype.periodEntries=function(a,b){var c;return c=b.clone().endOf(a),{projections:this.get("projections").betweenDates(b,c),cashflow_entries:this.get("cashflow_entries").notReplaced().betweenDates(b,c),bank_account_entries:this.get("bank_account_entries").betweenDates(b,c),invoices:this.get("invoices").betweenDates(b,c)}},e.prototype.toJSON=function(){var a;return a=e.__super__.toJSON.call(this),a&&(a.visual_group==="expense"||a.visual_group==="income")&&(a.visual_group=null),a},e.prototype.save=function(){var a;return a=1<=arguments.length?d.call(arguments,0):[],this.id==="expense"||this.id==="income"?!0:e.__super__.save.apply(this,a)},e.prototype.getPeriod=function(a,b){var c,d,e;return this.periods||(this.periods={}),(c=this.periods)[a]||(c[a]={}),(d=this.periods[a])[e=b.clone().beginningOf(a).valueOf().toString()]||(d[e]=new FloatApp.Models.CashflowSetPeriod({cashflow_set:this,period:a,date:b.clone(),entries:{budget_entries:this.get("cashflow_entries"),projections:this.get("projections"),invoices:this.get("invoices"),bank_account_entries:this.get("bank_account_entries")}}))},e.prototype.getPeriods=function(a,b){var c,d=this;return c=[],_.each(b,function(b){return c.push(d.getPeriod(a,b))}),c},e}(Backbone.RelationalModel),FloatApp.Collections.CashflowSetsCollection=function(b){function d(){return this.comparator=a(this.comparator,this),this.salesRow=a(this.salesRow,this),this.totalBefore=a(this.totalBefore,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="CashflowSetsCollection",d.prototype.model=FloatApp.Models.CashflowSet,d.prototype.url="/cashflow_sets/",d.prototype.scopes={budgets:"isBudget",misc:"isMisc",expenses:"isExpense",incomes:"isIncome",transfers:"isTransfer",budgets_no_cc:"isBudgetAndNotCC"},d.prototype.totalBefore=function(a){return this.reduce(function(b,c){return b.add(c.totalBefore(a))},_.decimal("0"))},d.prototype.salesRow=function(){var a;return a=this.incomes(),a.filter(function(a){return a.get("name").match(/sales/i)})[0]||a.first()},d.prototype.comparator=function(a){return a.get("type")==="Misc"||!a.get("name")?"zzz":a.get("name").toLowerCase()},d}(Backbone.ScopedCollection)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Models.CashflowSetPeriod=function(b){function d(){return this.toJSON=a(this.toJSON,this),this.isHistorical=a(this.isHistorical,this),this.isCurrent=a(this.isCurrent,this),this.isFuture=a(this.isFuture,this),this.useTargets=a(this.useTargets,this),this.sieve=a(this.sieve,this),this.total=a(this.total,this),this.budget=a(this.budget,this),this.totals=a(this.totals,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="CashflowSetPeriod",d.mixin(Backbone.Mixins.WithComputedProperties),d.prototype.defaults={budget_entries:new Backbone.Collection,projections:new Backbone.Collection,invoices:new Backbone.Collection,bank_account_entries:new Backbone.Collection},d.prototype.initialize=function(a){var b=this;return this.cashflow_set=a.cashflow_set,this.period=a.period,this.periodStart=a.date.clone().beginningOf(this.period),this.periodEnd=a.date.clone().endOf(this.period),this.budget_entries=a.entries.budget_entries.subset(this.sieve(),!0),this.projections=a.entries.projections.subset(this.sieve(),!0),this.invoices=a.entries.invoices.subset(this.sieve(),!0),this.bank_account_entries=a.entries.bank_account_entries.subset(this.sieve(),!0),this.set({cashflow_set:this.cashflow_set,budget_entries:this.budget_entries,projections:this.projections,invoices:this.invoices,bank_account_entries:this.bank_account_entries}),FloatApp.PubSub.bind("bank_accounts:change:included",function(){return b._doCalc("paid")}),this._setupProperties()},d.prototype.properties={invoiced:{result:function(){return this.get("invoices").includedTotal()},bindings:["cashflow_set.change:ignored","invoices.collectionEvents","invoices.change:ignored","invoices.change:expected_on","invoices.change:expected_total"]},projected:{result:function(){return this.get("projections").includedTotal()},bindings:["cashflow_set.change:ignored","projections.collectionEvents","projections.change:ignored","projections.change:dated_on","projections.change:total"]},paid:{result:function(){return this.get("bank_account_entries").includedTotal()},bindings:["cashflow_set.change:ignored","bank_account_entries.collectionEvents","bank_account_entries.change:ignored","bank_account_entries.change:dated_on","bank_account_entries.change:total"]},actual:{result:function(){return this.get("projected").add(this.get("invoiced")).add(this.get("paid"))},bindings:["change:projected","change:invoiced","change:paid"]},budgeted:{result:function(){return this.get("cashflow_set").isIgnored()?_.decimal("0"):this.get("budget_entries").includedTotal()},bindings:["cashflow_set.change:ignored","budget_entries.collectionEvents","budget_entries.change:total"]},display:{result:function(){var a,b;return b=this.get("budgeted"),a=this.get("actual"),this.isHistorical()?a:b.abs()>a.abs()?b:a},bindings:["change:budgeted","change:actual"]},budget_remaining:{result:function(){var a,b;return b=this.get("budgeted"),a=this.get("actual"),this.isHistorical()?a:b.abs()>a.abs()?b.subtract(a):_.decimal("0")},bindings:["change:budgeted","change:actual"]}},d.prototype.totals=function(){return{budgeted:this.total().budgeted(),projected:this.total().projected(),invoiced:this.total().invoiced(),paid:this.total().paid(),actual:this.total().actual(),display:this.total().display()}},d.prototype.budget=function(a){var b,c,d;return a||(a=this.totals()),a.budgeted?(b=a.actual.abs(),d=a.budgeted.abs(),a.budgeted.toFloat()===0?c=100:c=b/d*100,{overbudget:b>d,allocated_percentage:_.min([100,c])}):null},d.prototype.total=function(){var a=this;return{budgeted:function(){return a.get("budgeted")},projected:function(){return a.get("projected")},invoiced:function(){return a.get("invoiced")},paid:function(){return a.get("paid")},actual:function(){return a.get("actual")},display:function(){return a.get("display")}}},d.prototype.sieve=function(){var a,b;return b=this.periodStart,a=this.periodEnd,function(c){return c.hits_cashflow_on()>=b&&c.hits_cashflow_on()<=a}},d.prototype.useTargets=function(){return _.date().add({M:3})<this.periodStart},d.prototype.isFuture=function(){return this.periodStart>_.date()},d.prototype.isCurrent=function(){return this.periodStart<=_.date()&&_.date()<=this.periodEnd},d.prototype.isHistorical=function(){return this.periodEnd<_.date()},d.prototype.toJSON=function(){var a;return a=this.totals(),{totals:this.totals(),budget:this.budget(a),period:this.period,periodStart:this.periodStart,periodEnd:this.periodEnd,isHistorical:this.isHistorical(),isCurrent:this.isCurrent(),isFuture:this.isFuture()}},d}(Backbone.Model)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b},c=function(a,b){return function(){return a.apply(b,arguments)}};FloatApp.Models.CashflowSetsPeriodTotal=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.name="CashflowSetsPeriodTotal",c.mixin(Backbone.Mixins.WithComputedProperties),c.prototype.initialize=function(a){var b;return b=a.totals||{display:"display"},this.unset("totals"),this.set({cashflow_sets:a.cashflow_sets,period:a.period,period_start:a.date.clone().beginningOf(a.period),period_end:a.date.clone().endOf(a.period),cashflow_set_periods:new Backbone.Collection}),this.setupCashflowSetPeriods(),this._setupProperties(this.buildTotals(b))},c.prototype.setupCashflowSetPeriods=function(){var a,b,c,d;return d=this.get("cashflow_sets"),c=this.get("period"),b=this.get("period_start"),a=this.get("cashflow_set_periods"),a.add(d.map(function(a){return a.getPeriod(c,b)})),d.bind("add",function(d){return a.add(d.getPeriod(c,b))}),d.bind("remove",function(b){return a.each(function(a){if(b.cid===a.get("cashflow_set").cid)return a.destroy()})})},c.prototype.buildTotals=function(a){var b,c,d,e;b={},e=function(a,c){return b[a]={result:function(){return this.sumPeriodsTotal(c)},bindings:["cashflow_set_periods.collectionEvents","cashflow_set_periods.change:"+c]}};for(c in a)d=a[c],e(c,d);return b},c.prototype.sumPeriodsTotal=function(a){return this.get("cashflow_set_periods").reduce(function(b,c){return b.add(c.get(a))},_.decimal("0"))},c}(Backbone.Model),FloatApp.Models.CashflowSetsTotalRow=function(a){function d(){return this.getPeriods=c(this.getPeriods,this),this.getPeriod=c(this.getPeriod,this),d.__super__.constructor.apply(this,arguments)}return b(d,a),d.name="CashflowSetsTotalRow",d.prototype.initialize=function(a){return this.totals=a.totals,delete a.totals,this.set({cashflow_sets:a.cashflow_sets})},d.prototype.getPeriod=function(a,b){var c,d,e;return this.periods||(this.periods={}),(c=this.periods)[a]||(c[a]={}),(d=this.periods[a])[e=b.clone().beginningOf(a).valueOf().toString()]||(d[e]=new FloatApp.Models.CashflowSetsPeriodTotal({cashflow_sets:this.get("cashflow_sets"),period:a,date:b,row:this,totals:this.totals}))},d.prototype.getPeriods=function(a,b){var c,d=this;return c=[],_.each(b,function(b){return c.push(d.getPeriod(a,b))}),c},d}(Backbone.Model)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};FloatApp.Models.CashflowTable=function(){function b(b){this.buildRows=a(this.buildRows,this),this.cashflow=b,this.buildRows()}return b.name="CashflowTable",b.prototype.buildRows=function(){var a,b,c=this;return this.incomeRow=new FloatApp.Models.CashflowSetsTotalRow({type:"income",totals:{display:"display",budget_remaining:"budget_remaining",paid:"paid",invoiced:"invoiced",projected:"projected"},cashflow_sets:this.cashflow.cashflow_sets.incomes(b=!0)}),this.expenseRow=new FloatApp.Models.CashflowSetsTotalRow({type:"expense",cashflow_sets:this.cashflow.cashflow_sets.expenses(b=!0)}),this.transfersRow=new FloatApp.Models.CashflowSetsTotalRow({type:"transfers",cashflow_sets:this.cashflow.cashflow_sets.transfers(b=!0)}),this.differenceRow=new FloatApp.Models.CashflowSetsTotalRow({type:"difference",cashflow_sets:new Backbone.Collection([this.incomeRow,this.expenseRow,this.transfersRow])}),a=this.cashflow.earliestCurrentBalanceDate().clone().beginningOfMonth(),this.balanceRows=new FloatApp.Models.CumulativeTotalRow({delta_row:this.differenceRow,anchor_date:a,anchor_value:this.cashflow.bank_accounts.startBalanceOn(a),anchor_type:"start"}),FloatApp.PubSub.bind("bank_accounts:change:included",function(){return c.balanceRows.set({anchor_value:c.cashflow.bank_accounts.startBalanceOn(a)})})},b}()}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};FloatApp.Models.CashflowPeriodTotal=function(){function b(b){this.getPrevPeriod=a(this.getPrevPeriod,this),this.getNextPeriod=a(this.getNextPeriod,this),this.updateStartBalanceFromEndBalance=a(this.updateStartBalanceFromEndBalance,this),this.updateEndBalanceFromStartBalance=a(this.updateEndBalanceFromStartBalance,this),this.updateStartBalanceFromBankAccounts=a(this.updateStartBalanceFromBankAccounts,this),this.updateStartBalanceFromPrevPeriod=a(this.updateStartBalanceFromPrevPeriod,this),this.updateEndBalanceFromNextPeriod=a(this.updateEndBalanceFromNextPeriod,this),this.updateDifference=a(this.updateDifference,this),this.updateTransfers=a(this.updateTransfers,this),this.updateExpense=a(this.updateExpense,this),this.updateIncome=a(this.updateIncome,this),this.setupCashflowSetPeriods=a(this.setupCashflowSetPeriods,this);var c=this;this.cashflow=b.cashflow,this.period=b.period,this.periodStart=b.date.clone().beginningOf(this.period),this.periodEnd=b.date.clone().endOf(this.period),this.isHistoricalPeriod=b.isHistoricalPeriod,this.isFuturePeriod=b.isFuturePeriod,this.isCurrentPeriod=b.isCurrentPeriod,this.nextPeriod=b.nextPeriod,this.prevPeriod=b.prevPeriod,this.totals={start_balance:_.decimal("0"),end_balance:_.decimal("0"),income:_.decimal("0"),expense:_.decimal("0"),transfers:_.decimal("0"),difference:_.decimal("0")},this.setupCashflowSetPeriods(),this.bind("change:total:income",function(a){if(!a||!a.noPropogate)return c.updateDifference()}),this.bind("change:total:expense",function(a){if(!a||!a.noPropogate)return c.updateDifference()}),this.bind("change:total:transfers",function(a){if(!a||!a.noPropogate)return c.updateDifference()}),this.updateTransfers({noPropogate:!0}),this.updateIncome({noPropogate:!0}),this.updateExpense({noPropogate:!0}),this.updateDifference(),this.isCurrentPeriod?(this.bind("change:total:income",function(a){if(!a||!a.noPropogate)return c.updateStartBalanceFromBankAccounts()}),this.bind("change:total:expense",function(a){if(!a||!a.noPropogate)return c.updateStartBalanceFromBankAccounts()}),this.bind("change:total:start_balance",function(a){if(!a||!a.noPropogate)return c.updateEndBalanceFromStartBalance()}),this.bind("change:total:difference",function(a){if(!a||!a.noPropogate)return c.updateEndBalanceFromStartBalance()}),this.cashflow.bank_accounts.bind("change:included",function(a){if(!a||!a.noPropogate)return c.updateStartBalanceFromBankAccounts()}),this.updateStartBalanceFromBankAccounts()):this.isFuturePeriod?(this.prevPeriod.bind("change:total:end_balance",function(a){if(!a||!a.noPropogate)return c.updateStartBalanceFromPrevPeriod()}),this.bind("change:total:start_balance",function(a){if(!a||!a.noPropogate)return c.updateEndBalanceFromStartBalance()}),this.bind("change:total:difference",function(a){if(!a||!a.noPropogate)return c.updateEndBalanceFromStartBalance()}),this.updateStartBalanceFromPrevPeriod()):this.isHistoricalPeriod&&(this.nextPeriod.bind("change:total:start_balance",function(a){if(!a||!a.noPropogate)return c.updateEndBalanceFromNextPeriod()}),this.bind("change:total:end_balance",function(a){if(!a||!a.noPropogate)return c.updateStartBalanceFromEndBalance()}),this.bind("change:total:difference",function(a){if(!a||!a.noPropogate)return c.updateStartBalanceFromEndBalance()}),this.updateEndBalanceFromNextPeriod()),(this.isHistoricalPeriod||this.isCurrentPeriod)&&this.cashflow.bank_accounts.bind("change:included",function(){return c.updateTransfers({noPropogate:!0}),c.updateIncome({noPropogate:!0}),c.updateExpense({noPropogate:!0}),c.updateDifference()})}return b.name="CashflowPeriodTotal",b.prototype.setupCashflowSetPeriods=function(){var a,b,c,d,e,f=this;return this.cashflow_set_periods||(this.cashflow_set_periods={incomes:{},expenses:{},transfers:{}}),a=function(a,b,c){var d;return d=a.getPeriod(f.period,f.periodStart),f.cashflow_set_periods[b][d.cid]=d,d.bind("change",function(a){if(!a||!a.noPropogate)return c()}),d.bind("remove",function(){return delete f.cashflow_set_periods[d.cid]})},c=this.cashflow.cashflow_sets.incomes(d=!0),c.bind("add",function(b){return a(b,"incomes",f.updateIncome)}),c.each(function(b){return a(b,"incomes",f.updateIncome)}),b=this.cashflow.cashflow_sets.expenses(d=!0),b.bind("add",function(b){return a(b,"expenses",f.updateExpense)}),b.each(function(b){return a(b,"expenses",f.updateExpense)}),e=this.cashflow.cashflow_sets.transfers(d=!0),e.bind("add",function(b){return a(b,"transfers",f.updateTransfers)}),e.each(function(b){return a(b,"transfers",f.updateTransfers)})},b.prototype.updateIncome=function(a){var b=this;return this.totals.income=_.reduce(_.values(this.cashflow_set_periods.incomes),function(a,b){return a.add(b.total().display())},_.decimal("0")),this.trigger("change:total:income",a)},b.prototype.updateExpense=function(a){var b=this;return this.totals.expense=_.reduce(_.values(this.cashflow_set_periods.expenses),function(a,b){return a.add(b.total().display())},_.decimal("0")),this.trigger("change:total:expense",a)},b.prototype.updateTransfers=function(a){var b=this;return this.totals.transfers=_.reduce(_.values(this.cashflow_set_periods.transfers),function(a,b){return a.add(b.total().display())},_.decimal("0")),this.trigger("change:total:transfers",a)},b.prototype.updateDifference=function(a){return this.totals.difference=this.totals.income.add(this.totals.expense.add(this.totals.transfers)),this.trigger("change:total:difference",a)},b.prototype.updateEndBalanceFromNextPeriod=function(a){return this.totals.end_balance=this.nextPeriod.totals.start_balance.clone(),this.trigger("change:total:end_balance",a)},b.prototype.updateStartBalanceFromPrevPeriod=function(a){return this.totals.start_balance=this.prevPeriod.totals.end_balance.clone(),this.trigger("change:total:start_balance",a)},b.prototype.updateStartBalanceFromBankAccounts=function(a){return this.totals.start_balance=this.cashflow.bank_accounts.startBalanceOn(this.periodStart),this.trigger("change:total:start_balance",a)},b.prototype.updateEndBalanceFromStartBalance=function(a){return this.totals.end_balance=this.totals.start_balance.add(this.totals.difference),this.trigger("change:total:end_balance",a)},b.prototype.updateStartBalanceFromEndBalance=function(a){return this.totals.start_balance=this.totals.end_balance.subtract(this.totals.difference),this.trigger("change:total:start_balance",a)},b.prototype.getNextPeriod=function(){var a,b;return b={month:"M",week:"w",day:"d"},a={},a[b[this.period]]=1,new this.constructor({period:this.period,cashflow:this.cashflow,date:this.periodStart.clone().add(a),prevPeriod:this,isFuturePeriod:!0})},b.prototype.getPrevPeriod=function(){var a,b;return b={month:"M",week:"w",day:"d"},a={},a[b[this.period]]=1,new this.constructor({period:this.period,cashflow:this.cashflow,date:this.periodStart.clone().subtract(a),nextPeriod:this,isHistoricalPeriod:!0})},b}(),FloatApp.Models.CashflowTotal=function(){function b(b){this.getPeriod=a(this.getPeriod,this),this.prependPeriod=a(this.prependPeriod,this),this.appendPeriod=a(this.appendPeriod,this),this.cashflow=b.cashflow,this.current_balance_date=b.current_balance_date,this.period=b.period,this.periods=[],this.periodsCache={},this.setupInitialPeriod()}return b.name="CashflowTotal",b.prototype.periodModel=FloatApp.Models.CashflowPeriodTotal,b.prototype.dateKey=function(a){return this.period+"-"+a.clone().beginningOf(this.period).valueOf().toString()},b.prototype.addToCache=function(a){return this.periodsCache[this.dateKey(a.periodStart)]=a},b.prototype.getFromCache=function(a){return this.periodsCache[this.dateKey(a)]},b.prototype.setupInitialPeriod=function(){var a;return a=new this.periodModel({cashflow:this.cashflow,period:this.period,date:this.current_balance_date.clone(),isCurrentPeriod:!0}),this.addToCache(a),this.periods.push(a)},b.prototype.appendPeriod=function(){var a;return a=_.last(this.periods).getNextPeriod(),this.addToCache(a),this.periods.push(a)},b.prototype.prependPeriod=function(){var a;return a=_.first(this.periods).getPrevPeriod(),this.addToCache(a),this.periods.unshift(a)},b.prototype.getPeriod=function(a){var b;a=a.clone().beginningOf(this.period);if(a>this.current_balance_date)while(!(b=this.getFromCache(a)))this.appendPeriod();else while(!(b=this.getFromCache(a)))this.prependPeriod();return b},b}(),_.extend(FloatApp.Models.CashflowTotal.prototype,Backbone.Events),_.extend(FloatApp.Models.CashflowPeriodTotal.prototype,Backbone.Events)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Models.Company=function(b){function d(){return this.restartWizard=a(this.restartWizard,this),this.finishWizard=a(this.finishWizard,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="Company",d.prototype.url="/company",d.prototype.finishWizard=function(){return this.set({wizard_complete:!0}),this.save()},d.prototype.restartWizard=function(){return this.set({wizard_complete:!1}),this.save()},d}(Backbone.Model)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Models.CumulativeTotalPeriod=function(b){function d(){return this.getPrevPeriod=a(this.getPrevPeriod,this),this.getNextPeriod=a(this.getNextPeriod,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="CumulativeTotalPeriod",d.mixin(Backbone.Mixins.WithComputedProperties),d.prototype.initialize=function(){this.set({period_start:this.get("date").clone().beginningOf(this.get("period")),period_end:this.get("date").clone().endOf(this.get("period")),delta_period:this.get("row").get("delta_row").getPeriod(this.get("period"),this.get("date"))}),this._setupProperties(),this.get("anchor")&&this._setupProperties(this.anchorProperties),this.get("historical")&&this._setupProperties(this.historicalProperties);if(this.get("future"))return this._setupProperties(this.futureProperties)},d.prototype.defaults={start_balance:_.decimal("0"),end_balance:_.decimal("0")},d.prototype.properties={anchor:{result:function(){var a;return a=this.get("row").get("anchor_date"),this.get("period_start")<=a&&a<=this.get("period_start")},bindings:["row.change:anchor_date"]},historical:{result:function(){var a;return a=this.get("row").get("anchor_date"),this.get("period_end")<a},bindings:["row.change:anchor_date"]},future:{result:function(){var a;return a=this.get("row").get("anchor_date"),a<this.get("period_start")},bindings:["row.change:anchor_date"]}},d.prototype.anchorProperties={start_balance:{result:function(){var a;return a=this.get("row"),a.get("anchor_type")==="start"?a.get("anchor_value"):a.get("anchor_value").subtract(this.delta())},bindings:["row.change:anchor_value","delta_period.change:display"]},end_balance:{result:function(){var a;return a=this.get("row"),a.get("anchor_type")==="start"?a.get("anchor_value").add(this.delta()):a.get("anchor_value")},bindings:["row.change:anchor_value","delta_period.change:display"]}},d.prototype.historicalProperties={start_balance:{result:function(){return this.get("end_balance").subtract(this.delta())},bindings:["change:end_balance","delta_period.change:display"]},end_balance:{result:function(){return this.get("nextPeriod").get("start_balance")},bindings:["nextPeriod.change:start_balance"]}},d.prototype.futureProperties={start_balance:{result:function(){return this.get("prevPeriod").get("end_balance")},bindings:["prevPeriod.change:end_balance"]},end_balance:{result:function(){return this.get("start_balance").add(this.delta())},bindings:["change:start_balance","delta_period.change:display"]}},d.prototype.delta=function(){return this.get("delta_period").get("display")},d.prototype.getNextPeriod=function(){var a,b;return b={month:"M",week:"w",day:"d"},a={},a[b[this.get("period")]]=1,new this.constructor({period:this.get("period"),date:this.get("date").clone().add(a),row:this.get("row"),prevPeriod:this})},d.prototype.getPrevPeriod=function(){var a,b;return b={month:"M",week:"w",day:"d"},a={},a[b[this.get("period")]]=-1,new this.constructor({period:this.get("period"),date:this.get("date").clone().add(a),row:this.get("row"),nextPeriod:this})},d}(Backbone.Model),FloatApp.Models.CumulativeTotalRow=function(b){function d(){return this.getPeriod=a(this.getPeriod,this),this.prependPeriod=a(this.prependPeriod,this),this.appendPeriod=a(this.appendPeriod,this),this.addToCache=a(this.addToCache,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="CumulativeTotalRow",d.prototype.initialize=function(a){return this.set({period:"month",delta_row:a.delta_row,anchor_date:a.anchor_date,anchor_value:a.anchor_value,anchor_type:a.anchor_type}),this.setupAnchorPeriod()},d.prototype.setupAnchorPeriod=function(){var a;return this.periods||(this.periods=[]),this.periodsCache={},a=new FloatApp.Models.CumulativeTotalPeriod({period:this.get("period"),date:this.get("anchor_date"),row:this}),this.anchorPeriod=a,this.periods.push(a),this.addToCache(a)},d.prototype.dateKey=function(a){var b;return b=this.get("period")+"-"+a.clone().beginningOf(this.get("period")).valueOf().toString(),b},d.prototype.addToCache=function(a){return this.periods.length>1e3&&FloatApp["throw"]({name:"Cashflow Total Error",message:"More than 1000 entries in periodsCache",anchorPeriod:this.anchorPeriod,periodsCache:this.periodsCache}),this.periodsCache[this.dateKey(a.get("period_start"))]=a},d.prototype.getFromCache=function(a){return this.periodsCache[this.dateKey(a)]},d.prototype.appendPeriod=function(){var a;return a=_.last(this.periods).getNextPeriod(),this.addToCache(a),this.periods.push(a)},d.prototype.prependPeriod=function(){var a;return a=_.first(this.periods).getPrevPeriod(),this.addToCache(a),this.periods.unshift(a)},d.prototype.getPeriod=function(a,b){var c;b=b.clone().beginningOf(this.get("period"));if(this.get("anchor_date")<b)while(!(c=this.getFromCache(b)))this.appendPeriod();else while(!(c=this.getFromCache(b)))this.prependPeriod();return c},d}(Backbone.Model)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Models.FreeagentCredentials=function(b){function d(){return this.finishImport=a(this.finishImport,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="FreeagentCredentials",d.prototype.url="/freeagent_credentials",d.prototype.finishImport=function(a){return $.post("/freeagent_credentials/finish_import.json",{}),this.fetch(a)},d}(Backbone.Model)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a},d=[].slice;FloatApp.Models.Invoice=function(b){function e(){return this.updatePaymentTerms=a(this.updatePaymentTerms,this),this.toJSON=a(this.toJSON,this),this.triggerIgnoredChanged=a(this.triggerIgnoredChanged,this),this.setProject=a(this.setProject,this),this.invoiceStatusSortOrder=a(this.invoiceStatusSortOrder,this),this.invoiceStatusDescription=a(this.invoiceStatusDescription,this),this.invoiceStatus=a(this.invoiceStatus,this),this.isExpected=a(this.isExpected,this),this.isIncluded=a(this.isIncluded,this),this.datatypes=a(this.datatypes,this),e.__super__.constructor.apply(this,arguments)}return c(e,b),e.name="Invoice",e.prototype.paramRoot="invoice",e.prototype.defaults=function(){return{expected_total:"0",expected_on:_.date().format("YYYY-MM-DD")}},e.prototype.datatypes=function(){return _.extend(e.__super__.datatypes.apply(this,arguments),{due_on:"date"})},e.prototype.isInvoice=function(){return!0},e.prototype.isExpense=function(){return this.get("their_type")==="ACCPAY"&&this.get("total")>=0||this.get("their_type")==="ACCREC"&&this.get("total")<0},e.prototype.isIncome=function(){return this.get("their_type")==="ACCREC"&&this.get("total")>=0||this.get("their_type")==="ACCPAY"&&this.get("total")<0},e.prototype.isIncluded=function(){return!this.get("project")||this.get("project")==="oneoff"||this.get("project").isOneoffProject()?!this.get("ignored"):!this.get("ignored")&&this.get("project").isIncluded()},e.prototype.isExpected=function(){return this.get("status")==="Open"||this.get("status")==="Overdue"||this.get("status")==="Draft"},e.prototype.invoiceStatus=function(){var a,b;return a=this.get("status")==="Draft",b=this.hits_cashflow_on()<=new Date,a&&b?"overdue-draft":a?"draft":b?"overdue":"open"},e.prototype.invoiceStatusDescription=function(){var a;return a={overdue:"Overdue",open:"Open",draft:"Draft","overdue-draft":"Overdue and Draft"},a[this.invoiceStatus()]},e.prototype.invoiceStatusSortOrder=function(){var a;return a={overdue:"a",open:"b",draft:"c","overdue-draft":"d"},a[this.invoiceStatus()]},e.prototype.hits_cashflow_on=function(){var a,b;return a=this.get("expected_on")||this.get("due_on"),b=_.date().beginningOfDay(),a.valueOf()<b.valueOf()?b:a},e.prototype.hits_cashflow_total=function(){var a;return a=(this.get("expected_total")||_.decimal("0")).abs(),this.isExpense()?_.decimal("0").subtract(a):a},e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.setProject(),this.bind("change:project",this.setProject),this.bind("change:payment_terms_in_days",this.updatePaymentTerms)},e.prototype.setProject=function(){var a;a=1<=arguments.length?d.call(arguments,0):[],this.toJSON().project||this.set({project:"oneoff"},{silent:!0});if(this.get("project")&&this.get("project")!=="oneoff")return this.previous("project")&&this.previous("project")!=="oneoff"&&this.projectBinding&&this.unbindFrom(this.projectBinding),this.projectBinding=this.bindTo(this.get("project"),"change:ignored",this.triggerIgnoredChanged)},e.prototype.triggerIgnoredChanged=function(){return this.trigger("change:ignored",this,!this.isIncluded())},e.prototype.toJSON=function(){var a;return a=e.__super__.toJSON.apply(this,arguments),a&&a.project==="oneoff"&&(a.project=null),a},e.prototype.updatePaymentTerms=function(){var a;return a=_.date(this.get("dated_on").valueOf()).add({d:this.get("payment_terms_in_days")}),this.set({expected_on:a})},e}(FloatApp.Models.Entry),FloatApp.Collections.InvoicesCollection=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.name="InvoicesCollection",b.prototype.model=FloatApp.Models.Invoice,b.prototype.url="/invoices",b.prototype.comparator=function(a){return-1*(a.get("expected_on"
)||a.get("due_on")||a.get("dated_on")).valueOf()},b.prototype.no_project=function(){return new this.constructor(this.filter(function(a){return!a.get("project")}))},b.prototype.total=function(){return this.reduce(function(a,b){return a.add(b.get("total"))},_.decimal("0"))},b.prototype.expectedTotal=function(){return this.reduce(function(a,b){return s.add(i.get("expected_total"))},_.decimal("0"))},b.prototype.includedExpectedTotal=function(){return this.reduce(function(a,b){return b.isIncluded()?a.add(b.get("expected_total")):a},_.decimal("0"))},b}(FloatApp.Collections.EntriesCollection)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Models.Period=function(b){function d(){return this.periodEnd=a(this.periodEnd,this),this.periodStart=a(this.periodStart,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="Period",d.prototype.defaults={period:"",date:""},d.prototype.initialize=function(a){if(a.period&&a.date)return this.set({id:a.period+a.date.toString()})},d.prototype.periodStart=function(){return this.get("date")},d.prototype.periodEnd=function(){return this.get("date").clone().endOf(this.get("period"))},d}(Backbone.Model),FloatApp.Collections.Periods=function(b){function d(){return this.removeOneFromEnd=a(this.removeOneFromEnd,this),this.removeOneFromStart=a(this.removeOneFromStart,this),this.removeFromStart=a(this.removeFromStart,this),this.removeFromEnd=a(this.removeFromEnd,this),this.addOneToEnd=a(this.addOneToEnd,this),this.addOneToStart=a(this.addOneToStart,this),this.addToEnd=a(this.addToEnd,this),this.addToStart=a(this.addToStart,this),this.resetRange=a(this.resetRange,this),this.getPeriodsInRange=a(this.getPeriodsInRange,this),this.shiftKey=a(this.shiftKey,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="Periods",d.prototype.model=FloatApp.Models.Period,d.prototype.initialize=function(a,b){return this.period=b.period||"month"},d.prototype.shiftKey=function(){var a;return a={month:"M",week:"w",day:"d"},a[this.period]},d.prototype.getPeriodsInRange=function(a,b){var c=this;return _.map(_.date.periodsBetween(this.period,a,b),function(a){return new c.model({period:c.period,date:a})})},d.prototype.resetRange=function(a,b){return this.reset(this.getPeriodsInRange(a,b))},d.prototype.comparator=function(a){return a.get("date").valueOf()},d.prototype.addToStart=function(a){var b,c,d;if(this.length!==0){d=[];for(b=c=1;1<=a?c<=a:c>=a;b=1<=a?++c:--c)d.push(this.addOneToStart());return d}},d.prototype.addToEnd=function(a){var b,c,d;if(this.length!==0){d=[];for(b=c=1;1<=a?c<=a:c>=a;b=1<=a?++c:--c)d.push(this.addOneToEnd());return d}},d.prototype.addOneToStart=function(){var a;return a={},a[this.shiftKey()]=1,this.add({period:this.period,date:this.first().get("date").clone().subtract(a)},{at:0})},d.prototype.addOneToEnd=function(){var a;return a={},a[this.shiftKey()]=1,this.add({period:this.period,date:this.last().get("date").clone().add(a)})},d.prototype.removeFromEnd=function(a){var b,c,d;d=[];for(b=c=1;1<=a?c<=a:c>=a;b=1<=a?++c:--c)d.push(this.removeOneFromEnd());return d},d.prototype.removeFromStart=function(a){var b,c,d;d=[];for(b=c=1;1<=a?c<=a:c>=a;b=1<=a?++c:--c)d.push(this.removeOneFromStart());return d},d.prototype.removeOneFromStart=function(){if(!(this.length<=1))return this.remove(this.first())},d.prototype.removeOneFromEnd=function(){if(!(this.length<=1))return this.remove(this.last())},d.prototype.shiftRangeUp=function(a){var b,c,d;a==null&&(a=1);if(this.length!==0){d=[];for(b=c=1;1<=a?c<=a:c>=a;b=1<=a?++c:--c)d.push((this.removeOneFromStart(),this.addOneToEnd()));return d}},d.prototype.shiftRangeDown=function(a){var b,c,d;a==null&&(a=1);if(this.length!==0){d=[];for(b=c=1;1<=a?c<=a:c>=a;b=1<=a?++c:--c)d.push((this.removeOneFromEnd(),this.addOneToStart()));return d}},d}(Backbone.Collection)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Models.PipelinePeriodTotal=function(){function b(b){this.getPrevPeriod=a(this.getPrevPeriod,this),this.getNextPeriod=a(this.getNextPeriod,this),this.updateTotal=a(this.updateTotal,this),this.updateBudgetRemaining=a(this.updateBudgetRemaining,this),this.updateIncome=a(this.updateIncome,this),this.setupCashflowSetPeriods=a(this.setupCashflowSetPeriods,this),this.cashflow=b.cashflow,this.period=b.period,this.periodStart=b.date.clone().beginningOf(this.period),this.periodEnd=b.date.clone().endOf(this.period),this.totals={paid:_.decimal("0"),invoiced:_.decimal("0"),projected:_.decimal("0"),budgeted:_.decimal("0"),budget_remaining:_.decimal("0")},this.isHistoricalPeriod=b.isHistoricalPeriod,this.isFuturePeriod=b.isFuturePeriod,this.isCurrentPeriod=b.isCurrentPeriod,this.setupCashflowSetPeriods(),this.updateIncome()}return b.name="PipelinePeriodTotal",b.prototype.setupCashflowSetPeriods=function(){var a,b,c,d=this;return this.cashflow_set_periods||(this.cashflow_set_periods={incomes:{},expenses:{}}),a=function(a,b,c){var e;return e=a.getPeriod(d.period,d.periodStart),d.cashflow_set_periods[b][e.cid]=e,e.bind("change",function(a){if(!a||!a.noPropogate)return c()}),e.bind("selected:invoiced",function(a){return d.trigger("selected:invoiced",a)}),e.bind("selected:projected",function(a){return d.trigger("selected:projected",a)}),e.bind("remove",function(){return delete d.cashflow_set_periods[e.cid]})},b=this.cashflow.cashflow_sets.incomes(c=!0),b.bind("add",function(b){return a(b,"incomes",d.updateIncome)}),b.each(function(b){return a(b,"incomes",d.updateIncome)})},b.prototype.updateIncome=function(){return this.updateTotal("paid"),this.updateTotal("invoiced"),this.updateTotal("projected"),this.updateTotal("budgeted"),this.updateBudgetRemaining()},b.prototype.updateBudgetRemaining=function(a){return this.totals.budget_remaining=this.totals.budgeted.subtract(this.totals.paid.add(this.totals.invoiced).add(this.totals.projected)),this.totals.budget_remaining<0&&(this.totals.budget_remaining=_.decimal("0")),this.trigger("change:total:budget_remaining",a)},b.prototype.updateTotal=function(a,b,c){var d;return c==null&&(c={}),b||(b=a),_.isString(b)?d=function(a,c){var d;return d=c.total(),a.add(d[b]())}:d=b,this.totals[a]=_.reduce(_.values(this.cashflow_set_periods.incomes),d,_.decimal("0")),this.trigger("change:total:"+a,c)},b.prototype.getNextPeriod=function(){var a,b;return b={month:"M",week:"w",day:"d"},a={},a[b[this.period]]=1,new this.constructor({period:this.period,cashflow:this.cashflow,date:this.periodStart.clone().add(a),prevPeriod:this,isFuturePeriod:!0})},b.prototype.getPrevPeriod=function(){var a,b;return b={month:"M",week:"w",day:"d"},a={},a[b[this.period]]=1,new this.constructor({period:this.period,cashflow:this.cashflow,date:this.periodStart.clone().subtract(a),nextPeriod:this,isHistoricalPeriod:!0})},b}(),FloatApp.Models.PipelineTotal=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.name="PipelineTotal",b.prototype.periodModel=FloatApp.Models.PipelinePeriodTotal,b}(FloatApp.Models.CashflowTotal),_.extend(FloatApp.Models.PipelineTotal.prototype,Backbone.Events),_.extend(FloatApp.Models.PipelinePeriodTotal.prototype,Backbone.Events)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Models.Project=function(b){function d(){return this.ignore=a(this.ignore,this),this.include=a(this.include,this),this.isIgnored=a(this.isIgnored,this),this.isIncluded=a(this.isIncluded,this),this.remainingNetTotal=a(this.remainingNetTotal,this),this.netTotal=a(this.netTotal,this),this.isNotOneoffProject=a(this.isNotOneoffProject,this),this.isOneoffProject=a(this.isOneoffProject,this),this.afterDestroy=a(this.afterDestroy,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="Project",d.colors=["#EBEBEB","#D594FF","#E0AE4A","#96D0B9","#B7EA66","#69BEE8","#D35BC2","#AEBFD9","#69D5DA","#C7494B"],d.prototype.param_root="project",d.prototype.defaults={name:null,color:null},d.prototype.relations=[{type:Backbone.HasMany,key:"projections",relatedModel:"FloatApp.Models.Projection",collectionType:"FloatApp.Collections.ProjectionsCollection",reverseRelation:{key:"project",includeInJSON:"id"}},{type:Backbone.HasMany,key:"invoices",relatedModel:"FloatApp.Models.Invoice",collectionType:"FloatApp.Collections.InvoicesCollection",reverseRelation:{key:"project",includeInJSON:"id"}}],d.prototype.afterDestroy=function(){return this.get("projections").each(function(a){return a.destroy()}),this.get("invoices").each(function(a){return a.set({project:null})})},d.prototype.isOneoffProject=function(){return this.id==="oneoff"},d.prototype.isNotOneoffProject=function(){return this.id!=="oneoff"},d.prototype.netTotal=function(){return this.get("invoices").includedTotal().add(this.get("projections").includedTotal())},d.prototype.remainingNetTotal=function(){return this.get("invoices").includedExpectedTotal().add(this.get("projections").includedTotal())},d.prototype.isIncluded=function(){return!this.get("ignored")},d.prototype.isIgnored=function(){return this.get("ignored")},d.prototype.include=function(){return this.set({ignored:!1})},d.prototype.ignore=function(){return this.set({ignored:!0})},d}(Backbone.RelationalModel),FloatApp.Collections.ProjectsCollection=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.name="ProjectsCollection",b.prototype.url="/projects",b.prototype.model=FloatApp.Models.Project,b.prototype.initialize=function(){return this.bind("destroy",this.afterProjectDestroyed)},b.prototype.scopes={notOneoff:"isNotOneoffProject",oneoff:"isOneoffProject"},b.prototype.afterProjectDestroyed=function(a,b){return a.afterDestroy()},b}(Backbone.ScopedCollection)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Models.Projection=function(b){function d(){return this.status=a(this.status,this),this.toJSON=a(this.toJSON,this),this.updateSignOfValue=a(this.updateSignOfValue,this),this.updateSignOfValues=a(this.updateSignOfValues,this),this.isIncluded=a(this.isIncluded,this),this.triggerIgnoredChanged=a(this.triggerIgnoredChanged,this),this.setProject=a(this.setProject,this),this.isProjection=a(this.isProjection,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="Projection",d.prototype.paramRoot="cashflow_entry",d.prototype.relations=[{type:Backbone.HasOne,key:"vat_return",relatedModel:"FloatApp.Models.VatReturn",reverseRelation:{type:Backbone.HasOne,key:"projection",includeInJSON:"id"}}],d.prototype.isTransfer=function(){return this.get("expense_income")==="transfer"},d.prototype.isExpense=function(){return this.get("expense_income")==="expense"},d.prototype.isIncome=function(){return this.get("expense_income")==="income"},d.prototype.isProjection=function(){return!0},d.prototype.hits_cashflow_on=function(){var a,b;return a=d.__super__.hits_cashflow_on.apply(this,arguments),b=_.date().beginningOfDay(),this.get("vat_return")&&this.get("ignored")?a:a.valueOf()<b.valueOf()?b:a},d.prototype.initialize=function(){return d.__super__.initialize.call(this),this.setProject(),this.bind("change:project",this.setProject),this.bind("change:expense_income",this.updateSignOfValues),this.bind("change:total",this.updateSignOfValues),this.bind("change:total_tax",this.updateSignOfValues),this.bind("change:subtotal",this.updateSignOfValues),this.bind("change:vat_return",this.bindVatReturn)},d.prototype.setProject=function(){this.toJSON().project||this.set({project:"oneoff"},{silent:!0});if(this.get("project")&&this.get("project")!=="oneoff")return this.previous("project")&&this.previous("project")!=="oneoff"&&this.projectBinding&&this.unbindFrom(this.projectBinding),this.projectBinding=this.bindTo(this.get("project"),"change:ignored",this.triggerIgnoredChanged)},d.prototype.triggerIgnoredChanged=function(){return this.trigger("change:ignored",this,!this.isIncluded())},d.prototype.isIncluded=function(){return!this.get("project")||this.get("project")==="oneoff"||this.get("project").isOneoffProject()?!this.get("ignored"):!this.get("ignored")&&this.get("project").isIncluded()},d.prototype.updateSignOfValues=function(){return this.updateSignOfValue("total"),this.updateSignOfValue("subtotal"),this.updateSignOfValue("total_tax")},d.prototype.updateSignOfValue=function(a){var b,c;if(this.get(a))return c=this.get(a).abs(),this.isExpense()&&(c=c.invert()),b={},b[a]=c,this.set(b)},d.prototype.toJSON=function(){var a;return a=d.__super__.toJSON.apply(this,arguments),a&&(a.expense_income=this.get("expense_income"),a.project==="oneoff"&&(a.project=null)),a},d.prototype.status=function(){return this.get("dated_on")<_.date()?"Overdue":this.get("dated_on")<_.date().add({d:30})?"Upcoming":"Future"},d}(FloatApp.Models.Entry),FloatApp.Collections.ProjectionsCollection=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.name="ProjectionsCollection",b.prototype.model=FloatApp.Models.Projection,b.prototype.url="/projections",b.prototype.no_project=function(){return new this.constructor(this.filter(function(a){return!a.get("project")}))},b.prototype.total=function(){return this.reduce(function(a,b){return a.add(b.get("total"))},_.decimal("0"))},b}(FloatApp.Collections.EntriesCollection)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Models.VatReturn=function(b){function d(){return this.updateModel=a(this.updateModel,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="VatReturn",d.prototype.paramRoot="vat_return",d.prototype.defaults={estimated_total:"0",actual_total:"0",hits_cashflow_total:"0",modify_future_events:!1},d.prototype.datatypes={due_on:"date",period_starts_on:"date",period_ends_on:"date",estimated_total:"decimal",actual_total:"decimal",hits_cashflow_total:"decimal"},d.prototype.isIncome=function(){return!1},d.prototype.isExpense=function(){return!0},d.prototype.initialize=function(){return this.bind("change:estimated_total",this.setHitsCashflowTotal),this.bind("change:actual_total",this.setHitsCashflowTotal),this.bind("change:hits_cashflow_total",this.setProjectionTotal),this.bind("update:projection",this.setProjectionTotal),this.bind("change:projection",this.setProjectionTotal),this.setHitsCashflowTotal(),this.setProjectionTotal(),this.bind("change:status",this.removeProjectionIfPaid),this.bind("saved",this.updateModel)},d.prototype.updateModel=function(){return this.fetch()},d.prototype.setHitsCashflowTotal=function(){var a,b;return a=this.get("actual_total")||_.decimal("0"),b=this.get("estimated_total")||_.decimal("0"),status==="DUE"?this.set({hits_cashflow_total:a}):!a||a.abs()<b.abs()?this.set({hits_cashflow_total:b}):this.set({hits_cashflow_total:a})},d.prototype.setProjectionTotal=function(){var a;if(a=this.get("projection"))return a.set({total:this.get("hits_cashflow_total")})},d.prototype.removeProjectionIfPaid=function(){var a;return this.get("status")==="PAID"?a=this.get("projection").set({ignored:!0}):a=this.get("projection").set({ignored:!1})},d}(Backbone.RelationalModel),_.extend(FloatApp.Models.VatReturn.prototype,Backbone.Marionette.BindTo),FloatApp.Collections.VatReturns=function(b){function d(){return this.updateFutureVatReturns=a(this.updateFutureVatReturns,this),this.afterDate=a(this.afterDate,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="VatReturns",d.prototype.url="/vat_returns",d.prototype.model=FloatApp.Models.VatReturn,d.prototype.initialize=function(){return this.bind("change:estimated_total",this.updateFutureVatReturns)},d.prototype.afterDate=function(a,b){return b==null&&(b=!1),this.subset(function(b){return b.get("due_on")>=a},b)},d.prototype.updateFutureVatReturns=function(a){var b=this;if(a.get("modify_future_events"))return this.afterDate(a.get("due_on").clone().add({d:1})).each(function(b){if(b.id!==a.id)return b.set({estimated_total:a.get("estimated_total")})}),a.set({modify_future_events:!1})},d}(Backbone.ScopedCollection)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};FloatApp.Models.VisualGroup=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.name="VisualGroup",c.prototype.paramRoot="visual_group",c.prototype.defaults={name:null},c}(Backbone.Model),FloatApp.Collections.VisualGroupsCollection=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.name="VisualGroupsCollection",c.prototype.url="/visual_groups",c.prototype.model=FloatApp.Models.VisualGroup,c.prototype.comparator=function(a){return a.get("name")},c}(Backbone.Collection)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Views.ItemView=function(b){function d(){return this.dispose=a(this.dispose,this),this.render=a(this.render,this),this.bindToMultiple=a(this.bindToMultiple,this),this.renderTemplate=a(this.renderTemplate,this),this.getTemplate=a(this.getTemplate,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="ItemView",d.prototype.className="",d.prototype.getTemplate=function(){return this.template},d.prototype.renderTemplate=function(a,b){return a(b)},d.prototype.initialize=function(){return this.bindTo(this.model,"change",this.render)},d.prototype.bindToMultiple=function(a,b,c,d){var e=this;return _(b.split(" ")).each(function(b){return e.bindTo(a,b,c,d)})},d.prototype.render=function(){var a,b,c,d;return d=this.getTemplate(),b=this.serializeData(),c=this.renderTemplate(d,b),$(this.el).html(c),this.elClasses&&(a=this.elClasses(b),_.isArray(a)&&(a=a.join(" ")),a=this.className+" "+a,$(this.el).attr("class",a)),this.onRender&&this.onRender(),this},d.prototype.dispose=function(){return this.close()},d}(Backbone.Marionette.ItemView),FloatApp.Views.CollectionView=function(b){function d(){return this.dispose=a(this.dispose,this),this.renderTemplate=a(this.renderTemplate,this),this.getTemplate=a(this.getTemplate,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="CollectionView",d.prototype.getTemplate=function(){return this.template},d.prototype.renderTemplate=function(a,b){return a(b)},d.prototype.dispose=function(){return this.close()},d}(Backbone.Marionette.CollectionView),FloatApp.Views.BaseView=function(b){function d(b){this.close=a(this.close,this),this.dispose=a(this.dispose,this),this.unbindFromAll=a(this.unbindFromAll,this),this.bindTo=a(this.bindTo,this),this.bindToOne=a(this.bindToOne,this),this.bindings=[],d.__super__.constructor.call(this,b)}return c(d,b),d.name="BaseView",d.prototype.bindToOne=function(a,b,c){return a.bind(b,c),this.bindings.push({model:a,event:b,callback:c})},d.prototype.bindTo=function(a,b,c){var d=this;return _.each(b.split(" "),function(b){return d.bindToOne(a,b,c)})},d.prototype.unbindFromAll=function(){var a=this;return _.each(this.bindings,function(a){return a.model.unbind(a.event,a.callback)})},d.prototype.dispose=function(){return this.unbindFromAll(),this.unbind(),this.remove()},d.prototype.close=function(){return this.dispose()},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Views.BaseChartView=function(b){function d(){return this.updateSeriesData=a(this.updateSeriesData,this),this.render=a(this.render,this),this.updatePoint=a(this.updatePoint,this),this.removePoint=a(this.removePoint,this),this.getPoint=a(this.getPoint,this),this.redrawChart=a(this.redrawChart,this),this.pointFromTotal=a(this.pointFromTotal,this),this.buildSeries=a(this.buildSeries,this),this.close=a(this.close,this),this.remove=a(this.remove,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="BaseChartView",d.prototype.initialize=function(){return this.cashflow=this.options.model,this.periods=this.cashflow.periods[this.options.period+"s"],this.totals=this.model.totals},d.prototype.remove=function(){if(this.chart)return this.chart.destroy()},d.prototype.close=function(){return this.dispose()},d.prototype.chart=null,d.prototype.buildSeries=function(a,b,c,d){var e=this;return d==null&&(d=!1),this.periods.length===0?[]:this.periods.map(function(f){var g;return g=a.getPeriod("month",f.periodStart()),e.pointFromTotal(g,b,f,c,d)})},d.prototype.pointFromTotal=function(a,b,c,d,e){var f,g,h,i,j=this;return e==null&&(e=!1),f=b+a.cid,g=function(a){var c;c=a.get(b).toFloat(),e&&(c=Math.abs(c));if(j.chart)return j.updatePoint(f,{y:c})},this.bindTo(a,"change:"+b,g),this.bindTo(c,"remove",function(){return j.removePoint(f),a.unbind("change:"+b,g)}),d==="end"?h=c.periodEnd().date.getTime():(h=c.periodStart().date.getTime(),d==="middle"&&(h+=1.05*this.barOffset()*864e5)),i=a.get(b).toFloat(),e&&(i=Math.abs(i)),{x:h,y:i,id:f}},d.prototype.redrawChart=function(){var a=this;return this.redrawChartThrottled||(this.redrawChartThrottled=_.throttle(function(){return a.chart.redraw()},50)),this.redrawChartThrottled()},d.prototype.getPoint=function(a){return this.chart.get(a)},d.prototype.removePoint=function(a){var b;return(b=this.getPoint(a))&&b.remove()},d.prototype.updatePoint=function(a,b){var c;return(c=this.getPoint(a))&&c.update(b,!1,!0),this.redrawChart()},d.prototype.render=function(){return $(this.el).html(this.template()),this},d.prototype.updateSeriesData=function(a,b,c){return c==null&&(c=!0),this.chart.get(a).setData(b,c)},d}(FloatApp.Views.BaseView)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).Layout||(a.Layout={}),FloatApp.Views.Layout.Modal=function(a){function c(){return this.addDatePickers=b(this.addDatePickers,this),this.addVisualGroupSelect=b(this.addVisualGroupSelect,this),this.addProjectSelect=b(this.addProjectSelect,this),this.addCashflowSetSelect=b(this.addCashflowSetSelect,this),this.cashflowSets=b(this.cashflowSets,this),this.visualGroups=b(this.visualGroups,this),this.projects=b(this.projects,this),this.cashflowSetSelect=b(this.cashflowSetSelect,this),this.visualGroupSelect=b(this.visualGroupSelect,this),this.projectSelect=b(this.projectSelect,this),this.addSelects=b(this.addSelects,this),this.doShowBackdrop=b(this.doShowBackdrop,this),this.render=b(this.render,this),this.afterRender=b(this.afterRender,this),this.renderVariables=b(this.renderVariables,this),this.deactivate=b(this.deactivate,this),this.close=b(this.close,this),this.disableButtons=b(this.disableButtons,this),this.enableButtons=b(this.enableButtons,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="Modal",c.prototype.showBackdrop=!0,c.prototype.enableButtons=function(){return this.$("input[type=submit], a.save").removeClass("loading").removeAttr("disabled")},c.prototype.disableButtons=function(){return this.$("input[type=submit], a.save").addClass("loading disabled").attr("disabled",!0)},c.prototype.close=function(a){return a&&$.noBubble(a),this.backdrop&&this.backdrop.fadeOut(function(){return $(this).remove()}),$(this.el).remove()},c.prototype.deactivate=function(){return this.close()},c.prototype.renderVariables=function(){return this.model.toJSON()},c.prototype.afterRender=function(){},c.prototype.render=function(){return $(this.el).html(this.template(this.renderVariables())),this.addSelects(),this.addDatePickers(),this.afterRender(),this.options.dynamic?this.$("form").backboneLink(this.model,".frequency_advanced"):this.$("form").backboneFillForm(this.model,".frequency_advanced"),this.$("form").formErrors(this.model.get("errors")),this.showBackdrop&&this.doShowBackdrop(),this},c.prototype.doShowBackdrop=function(){return this.backdrop=$("<div class='modal-backdrop'>").hide(),$("body").append(this.backdrop),this.backdrop.fadeIn()},c.prototype.addSelects=function(){return this.addCashflowSetSelect(),this.addProjectSelect(),this.addVisualGroupSelect()},c.prototype.projectSelect=function(){return this.$("select[name=project]")},c.prototype.visualGroupSelect=function(){return this.$("select[name=visual_group]")},c.prototype.cashflowSetSelect=function(){return this.$("select[name=cashflow_set]")},c.prototype.projects=function(){return this.options.projects},c.prototype.visualGroups=function(){return this.options.visual_groups},c.prototype.cashflowSets=function(){var a;return a=this.options.cashflow_sets,a&&(this.model.isIncome()&&(a=a.incomes()),this.model.isExpense()&&(a=a.expenses())),a},c.prototype.addCashflowSetSelect=function(){var a,b;return this.cashflowSets()&&this.cashflowSets().length>0?(b=new FloatApp.Views.CashflowSets.SelectView({cashflow_sets:this.cashflowSets()}),a=$(b.render().el),a.val(this.model.toJSON().cashflow_set),this.cashflowSetSelect().html(a.html()).parent().show()):this.cashflowSetSelect().parent().hide(),this.bound_cashflow_sets_select||(this.bound_cashflow_sets_select=this.model.bind("change:expense_income",this.addCashflowSetSelect))},c.prototype.addProjectSelect=function(){var a,b;return this.projects()&&this.projects().length>0?(b=new FloatApp.Views.Projects.SelectView({projects:this.projects()}),a=$(b.render().el),a.val(this.model.toJSON().project),this.projectSelect().html(a.html()).parent().show()):this.projectSelect().parent().hide()},c.prototype.addVisualGroupSelect=function(){var a,b;return this.visualGroups()&&this.visualGroups().length>0?(b=new FloatApp.Views.VisualGroups.SelectView({visual_groups:this.visualGroups()}),a=$(b.render().el),a.val(this.model.toJSON().visual_group),this.visualGroupSelect().html(a.html()).parent().show()):this.visualGroupSelect().parent().hide()},c.prototype.addDatePickers=function(){return this.$("input.datepicker").not(".hasDatepicker").datepicker({buttonImage:"/images/icons/float/cal16.png",dateFormat:"yy-mm-dd",showOn:"button",buttonImageOnly:!0,firstDay:1}),this.$("input.datepicker-text").not(".hasDatepicker").datepicker({dateFormat:"yy-mm-dd",firstDay:1})},c}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).Layout||(a.Layout={}),FloatApp.Views.Layout.ModalEditView=function(a){function c(){return this.destroyModel=b(this.destroyModel,this),this.update=b(this.update,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="ModalEditView",c.prototype.template=null,c.prototype.className="modal",c.prototype.events={"submit form":"update","click a.close":"close","click a.cancel":"close","click a.destroy":"destroyModel"},c.prototype.update=function(a){var b=this;return a.preventDefault(),a.stopPropagation(),this.disableButtons(),this.$("form").backboneParseForm(this.model,".frequency_advanced"),this.model.save({},{success:function(a){return b.enableButtons(),b.model=a,b.model.trigger("saved",b.model),b.close()}})},c.prototype.destroyModel=function(a){a.preventDefault(),a.stopPropagation();if(confirm("This will delete this item. Are you sure you wish to continue?"))return this.model.destroy(),this.close()},c}(FloatApp.Views.Layout.Modal)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).Layout||(a.Layout={}),FloatApp.Views.Layout.ModalNewView=function(a){function c(a){this.save=b(this.save,this),this.close=b(this.close,this),c.__super__.constructor.call(this,a),this.options.dynamic=!1,this.attributes=a.model_attributes||a.attributes||{},this.model=new this.collection.model(this.attributes),this.collection.add(this.model,{noproxy:!0,silent:!0}),this.model.bind("change:errors",this.render)}return d(c,a),c.name="ModalNewView",c.prototype.template=null,c.prototype.className="modal",c.prototype.events=function(){return{"submit form":"save","click a.close":"close","click a.cancel":"close"}},c.prototype.close=function(a){c.__super__.close.call(this,a);if(this.model.isNew())return this.model.destroy()},c.prototype.save=function(a){var b=this;if(!this.saving)return this.saving=!0,a.preventDefault(),a.stopPropagation(),this.$("form").backboneParseForm(this.model,".frequency_advanced"),this.model.unset("errors"),this.model.save({},{success:function(a){return b.saving=!1,b.model=a,b.trigger("saved",b.model),b.collection.trigger("add",b.model),b.collection.trigger("saved",b.model),b.close()},error:function(a,c){return b.model.set({errors:$.parseJSON(c.responseText)}),b.saving=!1}})},c}(FloatApp.Views.Layout.Modal)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b},c=function(a,b){return function(){return a.apply(b,arguments)}};FloatApp.Views.TableCell=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.name="TableCell",c.prototype.tagName="td",c.prototype.className="period money",c.prototype.initialize=function(){return this.bindTo(this.model,"remove",this.close),this.bindTo(this.model,"change",this.render)},c}(FloatApp.Views.ItemView),FloatApp.Views.TableRow=function(a){function d(){return this.getCellView=c(this.getCellView,this),this.render=c(this.render,this),this.append=c(this.append,this),this.addOneBefore=c(this.addOneBefore,this),this.addOne=c(this.addOne,this),this.addAll=c(this.addAll,this),this.removeSubView=c(this.removeSubView,this),this.reset=c(this.reset,this),d.__super__.constructor.apply(this,arguments)}return b(d,a),d.name="TableRow",d.prototype.tagName="tr",d.prototype.cellView=FloatApp.Views.TableCell,d.prototype.initialize=function(){var a=this;return this.cells={},this.model=this.options.model,this.model&&this.bindTo(this.model,"remove",this.close),this.bindTo(this.options.cashflow_periods,"reset",this.reset),this.bindTo(this.options.cashflow_periods,"add",function(b){var c,d,e;return d=a.options.cashflow_periods,e=d.at(d.indexOf(b)+1),c=e&&a.cells[e.cid],c?a.addOneBefore(b,$(c.el)):a.addOne(b)})},d.prototype.reset=function(a){var b,c,d;d=this.cells;for(b in d)c=d[b],this.removeSubView(b);return this.addAll(a)},d.prototype.removeSubView=function(a){return this.cells[a].close(),delete this.cells[a]},d.prototype.addAll=function(a){return a.each(this.addOne)},d.prototype.addOne=function(a){return this.append(this.getCellView(a).render().el)},d.prototype.addOneBefore=function(a,b){return $(this.getCellView(a).render().el).insertBefore(b)},d.prototype.append=function(a){return $(this.el).append(a)},d.prototype.render=function(){return this.renderStartOfRow&&this.renderStartOfRow(),this.addAll(this.options.cashflow_periods),this.onRender&&this.onRender(),this},d.prototype.getCellView=function(a){var b;return b=new this.cellView(this.cellViewVars(a)),this.cells[a.cid]=b},d}(FloatApp.Views.BaseView)}.call(this),function(){}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e
(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).ImportedData||(a.ImportedData={}),FloatApp.Views.ImportedData.IndexRowView=function(a){function c(){return this.addDatePickers=b(this.addDatePickers,this),this.showSpinnerComplete=b(this.showSpinnerComplete,this),this.showSpinnerActive=b(this.showSpinnerActive,this),this.updateProjectSelect=b(this.updateProjectSelect,this),this.updateCashflowSetSelect=b(this.updateCashflowSetSelect,this),this.setProjectSelect=b(this.setProjectSelect,this),this.setCashflowSetSelect=b(this.setCashflowSetSelect,this),this.updateProject=b(this.updateProject,this),this.updateCashflowSet=b(this.updateCashflowSet,this),this.updateTextField=b(this.updateTextField,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="IndexRowView",c.prototype.template=null,c.prototype.events={"click .destroy":"destroy","change select[name=cashflow_set]":"updateCashflowSet","change select[name=project]":"updateProject","change input[type=text]":"updateTextField"},c.prototype.tagName="tr",c.prototype.initialize=function(){return this.bindTo(this.model,"change:cashflow_set",this.setCashflowSetSelect),this.bindTo(this.model,"change:project",this.setProjectSelect)},c.prototype.destroy=function(a){return a.preventDefault(),a.stopPropagation(),this.model.destroy(),this.remove(),!1},c.prototype.updateTextField=function(a){var b,c,d;return b=$(a.target),d=b.val(),c={},c[b.attr("name")]=d,this.showSpinnerActive(),this.model.save(c,{success:this.showSpinnerComplete})},c.prototype.updateCashflowSet=function(a){var b;return b=$(a.target).val(),this.model.set({cashflow_set:b}),this.showSpinnerActive(),this.model.save(null,{success:this.showSpinnerComplete})},c.prototype.updateProject=function(a){var b;return b=$(a.target).val(),this.model.set({project:b}),this.showSpinnerActive(),this.model.save(null,{success:this.showSpinnerComplete})},c.prototype.setCashflowSetSelect=function(){return this.$("select[name=cashflow_set]").val(this.model.get("cashflow_set")&&this.model.get("cashflow_set").get("id"))},c.prototype.setProjectSelect=function(){return this.$("select[name=project]").val(this.model.get("project")&&this.model.get("project").get&&this.model.get("project").get("id"))},c.prototype.updateCashflowSetSelect=function(a,b){var c;return this.model.isIncome()?c=$(a.el).clone(!0):this.model.isExpense()&&(c=$(b.el).clone(!0)),this.$("select[name=cashflow_set]").replaceWith(c),this.setCashflowSetSelect()},c.prototype.updateProjectSelect=function(a){var b;return b=$(a.el).clone(!0),this.$("select[name=project]").replaceWith(b),this.setProjectSelect()},c.prototype.serializeData=function(){return this.model.toJSON()},c.prototype.render=function(){return $(this.el).html(this.template(this.serializeData())),this.addDatePickers(),this},c.prototype.showSpinnerActive=function(){return this.$(".loading").removeClass("complete").addClass("active").css({opacity:1})},c.prototype.showSpinnerComplete=function(){return this.$(".loading").removeClass("active").addClass("complete").animate({opacity:0},{duration:3e3})},c.prototype.addDatePickers=function(){return this.$("input.datepicker").not(".hasDatepicker").datepicker({buttonImage:"/images/icons/float/cal16.png",dateFormat:"yy-mm-dd",showOn:"button",buttonImageOnly:!0,firstDay:1,zIndex:20}),this.$("input.datepicker-text").not(".hasDatepicker").datepicker({dateFormat:"yy-mm-dd",firstDay:1})},c}(FloatApp.Views.BaseView)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).ImportedData||(a.ImportedData={}),FloatApp.Views.ImportedData.IndexView=function(a){function c(){return this.updateSearchMessage=b(this.updateSearchMessage,this),this.sortPagination=b(this.sortPagination,this),this.getPrevPage=b(this.getPrevPage,this),this.getNextPage=b(this.getNextPage,this),this.search=b(this.search,this),this.render=b(this.render,this),this.refreshSelects=b(this.refreshSelects,this),this.forceRefreshSelects=b(this.forceRefreshSelects,this),this.addOne=b(this.addOne,this),this.addAll=b(this.addAll,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="IndexView",c.prototype.template=null,c.prototype.rowView=function(){return null},c.prototype.className="p-imported-data-list",c.prototype.events={"keyup input[rel=search]":"search","search input[rel=search]":"search","change input[rel=search]":"search","click a[rel=next]":"getNextPage","click a[rel=prev]":"getPrevPage"},c.prototype.initialize=function(){return this.bindTo(this.options.entries,"reset",this.addAll),this.bindTo(this.options.entries,"reset",this.sortPagination),this.bindTo(this.options.entries,"reset",this.updateSearchMessage),this.template=this.options.template||this.template,this.bindSets()},c.prototype.bindSets=function(){return this.bindTo(this.options.cashflow_sets,"add",this.forceRefreshSelects),this.bindTo(this.options.cashflow_sets,"remove",this.forceRefreshSelects)},c.prototype.selectView=null,c.prototype.rows=[],c.prototype.addAll=function(){var a,b=this;return a=$("<tbody>"),this.options.entries.each(function(c){return a.append(b.addOne(c))}),this.forceRefreshSelects(),this.$("tbody").replaceWith(a)},c.prototype.addOne=function(a){var b,c;return b=this.rowView(),c=(new b({model:a,indexView:this})).render(),this.rows.push(c),c.el},c.prototype.forceRefreshSelects=function(){return this.refreshSelects(!0)},c.prototype.refreshSelects=function(a){var b,c,d,e=this;if(a||!this.selectView)c=(new FloatApp.Views.CashflowSets.SelectView({cashflow_sets:this.options.cashflow_sets.incomes()})).render(),b=(new FloatApp.Views.CashflowSets.SelectView({cashflow_sets:this.options.cashflow_sets.expenses()})).render(),this.options.projects&&(d=(new FloatApp.Views.Projects.SelectView({projects:this.options.projects})).render());return _.each(this.rows,function(a){a.updateCashflowSetSelect(c,b);if(d)return a.updateProjectSelect(d)})},c.prototype.render=function(){var a;return this.options.payable?a="Bill":a="Invoice",$(this.el).html(this.template({next_page:this.options.entries.nextPage(),prev_page:this.options.entries.prevPage(),invoice_type:a})),this.addAll(),this},c.prototype.search=function(a){var b,c=this;return $.noBubble(a),b=function(){return c.options.entries.search($(a.currentTarget).val())},clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(b,150)},c.prototype.getNextPage=function(a){return $.noBubble(a),this.options.entries.getNextPage()},c.prototype.getPrevPage=function(a){return $.noBubble(a),this.options.entries.getPrevPage()},c.prototype.sortPagination=function(){return this.$("a[rel=next]").toggleClass("disabled",!this.options.entries.nextPage()),this.$("a[rel=prev]").toggleClass("disabled",!this.options.entries.prevPage())},c.prototype.updateSearchMessage=function(){var a,b,c;return(c=this.options.entries.queries.search)?(a=this.options.entries.queries.page,b=this.options.entries.metadata.pages,this.$(".search-message").html("Showing page "+a+" of "+b+" matching <span class='search-query'>&ldquo;"+c+"&rdquo;</span>."),this.$(".search-message").show(),this.$(".search input[rel=search]").val(c)):this.$(".search-message").hide()},c}(FloatApp.Views.BaseView)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).Cashflow||(a.Cashflow={}),FloatApp.Views.Cashflow.BaseView=function(a){function c(){return this.bindTwipsys=b(this.bindTwipsys,this),this.newItem=b(this.newItem,this),this.newScheduledPayment=b(this.newScheduledPayment,this),this.newBudget=b(this.newBudget,this),this.newProjection=b(this.newProjection,this),this.newProject=b(this.newProject,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="BaseView",c.prototype.events=function(){return{"click .new-budget":"newBudget","click .new-scheduled_payment":"newScheduledPayment","click .new-project":"newProject","click .new-projection":"newProjection"}},c.prototype.initialize=function(){return this.cashflow=this.options.model,this.cashflow.ready?this.firstRender():this.cashflow.bind("ready",this.firstRender),this.bindTwipsys()},c.prototype.newProject=function(){return this.newItem("Projects","a.new-project",{collection:this.options.model.projects})},c.prototype.newProjection=function(a){var b;return a.currentTarget?(a.stopPropagation(),b={}):b=a||{},b={},b=_.extend(b,{collection:this.options.model.projections,cashflow_sets:this.options.model.cashflow_sets,projects:this.options.model.projects,bank_accounts:this.options.model.bank_accounts}),this.newItem("Projections","a.new-projection",b)},c.prototype.newBudget=function(a){return a.stopPropagation(),this.newItem("CashflowSets","a.new-budget",{collection:this.options.model.cashflow_sets,attributes:{type:"Budget"},projects:this.options.model.projects,bank_accounts:this.options.model.bank_accounts})},c.prototype.newScheduledPayment=function(a){return a.stopPropagation(),this.newItem("CashflowSets","a.new-budget",{collection:this.options.model.cashflow_sets,attributes:{type:"ScheduledPayment"},projects:this.options.model.projects,bank_accounts:this.options.model.bank_accounts})},c.prototype.newItem=function(a,b,c){var d,e;return e=new FloatApp.Views[a].NewView(c),this.popover_manager&&this.popover_manager.addAndActivate(e),d=$(e.render().el),d.insertAfter(this.$(b)),d.find(".inner").hide(),d.show(),d.find(".inner").fadeIn()},c.prototype.bindTwipsys=function(){return this.$(".twipsy-me").twipsy({live:!0,placement:"left",inheritBackgroundColor:!0}),I},c}(FloatApp.Views.BaseView)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).AccountingCategories||(a.AccountingCategories={}),FloatApp.Views.AccountingCategories.Mapping=function(a){function c(){return this.render=b(this.render,this),this.addSection=b(this.addSection,this),this.debounceNext=b(this.debounceNext,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="Mapping",c.prototype.template=JST["backbone/templates/accounting_categories/mapping"],c.prototype.spacer_template=JST["backbone/templates/accounting_categories/_spacer"],c.prototype.events={"click .wizard-next":"debounceNext"},c.prototype.debounceNext=function(a){return this.pressedNext&&$.noBubble(a),this.pressedNext=!0},c.prototype.addSection=function(a,b){var c;return c=new FloatApp.Views.AccountingCategories.MappingSection({description:a,expense_income:b,cashflow_sets:this.options.cashflow_sets[b+"s"](),accounting_categories:this.options.accounting_categories,pubsub:this.options.pubsub}),this.$("table").append(this.spacer_template()),this.$("table").append(c.render().el)},c.prototype.render=function(){return $(this.el).html(this.template({wizard:this.options.wizard})),this.addSection("Income Rows","income"),this.addSection("Expense Rows","expense"),this},c}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).AccountingCategories||(a.AccountingCategories={}),FloatApp.Views.AccountingCategories.MappingSection=function(a){function c(){return this.newRow=b(this.newRow,this),this.bindDragDropEvents=b(this.bindDragDropEvents,this),this.render=b(this.render,this),this.addNewRow=b(this.addNewRow,this),this.addRows=b(this.addRows,this),this.addRow=b(this.addRow,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="MappingSection",c.prototype.template=JST["backbone/templates/accounting_categories/_mapping_section"],c.prototype.new_row_template=JST["backbone/templates/accounting_categories/_new_button"],c.prototype.events={"click .new-row a":"newRow"},c.prototype.tagName="tbody",c.prototype.addRow=function(a){var b,c;return c=new FloatApp.Views.AccountingCategories.Show({model:a,pubsub:this.options.pubsub}),b=this.$("tr.new-row"),this.$("tr.misc").length&&(b=this.$("tr.misc")),$(c.render().el).insertBefore(b)},c.prototype.addRows=function(){var a=this;return this.options.cashflow_sets.each(function(b){return a.addRow(b)})},c.prototype.addNewRow=function(){return $(this.el).append(this.new_row_template({expense_income:this.options.expense_income}))},c.prototype.render=function(){return $(this.el).html(this.template({description:this.options.description})),this.addNewRow(),this.addRows(),this.bindDragDropEvents(),$(this.el).addClass(this.options.expense_income),this},c.prototype.bindDragDropEvents=function(){var a,b,c;return b=this.options.cashflow_sets,a=this.options.accounting_categories,c=this.options.pubsub,$(this.el).bind("drop",function(b,d){var e,f,g,h,i;return f=d.draggable,e=$(b.target),g=e.data("cashflow_set_id"),i=f.data("category_id"),h=a.get(i),h.get("cashflow_set")&&h.get("cashflow_set").get("id")===g?h.get("cashflow_set").trigger("refresh:accounting_categories"):(h.set({cashflow_set:g}),h.save(null,{success:function(){return c.trigger("action","wizard/map_categories/drag-and-drop-category","Wizard/Mapping: Dragged and dropped category")}}))})},c.prototype.newRow=function(a){var b;return $.noBubble(a),b=new FloatApp.Models.CashflowSet({name:"New Row",expense_income:this.options.expense_income,type:"Budget"}),this.options.cashflow_sets.add(b),this.addRow(b),b.trigger("edit")},c}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).AccountingCategories||(a.AccountingCategories={}),FloatApp.Views.AccountingCategories.Show=function(a){function c(){return this.deleteRow=b(this.deleteRow,this),this.enableDropZone=b(this.enableDropZone,this),this.enableDragging=b(this.enableDragging,this),this.renderCategories=b(this.renderCategories,this),this.render=b(this.render,this),this.renderShow=b(this.renderShow,this),this.cancelEdit=b(this.cancelEdit,this),this.renderEdit=b(this.renderEdit,this),this.initialize=b(this.initialize,this),this.className=b(this.className,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="Show",c.prototype.template=JST["backbone/templates/accounting_categories/_show"],c.prototype.editFieldTemplate=JST["backbone/templates/accounting_categories/_edit"],c.prototype.events={"click td.description a.edit":"renderEdit","click a.delete":"deleteRow","click a.cancel":"cancelEdit"},c.prototype.tagName="tr",c.prototype.className=function(){if(this.options.model.get("type")==="Misc")return"misc"},c.prototype.initialize=function(){var a=this;return this.options.model.bind("saved",this.render),this.options.model.bind("saved",function(){return a.options.pubsub.trigger("edited","wizard/map_categories/edited-budget","Wizard/Mapping: Edited/created a budget")}),this.options.model.bind("changed:name",this.render),this.options.model.bind("edit",this.renderEdit),this.options.model.bind("add:accounting_categories",this.render),this.options.model.bind("remove:accounting_categories",this.render),this.options.model.bind("refresh:accounting_categories",this.render),this.options.model.bind("destroy",this.deleteRow)},c.prototype.renderEdit=function(){var a,b;return this.options.model.oldState={name:this.options.model.toJSON().name},b=new FloatApp.Views.CashflowSets.EditView({model:this.options.model,hide_mappings:!0}),a=$(b.render().el),this.$("td.description").find("div").first().append(a),a.fadeIn()},c.prototype.cancelEdit=function(){return this.options.model.oldState&&this.options.model.set(this.options.model.oldState),this.render()},c.prototype.renderShow=function(){return $(this.el).html(this.template(this.options.model.toJSON())),this.renderCategories(),this.enableDropZone(),this.enableDragging(),this},c.prototype.render=function(){return this.renderShow()},c.prototype.renderCategories=function(){var a,b=this;return this.$(".accounting-categories .accounting-category").unbind().remove(),a=this.options.model.get("accounting_categories"),a.length===0?this.$(".accounting-categories").addClass("empty-dropzone"):this.$(".accounting-categories").html(""),a.each(function(a){return b.$(".accounting-categories").append($("<span>").addClass("accounting-category label notice "+b.options.model.get("expense_income")).text(a.get("tag")).data("category_id",a.get("id"))).append(" ")})},c.prototype.enableDragging=function(){return this.$(".accounting-category").draggable({revert:"invalid"})},c.prototype.enableDropZone=function(){return this.$(".accounting-categories").data("cashflow_set_id",this.options.model.get("id")),this.$(".accounting-categories").droppable({accept:".accounting-category."+this.options.model.get("expense_income"),activeClass:"dropzone",hoverClass:"hover"})},c.prototype.deleteRow=function(){return this.options.pubsub.trigger("deleted","wizard/map_categories/deleted-budget","Wizard/Mapping: Budget"),$(this.el).remove()},c}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).BankAccountEntries||(a.BankAccountEntries={}),FloatApp.Views.BankAccountEntries.Edit=function(a){function c(){return this.renderVariables=b(this.renderVariables,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="Edit",c.prototype.template=JST["backbone/templates/bank_account_entries/form"],c.prototype.renderVariables=function(){var a;return a=this.model.toJSON(),a.is_credit_card_payment=this.model.get("cashflow_set").get("is_credit_card_row")||this.model.get("cashflow_set").get("type")==="Transfer",a},c}(FloatApp.Views.Layout.ModalEditView)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};(a=FloatApp.Views).BankAccountEntries||(a.BankAccountEntries={}),FloatApp.Views.BankAccountEntries.IndexRow=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.name="IndexRow",b.prototype.template=JST["backbone/templates/bank_account_entries/_index_row"],b}(FloatApp.Views.ImportedData.IndexRowView)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};(a=FloatApp.Views).BankAccountEntries||(a.BankAccountEntries={}),FloatApp.Views.BankAccountEntries.Index=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.name="Index",b.prototype.template=JST["backbone/templates/bank_account_entries/index"],b.prototype.rowView=function(){return FloatApp.Views.BankAccountEntries.IndexRow},b}(FloatApp.Views.ImportedData.IndexView)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).BankAccounts||(a.BankAccounts={}),FloatApp.Views.BankAccounts.Show=function(a){function c(){return this.initialize=b(this.initialize,this),this.updateClassName=b(this.updateClassName,this),this.onRender=b(this.onRender,this),this.serializeData=b(this.serializeData,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="Show",c.prototype.template=JST["backbone/templates/bank_accounts/show"],c.prototype.serializeData=function(){var a;return a=this.model.toJSON(),a.current_balance.valueOf()<0&&(a.posneg="neg"),a.current_balance.valueOf()>0&&(a.posneg="pos"),a.current_balance.valueOf()===0&&(a.posneg="zero"),a},c.prototype.tagName="li",c.prototype.onRender=function(){return $(this.el).backboneLink(this.model),this.updateClassName()},c.prototype.updateClassName=function(){return $(this.el).toggleClass("included",this.model.get("included"))},c.prototype.initialize=function(){var a=this;return this.bindTo(this.model,"change:included",function(){return a.model.save(),a.updateClassName()})},c}(FloatApp.Views.ItemView),FloatApp.Views.BankAccounts.Index=function(a){function c(){return this.appendHtml=b(this.appendHtml,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="Index",c.prototype.itemView=FloatApp.Views.BankAccounts.Show,c.prototype.template=JST["backbone/templates/bank_accounts/index"],c.prototype.initialize=function(){return $(this.el).html(this.template())},c.prototype.appendHtml=function(a,b){return this.$("ul").append(b)},c}(FloatApp.Views.CollectionView)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a},e=[].slice;(a=FloatApp.Views).Cashflow||(a.Cashflow={}),FloatApp.Views.Cashflow.BudgetsTableView=function(a){function c(){return this.setPeriods=b(this.setPeriods,this),this.render=b(this.render,this),this.renderStartEndBalance=b(this.renderStartEndBalance,this),this.renderHeaders=b(this.renderHeaders,this),this.renderSet=b(this.renderSet,this),this.renderGroup=b(this.renderGroup,this),this.renderGroups=b(this.renderGroups,this),this.modifiedCashflowEntry=b(this.modifiedCashflowEntry,this),this.firstRender=b(this.firstRender,this),this.debounceBack=b(this.debounceBack,this),this.debounceNext=b(this.debounceNext,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="BudgetsTableView",c.prototype.template=JST["backbone/templates/cashflow/budget"],c.prototype.events=function(){return _.extend(c.__super__.events.call(this),{"change select[name=view_month]":"changeViewMonth","change tr.parent td.include input[type=checkbox]":"toggleInclusionOfGroup","click .wizard-back":"debounceBack","click .wizard-next":"debounceNext"})},c.prototype.initialize=function(){return c.__super__.initialize.call(this),this.popover_manager=new FloatApp.Manager("popover")},c.prototype.debounceNext=function(a){return this.pressedNext&&$.noBubble(a),this.pressedNext=!0},c.prototype.debounceBack=function(a){return this.pressedBack&&$.noBubble(a),this.pressedBack=!0},c.prototype.firstRender=function(){return this.cashflow.bind("updated:view_range",this.render),this.cashflow.bind("updated:cashflow",this.render),this.cashflow.visual_groups.bindMultiple("add change destroy",this.render),this.cashflow.cashflow_sets.bindMultiple("add change:visual_group destroy",this.render),this.cashflow.cashflow_entries.bind("saved",this.modifiedCashflowEntry),this.render()},c.prototype.modifiedCashflowEntry=function(a){var b=this;if(a.get("modify_future_events"))return this.cashflow.cashflow_entries.fetch({success:function(){return b.cashflow.trigger("updated:cashflow")}})},c.prototype.renderGroups=function(a,b,c,d){var e,f,g,h,i,j,k,l,m;if(b.name!=="null"){this.renderGroup(a,b,c,d),j=b.children,l=[];for(f=0,h=j.length;f<h;f++)e=j[f],e instanceof FloatApp.Models.CashflowGroup?l.push(this.renderGroups(a,e,b,d)):l.push(this.renderSet(a,e,b.name));return l}k=b.children,m=[];for(g=0,i=k.length;g<i;g++)e=k[g],m.push(this.renderSet(a,e,c.name));return m},c.prototype.renderGroup=function(a,b,c,d){var e,f,g,h,i,j,k,l;h=$("<tr>"),j=this.cashflow.visual_groups.get(b.name),g=j&&j.get("name")||b.name,g==="income"&&(g="Income"),g==="expense"&&(g="Expenditure"),h.append($("<td>").addClass("description").text(g)),l=b.periodTotals(this.options.period,this.options.periods),k=function(a,b){var c;return c=$("<td>").text(b.format(d)).addClass("period money"),a<_.date().beginningOfMonth().valueOf()&&c.addClass("historical-month"),h.append(c)};for(f in l)i=l[f],k(f,i);return j?(e=$("<td>").addClass("include").html("<input type='checkbox' value='"+j.id+"'>"),_.all(b.children,function(a){return a.isIncluded()})&&e.find("input[type='checkbox']").attr("checked",!0),h.append(e)):h.append($("<td>")),h.data("id",b.name),h.attr("id","node-"+b.name),c&&h.addClass("child-of-node-"+c.name),a.append(h)},c.prototype.renderSet=function(a,b,c){var d;return d=new FloatApp.Views.CashflowSets.BudgetEditView({model:b,period:this.options.period,periods:this.options.periods,cashflow_view:this,parentNode:c,pubsub:this.options.pubsub}),this.popover_manager.add(d),d.bind("edit:invoice",this.editInvoice),d.bind("edit:bank_account_entry",this.editBankAccountEntry),d.bind("edit:projection",this.editProjection),d.bind("edit:cashflow_entry",this.editCashflowEntry),a.append(d.render().el)},c.prototype.renderHeaders=function(){var a,b,c,d,e,f,g,h;a=$("<tr>"),b=$("<tr>"),a.append($("<th>").css({width:"20%"})),b.append($("<td>")),d=this.options.periods.length,h=this.options.periods,e=function(c){var e;return e=$("<th>").text(c.format("MMM")),c.date.getMonth()===0&&e.text(""+e.text()+" "+c.format("'YY")),c.clone().beginningOfMonth().valueOf()===_.date().beginningOfMonth().valueOf()&&e.addClass("current-month"),e.css({width:""+37/d+"%"}),a.append(e),b.append($("<td>"))};for(f=0,g=h.length;f<g;f++)c=h[f],e(c);return a.append($("<th>").css({width:"43%"}).text("Budget")),$("tbody.spacer tr").each(function(){return $(this).replaceWith(b.clone())}),this.$("thead").append(a)},c.prototype.renderStartEndBalance=function(){var a,b,c=this;return b={name:"Start balance",periodTotals:function(){var a,b,d;return a=1<=arguments.length?e.call(arguments,0):[],b=(d=c.cashflow).cumulativePeriodTotals.apply(d,a),delete b[_.last(_.keys(b))],b}},a={name:"End balance",periodTotals:function(){var a,b,d;return a=1<=arguments.length?e.call(arguments,0):[],b=(d=c.cashflow).cumulativePeriodTotals.apply(d,a),delete b[_.first(_.keys(b))],b}},this.renderGroup(this.$("tbody.start_balances"),b),this.renderGroup(this.$("tbody.end_balances"),a)},c.prototype.render=function(){var a,b;return $(this.el).html(this.template({cashflow:this.cashflow.toJSON()})),b=this.cashflow.groupedSets("Difference"),a={absolute:!0},this.renderGroups(this.$("tbody.inflow"),b.children[1],null,a),this.renderGroups(this.$("tbody.outflow"),b.children[0],null,a),this.renderGroup(this.$("tbody.summary"),b),this.renderHeaders(),(new FloatApp.Views.Cashflow.SubnavView({parentView:this,el:this.$("#subnav")})).render(),this},c.prototype.setPeriods=function(a){return this.options.periods=a,this.render()},c.prototype.changeViewMonth=function(a){var b;return b=$(a.currentTarget).val(),window.router.changeViewMonth(_.date(b))},c.prototype.toggleRow=function(a){return $(a.currentTarget).closest("tr").find(".expander").first().trigger("click")},c.prototype.toggleInclusionOfGroup=function(a){var b,c;return b=$(a.currentTarget),c=parseInt(b.val(),10),this.cashflow.cashflow_sets.chain().filter(function(a){return a.get("visual_group")===c}).each(function(a){return a.set({ignored:!b.is(":checked")}),a.save()})},c}(FloatApp.Views.Cashflow.BaseView)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).Cashflow||(a.Cashflow={}),FloatApp.Views.Cashflow.ChartView=function(a){function c(){return this.setPeriods=b(this.setPeriods,this),this.render=b(this.render,this),this.rerender=b(this.rerender,this),this.cumulativeCashFlow=b(this.cumulativeCashFlow,this),this.netCashFlow=b(this.netCashFlow,this),this.firstRender=b(this.firstRender,this),this.changeViewPeriod=b(this.changeViewPeriod,this),this.initialize=b(this.initialize,this),this.barOffset=b(this.barOffset,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="ChartView",c.prototype.template=JST["backbone/templates/cashflow/chart"],c.prototype.barOffsets={day:.5,week:3.5,month:15},c.prototype.barOffset=function(){return this.barOffsets[this.options.period]},c.prototype.initialize=function(){return this.cashflow=this.options.model,this.cashflow.ready?this.firstRender():this.cashflow.bind("ready",this.firstRender)},c.prototype.events={"change select[name=view_period]":"changeViewPeriod"},c.prototype.changeViewPeriod=function(a){var b,c;return c=$(a.currentTarget).val(),c==="day"&&(b="daily"),c==="month"&&(b="monthly"),window.router.switchPeriod(b)},c.prototype.firstRender=function(){return this.cashflow.bind("updated:view_range",this.render),this.cashflow.bind("updated:cashflow",this.render),this.render()},c.prototype.netCashFlow=function(){var a;return a=this.barOffset(),this.periodTotals=_.map(this.cashflow.periodTotals(this.options.period,this.options.periods),function(b,c){return[parseInt(c,10)+a*864e5,b.toFloat()]}),this.periodTotals},c.prototype.cumulativeCashFlow=function(){return this.cumulativePeriodTotals=_.map(this.cashflow.cumulativePeriodTotals(this.options.period,this.options.periods),function(a,b){return[parseInt(b,10),a.toFloat()]}),this.cumulativePeriodTotals},c.prototype.rerender=function(){return this.chart.series[0].setData(this.netCashFlow(),!1),this.chart.series[1].setData(this.cumulativeCashFlow(),!1),this.chart.redraw(),this.selectViewPeriod(),this.setChartExtremes()},c.prototype.chart=null,c.prototype.selectViewPeriod=function(){return this.$("select[name=view_period]").val(this.options.period)},c.prototype.setChartExtremes=function(){return this.chart.xAxis[0].setExtremes(_.first(this.cumulativePeriodTotals)[0],_.last(this.cumulativePeriodTotals)[0])},c.prototype.render=function(){var a;if(this.chart){this.rerender();return}return $(this.el).html(this.template()),this.selectViewPeriod(),a={},a.chart={renderTo:"chart_container",height:300},a.series=[{name:"Net Cash Flow",fillOpacity:.4,type:"column",data:this.netCashFlow(),shadow:!1},{name:"Bank Account Balance",fillOpacity:.2,type:"area",data:this.cumulativeCashFlow(),shadow:!1}],this.$("#"+this.options.renderTo).css({width:940,height:200}),this.chart=FloatApp.Charts.render("cashflow/longterm",a),this.setChartExtremes()},c.prototype.setPeriods=function(a){return this.options.periods=a,this.render()},c}(FloatApp.Views.BaseView)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).Cashflow||(a.Cashflow={}),FloatApp.Views.Cashflow.OverviewEntry=function(a){function c(){return this.render=b(this.render,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="OverviewEntry",c.prototype.template=JST["backbone/templates/cashflow/overview_row"],c.prototype.tagName="tr",c.prototype.render=function(){var a,b;return a=this.options.model.get("project"),a instanceof FloatApp.Models.Project&&(b=a.toJSON()),$(this.el).html(this.template({expected_on:this.options.model.hits_cashflow_on().format("D MMM"),description:this.options.model.get("description")||this.options.model.get("reference"),total:this.options.model.hits_cashflow_total().format(),project:b})),this},c}(FloatApp.Views.BaseView),FloatApp.Views.Cashflow.OverviewSection=function(a){function c(){return this.render=b(this.render,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="OverviewSection",c.prototype.template=JST["backbone/templates/cashflow/overview_section"],c.prototype.render=function(){var a=this;return $(this.el).html(this.template({invoice_type:this.options.expense_income==="income"?"Invoice":"Bill",in_out:this.options.expense_income==="income"?"in":"out",projected_total:this.options.projections.total().format(),invoiced_total:this.options.invoices.total().format(),total:this.options.projections.total().add(this.options.invoices.total()).format()})),this.options.invoices
.each(function(b){var c;return c=new FloatApp.Views.Cashflow.OverviewEntry({model:b}),a.$("tbody.invoices").append(c.render().el)}),this.options.projections.each(function(b){var c;return c=new FloatApp.Views.Cashflow.OverviewEntry({model:b}),a.$("tbody.projections").append(c.render().el)}),this},c}(FloatApp.Views.BaseView),FloatApp.Views.Cashflow.Overview=function(a){function c(){return this.render=b(this.render,this),this.endOfMonthBalance=b(this.endOfMonthBalance,this),this.firstRender=b(this.firstRender,this),this.initialize=b(this.initialize,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="Overview",c.prototype.template=JST["backbone/templates/cashflow/overview"],c.prototype.initialize=function(a){return c.__super__.initialize.call(this,a),this.cashflow=this.options.model,this.cashflow.ready?this.firstRender():this.cashflow.bind("ready",this.firstRender)},c.prototype.firstRender=function(){return this.render()},c.prototype.endOfMonthBalance=function(){var a,b,c,d;return d=[_.date().subtract({M:1}).beginningOfMonth(),_.date().endOfMonth()],c=d[0],a=d[1],b=this.cashflow.cumulativePeriodTotals("month",_.date.periodsBetween("month",c,a)),b[_.date().endOfMonth().valueOf()]},c.prototype.render=function(){var a,b;return $(this.el).html(this.template({current_balance:this.cashflow.balanceOn(_.date()).format(),end_of_month_balance:this.endOfMonthBalance().format()})),b=new FloatApp.Views.Cashflow.OverviewSection({invoices:this.cashflow.invoices.incomes(),projections:this.cashflow.projections.incomes()}),a=new FloatApp.Views.Cashflow.OverviewSection({invoices:this.cashflow.invoices.expenses(),projections:this.cashflow.projections.expenses()}),this.$("#incomes").append(b.render().el),this.$("#expenses").append(a.render().el)},c}(FloatApp.Views.BaseView)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).Cashflow||(a.Cashflow={}),FloatApp.Views.Cashflow.PipelineChart=function(a){function c(){return this.renderChart=b(this.renderChart,this),this.addPeriod=b(this.addPeriod,this),this.updatePoint=b(this.updatePoint,this),this.addPointToSeries=b(this.addPointToSeries,this),this.pointFromTotal=b(this.pointFromTotal,this),this.highlightPoint=b(this.highlightPoint,this),this.addTodayStuff=b(this.addTodayStuff,this),this.setCategories=b(this.setCategories,this),this.budgeted=b(this.budgeted,this),this.projected=b(this.projected,this),this.invoiced=b(this.invoiced,this),this.paid=b(this.paid,this),this.initialize=b(this.initialize,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="PipelineChart",c.prototype.template=JST["backbone/templates/cashflow/pipeline_chart"],c.prototype.initialize=function(){return c.__super__.initialize.call(this),this.bindTo(this.periods,"reset",this.render),this.bindTo(this.periods,"add",this.addPeriod)},c.prototype.paid=function(){return this.buildSeries(this.totals.incomeRow,"paid","middle")},c.prototype.invoiced=function(){return this.buildSeries(this.totals.incomeRow,"invoiced","middle")},c.prototype.projected=function(){return this.buildSeries(this.totals.incomeRow,"projected","middle")},c.prototype.budgeted=function(){return this.buildSeries(this.totals.incomeRow,"budget_remaining","middle")},c.prototype.setCategories=function(){var a,b,c,d=this;return a=-0.5,c=0,b=this.periods.map(function(b){var d,e;return e="MMM 'YY",d=b.periodStart(),_.date()>=d&&(c=a),a+=1,d.format(e)}),this.addTodayStuff(c),this.chart.xAxis[0].setCategories(b)},c.prototype.addTodayStuff=function(a){var b,c,d=this;return c=function(){var a,b,c,d,e;return a=_.date(),d=a.clone().beginningOfMonth().valueOf(),b=a.clone().endOfMonth().valueOf(),e=a.clone().valueOf(),c=(e-d)/(b-d)}(),this.chart.xAxis[0].addPlotBand({from:-1,to:a+c,color:"#EEEEFE"}),this.chart.xAxis[0].theTodayLine=this.chart.xAxis[0].addPlotLine({value:a+c,color:"#446",width:1,id:"todayLine"}),b=function(){var a,b;return b=!1,a=function(){var a,c,e;return a=d.chart.xAxis[0].theTodayLine.svgElem.toD,c=a[1]-15,e=a[2]-5,b&&b.destroy(),b=d.chart.renderer.text("TODAY",c,e).css({fontSize:"8px",color:"#446"}).add()}}(),this.chart.addCustomEvent("redraw",function(){return b()})},c.prototype.highlightPoint=function(a,b){return},c.prototype.pointFromTotal=function(a,b,c){var d,e,f=this;return d=b+c.cid,e=function(){if(f.chart)return f.updatePoint(d,{y:a.get(b).toFloat()})},this.bindTo(a,"change:"+b,e),this.bindTo(c,"remove",function(){return f.removePoint(d),total.unbind("change:"+b,e)}),{y:a.get(b).toFloat(),id:d}},c.prototype.addPointToSeries=function(a,b){return this.chart.get(a).addPoint(b)},c.prototype.updatePoint=function(a,b){return this.chart.get(a).update(b)},c.prototype.addPeriod=function(a){var b;return b=this.totals.getPeriod(a.periodStart()),this.addPointToSeries("paid",this.pointFromTotal(b,"paid",a,"middle")),this.addPointToSeries("invoiced",this.pointFromTotal(b,"invoiced",a,"middle")),this.addPointToSeries("projected",this.pointFromTotal(b,"projected",a,"middle")),this.setCategories()},c.prototype.renderChart=function(){var a,b;return b={},b.chart={defaultSeriesType:"column",renderTo:"chart_container_pipeline",height:300,margin:[20,20,55,80],selectionMarkerFill:"rgba(255,0,0,0.25)"},b.title={text:""},b.legend={align:"right",verticalAlign:"bottom",borderWidth:0},b.plotOptions={column:{stacking:"normal",states:{select:{color:"#9600FA",borderColor:"#9600FA"}}}},b.series=[{id:"budgeted",name:"Sales Target",fillOpacity:.1,type:"column",data:this.budgeted(),shadow:!1,color:"#d5d5d5",borderWidth:0},{id:"projected",name:"Projected",fillOpacity:.4,type:"column",data:this.projected(),shadow:!1,color:FloatApp.Colors.income.budgeted,borderWidth:0},{id:"invoiced",name:"Invoiced",fillOpacity:.4,type:"column",data:this.invoiced(),shadow:!1,color:FloatApp.Colors.income.invoiced,borderWidth:0},{id:"paid",name:"Paid",fillOpacity:.4,type:"column",data:this.paid(),shadow:!1,color:"#34ABD5",borderWidth:0}],b.xAxis={title:!1},this.$("h2").length||(a=$("<h2>Sales Pipeline</h2>"),a.insertBefore(this.$("#"+b.chart.renderTo))),this.chart=FloatApp.Charts.render("cashflow/pipeline",b),this.setCategories()},c}(FloatApp.Views.BaseChartView)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).Cashflow||(a.Cashflow={}),FloatApp.Views.Cashflow.SplitChartView=function(a){function c(){return this.renderChart=b(this.renderChart,this),this.rerenderData=b(this.rerenderData,this),this.buildCumulativeSeries=b(this.buildCumulativeSeries,this),this.cumulativeCashFlow=b(this.cumulativeCashFlow,this),this.netTransfers=b(this.netTransfers,this),this.netCashFlowOut=b(this.netCashFlowOut,this),this.netCashFlowIn=b(this.netCashFlowIn,this),this.initialize=b(this.initialize,this),this.barOffset=b(this.barOffset,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="SplitChartView",c.prototype.template=JST["backbone/templates/cashflow/chart"],c.prototype.barOffsets={day:.5,week:3.5,month:15},c.prototype.barOffset=function(){return this.barOffsets[this.options.period]},c.prototype.initialize=function(){return c.__super__.initialize.call(this),this.showTransfers=this.cashflow.cashflow_sets.transfers().length>0,this.bindTo(this.periods,"reset",this.rerenderData),this.bindTo(this.periods,"add",this.rerenderData),this.cumulativeSeriesData={}},c.prototype.netCashFlowIn=function(){return this.buildSeries(this.totals.incomeRow,"display","middle",!0)},c.prototype.netCashFlowOut=function(){return this.buildSeries(this.totals.expenseRow,"display","middle",!0)},c.prototype.netTransfers=function(){return this.buildSeries(this.totals.transfersRow,"display","middle")},c.prototype.cumulativeCashFlow=function(){return this.buildCumulativeSeries(this.totals.balanceRows)},c.prototype.buildCumulativeSeries=function(a){var b,c,d,e=this;return this.periods.length===0?[]:(b=this.periods.map(function(b){var c;return c=a.getPeriod("month",b.periodStart()),e.pointFromTotal(c,"start_balance",b,!1,!1)}),c=this.periods.last(),d=a.getPeriod("month",c.periodStart()),b.push(this.pointFromTotal(d,"end_balance",c,"end",!1)),b)},c.prototype.rerenderData=function(){return this.updateSeriesData("series-net-income",this.netCashFlowIn(),!1),this.updateSeriesData("series-net-expense",this.netCashFlowOut(),!1),this.showTransfers&&this.updateSeriesData("series-net-transfers",this.netTransfers(),!1),this.updateSeriesData("series-cumulative-balance",this.cumulativeCashFlow(),!0)},c.prototype.renderChart=function(){var a,b;return b={},b.chart={renderTo:"chart_container",height:300,margin:[20,20,55,80]},b.legend={verticalAlign:"bottom"},b.series=[{id:"series-net-income",name:"Total Cash In",fillOpacity:.4,type:"column",data:this.netCashFlowIn(),shadow:!1,color:"#0D8800",stack:1},{id:"series-net-expense",name:"Total Cash Out",fillOpacity:.4,type:"column",data:this.netCashFlowOut(),shadow:!1,color:FloatApp.Colors.expenditure.paid}],this.showTransfers&&b.series.push({id:"series-net-transfers",name:"Net Transfers",fillOpacity:.4,type:"column",data:this.netTransfers(),shadow:!1,color:"#aaa"}),b.series.push({id:"series-cumulative-balance",name:"Bank Account Balance",fillOpacity:.2,type:"area",data:this.cumulativeCashFlow(),shadow:!1,color:"#5FAFEE"}),b.xAxis={title:!1},b.float={overdraftLimit:-2e4},this.$("h2").length||(a=$("<h2>Monthly Totals &amp; Forecast</h2>"),a.insertBefore(this.$("#"+b.chart.renderTo))),this.chart=FloatApp.Charts.render("cashflow/longterm",b)},c}(FloatApp.Views.BaseChartView)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a},e=[].slice;(a=FloatApp.Views).Cashflow||(a.Cashflow={}),FloatApp.Views.Cashflow.SubnavView=function(a){function c(){return this.skipToCurrentMonth=b(this.skipToCurrentMonth,this),this.stepBackwardsOnePeriod=b(this.stepBackwardsOnePeriod,this),this.stepForwardsOnePeriod=b(this.stepForwardsOnePeriod,this),this.render=b(this.render,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="SubnavView",c.prototype.template=function(){var a;return a=1<=arguments.length?e.call(arguments,0):[],JST["backbone/templates/cashflow/subnav_"+this.selected].apply(JST,a)},c.prototype.events={"click a.forwards":"stepForwardsOnePeriod","click a.backwards":"stepBackwardsOnePeriod","click a.current_month":"skipToCurrentMonth"},c.prototype.initialize=function(){return this.selected="show"},c.prototype.render=function(){return $(this.el).html(this.template({view:this.options.parentView,cashflow:this.options.parentView.cashflow.toJSON()})),this},c.prototype.stepForwardsOnePeriod=function(a){return a.preventDefault(),window.router.forwards(1)},c.prototype.stepBackwardsOnePeriod=function(a){return a.preventDefault(),window.router.backwards(1)},c.prototype.skipToCurrentMonth=function(a){return a.preventDefault(),window.router.currentMonth()},c}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Views.Cashflow.TableHeaderCell=function(b){function d(){return this.render=a(this.render,this),this.zoom=a(this.zoom,this),this.toggleMonthZoom=a(this.toggleMonthZoom,this),this.initialize=a(this.initialize,this),this.showZoomButton=a(this.showZoomButton,this),this.hideZoomButton=a(this.hideZoomButton,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="TableHeaderCell",d.prototype.template=JST["backbone/templates/cashflow/table_header_month"],d.prototype.tagName="th",d.prototype.events={click:"toggleMonthZoom",mouseenter:"showZoomButton",mouseleave:"hideZoomButton"},d.prototype.hideZoomButton=function(){return this.$("a[rel=zoom-in], a[rel=zoom-out]").hide()},d.prototype.showZoomButton=function(){return this.zoomLevel==="narrow"?this.$("a[rel=zoom-in]").show():this.$("a[rel=zoom-out]").show()},d.prototype.zoomLevel="narrow",d.prototype.initialize=function(){var a=this;return this.bindTo(this.model,"remove",this.close),this.bindTo(this.model,"change",this.render),this.bindTo(FloatApp.PubSub,"cashflow:expand-month",function(b){return b>=a.options.model.periodStart()&&b<=a.options.model.periodEnd()&&a.zoomLevel!=="wide"?a.zoom("wide",{silent:!0}):a.zoom("narrow",{silent:!0}),a.render()}),this.bindTo(FloatApp.PubSub,"cashflow:collapse-month",function(b){if(b>=a.options.model.periodStart()&&b<=a.options.model.periodEnd())return a.zoom("narrow",{silent:!0}),a.render()})},d.prototype.toggleMonthZoom=function(){return this.zoomLevel==="narrow"?FloatApp.PubSub.trigger("cashflow:expand-month",this.options.model.periodStart()):FloatApp.PubSub.trigger("cashflow:collapse-month",this.options.model.periodStart())},d.prototype.zoom=function(a,b){var c,d;return b==null&&(b={}),_.isUndefined(b.animate)&&(b.animate=!0),c=this.options.collection.length,d=78/c,a==="wide"&&(d=d*3,b.silent||FloatApp.PubSub.trigger("cashflow:expand-month",this.options.model.periodStart())),this.zoomLevel=a,b.animate?$(this.el).animate({width:""+d+"%"}):$(this.el).css({width:""+d+"%"})},d.prototype.render=function(){var a,b,c;return b=this.options.model.periodStart(),c=b.date.getMonth()===0?b.format("MMM 'YY"):b.format("MMM"),$(this.el).html(this.template({monthName:c})),this.zoomLevel==="narrow"?($(this.el).addClass("narrow").removeClass("expanded"),$(this.el).attr("title","Click to expand")):($(this.el).addClass("expanded").removeClass("narrow"),$(this.el).attr("title","Click to collapse")),this.twipsySet?(a=$(this.el).data("twipsy").$tip,a&&a.is(":visible")&&($(this.el).twipsy("hide"),$(this.el).twipsy("show"))):this.twipsySet||(this.twipsySet=$(this.el).twipsy()),$(this.el).addClass(b.isInCurrentMonth()&&"current-month"||b.isInHistoricalMonth()&&"historical-month"),this.firstRender||(this.zoom("narrow",{silent:!0,animate:!1}),this.firstRender=!0),this},d}(FloatApp.Views.TableCell),FloatApp.Views.Cashflow.TableHeaderRow=function(b){function d(){return this.append=a(this.append,this),this.renderStartOfRow=a(this.renderStartOfRow,this),this.cellViewVars=a(this.cellViewVars,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="TableHeaderRow",d.prototype.cellView=FloatApp.Views.Cashflow.TableHeaderCell,d.prototype.cellViewVars=function(a){return{model:a,collection:this.options.cashflow_periods}},d.prototype.renderStartOfRow=function(){return $(this.el).append("<th style='width: 20%'></th><!-- months go here --><th class='include' style='width: 3%'></th>")},d.prototype.append=function(a){return $(a).insertBefore(this.$("th.include"))},d}(FloatApp.Views.TableRow)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).CashflowSets||(a.CashflowSets={}),FloatApp.Views.Cashflow.TableTotalCell=function(a){function c(){return this.serializeData=b(this.serializeData,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="TableTotalCell",c.prototype.template=function(a){return""+a.total},c.prototype.serializeData=function(){return{total:this.monthModel.get(this.options.total_to_display).format({absolute:!1,precision:2})}},c.prototype.initialize=function(){return c.__super__.initialize.call(this),this.monthModel=this.options.cashflow_totals.getPeriod("month",this.model.periodStart()),this.bindTo(this.monthModel,"change:"+this.options.total_to_display,this.render)},c}(FloatApp.Views.TableCell),FloatApp.Views.Cashflow.TableTotalRow=function(a){function c(){return this.onRender=b(this.onRender,this),this.renderStartOfRow=b(this.renderStartOfRow,this),this.cellViewVars=b(this.cellViewVars,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="TableTotalRow",c.prototype.cellView=FloatApp.Views.Cashflow.TableTotalCell,c.prototype.cellViewVars=function(a){return{model:a,cashflow_totals:this.model,total_to_display:this.options.total_to_display}},c.prototype.renderStartOfRow=function(){var a;return a={name:this.options.title||this.options.total_to_display},this.append("<td>"+a.name+"</td>")},c.prototype.onRender=function(){if(this.model.get)return $(this.el).attr("id","node-"+(this.model.get("type")||this.options.total_to_display))},c}(FloatApp.Views.TableRow)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).Cashflow||(a.Cashflow={}),FloatApp.Views.Cashflow.TableView=function(a){function c(){return this.addHeader=b(this.addHeader,this),this.addOne=b(this.addOne,this),this.addTotal=b(this.addTotal,this),this.addOrInsert=b(this.addOrInsert,this),this.render=b(this.render,this),this.navigateCashflow=b(this.navigateCashflow,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="TableView",c.prototype.template=JST["backbone/templates/cashflow/show"],c.prototype.events=function(){return _.extend(c.__super__.events.call(this),{"click #subnav .right-nav a":"navigateCashflow"})},c.prototype.navigateCashflow=function(a){var b;b=$(a.currentTarget).attr("rel"),b==="navigate:prev-month"&&($.noBubble(a),this.model.shiftRangeDown());if(b==="navigate:next-month")return $.noBubble(a),this.model.shiftRangeUp()},c.prototype.initialize=function(a){var b,c=this;return this.model=a.model,this.cashflow=this.model,this.cashflow_table=this.cashflow.totals,this.income_sets=this.model.cashflow_sets.incomes(b=!0),this.expense_sets=this.model.cashflow_sets.expenses(b=!0),this.transfer_sets=this.model.cashflow_sets.transfers(b=!0),this.showTransfers=this.transfer_sets.length>0,this.bindTo(this.income_sets,"add",function(a){return c.addOrInsert(a,c.income_sets,"tbody.inflow","node-income")}),this.bindTo(this.expense_sets,"add",function(a){return c.addOrInsert(a,c.expense_sets,"tbody.outflow","node-expense")}),this.bindTo(this.transfer_sets,"add",function(a){return c.addOrInsert(a,c.transfer_sets,"tbody.transfers","node-transfers")}),this.rows={}},c.prototype.render=function(){var a,b=this;return $(this.el).html(this.template()),a=new FloatApp.Modules.CashflowNavigation({state:"cashflow"}),this.$(".cashflow-nav").html(a.mainView.render().el),this.addHeader("thead"),this.addTotal("tbody.inflow",this.cashflow_table.incomeRow,"display","Cash In"),this.addTotal("tbody.outflow",this.cashflow_table.expenseRow,"display","Cash Out"),this.showTransfers&&this.addTotal("tbody.transfers",this.cashflow_table.transfersRow,"display","Net Transfers"),this.addTotal("tbody.summary",this.cashflow_table.differenceRow,"display","Difference"),this.addTotal("tbody.start_balances",this.cashflow_table.balanceRows,"start_balance","Starting Balance"),this.addTotal("tbody.end_balances",this.cashflow_table.balanceRows,"end_balance","Ending Balance"),this.income_sets.each(function(a){return b.addOne(a,"tbody.inflow","node-income")}),this.expense_sets.each(function(a){return b.addOne(a,"tbody.outflow","node-expense")}),this.showTransfers&&this.transfer_sets.each(function(a){return b.addOne(a,"tbody.transfers","node-transfers")}),this.$("table").treeTable({clickableNodeNames:!0,initialState:"expanded",indent:5,position:"left",width:10,persist:!0}),this},c.prototype.addOrInsert=function(a,b,c,d){var e,f;return f=b.at(b.indexOf(a)+1),e=f&&this.rows[f.cid],e?this.addOne(a,c,d,$(e.el)):this.addOne(a,c,d)},c.prototype.addTotal=function(a,b,c,d){var e;return e=new FloatApp.Views.Cashflow.TableTotalRow({cashflow_periods:this.model.periods[this.options.period+"s"],model:b,total_to_display:c,title:d}),this.$(a).append(e.render().el)},c.prototype.addOne=function(a,b,c,d){var e;return e=(new FloatApp.Views.CashflowSets.TableRow({cashflow_periods:this.model.periods[this.options.period+"s"],model:a})).render(),this.rows[a.cid]=e,$(e.el).attr("class","child-of-"+c),d?$(e.el).insertBefore(d):this.$(b).append(e.el)},c.prototype.addHeader=function(a){var b;return b=new FloatApp.Views.Cashflow.TableHeaderRow({cashflow_periods:this.model.periods[this.options.period+"s"]}),this.$(a).append(b.render().el)},c}(FloatApp.Views.Cashflow.BaseView)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).CashflowEntries||(a.CashflowEntries={}),FloatApp.Views.CashflowEntries.Edit=function(a){function c(){return this.renderDayPicker=b(this.renderDayPicker,this),this.afterRender=b(this.afterRender,this),this.renderVariables=b(this.renderVariables,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="Edit",c.prototype.template=JST["backbone/templates/cashflow_entries/edit_form"],c.prototype.renderVariables=function(){return _.extend(this.model.toJSON(),{cashflow_set:this.model.get("cashflow_set")&&this.model.get("cashflow_set").toJSON()})},c.prototype.afterRender=function(){return this.renderDayPicker()},c.prototype.renderDayPicker=function(){var a,b,c,d,e,f=this;c=this.model.get("dated_on").clone().endOfMonth().date.getDate(),a=$(),d=function(b){return a=a.add($("<option>").text(b).val(b))};for(b=e=1;1<=c?e<=c:e>=c;b=1<=c?++e:--e)d(b);return this.$("select[name=day]").append(a),this.$("select[name=day]").val(this.model.get("dated_on").date.getDate()),$("<span>").text(this.model.get("dated_on").format("MMM 'YY")).insertAfter(this.$("select[name=day]"))},c}(FloatApp.Views.Layout.ModalEditView)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};(a=FloatApp.Views).CashflowEntries||(a.CashflowEntries={}),FloatApp.Views.CashflowEntries.New=function(a){function b(a){var c=this;b.__super__.constructor.call(this,a),this.model=new this.collection.model,this.model.bind("change:errors",function(){return c.render()})}return c(b,a),b.name="New",b.prototype.template=JST["backbone/templates/cashflow_entries/new"],b.prototype.events={"submit #new-cashflow_entry":"save"},b.prototype.save=function(a){var b=this;return a.preventDefault(),a.stopPropagation(),this.model.unset("errors"),this.collection.create(this.model.toJSON(),{success:function(a){return b.model=a,window.location.hash="/"+b.model.id},error:function(a,c){return b.model.set({errors:$.parseJSON(c.responseText)})}})},b.prototype.render=function(){return $(this.el).html(this.template(this.model.toJSON())),this.$("form").backboneLink(this.model),this},b}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a},e=[].slice;(a=FloatApp.Views).CashflowSets||(a.CashflowSets={}),FloatApp.Views.CashflowSets.BudgetEditView=function(a){function c(){return this.editCashflowEntry=b(this.editCashflowEntry,this),this.editProjection=b(this.editProjection,this),this.editBankAccountEntry=b(this.editBankAccountEntry,this),this.editInvoice=b(this.editInvoice,this),this.editSet=b(this.editSet,this),this.activatePopover=b(this.activatePopover,this),this.isCellActive=b(this.isCellActive,this),this.clickPeriod=b(this.clickPeriod,this),this.updateIgnored=b(this.updateIgnored,this),this.deactivate=b(this.deactivate,this),this.addClasses=b(this.addClasses,this),this.render=b(this.render,this),this.budgetValue=b(this.budgetValue,this),this.showSave=b(this.showSave,this),this.renderPeriods=b(this.renderPeriods,this),this.saveBudget=b(this.saveBudget,this),this.editBudget=b(this.editBudget,this),this.saved=b(this.saved,this),this.deleteBudget=b(this.deleteBudget,this),this.popover_template=b(this.popover_template,this),this.show_template=b(this.show_template,this),this.edit_template=b(this.edit_template,this),this.findTemplate=b(this.findTemplate,this),this.templateRoot=b(this.templateRoot,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="BudgetEditView",c.prototype.defaultTemplateRoot="backbone/templates/cashflow_sets/",c.prototype.templateRoot=function(){return this.options.model.isBudget()?this.defaultTemplateRoot+"budgets/":this.options.model.isScheduledPayment()?this.defaultTemplateRoot+"scheduled_payments/":this.options.model.isMisc()?this.defaultTemplateRoot+"misc/":this.defaultTemplateRoot},c.prototype.findTemplate=function(a){return JST[this.templateRoot()+a]||JST[this.defaultTemplateRoot+a]},c.prototype.edit_template=function(){var a;return a=1<=arguments.length?e.call(arguments,0):[],this.findTemplate("budget_forecast_edit").apply(null,a)},c.prototype.show_template=function(){var a;return a=1<=arguments.length?e.call(arguments,0):[],this.findTemplate("budget_forecast_show").apply(null,a)},c.prototype.popover_template=function(){var a;return a=1<=arguments.length?e.call(arguments,0):[],this.findTemplate("month_popover").apply(null,a)},c.prototype.tagName="tr",c.prototype.className="active cashflow_set",c.prototype.events={"click td.period":"clickPeriod","click input.included":"updateIgnored","click .budgeted a":"editCashflowEntry","click .forecast a[rel=destroy]":"deleteBudget","click .scheduled_payments a":"editCashflowEntry","click .invoices a":"editInvoice","click .bank_account_entries a":"editBankAccountEntry","click .projections a":"editProjection","click a.edit":"editSet","click button.edit":"editBudget","click button.save":"saveBudget"},c.prototype.deleteBudget=function(a){return $.noBubble(a),this.options.model.destroy(),this.render()},c.prototype.saved=function(){return this.editing=!1,this.render()},c.prototype.editBudget=function(){return this.editing=!0,this.options.pubsub.trigger("clicked","wizard/setup_budgets/edit-budget","Wizard/Budgets: clicked edit budget"),this.render()},c.prototype.saveBudget=function(){var a,b,c=this;return b=this.$(".forecast input").val(),a=this.options.model.get("cashflow_entries").first(),a.set({total:b,modify_future_events:"future"}),a.save(null,{success:function(){return c.options.model.trigger("saved"),c.options.pubsub.trigger("created","wizard/setup_budgets/set-budget","Wizard/Budgets: setup budget")}})},c.prototype.initialize=function(){return this.options.model.get("bank_account_entries").bind("change",this.render),this.options.model.get("invoices").bind("change",this.render),this.options.model.get("cashflow_entries").bind("change",this.render),this.options.model.bind("saved",this.saved)},c.prototype.renderPeriods=function(){var a=this;return _.each(this.options.model.periodTotals(this.options.period,this.options.periods),function(b,c){var d,e;return e=$('<div class="table-cell-wrapper">').text(b.format({absolute:!0})),d=$("<td>"),d.append(e).addClass("period money"),c<_.date().beginningOfMonth().valueOf()&&d.addClass("historical-month"),d.data("period",a.options.period),d.data("date",c),d.insertBefore(a.$("td.forecast"))})},c.prototype.showSave=function(){return this.$("button.save").show()},c.prototype.budgetValue=function(){var a;return a=this.options.model.get("cashflow_entries").first(),a&&a.get("total")||_.decimal("9999")},c.prototype.render=function(){var a,b;return this.editing=this.editing||this.budgetValue().toFloat()===0,this.options.model.get("cashflow_entries").first()&&(a=this.budgetValue().format({absolute:!0,precision:0})),b=this.editing?this.edit_template:this.show_template,$(this.el).html(b({set:this.model.toJSON(),budget_total:a})),$(this.el).data("id",this.options.model.get("id")),this.options.model.isExpense()&&$(this.el).addClass("expense"),this.options.model.isIncome()&&$(this.el).addClass("income"),this.renderPeriods(),this.addClasses(),this},c.prototype.addClasses=function(){var a;return a=[],a.push("child-of-node-"+this.options.parentNode),this.model.isBudget()&&a.push("budget"),this.model.isScheduledPayment()&&a.push("scheduled_payment"),this.model.get("ignored")&&a.push("ignored"),$(this.el).addClass(a.join(" "))},c.prototype.deactivate=function(){return this.$(".popover").remove(),this.$("td.active").removeClass("active")},c.prototype.updateIgnored=function(a){return this.model.set({ignored:!$(a.currentTarget).is(":checked")}),this.model.save()},c.prototype.clickPeriod=function(a){var b,c;b=$(a.currentTarget),c=this.isCellActive(b),this.deactivate();if(!c)return this.activatePopover($(a.currentTarget))},c.prototype.isCellActive=function(a){return a.hasClass("active")},c.prototype.activatePopover=function(a){var b,c;return c=new FloatApp.Views.CashflowSets.MonthPopover({model:this.options.model,period:a.data("period"),date:_.date(parseInt(a.data("date"),10)),hide_budget_bars:!0,uneditable:!0,pubsub:this.options.pubsub}),b=$(c.render().el),a.addClass("active"),a.find("div").first().append(b),b.show(),b.find(".budget-bar div").twipsy({placement:"right"})},c.prototype.editSet=function(a){var b,c;return a.stopPropagation(),a.preventDefault(),c=new FloatApp.Views.CashflowSets.EditView({model:this.options.model,visual_groups:this.options.cashflow_view.model.visual_groups}),b=$(c.render().el),$(a.currentTarget).closest("div").append(b),b.fadeIn()},c.prototype.editInvoice=function(a){var b,c;return a.stopPropagation(),a.preventDefault(),b=$(a.currentTarget).attr("href").split("/")[1],c=this.options.model.get("invoices").get(b),this.trigger("edit:invoice",c)},c.prototype.editBankAccountEntry=function(a){var b,c;return a.stopPropagation(),a.preventDefault(),c=$(a.currentTarget).attr("href").split("/")[1],b=this.options.model.get("bank_account_entries").get(c),this.trigger("edit:bank_account_entry",b)},c.prototype.editProjection=function(a){var b,c;return a.stopPropagation(),a.preventDefault(),b=$(a.currentTarget).attr("href").split("/")[1],c=this.options.model.get("projections").get(b),this.trigger("edit:projection",c)},c.prototype.editCashflowEntry=function(a){var b,c;return a.stopPropagation(),a.preventDefault(),c=$(a.currentTarget).attr("href").split("/")[1],b=this.options.model.get("cashflow_entries").get(c),this.trigger("edit:cashflow_entry",b)},c}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).CashflowSets||(a.CashflowSets={}),FloatApp.Views.CashflowSets.EditView=function(a){function c(){return this.renderVariables=b(this.renderVariables,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="EditView",c.prototype.template=JST["backbone/templates/cashflow_sets/edit"],c.prototype.className="popover below cashflow-set-edit",c.prototype.showBackdrop=!1,c.prototype.renderVariables=function(){return _.extend({},this.model.toJSON(),{hide_mappings:this.options.hide_mappings})},c}(FloatApp.Views.Layout.ModalEditView)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a},e=[].slice;(a=FloatApp.Views).CashflowSets||(a.CashflowSets={}),FloatApp.Views.CashflowSets.MonthPopover=function(a){function c(){return this.$el=b(this.$el,this),this.renderEntriesList=b(this.renderEntriesList,this),this.renderBudgetBars=b(this.renderBudgetBars,this),this.find_vat_return=b(this.find_vat_return,this),this.render=b(this.render,this),this.updateBudget=b(this.updateBudget,this),this.clickSave=b(this.clickSave,this),this.clickCancel=b(this.clickCancel,this),this.clickEdit=b(this.clickEdit,this),this.catchClick=b(this.catchClick,this),this.editBankAccountEntry=b(this.editBankAccountEntry,this),this
.editProjection=b(this.editProjection,this),this.editInvoice=b(this.editInvoice,this),this.close=b(this.close,this),this.open=b(this.open,this),this.className=b(this.className,this),this.entriesListTemplate=b(this.entriesListTemplate,this),this.budgetBarTemplate=b(this.budgetBarTemplate,this),this.template=b(this.template,this),this.findTemplate=b(this.findTemplate,this),this.templateRoot=b(this.templateRoot,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="MonthPopover",c.prototype.defaultTemplateRoot="backbone/templates/cashflow_sets/",c.prototype.templateRoot=function(){return this.options.model.cashflow_set.isBudget()?this.defaultTemplateRoot+"budgets/":this.options.model.cashflow_set.isScheduledPayment()?this.defaultTemplateRoot+"scheduled_payments/":this.options.model.cashflow_set.isTransfer()?this.defaultTemplateRoot+"transfer/":this.options.model.cashflow_set.isVatRow()?this.defaultTemplateRoot+"vat_row/":this.options.model.cashflow_set.isMisc()?this.defaultTemplateRoot+"misc/":this.defaultTemplateRoot},c.prototype.findTemplate=function(a){return JST[this.templateRoot()+a]||JST[this.defaultTemplateRoot+a]},c.prototype.template=function(){var a;return a=1<=arguments.length?e.call(arguments,0):[],this.findTemplate("month_popover").apply(null,a)},c.prototype.budgetBarTemplate=function(){var a;return a=1<=arguments.length?e.call(arguments,0):[],this.findTemplate("budget_bars").apply(null,a)},c.prototype.entriesListTemplate=function(){var a;return a=1<=arguments.length?e.call(arguments,0):[],this.findTemplate("entries_list").apply(null,a)},c.prototype.className=function(){var a;return a="popover below period-popover",this.options.model.cashflow_set.isVatRow()&&(a+=" popover-vatreturn"),a},c.prototype.events={click:"catchClick","click .edit":"clickEdit","click .cancel":"clickCancel","click .save":"clickSave","click a[rel=edit-invoice]":"editInvoice","click a[rel=edit-projection]":"editProjection","click a[rel=edit-bank_account_entry]":"editBankAccountEntry","click .close":"close"},c.prototype.open=function(a){var b=this;return a==null&&(a=!0),FloatApp.PubSub.trigger("popover:opened",this),this.bindTo(FloatApp.PubSub,"popover:opened",function(){return b.close()}),a?this.$el().fadeIn():this.$el().show()},c.prototype.close=function(a){var b=this;return a==null&&(a=!0),FloatApp.PubSub.trigger("popover:closed",this),this.trigger("popover:closed",this),a?this.$el().fadeOut(function(){return b.constructor.__super__.close.apply(b)}):c.__super__.close.apply(this,arguments)},c.prototype.editInvoice=function(a){var b;return $.noBubble(a),b=this.options.model.invoices.get(_.last($(a.currentTarget).attr("href").split("/"))),FloatApp.PubSub.trigger("modal:edit","invoice",b)},c.prototype.editProjection=function(a){var b;return $.noBubble(a),b=this.options.model.projections.get(_.last($(a.currentTarget).attr("href").split("/"))),b.get("vat_return")?FloatApp.PubSub.trigger("modal:edit","vat_return",b.get("vat_return")):FloatApp.PubSub.trigger("modal:edit","projection",b)},c.prototype.editBankAccountEntry=function(a){var b;return $.noBubble(a),b=this.options.model.bank_account_entries.get(_.last($(a.currentTarget).attr("href").split("/"))),FloatApp.PubSub.trigger("modal:edit","bank_account_entry",b)},c.prototype.catchClick=function(a){return a.stopPropagation()},c.prototype.budgetBarPercentages=function(a,b,c,d){var e,f;return f=_.map([a,b,c,d],function(a){return Math.abs(a.toFloat())}),a=f[0],b=f[1],c=f[2],d=f[3],e=_.max([a+b+c,d]),e===0?{paid:0,invoiced:0,projected:0,budgeted:100}:{paid:Math.floor(1e3*(a/e))/10,invoiced:Math.floor(1e3*(b/e))/10,projected:Math.floor(1e3*(c/e))/10,budgeted:Math.floor(1e3)/10}},c.prototype.clickEdit=function(a){return $.noBubble(a),this.editing=!0,this.render()},c.prototype.clickCancel=function(a){return $.noBubble(a),this.editing=!1,this.render()},c.prototype.clickSave=function(a){return $.noBubble(a),this.editing=!1,this.updateBudget(),this.render()},c.prototype.updateBudget=function(){var a,b=this;return a=this.options.model.budget_entries.first(),this.$(".budget-total").backboneParseForm(a),a.save(null,{success:function(){return a.get("modify_future_events")?FloatApp.PubSub.trigger("edited","cashflow/cashflow-set/"+b.options.period+"/onwards","budget and future months"):FloatApp.PubSub.trigger("edited","cashflow/cashflow-set/"+b.options.period+"/","budget for single month"),a.trigger("saved",a)}})},c.prototype.render=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;return d=this.options.model.budget_entries,m=this.options.model.projections,c=this.options.model.bank_account_entries,h=this.options.model.invoices,q=this.options.model.totals(),f=q.budgeted,l=q.projected,g=q.invoiced,k=q.paid,b=q.actual,i=Math.abs(b.toFloat())>Math.abs(f.toFloat()),j=f.subtract(b),e=this.options.model.cashflow_set.isIncome()?"Target":"Budget",this.editing?FloatApp.PubSub.trigger("clicked","cashflow/cashflow-set/"+this.options.period+"-popover/edit","edit on budget popover"):FloatApp.PubSub.trigger("viewed","cashflow/cashflow-set/"+this.options.period+"-popover/","budget popover"),p=this.editing?"format":"format",n={editing:this.editing,name:this.options.model.cashflow_set.get("name"),period:this.options.model.period,date:this.options.model.periodStart,expense_income:this.options.model.cashflow_set.get("expense_income"),cashflow_entries:d.sortBy(function(a){return a.hits_cashflow_on().valueOf()})||[],projections:m.sortBy(function(a){return a.hits_cashflow_on().valueOf()})||[],invoices:h.sortBy(function(a){return a.hits_cashflow_on().valueOf()+a.invoiceStatusSortOrder()})||[],bank_account_entries:c.sortBy(function(a){return a.hits_cashflow_on().valueOf()})||[],hide_budget_bars:this.options.hide_budget_bars||!1,uneditable:this.options.uneditable||!1,budgeted_total:f,projected_total:l,invoiced_total:g,paid_total:k,allocated_total:b,overbudget:i,budget_bars:this.budgetBarPercentages(k,g,l,f),budget_type:e,overbudget_by:j,vat_return:this.find_vat_return()},o=this.template(n),a=$(o),$(this.el).html(a),this.options.model.cashflow_set.isBudget()&&this.renderBudgetBars(n),this.renderEntriesList(n),this},c.prototype.find_vat_return=function(){var a;if(this.options.model.cashflow_set.isVatRow()){a=this.options.model.projections.find(function(a){return a.get("vat_return")});if(a)return a.get("vat_return")}},c.prototype.renderBudgetBars=function(a){var b;return b=this.budgetBarTemplate(a),b=b.replace(/[\r\n]+/g,"").replace(/>\s+</g,"><").replace(/\s+/g," "),$(this.el).find(".budget").append(b)},c.prototype.renderEntriesList=function(a){var b;return b=this.entriesListTemplate(a),b=b.replace(/[\r\n]+/g,"").replace(/>\s+</g,"><").replace(/\s+/g," "),$(this.el).find(".content").append(b)},c.prototype.$el=function(){return $(this.el)},c}(FloatApp.Views.BaseView)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a},e=[].slice;(a=FloatApp.Views).CashflowSets||(a.CashflowSets={}),FloatApp.Views.CashflowSets.NewView=function(a){function c(a){this.bindFrequencyAdvanced=b(this.bindFrequencyAdvanced,this),this.template=b(this.template,this),c.__super__.constructor.call(this,a),this.model.bind("change:type",this.render)}return d(c,a),c.name="NewView",c.prototype.showBackdrop=!1,c.prototype.budget_template=JST["backbone/templates/cashflow_sets/budgets/new"],c.prototype.scheduled_payment_template=JST["backbone/templates/cashflow_sets/scheduled_payments/new"],c.prototype.className="popover below new-popover",c.prototype.template=function(){var a;return a=1<=arguments.length?e.call(arguments,0):[],this.budget_template.apply(this,a)},c.prototype.render=function(){var a;return a=1<=arguments.length?e.call(arguments,0):[],c.__super__.render.apply(this,a),this.bindFrequencyAdvanced(),this},c.prototype.bindFrequencyAdvanced=function(){var a,b,c,d=this;return a=this.$("form"),b=this.$("select.frequency_advanced"),c=this.model,b.bind("change",function(){var d;return d=b.val(),d==="advanced"?a.find(".advanced").show():(a.find(".advanced").hide(),c.set({frequency:d}))})},c}(FloatApp.Views.Layout.ModalNewView)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).CashflowSets||(a.CashflowSets={}),FloatApp.Views.CashflowSets.SelectView=function(a){function c(){return this.render=b(this.render,this),this.appendDefaultEntries=b(this.appendDefaultEntries,this),this.setupOptGroups=b(this.setupOptGroups,this),this.addOneBudget=b(this.addOneBudget,this),this.addOneMisc=b(this.addOneMisc,this),this.addAll=b(this.addAll,this),this.misc=b(this.misc,this),this.budgets=b(this.budgets,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="SelectView",c.prototype.template=JST["backbone/templates/cashflow_sets/select_option"],c.prototype.tagName="select",c.prototype.budgetsGroup=null,c.prototype.scheduledPaymentsGroup=null,c.prototype.initialize=function(){return this.setupOptGroups()},c.prototype.budgets=function(){return this.options.cashflow_sets.budgets_no_cc()},c.prototype.misc=function(){return this.options.cashflow_sets.misc()},c.prototype.addAll=function(){return this.misc().each(this.addOneMisc),this.budgets().each(this.addOneBudget),this.appendDefaultEntries()},c.prototype.addOneMisc=function(a){return $(this.el).prepend(this.template(a.toJSON()))},c.prototype.addOneBudget=function(a){return $(this.budgetsGroup).append(this.template(a.toJSON()))},c.prototype.setupOptGroups=function(){return this.budgetsGroup=$("<optgroup>").attr("label","Budgets")},c.prototype.appendDefaultEntries=function(){if(this.budgets().length!==0)return $(this.el).append(this.budgetsGroup)},c.prototype.render=function(){return this.addAll(),$(this.el).attr("name","cashflow_set"),this},c}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).CashflowSets||(a.CashflowSets={}),FloatApp.Views.CashflowSets.SimpleMonthPopover=function(a){function c(){return this.render=b(this.render,this),this.renderEntries=b(this.renderEntries,this),this.fadeOutAndDispose=b(this.fadeOutAndDispose,this),this.initialize=b(this.initialize,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="SimpleMonthPopover",c.prototype.template=JST["backbone/templates/cashflow_sets/simple_month_popover"],c.prototype.entriesListTemplate=JST["backbone/templates/cashflow_sets/simple_entries_list"],c.prototype.events={"click .close, .cancel":"fadeOutAndDispose"},c.prototype.initialize=function(){},c.prototype.fadeOutAndDispose=function(a){return a&&$.noBubble(a),this.trigger("deactivated"),$(this.el).fadeOut(),this.dispose()},c.prototype.className="popover below period-popover",c.prototype.renderEntries=function(){var a,b;return a=this.options.date.clone().beginningOfMonth(),b=a.clone().endOf(this.options.period),this.$(".content").html(this.entriesListTemplate({cashflow_entries:[],projections:[],invoices:this.options.model.get("invoices").betweenDates(a,b).models,bank_account_entries:this.options.model.get("bank_account_entries").betweenDates(a,b).models}))},c.prototype.render=function(){return this.options.pubsub.trigger("activate:popover"),this.bindTo(this.options.pubsub,"activate:popover",this.dispose),$(this.el).html(this.template({name:this.options.model.get("tag"),period:"month",date:this.options.date.format("MMM 'YY")})),this.renderEntries(),this},c}(FloatApp.Views.BaseView)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a},e=[].slice;(a=FloatApp.Views).CashflowSets||(a.CashflowSets={}),FloatApp.Views.CashflowSets.TableCell=function(a){function c(){return this.unhighlight=b(this.unhighlight,this),this.highlight=b(this.highlight,this),this.hidePopover=b(this.hidePopover,this),this.addPopover=b(this.addPopover,this),this.onRender=b(this.onRender,this),this.elClasses=b(this.elClasses,this),this.serializeData=b(this.serializeData,this),this.clickCell=b(this.clickCell,this),this.zoom=b(this.zoom,this),this.getTemplate=b(this.getTemplate,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="TableCell",c.prototype.monthTemplate=JST["backbone/templates/cashflow_sets/month"],c.prototype.expandedMonthTemplate=JST["backbone/templates/cashflow_sets/expanded_month"],c.prototype.zoomLevel="collapsed",c.prototype.getTemplate=function(){return this.zoomLevel==="expanded"?this.expandedMonthTemplate:this.monthTemplate},c.prototype.initialize=function(){var a=this;c.__super__.initialize.apply(this,arguments),this.monthModel=this.options.cashflow_set.getPeriod(this.model.get("period"),this.model.periodStart()),this.bindTo(this.monthModel,"remove",this.close),this.bindTo(this.monthModel,"change",this.render);if(!this.options.cashflow_set.isMisc())return this.bindTo(FloatApp.PubSub,"cashflow:expand-month",function(b){return b>=a.model.periodStart()&&b<=a.model.periodEnd()?a.zoom("expanded"):a.zoom("collapsed")}),this.bindTo(FloatApp.PubSub,"cashflow:collapse-month",function(b){if(b>=a.model.periodStart()&&b<=a.model.periodEnd())return a.zoom("collapsed")})},c.prototype.zoom=function(a){return this.zoomLevel=a,this.render()},c.prototype.events={click:"clickCell"},c.prototype.clickCell=function(){return this.showingPopover?(this.showingPopover=!1,this.hidePopover()):(this.showingPopover=!0,this.addPopover())},c.prototype.serializeData=function(){var a,b,c;return b=this.monthModel.toJSON(),c=this.oldData||{totals:{}},a=0,b.isHistorical?((b.totals.display>c.totals.display||0)&&a++,(b.totals.display<c.totals.display||0)&&a--):((b.totals.budgeted>c.totals.budgeted||0)&&a++,(b.totals.actual>c.totals.actual||0)&&a++,(b.totals.budgeted<c.totals.budgeted||0)&&a--,(b.totals.actual<c.totals.actual||0)&&a--),this.oldData=_.extend({},b),b.change=a,b.transfer_row=this.options.cashflow_set.isTransfer(),b},c.prototype.elClasses=function(a){var b;return b=[],a.isHistorical&&b.push("historical-month"),b},c.prototype.onRender=function(){var a;this.showingPopover&&(this.popover&&this.popover.dispose(),this.addPopover(!1));if(a=this.monthModel.projections.find(function(a){return a.get("vat_return")}))switch(a.get("vat_return").get("status")){case"PAID":this.$(".table-cell-wrapper").addClass("is-vatreturn is-vatreturn-paid");break;case"OVERDUE":this.$(".table-cell-wrapper").addClass("is-vatreturn is-vatreturn-overdue");break;case"DUE":this.$(".table-cell-wrapper").addClass("is-vatreturn is-vatreturn-due");break;case"CURRENT":case"FUTURE":this.$(".table-cell-wrapper").addClass("is-vatreturn is-vatreturn-upcoming")}return this.$(".change-arrow").fadeOut(5e3)},c.prototype.addPopover=function(a){var b=this;return a==null&&(a=!0),this.highlight(),this.popover=new FloatApp.Views.CashflowSets.MonthPopover({model:this.monthModel}),this.bindTo(this.popover,"popover:closed",function(){return b.showingPopover=!1,b.unhighlight()}),this.popover.render(),this.$(".table-cell-wrapper").append(this.popover.$el()),this.popover.open(a)},c.prototype.hidePopover=function(a){return a==null&&(a=!0),this.showingPopover=!1,this.unhighlight(),this.popover.close(a)},c.prototype.highlight=function(){return $(this.el).addClass("active")},c.prototype.unhighlight=function(){return $(this.el).removeClass("active")},c}(FloatApp.Views.TableCell),FloatApp.Views.CashflowSets.TableRow=function(a){function c(){return this.editSet=b(this.editSet,this),this.updateIgnored=b(this.updateIgnored,this),this.addClasses=b(this.addClasses,this),this.onRender=b(this.onRender,this),this.append=b(this.append,this),this.renderStartOfRow=b(this.renderStartOfRow,this),this.cellViewVars=b(this.cellViewVars,this),this.template=b(this.template,this),this.findTemplate=b(this.findTemplate,this),this.templateRoot=b(this.templateRoot,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="TableRow",c.prototype.defaultTemplateRoot="backbone/templates/cashflow_sets/",c.prototype.templateRoot=function(){return this.options.model.isMisc()||this.options.model.isCreditCardRow()?this.defaultTemplateRoot+"misc/":this.options.model.isTransfer()?this.defaultTemplateRoot+"transfer/":this.options.model.isBudget()?this.defaultTemplateRoot+"budgets/":this.options.model.isScheduledPayment()?this.defaultTemplateRoot+"scheduled_payments/":this.defaultTemplateRoot},c.prototype.findTemplate=function(a){return JST[this.templateRoot()+a]||JST[this.defaultTemplateRoot+a]},c.prototype.template=function(){var a;return a=1<=arguments.length?e.call(arguments,0):[],this.findTemplate("cashflow_set").apply(null,a)},c.prototype.className="active cashflow_set",c.prototype.events={"click td.description a.edit":"editSet","click input.included":"updateIgnored"},c.prototype.cellView=FloatApp.Views.CashflowSets.TableCell,c.prototype.cellViewVars=function(a){return{model:a,cashflow_set:this.model}},c.prototype.renderStartOfRow=function(){var a=this;return $(this.el).html(this.template(this.model.toJSON())),this.bindTo(this.model,"change:name",function(){return a.$("td.description a.edit").text(a.model.get("name"))})},c.prototype.append=function(a){return $(a).insertBefore(this.$("td.include"))},c.prototype.onRender=function(){return $(this.el).data("id",this.options.model.get("id")),$(this.el).attr("id","cashflow-set-"+this.options.model.get("id")),this.options.model.isExpense()&&$(this.el).addClass("expense"),this.options.model.isIncome()&&$(this.el).addClass("income"),this.addClasses()},c.prototype.addClasses=function(){var a;return a=[],a.push("child-of-node-"+this.options.parentNode),this.model.isBudget()&&a.push("budget"),this.model.isScheduledPayment()&&a.push("scheduled_payment"),this.model.get("ignored")&&a.push("ignored"),$(this.el).addClass(a.join(" "))},c.prototype.updateIgnored=function(a){return this.model.set({ignored:!$(a.currentTarget).is(":checked")}),this.model.save()},c.prototype.editSet=function(a){var b,c;return a.stopPropagation(),a.preventDefault(),c=new FloatApp.Views.CashflowSets.EditView({model:this.options.model}),b=$(c.render().el),$(a.currentTarget).closest(".table-cell-wrapper").append(b),b.fadeIn()},c}(FloatApp.Views.TableRow)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).Companies||(a.Companies={}),FloatApp.Views.Companies.Integrations=function(a){function c(){return this.showFreeagentCredentialsForm=b(this.showFreeagentCredentialsForm,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="Integrations",c.prototype.events={"click li.freeagent_credentials a.update":"showFreeagentCredentialsForm"},c.prototype.initialize=function(){return this.freeagent_modal=new FloatApp.Views.Companies.Credentials({el:this.$("#freeagent_credentials-form"),pubsub:this.options.pubsub})},c.prototype.showFreeagentCredentialsForm=function(a){return a.preventDefault(),a.stopPropagation(),this.freeagent_modal.show()},c}(Backbone.View),FloatApp.Views.Companies.Credentials=function(a){function c(){return this.formError=b(this.formError,this),this.clearErrors=b(this.clearErrors,this),this.remoteSubmit=b(this.remoteSubmit,this),this.hide=b(this.hide,this),this.show=b(this.show,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="Credentials",c.prototype.events={"submit form":"remoteSubmit","click a.cancel":"hide"},c.prototype.show=function(a){return a&&(a.preventDefault(),a.stopPropagation()),$(this.el).slideDown()},c.prototype.hide=function(a){return a&&(a.preventDefault(),a.stopPropagation()),$(this.el).slideUp(this.clearErrors)},c.prototype.remoteSubmit=function(a){var b,c,d=this;return a.preventDefault(),a.stopPropagation(),b=$(a.currentTarget),c={dataType:"json",beforeSubmit:this.clearErrors,success:function(){return d.options.pubsub.trigger("import_started"),d.options.pubsub.trigger("action","#run-freeagent-import","Ran FreeAgent Import"),d.hide()},error:this.formError},b.ajaxSubmit(c)},c.prototype.clearErrors=function(){return this.$(".alert-message").remove(),this.$(".clearfix.error span.help-inline").remove(),this.$(".clearfix.error").removeClass("error")},c.prototype.formError=function(a){var b,c,d,e,f,g;c=this.$("form"),e=JSON.parse(a.responseText),e.base&&(b=$("<div>").text(e.base[0]),b.addClass("alert-message error"),c.find(".inputs").prepend(b),delete e.base),g=[];for(f in e)d=e[f],g.push(function(a,b){var d;return d=c.find("input[name*="+a+"]"),d.parent().addClass("error"),d.parent().append($("<span>").addClass("help-inline").text(b.join(", ")))}(f,d));return g},c}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).Devise||(a.Devise={}),FloatApp.Views.Devise.NewRegistration=function(a){function c(){return this.updateMailchimpForm=b(this.updateMailchimpForm,this),this.showMailchimpSuccess=b(this.showMailchimpSuccess,this),this.switchForm=b(this.switchForm,this),this.changePackage=b(this.changePackage,this),this.states=b(this.states,this),this.moveArrow=b(this.moveArrow,this),this.showFormIfError=b(this.showFormIfError,this),this.disableInput=b(this.disableInput,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="NewRegistration",c.prototype.events={"click a":"changePackage","click input[type=submit]":"disableInput"},c.prototype.disableInput=function(a){return $(a.currentTarget).addClass("disabled loading")},c.prototype.arrowPositions={freeagent:63,xero:293,kashflow:523,other:!1},c.prototype.initialize=function(){return this.elements={dropdownForm:$("#dropdown-form"),arrow:$("#dropdown-form .arrow"),packageSelect:$("select[name=accounting_package]"),signup_form:$("#register-form"),mailchimp_form:$("#mailchimp-form"),wufoo_form:$("#wufoo-form"),mailchimp_success_form:$("#mailchimp-success-form"),mailchimp_checkboxes:$("#mailchimp-form .input-group input[type=checkbox]")},FloatApp.PubSub.bind("mailchimp-success",this.showMailchimpSuccess),this.showFormIfError()},c.prototype.showFormIfError=function(){if(this.elements.signup_form.find(".input.error")[0])return $("a[rel=freeagent]").click()},c.prototype.moveArrow=function(a){return this.arrowPositions[a]?(this.elements.arrow.fadeIn(),this.elements.arrow.animate({left:this.arrowPositions[a]})):this.elements.arrow.fadeOut()},c.prototype.states=function(a){var b,c=this;return b={freeagent:function(){return c.switchForm(c.elements.signup_form),c.moveArrow("freeagent")},xero:function(){return c.switchForm(c.elements.mailchimp_form),c.updateMailchimpForm("xero"),c.moveArrow("xero")},kashflow:function(){return c.switchForm(c.elements.mailchimp_form),c.updateMailchimpForm("kashflow"),c.moveArrow("kashflow")},other:function(){return c.switchForm(c.elements.wufoo_form),c.moveArrow("other")}},b[a]},c.prototype.changePackage=function(a){var b;return b=$(a.currentTarget),this.states(b.attr("rel"))(),this.$(".btn.active").removeClass("active"),$(a.currentTarget).addClass("active"),this.current_package=b.attr("rel"),this.elements.dropdownForm.slideDown()},c.prototype.switchForm=function(a){var b,c=this;return b=this.current_form,this.current_form=a,b?b.fadeOut(function(){return c.current_form.fadeIn()}):this.current_form.fadeIn()},c.prototype.showMailchimpSuccess=function(a){return this.switchForm(this.elements.mailchimp_success_form)},c.prototype.updateMailchimpForm=function(a){var b,c;this.elements.mailchimp_form.find(".option").hide(),this.elements.mailchimp_form.find(".option."+a).show(),b={xero:"group[1001][1]",kashflow:"group[1001][2]",quickbooks:"group[1001][4]",standalone:"group[1001][8]"},this.elements.mailchimp_checkboxes.removeAttr("checked");if(c=b[a])return this.elements.mailchimp_checkboxes.filter("[name='"+c+"']").click()},c}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=this.FloatApp.Views).Entries||(a.Entries={}),FloatApp.Views.Entries.ProjectView=function(a){function c(){return this.addDatePickers=b(this.addDatePickers,this),this.showSaveReset=b(this.showSaveReset,this),this.hideSaveReset=b(this.hideSaveReset,this),this.reset=b(this.reset,this),this.save=b(this.save,this),this["delete"]=b(this["delete"],this),this.clickEditProjection=b(this.clickEditProjection,this),this.updateIgnored=b(this.updateIgnored,this),this.notifyOfNewness=b(this.notifyOfNewness,this),this.addDescription=b(this.addDescription,this),this.renderUpdate=b(this.renderUpdate,this),this.render=b(this.render,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="ProjectView",c.prototype.template=JST["backbone/templates/entries/project"],c.prototype.events={"change input[name=included]":"updateIgnored","click .edit-projection":"clickEditProjection","click .save":"save","click .reset":"reset","click .delete a":"delete"},c.prototype.tagName="tr",c.prototype.initialize=function(){return this.model.bind("saved",this.render),this.model.bind("change",this.showSaveReset)},c.prototype.render=function(){var a;return a=this.model.toJSON(),a.project=this.model.get("project")&&this.model.get("project").toJSON(),$(this.el).html(this.template(a)),this.renderUpdate(),this.addDatePickers(),$(this.el).backboneLink(this.model),this},c.prototype.renderUpdate=function(){return this.hideSaveReset(),this.notifyOfNewness(),this.addDescription()},c.prototype.addDescription=function(){var a;return this.model.get("id")&&this.model.get("description")?a="<%= description %>":a="<input value='<%= description %>' name='description' type='text'>",this.$("td.description").html(_.template(a,{description:this.model.get("description")}))},c.prototype.notifyOfNewness=function(){return this.model.get("id")?$(this.el).removeClass("new-projection-row"):$(this.el).addClass("new-projection-row")},c.prototype.updateIgnored=function(a){return this.model.set({ignored:!$(a.currentTarget).is(":checked")})},c.prototype.clickEditProjection=function(a){return a.preventDefault(),a.stopPropagation(),this.options.cashflow_view.editProjection(this.model)},c.prototype["delete"]=function(a){if(window.confirm("Are you sure you want to delete the projection: "+this.model.get("description")))return this.model.destroy()},c.prototype.save=function(a){return a.preventDefault(),a.stopPropagation(),this.model.save(this.model.toJSON(),{success:this.renderUpdate})},c.prototype.reset=function(a){return a.preventDefault(),a.stopPropagation(),this.model.fetch({success:this.renderUpdate})},c.prototype.hideSaveReset=function(){if(this.model.get("id"))return this.$("td.save a").hide()},c.prototype.showSaveReset=function(){return this.$("td.save a").show()},c.prototype.addDatePickers=function(){return this.$("input.datepicker").not(".hasDatepicker").datepicker({buttonImage:"/images/icons/float/cal16.png",dateFormat:"yy-mm-dd",showOn:"button",buttonImageOnly:!0,firstDay:1})},c}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).FreeagentCredentials||(a.FreeagentCredentials={}),FloatApp.Views.FreeagentCredentials.Syncing=function(a){function c(){return this.syncCompleted=b(this.syncCompleted,this),this.syncRunning=b(this.syncRunning,this),this.syncOff=b(this.syncOff,this),this.showSyncComplete=b(this.showSyncComplete,this),this.showSyncRunning=b(this.showSyncRunning,this),this.syncTwipsy=b(this.syncTwipsy,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="Syncing",c.prototype.initialize=function(){return this.options.pubsub.bind("import_started",this.syncRunning),this.options.pubsub.bind("import_completed",this.syncCompleted),this.syncTwipsy()},c.prototype.syncTwipsy=function(){return this.$(".sync .icon").twipsy({placement:"right"})},c.prototype.showSyncRunning=function(){return this.$(".show-sync-running").show(),this.$(".show-sync-complete").hide()},c.prototype.showSyncComplete=function(){return this.$(".show-sync-running").hide(),this.$(".show-sync-complete").show()},c.prototype.syncOff=function(){return this.$(".sync .icon").attr("class",""),this.showSyncComplete()},c.prototype.syncRunning=function(){return this.$(".sync .icon").removeClass("sync-complete").addClass("sync-running").attr("title","Importing your FreeAgent data"),this.showSyncRunning()},c.prototype.syncCompleted=function(){return this.$(".sync .icon").removeClass("sync-running").addClass("sync-complete").attr("title","Import completed"),this.showSyncComplete()},c}(Backbone.View)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};(a=FloatApp.Views).Invoices||(a.Invoices={}),FloatApp.Views.Invoices.EditView=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.name="EditView",b.prototype.template=JST["backbone/templates/invoices/form"],b}(FloatApp.Views.Layout.ModalEditView)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};(a=FloatApp.Views).Invoices||(a.Invoices={}),FloatApp.Views.Invoices.IndexRow=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.name="IndexRow",b.prototype.template=JST["backbone/templates/invoices/_index_row"],b.prototype.serializeData=function(){var a;return a=this.model.toJSON(),a.is_expected=this.model.isExpected(),a},b}(FloatApp.Views.ImportedData.IndexRowView)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};(a=FloatApp.Views).Invoices||(a.Invoices={}),FloatApp.Views.Invoices.Index=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.name="Index",b.prototype.template=JST["backbone/templates/invoices/index"],b.prototype.rowView=function(){return FloatApp.Views.Invoices.IndexRow},b}(FloatApp.Views.ImportedData.IndexView)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=this.FloatApp.Views).Invoices||(a.Invoices={}),FloatApp.Views.Invoices.ProjectView=function(a){function c(){return this.addDatePickers=b(this.addDatePickers,this),this.showSaveReset=b(this.showSaveReset,this),this.hideSaveReset=b(this.hideSaveReset,this),this.reset=b(this.reset,this),this.save=b(this.save,this),this["delete"]=b(this["delete"],this),this.clickEditProjection=b(this.clickEditProjection,this),this.updateIgnored=b(this.updateIgnored,this),this.notifyOfNewness=b(this.notifyOfNewness,this),this.renderUpdate=b(this.renderUpdate,this),this.render=b(this.render,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="ProjectView",c.prototype.template=JST["backbone/templates/invoices/project"],c.prototype.events={"change input[name=included]":"updateIgnored","click .edit-projection":"clickEditProjection","click .save":"save","click .reset":"reset","click .delete a":"delete"},c.prototype.tagName="tr",c.prototype.initialize=function(){return this.model.bind("saved",this.render),this.model
.bind("change",this.showSaveReset)},c.prototype.render=function(){var a;return a=this.model.toJSON(),a.project=this.model.get("project")&&this.model.get("project").toJSON(),$(this.el).html(this.template(a)),this.renderUpdate(),this.addDatePickers(),$(this.el).backboneLink(this.model),this},c.prototype.renderUpdate=function(){return this.hideSaveReset(),this.notifyOfNewness()},c.prototype.notifyOfNewness=function(){return this.model.get("id")?$(this.el).removeClass("new-projection-row"):$(this.el).addClass("new-projection-row")},c.prototype.updateIgnored=function(a){return this.model.set({ignored:!$(a.currentTarget).is(":checked")})},c.prototype.clickEditProjection=function(a){return a.preventDefault(),a.stopPropagation(),this.options.cashflow_view.editProjection(this.model)},c.prototype["delete"]=function(a){if(window.confirm("Are you sure you want to delete the projection: "+this.model.get("description")))return this.model.destroy()},c.prototype.save=function(a){return a.preventDefault(),a.stopPropagation(),this.model.save(this.model.toJSON(),{success:this.renderUpdate})},c.prototype.reset=function(a){return a.preventDefault(),a.stopPropagation(),this.model.fetch({success:this.renderUpdate})},c.prototype.hideSaveReset=function(){if(this.model.get("id"))return this.$("td.save a").hide()},c.prototype.showSaveReset=function(){return this.$("td.save a").show()},c.prototype.addDatePickers=function(){return this.$("input.datepicker").not(".hasDatepicker").datepicker({buttonImage:"/images/icons/float/cal16.png",dateFormat:"yy-mm-dd",showOn:"button",buttonImageOnly:!0,firstDay:1})},c}(Backbone.View)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};(a=FloatApp.Views).Projections||(a.Projections={}),FloatApp.Views.Projections.EditView=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.name="EditView",b.prototype.template=JST["backbone/templates/projections/edit_form"],b}(FloatApp.Views.Layout.ModalEditView)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};(a=FloatApp.Views).Projections||(a.Projections={}),FloatApp.Views.Projections.NewView=function(a){function b(a){b.__super__.constructor.call(this,a),this.options.dynamic=!0}return c(b,a),b.name="NewView",b.prototype.showBackdrop=!1,b.prototype.template=JST["backbone/templates/projections/form"],b.prototype.className="popover below new-popover",b}(FloatApp.Views.Layout.ModalNewView)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).Projects||(a.Projects={}),FloatApp.Views.Projects.EditView=function(a){function c(){return this.addColors=b(this.addColors,this),this.afterRender=b(this.afterRender,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="EditView",c.prototype.template=JST["backbone/templates/projects/edit"],c.prototype.afterRender=function(){return this.addColors()},c.prototype.addColors=function(){var a;return a=$("<div>"),_.each(this.model.constructor.colors,function(b){return a.append($("<label>").append($("<input>").attr("type","radio").attr("value",b).attr("name","color")).append($("<span>").css({backgroundColor:b})))}),this.$(".colors").html(a.html())},c}(FloatApp.Views.Layout.ModalEditView)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).Projects||(a.Projects={}),FloatApp.Views.Projects.InOutList=function(a){function c(){return this.onRender=b(this.onRender,this),this.fillInRender=b(this.fillInRender,this),this.serializeData=b(this.serializeData,this),this.showNewProjectionView=b(this.showNewProjectionView,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="InOutList",c.prototype.template=JST["backbone/templates/projects/inout_list"],c.prototype.initialize=function(){return this.bindToMultiple(this.options.invoices,"change:expected_on change:ignored add remove reset",this.fillInRender),this.bindToMultiple(this.options.projections,"change:total change:expected_on change:ignored add remove reset",this.fillInRender)},c.prototype.events={"mouseenter td.status":"showTooltip","mouseleave td.status":"hideTooltip","click a[rel=new-projection]":"showNewProjectionView"},c.prototype.showNewProjectionView=function(a){var b,c,d;return $.noBubble(a),b=$(a.currentTarget),c=this.options.model.get("cashflow").projections,d=new FloatApp.Views.Projections.NewView({collection:c,cashflow_set:this.options.model.cashflow_sets,projects:this.options.model.get("cashflow").projects,model_attributes:{expense_income:this.options.model.get("expense_income"),project:this.options.model.get("project")}}),$(d.render().el).insertAfter(b).fadeIn()},c.prototype.showTooltip=function(a){return $(a.currentTarget).find("i").twipsy({placement:"left"}).twipsy("show")},c.prototype.hideTooltip=function(a){return $(a.currentTarget).find("i").twipsy("hide")},c.prototype.serializeData=function(){var a,b,c;return b=this.options.invoices.includedTotal(),c=this.options.projections.includedTotal(),a=this.model.toJSON(),a.invoiced_total=b.format({precision:2,absolute:!0}),a.projected_total=c.format({precision:2,absolute:!0}),a.total=b.add(c).format({precision:2,absolute:!0}),a},c.prototype.fillInAttributes={".totals .total":"total",".totals .invoiced_total, .header-row .invoiced_total":"invoiced_total",".totals .projected_total, .header-row .projected_total":"projected_total"},c.prototype.fillInRender=function(){var a,b,c,d,e;b=this.serializeData(),d=this.fillInAttributes,e=[];for(c in d)a=d[c],e.push(this.$(c).html(b[a]));return e},c.prototype.onRender=function(){return(new FloatApp.Views.Projects.EntryList({el:this.$("tbody.invoices"),collection:this.options.invoices})).render(),(new FloatApp.Views.Projects.EntryList({el:this.$("tbody.projections"),collection:this.options.projections})).render()},c}(FloatApp.Views.ItemView),FloatApp.Views.Projects.EntryItem=function(a){function c(){return this.serializeData=b(this.serializeData,this),this.editEntry=b(this.editEntry,this),this.deselectEntry=b(this.deselectEntry,this),this.selectEntry=b(this.selectEntry,this),this.elClasses=b(this.elClasses,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="EntryItem",c.prototype.tagName="tr",c.prototype.template=JST["backbone/templates/projects/entry_item"],c.prototype.events={'click a[rel="edit"]':"editEntry",mouseenter:"selectEntry",mouseleave:"deselectEntry"},c.prototype.elClasses=function(){if(!this.model.isIncluded())return"ignored"},c.prototype.selectEntry=function(){return this.model.set({selected:!0})},c.prototype.deselectEntry=function(){return this.model.set({selected:!1})},c.prototype.editEntry=function(a){$.noBubble(a),this.model.isInvoice()&&FloatApp.PubSub.trigger("modal:edit","invoice",this.model);if(this.model.isProjection())return FloatApp.PubSub.trigger("modal:edit","projection",this.model)},c.prototype.serializeData=function(){return _.extend(c.__super__.serializeData.call(this),this.model.get("project")&&this.model.get("project").get("id")!=="oneoff"?{project:this.model.get("project").toJSON()}:void 0,{status:this.model.get("status")||this.model.status&&this.model.status()})},c}(FloatApp.Views.ItemView),FloatApp.Views.Projects.EntryList=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return d(b,a),b.name="EntryList",b.prototype.itemView=FloatApp.Views.Projects.EntryItem,b}(FloatApp.Views.CollectionView)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).Projects||(a.Projects={}),FloatApp.Views.Projects.NewView=function(a){function c(){return this.addColors=b(this.addColors,this),this.afterRender=b(this.afterRender,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="NewView",c.prototype.template=JST["backbone/templates/projects/new"],c.prototype.showBackdrop=!1,c.prototype.className="popover above new-popover",c.prototype.afterRender=function(){return this.addColors()},c.prototype.addColors=function(){var a;return a=$("<div>"),_.each(this.model.constructor.colors,function(b){return a.append($("<label>").append($("<input>").attr("type","radio").attr("value",b).attr("name","color")).append($("<span>").css({backgroundColor:b})))}),this.$(".colors").html(a.html())},c}(FloatApp.Views.Layout.ModalNewView)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).Projects||(a.Projects={}),FloatApp.Views.Projects.ProjectDetail=function(a){function c(){return this.showEditProject=b(this.showEditProject,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="ProjectDetail",c.prototype.template=JST["backbone/templates/projects/project_detail"],c.prototype.initialize=function(){return this.bindTo(this.model,"change",this.render),this.bindTo(this.model,"destroy",function(){return window.router.navigate("projects/all",!0)})},c.prototype.events={'click a[rel="edit-project"]':"showEditProject"},c.prototype.showEditProject=function(a){return $.noBubble(a),FloatApp.PubSub.trigger("modal:edit","project",this.model)},c}(FloatApp.Views.ItemView),FloatApp.Views.Projects.ProjectsPanel=function(a){function c(){return this.close=b(this.close,this),this.closeChildren=b(this.closeChildren,this),this.storeChild=b(this.storeChild,this),this.showEntryLists=b(this.showEntryLists,this),this.renderProjectDetail=b(this.renderProjectDetail,this),this.showOverview=b(this.showOverview,this),this.showProjectID=b(this.showProjectID,this),this.render=b(this.render,this),this.showNewProjectView=b(this.showNewProjectView,this),this.showNewProjectionView=b(this.showNewProjectionView,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="ProjectsPanel",c.prototype.template=JST["backbone/templates/projects/projects_panel"],c.prototype.events={'click a[rel="new-project"]':"showNewProjectView",'click a[rel="new-projection"]':"showNewProjectionView"},c.prototype.showNewProjectionView=function(a){var b,c,d;return $.noBubble(a),b=$(a.currentTarget),c=this.options.model.projections,d=new FloatApp.Views.Projections.NewView({collection:c,cashflow_set:this.options.model.cashflow_sets,projects:this.options.model.projects}),$(d.render().el).insertAfter(b).fadeIn()},c.prototype.showNewProjectView=function(a){var b,c;return $.noBubble(a),b=$(a.currentTarget),c=new FloatApp.Views.Projects.NewView({collection:this.options.model.projects}),$(c.render().el).insertAfter(b).fadeIn()},c.prototype.render=function(){var a,b;return $(this.el).html(this.template()),a=new FloatApp.Modules.CashflowNavigation({state:"projects"}),this.$(".cashflow-nav").html(a.mainView.render().el),b=new FloatApp.Views.Projects.SidebarList({collection:this.options.model.projects,el:this.$("#projects-sidebar ul")}),b.render().el,this},c.prototype.showProjectID=function(a){return this.project=this.options.model.projects.get(a),this.project?this.renderProjectDetail(this.project):this.showOverview()},c.prototype.showOverview=function(){return this.closeChildren(),this.project=null,this.showEntryLists(this.options.model.invoices,this.options.model.projections)},c.prototype.renderProjectDetail=function(a){return this.closeChildren(),this.projectDetailView=(new FloatApp.Views.Projects.ProjectDetail({model:a})).render(),this.$("#project-detail").html(this.projectDetailView.el),this.storeChild(this.projectDetailView),this.showEntryLists(a.get("invoices"),a.get("projections"))},c.prototype.showEntryLists=function(a,b){var c,d;return c=(new FloatApp.Views.Projects.InOutList({model:new Backbone.Model({inout:"In",invoice_type:"Invoice",expense_income:"income",project:this.project,cashflow:this.options.model}),invoices:a.incomes(!0,{comparator:function(a){return a.get("expected_on")}}),projections:b.incomes(!0)})).render(),this.$("#project-incomes").html(c.el),this.storeChild(c),d=(new FloatApp.Views.Projects.InOutList({model:new Backbone.Model({inout:"Out",invoice_type:"Bill",expense_income:"expense",project:this.project,cashflow:this.options.model}),invoices:a.expenses(!0,{comparator:function(a){return a.get("expected_on")}}),projections:b.expenses(!0)})).render(),this.$("#project-expenses").html(d.el),this.storeChild(d)},c.prototype.storeChild=function(a){return this.children||(this.children={}),this.children[a.model.cid]=a},c.prototype.closeChildren=function(){var a,b,c;this.children||(this.children={}),c=this.children;for(a in c)b=c[a],b.close();return this.children={}},c.prototype.close=function(){return this.closeChildren(),this.dispose()},c}(FloatApp.Views.BaseView)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).Projects||(a.Projects={}),FloatApp.Views.Projects.SelectView=function(a){function c(){return this.render=b(this.render,this),this.addDefaultEntries=b(this.addDefaultEntries,this),this.addOne=b(this.addOne,this),this.addAll=b(this.addAll,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="SelectView",c.prototype.template=JST["backbone/templates/projects/select_option"],c.prototype.tagName="select",c.prototype.initialize=function(){return this.addDefaultEntries()},c.prototype.addAll=function(){return this.options.projects.notOneoff().each(this.addOne)},c.prototype.addOne=function(a){return $(this.el).append(this.template(a.toJSON()))},c.prototype.addDefaultEntries=function(){return $(this.el).append($("<option>--</option>"))},c.prototype.render=function(){return this.addAll(),$(this.el).attr("name","project"),this},c}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).Projects||(a.Projects={}),FloatApp.Views.Projects.SidebarItem=function(a){function c(){return this.showProject=b(this.showProject,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="SidebarItem",c.prototype.template=JST["backbone/templates/projects/sidebar_item"],c.prototype.tagName="li",c.prototype.events={"click a":"showProject"},c.prototype.showProject=function(a){return $.noBubble(a),FloatApp.PubSub.trigger("projects:show",this.model.id)},c}(FloatApp.Views.ItemView),FloatApp.Views.Projects.SidebarList=function(a){function c(){return this.showOverview=b(this.showOverview,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="SidebarList",c.prototype.tagName="ul",c.prototype.itemView=FloatApp.Views.Projects.SidebarItem,c.prototype.events={"click a.projects-overview":"showOverview"},c.prototype.showOverview=function(a){return $.noBubble(a),FloatApp.PubSub.trigger("projects:show:overview")},c}(FloatApp.Views.CollectionView)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a},e=[].slice;(a=FloatApp.Views).VatReturns||(a.VatReturns={}),FloatApp.Views.VatReturns.Edit=function(a){function c(){return this.renderFormFields=b(this.renderFormFields,this),this.renderDetails=b(this.renderDetails,this),this.editEstimate=b(this.editEstimate,this),this.afterRender=b(this.afterRender,this),this.renderVariables=b(this.renderVariables,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="Edit",c.prototype.template=JST["backbone/templates/vat_returns/form"],c.prototype.detailsTemplate=function(){var a;a=1<=arguments.length?e.call(arguments,0):[];switch(this.model.get("status")){case"CURRENT":case"FUTURE":return JST["backbone/templates/vat_returns/current/form_details"].apply(JST,a);case"DUE":case"OVERDUE":return JST["backbone/templates/vat_returns/due/form_details"].apply(JST,a);case"PAID":return JST["backbone/templates/vat_returns/due/form_details"].apply(JST,a)}},c.prototype.formFieldsTemplate=function(){var a;a=1<=arguments.length?e.call(arguments,0):[];switch(this.model.get("status")){case"CURRENT":case"FUTURE":return this.editing?JST["backbone/templates/vat_returns/current/form_fields_edit"].apply(JST,a):JST["backbone/templates/vat_returns/current/form_fields"].apply(JST,a);case"PAID":case"DUE":case"OVERDUE":return JST["backbone/templates/vat_returns/due/form_fields"].apply(JST,a)}},c.prototype.className="modal modal-vatreturn",c.prototype.events={"submit form":"update","click a.close":"close","click a.cancel":"close","click a.destroy":"destroyModel","click a[rel=edit-estimate]":"editEstimate"},c.prototype.renderVariables=function(){var a,b;return a=this.model.toJSON(),a.modal||(a.modal={}),b=a.status.toLowerCase(),b=b.charAt(0).toUpperCase()+b.slice(1),a.modal.title=b+" VAT Return",a.modal.subtitle="period ending "+this.model.get("period_ends_on").format("YYYY-MM"),a},c.prototype.afterRender=function(){return this.renderDetails(),this.renderFormFields()},c.prototype.editEstimate=function(a){return $.noBubble(a),this.editing=!0,this.renderFormFields()},c.prototype.renderDetails=function(){return this.$("[data-yield=details]").html(this.detailsTemplate(this.renderVariables()))},c.prototype.renderFormFields=function(){return this.$("[data-yield=fields]").html(this.formFieldsTemplate(this.renderVariables()))},c}(FloatApp.Views.Layout.ModalEditView)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Views.VideoModal=function(b){function d(){return this.close=a(this.close,this),this.dispose=a(this.dispose,this),this.show=a(this.show,this),this.render=a(this.render,this),this.template=a(this.template,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="VideoModal",d.prototype.className="modal modal-video",d.prototype.initialize=function(a){return this.model=a.model},d.prototype.template=function(a){return'<div class="modal-header">\n  <a class="close"></a>\n  <h3>'+a.title+"</h3>\n</div>\n<div class='modal-body'>\n\n  <p class='modal-video-intro alert alert-message'>\n    To help you get started with Float, here's a quick overview video of your forecast. We highly recommend watching it: it only takes two minutes!\n  </p>\n\n  <iframe width=\"511\" height=\"354\" src=\""+a.src+"?modestbranding=1&rel=0\" frameborder=\"0\" allowfullscreen ></iframe>\n  <p class='modal-video-fullscreen'>View full screen!<span class='modal-video-fullscreen-arrow'></span></p>\n</div>\n"},d.prototype.events={"click .close, .cancel":"close"},d.prototype.render=function(){return $(this.el).html(this.template(this.renderVariables())),this},d.prototype.show=function(){return this.backdrop=$("<div class='modal-backdrop'>"),$("body").append(this.backdrop),$("body").append(this.render().el),this},d.prototype.dispose=function(){return this.close()},d.prototype.close=function(a){return this.trigger("view:close"),a&&$.noBubble(a),$(this.el).remove(),this.backdrop.remove()},d}(FloatApp.Views.Layout.Modal)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a};(a=FloatApp.Views).FreeagentOauthWizard||(a.FreeagentOauthWizard={}),FloatApp.Views.FreeagentOauthWizard.ImportingCategory=function(a){function c(){return this.render=b(this.render,this),this.totals=b(this.totals,this),this.showPopover=b(this.showPopover,this),this.updateBudgetTotal=b(this.updateBudgetTotal,this),this.blurRow=b(this.blurRow,this),this.focusRow=b(this.focusRow,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="ImportingCategory",c.prototype.template=JST["backbone/templates/wizard/importing_category"],c.prototype.events={'keyup input[name="budget.total"]':"updateBudgetTotal","focus input, select":"focusRow","blur input, select":"blurRow","click td.month":"showPopover"},c.prototype.focusRow=function(a){return $(a.currentTarget).closest("tr").addClass("focus")},c.prototype.blurRow=function(a){return $(a.currentTarget).closest("tr").removeClass("focus")},c.prototype.updateBudgetTotal=function(a){var b;return FloatApp.PubSub.trigger("wizard:budget-set",this.options.model),b=this.options.model.get("budget_attributes")||{},b.total=$(a.currentTarget).val(),this.options.model.set({budget_attributes:_.extend({},this.options.model.get("budget_attributes"))},{total:$(a.currentTarget).val()})},c.prototype.tagName="tr",c.prototype.showPopover=function(a){var b,c,d=this;$.noBubble(a),b=$(a.currentTarget);if(b.has(".popover").length===0)return this.popover_view=new FloatApp.Views.CashflowSets.SimpleMonthPopover({pubsub:this.options.pubsub,model:this.options.model,period:b.data("period"),date:_.date(b.data("date"))}),c=$(this.popover_view.render().el),$(a.currentTarget).find("div").append(c),c.fadeIn(),this.bindTo(this.popover_view,"deactivated",function(){return d.popover_view=null});if(this.popover_view)return this.popover_view.fadeOutAndDispose()},c.prototype.initialize=function(){return this.bindTo(this.options.model.get("bank_account_entries"),"add",this.render),this.bindTo(this.options.model.get("invoices"),"add",this.render)},c.prototype.totals=function(){var a,b;return b=this.options.model.periodTotals("month",this.options.periods),a=_.sortBy(_.keys(b),function(a){return a}),_.map(a,function(a){return b[a].format({precision:2,absolute:!0})})},c.prototype.render=function(){var a;return a="",this.options.model.get("cashflow_set")&&!this.options.model.get("cashflow_set").isMisc()&&(a=this.options.model.get("cashflow_set").get("total").format({absolute:!0})),$(this.el).html(this.template({tag:this.options.model.get("tag"),periods:this.options.periods,totals:this.totals(),budget:a})),this},c}(FloatApp.Views.BaseView),FloatApp.Views.FreeagentOauthWizard.Importing=function(a){function c(){return this.renderBuildingSpinner=b(this.renderBuildingSpinner,this),this.stopListSpinners=b(this.stopListSpinners,this),this.renderListSpinners=b(this.renderListSpinners,this),this.periods=b(this.periods,this),this.addInfrequentExpense=b(this.addInfrequentExpense,this),this.addFrequentExpense=b(this.addFrequentExpense,this),this.addIncome=b(this.addIncome,this),this.addOne=b(this.addOne,this),this.addInfrequentExpenseBudgets=b(this.addInfrequentExpenseBudgets,this),this.addFrequentExpenseBudgets=b(this.addFrequentExpenseBudgets,this),this.addSalesTarget=b(this.addSalesTarget,this),this.loadAllData=b(this.loadAllData,this),this.loadAccountingCategories=b(this.loadAccountingCategories,this),this.loadBankAccounts=b(this.loadBankAccounts,this),this.updateCashflowViewRange=b(this.updateCashflowViewRange,this),this.startImport=b(this.startImport,this),this.transition=b(this.transition,this),this.renderState=b(this.renderState,this),c.__super__.constructor.apply(this,arguments)}return d(c,a),c.name="Importing",c.prototype.template=JST["backbone/templates/wizard/importing"],c.prototype.getStateTemplate=function(a){return JST["backbone/templates/wizard/states/"+a]},c.prototype.renderState=function(a){var b,c,d=this;return this.$(".wizpan-active .panel-body").slideUp(),this.$(".wizpan-active").removeClass("wizpan-active"),c=this.getStateTemplate(a),b=$(c({months:_.map(this.periods(),function(a){return a.format("MMM 'YY")})})),b.addClass("wizpan-active"),b.hide(),$(this.el).append(b),b.fadeIn(function(){return b.find("input").first().focus()})},c.prototype.initialize=function(){return this.company=new FloatApp.Models.Company({id:"nil"}),this.company.fetch(),this.accounting_categories=new FloatApp.Collections.AccountingCategoriesCollection,this.cashflow=this.options.cashflow,this.transition()},c.prototype.state=null,c.prototype.states=["start","import-connecting","importing-categories","importing-transactions","import-done","loading-all-data","finish-import","set-sales-target","set-frequent-budgets","set-infrequent-budgets","building-your-cashflow"],c.prototype.transition=function(){var a,b=this;return a={start:function(){return b.startImport(),b.renderState("start"),b.renderListSpinners(),b.$("li[rel=import-connecting]").attr("class","doing")},"import-connecting":function(){return b.$("li[rel=import-connecting]").attr("class","done"),b.$("li[rel=importing-categories]").attr("class","doing"),b.renderListSpinners()},"importing-categories":function(){return b.$("li[rel=importing-transactions]").attr("class","doing"),b.$("li[rel=importing-categories]").attr("class","done"),b.renderListSpinners()},"importing-transactions":function(){},"import-done":function(){return b.loadAllData()},"loading-all-data":function(){return b.$("li[rel=importing-transactions]").attr("class","done"),b.renderListSpinners(),b.$("a[rel=import-done]").click(function(){if(b.state==="finish-import")return b.transition()}),b.$("a[rel=import-done]").fadeIn()},"finish-import":function(){return b.renderState("set-sales-target"),b.addSalesTarget(),b.$("a[rel=set-frequent-budgets]").click(function(a){$.noBubble(a);if(b.state==="set-sales-target")return b.transition()})},"set-sales-target":function(){return b.renderState("set-frequent-budgets"),b.addFrequentExpenseBudgets(),b.$("a[rel=set-infrequent-budgets]").click(function(a){$.noBubble(a);if(b.state==="set-frequent-budgets")return b.transition()})},"set-frequent-budgets":function(){return b.renderState("set-infrequent-budgets"),b.addInfrequentExpenseBudgets(),b.$("a[rel=finish-wizard]").click(function(a){$.noBubble(a);if(b.state==="set-infrequent-budgets")return b.transition()})},"set-infrequent-budgets":function(){return b.renderState("building-your-cashflow"),b.renderBuildingSpinner(),FloatApp.Settings.cookieSettings.set({"show-wizard":!0}),b.company.get("wizard_complete")?b.accounting_categories.updateAll({success:function(){return window.location="/"}}):(b.company.finishWizard(),b.accounting_categories.updateAll({success:function(){return window.location="/welcome/cashflow"}}))}},this.state||(this.state=this.states[0]),a[this.state](),this.state=this.states[_.indexOf(this.states,this.state)+1]},c.prototype.importWasRunning=!1,c.prototype.startImport=function(){var a=this;return this.bindTo(FloatApp.PubSub,"import_completed",function(){if(a.state==="importing-transactions")return a.transition(),a.transition();if(a.state==="importing-categories")return a.transition(),a.transition(),a.transition();if(a.state==="import-connecting")return a.transition(),a.transition(),a.transition(),a.transition()}),this.bindTo(FloatApp.PubSub,"import_not_running",function(){if(a.state==="import-connecting"&&!a.importWasRunning)return a.transition(),a.transition(),a.transition(),a.transition()}),this.bindTo(FloatApp.PubSub,"import_running",function(){return a.importWasRunning=!0,a.state==="import-connecting"&&a.transition(),a.bindTo(a.accounting_categories,"add",function(){if(a.state==="importing-categories")return a.transition()}),a.accounting_categories.fetch({add:!0})}),this.bindTo(this.cashflow,"loaded_entries",function(){if(a.state==="loading-all-data")return a.transition()}),this.bindTo(this.cashflow,"reloaded_entries",function(){if(a.state==="loading-all-data")return a.transition()})},c.prototype.updateCashflowViewRange=function(){return FloatApp.log("Loading bank account entries and invoices"),this.cashflow.set({view_range:[_.date().subtract({M:3}).beginningOfMonth(),_.date().endOfMonth()]})},c.prototype.loadBankAccounts=function(a){return a==null&&(a=function(){}),FloatApp.log("Loading bank accounts"),this.cashflow.bank_accounts.fetch({add:!0,success:a})},c.prototype.loadAccountingCategories=function(a){return a==null&&(a=function(){}),FloatApp.log("Loading accounting categories"),this.accounting_categories.fetch({add:!0,success:a})},c.prototype.loadAllData=function(){var a=this;return this.loadAccountingCategories(function(){return a.loadBankAccounts(a.updateCashflowViewRange)})},c.prototype.addSalesTarget=function(){var a,b=this;return a=this.accounting_categories.find(function(a){return a.get("tag")==="Sales"&&a.isIncome()}),this.addOne(a)},c.prototype.addFrequentExpenseBudgets=function(){var a=this;return this.accounting_categories.expenses().frequentlyUsed().each(function(b){return a.addOne(b)})},c.prototype.addInfrequentExpenseBudgets=function(){var a=this;return this.accounting_categories.expenses().infrequentlyUsed().notIgnored().each(function(b){return a.addOne(b)})},c.prototype.addOne=function(a){var b;if(a.isExpense()||a.isIncome()&&a.get("tag")==="Sales"){b=new FloatApp.Views.FreeagentOauthWizard.ImportingCategory({model:a,periods:this.periods(),pubsub:FloatApp.PubSub}),a.isIncome()&&this.addIncome(b),a.isExpense()&&a.isFrequentlyUsed()&&this.addFrequentExpense(b);if(a.isExpense()&&!a.isFrequentlyUsed())return this.addInfrequentExpense(b)}},c.prototype.addIncome=function(a){return this.$("#income-categories").append(a.render().el)},c.prototype.addFrequentExpense=function(a){return this.$("#expense-categories").append(a.render().el)},c.prototype.addInfrequentExpense=function(a){return this.$("#infrequent-expense-categories").append(a.render().el)},c.prototype.periods=function(){var a;return a=_.date.monthsBetween(_.date().subtract({M:3}).beginningOfMonth(),_.date().subtract({M:1}).endOfMonth())},c.prototype.renderListSpinners=function(){var a,b;return this.stopListSpinners(),a={lines:10,length:4,width:2,radius:3,trail:60,speed:1},b=(new Spinner(a)).spin(),this.$("li.doing").prepend(b.el),this.spinners.push(b)},c.prototype.stopListSpinners=function(){var a,b,c,d;this.spinners||(this.spinners=[]),d=this.spinners;for(b=0,c=d.length;b<c;b++)a=d[b],a.stop();return this.spinners=[]},c.prototype.renderBuildingSpinner=function(){var a,b,c;return a={lines:12,length:7,width:4,radius:10,color:"#000",speed:1,trail:60,shadow:!1},c=this.$(".building-spinner")[0],b=(new Spinner(a)).spin(c)},c}(FloatApp.Views.BaseView)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Modules.AppAlerts=function(b){var d,e,f;return e={},f=null,d=function(){function c(){this.onImportComplete=a(this.onImportComplete,this);var c=this;this.viewManager=new FloatApp.ViewManager(".region-app-alerts"),this.viewManager.bind("show:view",function(){return c.viewManager.container.animate({height:39})}),b.vent.bind("import_completed",this.onImportComplete)}return c.name="Main",c.prototype.onImportComplete=function(){return this.viewManager.showView(new e.ImportCompleted)},c.prototype.dispose=function(){return this.viewManager.dispose(),b.Vent.unbind("import_completed",this.onImportComplete)},c}(),e.ImportCompleted=function(b){function d(){return this.dispose=a(this.dispose,this),this.onShow=a(this.onShow,this),this.render=a(this.render,this),this.reload=a(this.reload,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="ImportCompleted",d.prototype.tagName="div",d.prototype.className="alert-message success hidden alert-sticky",d.prototype.events={"click *":"reload"},d.prototype.reload=function(a){return $.noBubble(a),window.location.reload()},d.prototype.template=function(){var a;return a="<i class=sync></i> Your update has completed, please <a href='#'>refresh the page</a> to see the new data in your cashflow."
,"<p>"+a+"</p>"},d.prototype.render=function(){return $(this.el).html(this.template()),this},d.prototype.onShow=function(){return $(this.el).slideDown()},d.prototype.dispose=function(){return this.remove()},d}(Backbone.View),d}(FloatApp)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Modules.CashflowNavigation=function(){var b,d,e;return e={},d={},b=function(){function b(b){b==null&&(b={}),this.dispose=a(this.dispose,this),this.mainViewState=new d.Main({state:b.state||""}),b.viewModel=this.mainViewState,this.mainView=new e.Main(b)}return b.name="Main",b.prototype.bindings=function(){return FloatApp.PubSub.bind("projects:show",this.updateState)},b.prototype.updateState=function(a){return this.mainViewState.set({state:a})},b.prototype.dispose=function(){return this.mainView.dispose(),FloatApp.PubSub.unbind("projects:show",this.updateState)},b}(),d.Main=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.name="Main",b.prototype.defaults={state:"cashflow"},b.prototype.isCashflow=function(){return this.get("state")==="cashflow"},b.prototype.isProjects=function(){return this.get("state")==="projects"},b.prototype.isPipeline=function(){return this.get("state")==="pipeline"},b}(Backbone.Model),e.Main=function(b){function d(){return this.dispose=a(this.dispose,this),this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="Main",d.prototype.template=JST["backbone/templates/cashflow_navigation/nav"],d.prototype.tagName="ul",d.prototype.className="tabs",d.prototype.initialize=function(){return this.options.viewModel.bind("change:state",this.render)},d.prototype.render=function(){return $(this.el).html(this.template({viewState:this.options.viewModel})),this},d.prototype.dispose=function(){return this.remove(),this.options.viewModel.unbind("change:state",this.render)},d}(Backbone.View),b}()}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Modules.ChartControls=function(){var b,d,e,f;return d={},f=!0,e=!0,b=function(){function a(a){this.cashflow=a.model,f=this.cashflow.cashflow_sets.incomes().first().isIncluded(),this.mainView=new d.Main({cashflow:this.cashflow})}return a.name="Main",a}(),d.Main=function(b){function d(){return this.render=a(this.render,this),this.includeSalesTargets=a(this.includeSalesTargets,this),this.hideControls=a(this.hideControls,this),this.showControls=a(this.showControls,this),this.showHideControls=a(this.showHideControls,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="Main",d.prototype.template=JST["backbone/templates/chart_controls/main"],d.prototype.events={'click a[rel="hide-chart-ctrls"]':"showHideControls",'click input[name="include-sales"]':"includeSalesTargets"},d.prototype.showHideControls=function(a){return $.noBubble(a),e?this.hideControls():this.showControls()},d.prototype.showControls=function(){return this.$('a[rel="hide-chart-ctrls"]').toggleClass("is-open",!0),this.$(".chartctrl-inner").slideDown(),e=!0},d.prototype.hideControls=function(){return this.$('a[rel="hide-chart-ctrls"]').toggleClass("is-open",!1),this.$(".chartctrl-inner").slideUp(),e=!1},d.prototype.includeSalesTargets=function(){var a;return a=$('input[name="include-sales"]').is(":checked"),this.cashflow.cashflow_sets.incomes().each(function(b){return b.set({ignored:!a})})},d.prototype.initialize=function(a){return this.cashflow=this.options.cashflow},d.prototype.render=function(){return $(this.el).html(this.template({include_sales:f})),this},d}(Backbone.View),b}()}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Modules.NavBarSync=function(b){var d,e;return b.addInitializer(function(){return $(function(){return b.log("Started NavBarSync module"),new d({el:$(".sidebar")})})}),e={},d=function(){function b(b){this.dispose=a(this.dispose,this),this.view=new e.NavBarView(b)}return b.name="Main",b.prototype.dispose=function(){return this.view.dispose()},b}(),e.NavBarView=function(d){function e(){return this.dispose=a(this.dispose,this),this.syncCompleted=a(this.syncCompleted,this),this.syncRunning=a(this.syncRunning,this),this.syncOff=a(this.syncOff,this),this.clickSync=a(this.clickSync,this),this.syncTwipsy=a(this.syncTwipsy,this),this.deactivateAllSubnav=a(this.deactivateAllSubnav,this),this.activateSubnav=a(this.activateSubnav,this),this.clickSubnav=a(this.clickSubnav,this),this.expandNav=a(this.expandNav,this),e.__super__.constructor.apply(this,arguments)}return c(e,d),e.name="NavBarView",e.prototype.events={"click a.menu":"clickSubnav","activate li.menu":"activateSubnav",deactivate:"deactivateAllSubnav","click li.sync a.trigger-update":"clickSync","click .expand-nav":"expandNav"},e.prototype.initialize=function(){b.vent.bind("import_started",this.syncRunning),b.vent.bind("import_completed",this.syncCompleted),this.syncTwipsy();if(this.$("#freeagent_credentials-form")[0])return this.freeagent_modal=new FloatApp.Views.Companies.Credentials({el:this.$("#freeagent_credentials-form"),pubsub:b.vent})},e.prototype.expandNav=function(a){return $.noBubble(a),this.navWidthState||(this.navWidthState="expanded"),this.navWidthState==="expanded"?(this.navWidthState="collapsed",$(a.currentTarget).text(" "),$("h3.logo").animate({width:35,marginLeft:10}),$(".content").animate({marginLeft:58}),$(".sidebar").animate({width:58}),$(".sidebar ul a").animate({width:28,paddingLeft:15,paddingRight:15}),$(".sidebar ul a span").animate({paddingLeft:1e5})):(this.navWidthState="expanded",$(a.currentTarget).text(" shrink nav "),$("h3.logo").animate({width:112,marginLeft:20}),$(".content").animate({marginLeft:150}),$(".sidebar").animate({width:150}),$(".sidebar ul a").animate({width:110,paddingLeft:20,paddingRight:20}),$(".sidebar ul a span").animate({paddingLeft:28}))},e.prototype.clickSubnav=function(a){var b,c;a.stopPropagation(),a.preventDefault(),b=$(a.currentTarget).closest("li.menu"),c=!b.data("active"),this.el.trigger("deactivate");if(c)return b.trigger("activate")},e.prototype.activateSubnav=function(a){var b;return b=$(a.target),b.data("active",!0),$(a.target).find("ul.menu-dropdown").show(),$("body").bind("click.navBlur",this.deactivateAllSubnav)},e.prototype.deactivateAllSubnav=function(){return this.$("ul.menu-dropdown").hide(),this.$("li.menu").data("active",!1),$("body").unbind("click.navBlur")},e.prototype.syncTwipsy=function(){return this.$("li.sync .icon").twipsy({placement:"right"})},e.prototype.clickSync=function(a){var c;return c=this.$("li.sync .icon"),$.noBubble(a),!c.hasClass("sync-complete")&&!c.hasClass("sync-running")?this.freeagent_modal?(this.freeagent_modal.show(),a.preventDefault(),a.stopPropagation()):($.get("/freeagent_oauth_apis/trigger_update"),b.vent.trigger("import_started")):window.location.href="/cashflow"},e.prototype.syncOff=function(){return this.$("li.sync .icon").attr("class",""),this.$("li.sync .icon span").text("Update")},e.prototype.syncRunning=function(){return this.$("li.sync .icon").removeClass("sync-complete").addClass("sync-running").attr("title","Importing your FreeAgent data"),this.$("li.sync .icon span").text("Updating...")},e.prototype.syncCompleted=function(){return this.$("li.sync .icon").removeClass("sync-running").addClass("sync-complete").attr("title","Import completed"),this.$("li.sync .icon span").text("Finished")},e.prototype.dispose=function(){return this.close()},e}(Backbone.View)}(FloatApp)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Modules.Pipeline=function(){var b,d;return d={},b=function(){function a(a){this.cashflow=a.cashflow,this.mainView=new d.Main({cashflow:this.cashflow})}return a.name="Main",a}(),d.Main=function(b){function d(){return this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="Main",d.prototype.template=JST["backbone/template/pipeline/main"],d.prototype.initialize=function(){return this.cashflow=this.options.cashflow},d.prototype.render=function(){return $(this.el).html(this.template),this},d}(Backbone.View),b}()}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a},d=[].slice;FloatApp.Modules.ProjectDetail=function(){var b,e,f,g,h=this;return e={},f=function(a){return a.$("input.datepicker-text").not(".hasDatepicker").datepicker({dateFormat:"yy-mm-dd",firstDay:1})},g=null,b=function(){function b(b){this.dispose=a(this.dispose,this),this.project=b.project,g=b.salesRow,this.mainView=new e.Main({model:this.project})}return b.name="Main",b.prototype.dispose=function(){return this.mainView.dispose()},b}(),e.Main=function(b){function d(){return this.dispose=a(this.dispose,this),this.showProjectList=a(this.showProjectList,this),this.addProjection=a(this.addProjection,this),this.addProjectionOut=a(this.addProjectionOut,this),this.addProjectionIn=a(this.addProjectionIn,this),this.onRenderDetailView=a(this.onRenderDetailView,this),this.renderDetailView=a(this.renderDetailView,this),this.renderCashflowNav=a(this.renderCashflowNav,this),this.render=a(this.render,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="Main",d.prototype.template=JST["backbone/templates/project_detail/main"],d.prototype.className="projectdetail",d.prototype.render=function(){return $(this.el).html(this.template()),this.renderCashflowNav(),this.renderDetailView(),this},d.prototype.children=[],d.prototype.renderCashflowNav=function(){var a;return a=new FloatApp.Modules.CashflowNavigation({state:"pipeline"}),this.children.push(a),this.$(".cashflow-nav").append(a.mainView.render().el)},d.prototype.renderDetailView=function(){var a;return a=new e.Detail({model:this.options.model}),this.children.push(a),this.$(".projectdetail-content").append(a.render().el),this.onRenderDetailView()},d.prototype.onRenderDetailView=function(){var a=this;if(this.options.model.isNew())return _.defer(function(){return a.$("input").first().focus()})},d.prototype.events={"click a[rel=projects-list]":"showProjectList","click .datab-cashin a[rel=add-projection]":"addProjectionIn","click .datab-cashout a[rel=add-projection]":"addProjectionOut"},d.prototype.addProjectionIn=function(a){return $.noBubble(a),this.addProjection({expense_income:"income",cashflow_set:g,project:this.options.model})},d.prototype.addProjectionOut=function(a){return $.noBubble(a),this.addProjection({expense_income:"expense",project:this.options.model})},d.prototype.addProjection=function(a){return a==null&&(a={}),this.model.get("projections").add(a)},d.prototype.showProjectList=function(a){return $.noBubble(a),this.options.model.isNew()&&this.options.model.destroy(),FloatApp.PubSub.trigger("pipeline:show:overview")},d.prototype.dispose=function(){var a,b,c,d,e;d=this.children,e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(a.dispose());return e},d}(Backbone.View),e.Detail=function(b){function f(){return this.onRender=a(this.onRender,this),this.bindCollectionTotals=a(this.bindCollectionTotals,this),this.modelSave=a(this.modelSave,this),this.modelDelete=a(this.modelDelete,this),this.modelCreate=a(this.modelCreate,this),this.checkForMotion=a(this.checkForMotion,this),this.template=a(this.template,this),f.__super__.constructor.apply(this,arguments)}return c(f,b),f.name="Detail",f.prototype.template=function(){var a;return a=1<=arguments.length?d.call(arguments,0):[],this.model.isNew()?JST["backbone/templates/project_detail/new"].apply(JST,a):JST["backbone/templates/project_detail/detail"].apply(JST,a)},f.prototype.events={"keyup table input":"checkForMotion","click a[rel=create-project]":"modelCreate","click a[rel=delete-project]":"modelDelete"},f.prototype.checkForMotion=function(a){var b,c,d,e;e={upArrow:38,downArrow:40};switch(a.keyCode){case e.upArrow:return b=$(a.currentTarget),c=b.closest("tr").prev("tr"),!c[0]&&(d=b.closest("tbody").prev("tbody"))&&(c=d.last("tr")),c.find("input[name="+b.attr("name")+"]").focus(),$.noBubble(a);case e.downArrow:return b=$(a.currentTarget),c=b.closest("tr").next("tr"),!c[0]&&(d=b.closest("tbody").next("tbody"))&&(c=d.first("tr")),c.find("input[name="+b.attr("name")+"]").focus(),$.noBubble(a)}},f.prototype.initialize=function(){if(!this.model.isNew())return this.bindTo(this.model,"change",_.throttle(this.modelSave,300))},f.prototype.modelCreate=function(){var a;return a=this.model,a.save(null,{success:function(){return FloatApp.PubSub.trigger("pipeline:show",a.get("id"))}})},f.prototype.modelDelete=function(){return this.model.destroy(),FloatApp.PubSub.trigger("pipeline:show:overview")},f.prototype.modelSave=function(){return this.model.save()},f.prototype.bindCollectionTotals=function(a){var b,c,d,e,f=this;return b=function(a){return a.invoices.includedTotal().add(a.projections.includedTotal())},e=function(){var c,d;return d=b(a.incomes).add(b(a.expenses)),c=f.$('[data-bind="project.total"]'),c.text(d.format("income")),c.toggleClass("net-income",d>=0),c.toggleClass("net-expense",d<0)},d=function(){return f.$('[data-bind="project.incomes.includedTotal"]').text(b(a.incomes).format("income")),e()},c=function(){return f.$('[data-bind="project.expenses.includedTotal"]').text(b(a.expenses).format("expense")),e()},this.bindTo(a.incomes.invoices,"all",d),this.bindTo(a.incomes.projections,"all",d),this.bindTo(a.expenses.invoices,"all",c),this.bindTo(a.expenses.projections,"all",c),d(),c(),e()},f.prototype.onRender=function(){var a,b;return b=new Backbone.ModelBinder,b.bind(this.model,this.el),a={incomes:{invoices:this.model.get("invoices").incomes(!0),projections:this.model.get("projections").incomes(!0)},expenses:{invoices:this.model.get("invoices").expenses(!0),projections:this.model.get("projections").expenses(!0)}},this.bindCollectionTotals(a),(new e.Invoices({el:this.$('[data-yield="invoices-in"]'),collection:a.incomes.invoices})).render(),(new e.Projections({el:this.$('[data-yield="projections-in"]'),collection:a.incomes.projections})).render(),(new e.Invoices({el:this.$('[data-yield="invoices-out"]'),collection:a.expenses.invoices})).render(),(new e.Projections({el:this.$('[data-yield="projections-out"]'),collection:a.expenses.projections})).render()},f}(FloatApp.Views.ItemView),e.ItemRow=function(b){function e(){return this.serializeData=a(this.serializeData,this),this.onRender=a(this.onRender,this),this.bindModelToView=a(this.bindModelToView,this),this.removeNewRecordClass=a(this.removeNewRecordClass,this),this.showSpinnerComplete=a(this.showSpinnerComplete,this),this.showSpinnerActive=a(this.showSpinnerActive,this),this.hideSpinner=a(this.hideSpinner,this),this.modelSave=a(this.modelSave,this),this.onCancel=a(this.onCancel,this),this.onSave=a(this.onSave,this),this.onKeyup=a(this.onKeyup,this),this.onBlur=a(this.onBlur,this),this.onFocus=a(this.onFocus,this),this.editProjection=a(this.editProjection,this),this.editInvoice=a(this.editInvoice,this),this.changeIncluded=a(this.changeIncluded,this),e.__super__.constructor.apply(this,arguments)}return c(e,b),e.name="ItemRow",e.prototype.tagName="tr",e.prototype.events={"focus input":"onFocus","blur input":"onBlur","click a[rel=edit-invoice]":"editInvoice","click a[rel=edit-projection]":"editProjection","click input[name=included]":"changeIncluded","click a[rel=save]":"onSave","click a[rel=cancel]":"onCancel","keyup input[type=text]":"onKeyup"},e.prototype.changeIncluded=function(a){var b,c;return b=$(a.currentTarget),c=!b.is(":checked"),this.model.save({ignored:c}),$(this.el).toggleClass("ignored",c)},e.prototype.editInvoice=function(a){return $.noBubble(a),FloatApp.PubSub.trigger("modal:edit","Invoice",this.model)},e.prototype.editProjection=function(a){return $.noBubble(a),FloatApp.PubSub.trigger("modal:edit","Projection",this.model)},e.prototype.onFocus=function(a){return $(this.el).toggleClass("is-focussed",!0)},e.prototype.onBlur=function(a){return $(this.el).toggleClass("is-focussed",!1),this.modelSave()},e.prototype.initialize=function(){var a=this;return this.bindTo(this.model,"change",function(){var b;return b=1<=arguments.length?d.call(arguments,0):[],a.$(":input:focus").length===0?a.modelSave():console.log("on change but focus")})},e.prototype.onKeyup=function(a){var b;b={enter:13};switch(a.which){case b.enter:if((this.model.get("description")||this.model.get("reference"))&&this.model.get("total"))return $(a.currentTarget).blur(),this.onBlur()}},e.prototype.onSave=function(a){return a&&a.preventDefault()&&a.stopPropagation(),this.modelSave()},e.prototype.onCancel=function(a){return a&&a.preventDefault()&&a.stopPropagation(),this.model.collection.remove(this.model)},e.prototype.modelSave=function(){var a=this;return this.model.isNew()&&this.model.saving?FloatApp.log("Not saving, as creating"):(FloatApp.log("Saving"),this.$(".btn").addClass("disabled"),console.log("show spinnner"),this.showSpinnerActive(),this.model.saving=!0,this.model.save(null,{success:function(){return a.model.saving=!1,a.model.dirty=!1,a.removeNewRecordClass(),a.showSpinnerComplete(),a.$(".btn").removeClass("disabled")},error:function(){return a.$(".btn").removeClass("disabled"),a.hideSpinner(),a.model.saving=!1}}))},e.prototype.hideSpinner=function(){return this.$(".loading").removeClass("complete").removeClass("active")},e.prototype.showSpinnerActive=function(){return this.$(".loading").removeClass("complete").addClass("active").css({opacity:1})},e.prototype.showSpinnerComplete=function(){return this.$(".loading").removeClass("active").addClass("complete").animate({opacity:0},{duration:3e3})},e.prototype.removeNewRecordClass=function(){return $(this.el).removeClass("is-unsaved")},e.prototype.bindAttributes=[],e.prototype.bindModelToView=function(){var a;return this.modelBinder=new Backbone.ModelBinder,_.isEmpty(this.bindAttributes)?this.modelBinder.bind(this.model,this.el):(a={},_.each(this.bindAttributes,function(b){return a[b]="[name="+b+"]"}),this.modelBinder.bind(this.model,this.el,a))},e.prototype.onRender=function(){var a=this;return this.bindModelToView(),this.model.isNew()&&_.defer(function(){return $(a.el).addClass("is-unsaved"),a.$("input").first().focus()}),_.defer(function(){return $(a.el).toggleClass("ignored",!a.model.isIncluded())}),f(this)},e.prototype.serializeData=function(){var a;return a=this.model.toJSON(),a.fields_editing=this.fieldsEditing||{},a},e}(FloatApp.Views.ItemView),e.Invoice=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.name="Invoice",b.prototype.template=JST["backbone/templates/project_detail/invoice"],b.prototype.bindAttributes=["expected_on"],b}(e.ItemRow),e.Projection=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.name="Projection",b.prototype.template=JST["backbone/templates/project_detail/projection"],b.prototype.bindAttributes=["description","total","dated_on"],b}(e.ItemRow),e.Invoices=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.name="Invoices",b.prototype.itemView=e.Invoice,b}(FloatApp.Views.CollectionView),e.Projections=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.name="Projections",b.prototype.itemView=e.Projection,b}(FloatApp.Views.CollectionView),b}()}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Modules.ProjectsOverview=function(){var b,d;return d={},b=function(){function b(b){this.dispose=a(this.dispose,this),this.projects=b.projects,this.mainView=new d.Main({projects:this.projects})}return b.name="Main",b.prototype.dispose=function(){return this.mainView.dispose()},b}(),d.Main=function(b){function e(){return this.dispose=a(this.dispose,this),this.renderProjectsEmpty=a(this.renderProjectsEmpty,this),this.renderProjectsTable=a(this.renderProjectsTable,this),this.renderUncategorized=a(this.renderUncategorized,this),this.renderCashflowNav=a(this.renderCashflowNav,this),this.switchProjectView=a(this.switchProjectView,this),this.switchProjectViewBindings=a(this.switchProjectViewBindings,this),this.newProject=a(this.newProject,this),e.__super__.constructor.apply(this,arguments)}return c(e,b),e.name="Main",e.prototype.template=JST["backbone/templates/projects_overview/main"],e.prototype.className="projectoverview",e.prototype.initialize=function(){return this.actualProjects=this.options.projects.notOneoff(!0),this.oneoffProject=this.options.projects.oneoff(!0)},e.prototype.events={"click a[rel=add-project]":"newProject"},e.prototype.newProject=function(a){return $.noBubble(a),FloatApp.PubSub.trigger("pipeline:new")},e.prototype.switchProjectViewBindings=function(){return this.actualProjects.bind("add",this.switchProjectView),this.actualProjects.bind("remove",this.switchProjectView)},e.prototype.switchProjectView=function(){return this.actualProjects.length===0?this.renderProjectsEmpty():this.renderProjectsTable()},e.prototype.children=[],e.prototype.render=function(){return $(this.el).html(this.template({})),this.projectViewManager=new FloatApp.ViewManager(this.$(".projectoverview-projects")),this.renderCashflowNav(),this.switchProjectView(),this.switchProjectViewBindings(),this.renderUncategorized(),this},e.prototype.renderCashflowNav=function(){var a;return a=new FloatApp.Modules.CashflowNavigation({state:"pipeline"}),this.children.push(a),this.$(".cashflow-nav").append(a.mainView.render().el)},e.prototype.renderUncategorized=function(){var a;return a=new d.ProjectTable({collection:this.oneoffProject}),this.children.push(a),this.$(".projectoverview-uncategorized").html(a.render().el)},e.prototype.renderProjectsTable=function(){var a;return a=new d.ProjectTable({collection:this.actualProjects}),this.projectViewManager.showView(a)},e.prototype.renderProjectsEmpty=function(){var a;return a=new d.ProjectsEmpty,this.projectViewManager.showView(a)},e.prototype.dispose=function(){var a,b,c,d;d=this.children;for(b=0,c=d.length;b<c;b++)a=d[b],a.dispose();return this.projectViewManager.dispose(),this.actualProjects.unbind("add",this.switchProjectView),this.actualProjects.unbind("remove",this.switchProjectView)},e}(Backbone.View),d.ProjectRow=function(b){function d(){return this.showProjectDetail=a(this.showProjectDetail,this),this.destroyProject=a(this.destroyProject,this),this.onRender=a(this.onRender,this),this.updateIncluded=a(this.updateIncluded,this),this.serializeData=a(this.serializeData,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="ProjectRow",d.prototype.tagName="tr",d.prototype.className="projectoverview-row",d.prototype.template=JST["backbone/templates/projects_overview/project_row"],d.prototype.serializeData=function(){var a;return a=this.model.toJSON(),a.net_total=this.model.netTotal(),a.remaining_net_total=this.model.remainingNetTotal(),a.number_invoices=this.model.get("invoices").length,a.number_projections=this.model.get("projections").length,a.has_notes=(this.model.get("notes")||"").trim()!=="",a},d.prototype.events={"click a[rel=project-detail]":"showProjectDetail","click a[rel=project-destroy]":"destroyProject","change input[name=included]":"updateIncluded"},d.prototype.updateIncluded=function(a){var b;return a.stopPropagation(),b=$(a.currentTarget),b.is(":checked")?($(this.el).removeClass("ignored"),this.model.include()&&this.model.save()):($(this.el).addClass("ignored"),this.model.ignore()&&this.model.save())},d.prototype.onRender=function(){var a=this;return _.defer(function(){return $(a.el).toggleClass("ignored",!a.model.isIncluded())})},d.prototype.destroyProject=function(a){$.noBubble(a);if(confirm('Are you sure you wish to delete the project called "'+this.model.get("name")+'"?'))return this.model.destroy()},d.prototype.showProjectDetail=function(a){return a&&$.noBubble(a),FloatApp.PubSub.trigger("pipeline:show",this.model.get("id"))},d}(FloatApp.Views.ItemView),d.ProjectTable=function(b){function e(){return this.appendHtml=a(this.appendHtml,this),e.__super__.constructor.apply(this,arguments)}return c(e,b),e.name="ProjectTable",e.prototype.tagName="table",e.prototype.className="projectoverview-table datab",e.prototype.template=JST["backbone/templates/projects_overview/project_table"],e.prototype.itemView=d.ProjectRow,e.prototype.initialize=function(){return $(this.el).html(this.template())},e.prototype.appendHtml=function(a,b){return this.$("tbody").append(b)},e}(FloatApp.Views.CollectionView),d.ProjectsEmpty=function(b){function d(){return this.onRender=a(this.onRender,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="ProjectsEmpty",d.prototype.template=JST["backbone/templates/projects_overview/no_projects"],d.prototype.className="alert-message alert-inline",d.prototype.initialize=function(){return this.model=new Backbone.Model},d.prototype.onRender=function(){return FloatApp.log("rendered")},d}(FloatApp.Views.ItemView),b}()}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Modules.RecentImport=function(){var b,d;return d={},b=function(){function a(a){this.cashflow=a.cashflow,this.mainView=new d.Main({cashflow:this.cashflow})}return a.name="Main",a}(),d.Main=function(b){function d(){return this.finishImport=a(this.finishImport,this),this.addDatePickers=a(this.addDatePickers,this),this.render=a(this.render,this),this.firstRender=a(this.firstRender,this),this.setupLists=a(this.setupLists,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="Main",d.prototype.template=JST["backbone/templates/recent_import/main"],d.prototype.className="p-recent-import",d.prototype.events={'click a[rel="finish-import"]':"finishImport"},d.prototype.initialize=function(){return this.cashflow=this.options.cashflow,this.freeagent_credentials=new FloatApp.Models.FreeagentCredentials,this.freeagent_credentials.fetch({success:this.setupLists}),this.firstRender(),this},d.prototype.setupLists=function(){var a=this;return this.$("#entries").append((new FloatApp.Views.Invoices.Index({template:JST["backbone/templates/recent_import/invoices_table"],entries:this.cashflow.invoices.subset(function(b){return b.isIncome()&&b.get("import_number")>a.freeagent_credentials.get("last_clean_import")},!0),cashflow_sets:this.cashflow.cashflow_sets,projects:this.cashflow.projects})).render().el),this.$("#entries").append((new FloatApp.Views.Invoices.Index({template:JST["backbone/templates/recent_import/invoices_table"],entries:this.cashflow.invoices.subset(function(b){return b.isExpense()&&b.get("import_number")>a.freeagent_credentials.get("last_clean_import")},!0),cashflow_sets:this.cashflow.cashflow_sets,projects:this.cashflow.projects,payable:!0})).render().el),this.$("#entries").append((new FloatApp.Views.BankAccountEntries.Index({template:JST["backbone/templates/recent_import/transactions_table"],entries:this.cashflow.bank_account_entries.subset(function(b){return b.get("import_number")>a.freeagent_credentials.get("last_clean_import")},!0),cashflow_sets:this.cashflow.cashflow_sets})).render().el)},d.prototype.firstRender=function(){return $(this.el).html(this.template({})),this},d.prototype.render=function(){return this.addDatePickers(),this},d.prototype.addDatePickers=function(){return this.$("input.datepicker").not(".hasDatepicker").datepicker({buttonImage:"/images/icons/float/cal16.png",dateFormat:"yy-mm-dd",showOn:"button",buttonImageOnly:!0,firstDay:1}),this.$("input.datepicker-text").not(".hasDatepicker").datepicker({dateFormat:"yy-mm-dd",firstDay:1})},d.prototype.finishImport=function(a){var b=this;return $.noBubble(a),this.freeagent_credentials.finishImport({success:function(){return window.location.href="/"}})},d}(Backbone.View),b}()}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Settings=function(){var b,d,e;return b=function(b){function d(){return this.sync=a(this.sync,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="CookieSettings",d.prototype.initialize=function(){return this.bind("change",function(a){return this.save()})},d.prototype.cookieName="float-preferences",d.prototype.sync=function(a,b,c){(a==="create"||a==="update")&&$.cookie(this.cookieName,JSON.stringify(b.toJSON()),{path:"/"}),a==="read"&&b.set(JSON.parse($.cookie(this.cookieName)));if(a==="destroy")return $.cookie(this.cookieName,null)},d}(Backbone.Model),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.name="ServerSettings",b.prototype.dataTypes={overdraft_limit:"decimal"},b}(Backbone.Model),e=function(){function a(){this.cookieSettings=new b,this.cookieSettings.fetch(),this.serverSettings=new Backbone.Model}return a.name="Settings",a.prototype.initializeServerSettings=function(a){return this.serverSettings.set(a)},a}(),new e}()}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Views.SimpleModal=function(b){function d(){return this.close=a(this.close,this),this.show=a(this.show,this),this.render=a(this.render,this),this.template=a(this.template,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="SimpleModal",d.prototype.template=function(a){return'<div class="modal-header">\n  <a class="close"></a>\n  <h3>'+a.title+"</h3>\n</div>\n<div class='modal-body'>\n  </div>\n</div>"},d.prototype.className="modal",d.prototype.events={"click .close, .cancel":"close"},d.prototype.render=function(){return $(this.el).html($(this.template({title:this.options.title}))),$(this.el).find(".modal-body").append(this.options.content.html()),this},d.prototype.show=function(){return this.backdrop=$("<div class='modal-backdrop'>"),$("body").append(this.backdrop),$("body").append(this.render().el),this},d.prototype.close=function(a){return this.trigger("view:close"),a&&$.noBubble(a),$(this.el).remove(),this.backdrop.remove()},d}(Backbone.View)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Routers.ImportedDataRouter=function(b){function d(){return this.buildView=a(this.buildView,this),this.search=a(this.search,this),this.index=a(this.index,this),this.updateURLFromQuery=a(this.updateURLFromQuery,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="ImportedDataRouter",d.prototype.collection=null,d.prototype.views=null,d.prototype.initialize=function(a){return this.entries=new this.collection,a.visual_groups&&(this.visual_groups=new FloatApp.Collections.VisualGroupsCollection,this.visual_groups.reset(a.visual_groups)),a.cashflow_sets&&(this.cashflow_sets=new FloatApp.Collections.CashflowSetsCollection,this.cashflow_sets.reset(a.cashflow_sets),this.cashflow_sets.add([{id:"income",name:"Misc Inflow",expense_income:"income",type:"Budget"},{id:"expense",name:"Misc Outflow",expense_income:"expense",type:"Budget"}])),a.projects&&(this.projects=new FloatApp.Collections.ProjectsCollection(a.projects)),this.entries
.bind("reset",this.updateURLFromQuery)},d.prototype.updateURLFromQuery=function(a){var b,c,d;return b=a.queries.page,c=a.queries.search,d="page-"+b,c&&(d="search/"+c+"/"+d),this.navigate(d)},d.prototype.routes={"search/:search/page-:page":"search","page-:page":"index",".*":"index"},d.prototype.index=function(a,b,c){var d;return c==null&&(c={}),d=_.extend({},b),d.page=parseInt(a,10)||1,this.buildView(c),this.entries.setQuery(d)},d.prototype.search=function(a,b,c,d){var e;return d==null&&(d={}),e=_.extend({},c),e.page=parseInt(b,10)||1,e.search=a,this.buildView(d),this.entries.setQuery(e)},d.prototype.buildView=function(a){return a==null&&(a={}),this.view=new FloatApp.Views[this.views].Index(_.extend(a,{entries:this.entries,cashflow_sets:this.cashflow_sets,projects:this.projects})),$("#app").html(this.view.render().el),$("#entries").html(this.view.render().el)},d}(Backbone.Router)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Routers.AccountingCategoriesRouter=function(b){function d(){return this.mapping=a(this.mapping,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="AccountingCategoriesRouter",d.prototype.initialize=function(a){this.wizard=a.wizard,a.cashflow_sets&&(this.cashflow_sets=new FloatApp.Collections.CashflowSetsCollection,this.cashflow_sets.reset(a.cashflow_sets),this.cashflow_sets.add([{id:"income",name:"Misc Inflow",expense_income:"income",type:"Misc"},{id:"expense",name:"Misc Outflow",expense_income:"expense",type:"Misc"}])),a.accounting_categories&&(this.accounting_categories=new FloatApp.Collections.AccountingCategoriesCollection,this.accounting_categories.reset(a.accounting_categories)),a.bank_account_entries&&(this.bank_account_entries=new FloatApp.Collections.BankAccountEntriesCollection,this.bank_account_entries.reset(a.bank_account_entries));if(a.pubsub)return this.pubsub=a.pubsub},d.prototype.routes={".*":"mapping"},d.prototype.mapping=function(){return this.view=new FloatApp.Views.AccountingCategories.Mapping({accounting_categories:this.accounting_categories,cashflow_sets:this.cashflow_sets,pubsub:this.pubsub,wizard:this.wizard}),$("#app").html(this.view.render().el)},d}(Backbone.Router)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};FloatApp.Routers.BankAccountEntriesRouter=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.name="BankAccountEntriesRouter",c.prototype.collection=FloatApp.Collections.BankAccountEntriesCollection,c.prototype.views="BankAccountEntries",c}(FloatApp.Routers.ImportedDataRouter)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};FloatApp.Routers.CashflowEntriesRouter=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.name="CashflowEntriesRouter",c.prototype.initialize=function(a){return this.cashflow_entries=new FloatApp.Collections.CashflowEntriesCollection,this.cashflow_entries.reset(a.cashflow_entries)},c.prototype.routes={"/new":"newCashflowEntry","/index":"index","/:id/edit":"edit","/:id":"show",".*":"index"},c.prototype.newCashflowEntry=function(){return this.view=new FloatApp.Views.CashflowEntries.NewView({collection:this.cashflow_entries}),$("#cashflow_entries").html(this.view.render().el)},c.prototype.index=function(){return this.view=new FloatApp.Views.CashflowEntries.IndexView({cashflow_entries:this.cashflow_entries}),$("#cashflow_entries").html(this.view.render().el)},c.prototype.show=function(a){var b;return b=this.cashflow_entries.get(a),this.view=new FloatApp.Views.CashflowEntries.ShowView({model:b}),$("#cashflow_entries").html(this.view.render().el)},c.prototype.edit=function(a){var b;return b=this.cashflow_entries.get(a),this.view=new FloatApp.Views.CashflowEntries.EditView({model:b}),$("#cashflow_entries").html(this.view.render().el)},c}(Backbone.Router)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a},d=function(a,b){return function(){return a.apply(b,arguments)}};FloatApp.RegionManager=function(){function a(a){var b,c,d,e=this;d=function(a,b){return e.regions[a]=new FloatApp.ViewManager(b)};for(b in a)c=a[b],d(b,c)}return a.name="RegionManager",a.prototype.regions={},a.prototype.switchRegion=function(a,b){return this.regions[a].showView(b)},a}(),(a=FloatApp.Views).Charts||(a.Charts={}),FloatApp.Views.Charts.CashflowWithAccounts=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.name="CashflowWithAccounts",b.prototype.template=JST["backbone/templates/cashflow/layout_chart_single"],b.prototype.render=function(){return $(this.el).html(this.template()),this.accountsView=new FloatApp.Views.BankAccounts.Index({collection:this.options.cashflow.bank_accounts.notCreditCards()}),this.$("#bank_accounts").html(this.accountsView.render().el),this.chartView=new FloatApp.Views.Cashflow.SplitChartView({model:this.options.cashflow,period:"month"}),this.$("#chart").html(this.chartView.render().el),this},b.prototype.onRender=function(){return this.chartView.renderChart()},b.prototype.dispose=function(){return this.accountsView.dispose(),this.chartView.dispose(),this.remove()},b}(Backbone.View),FloatApp.Views.Charts.PipelineWithAccounts=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.name="PipelineWithAccounts",b.prototype.template=JST["backbone/templates/cashflow/layout_chart_single"],b.prototype.render=function(){return $(this.el).html(this.template()),this.accountsView=new FloatApp.Views.BankAccounts.Index({collection:this.options.cashflow.bank_accounts.notCreditCards()}),this.$("#bank_accounts").html(this.accountsView.render().el),this.chartView=new FloatApp.Views.Cashflow.PipelineChart({model:this.options.cashflow,period:"month"}),this.$("#chart").html(this.chartView.render().el),this},b.prototype.onRender=function(){return this.chartView.renderChart()},b.prototype.dispose=function(){return this.accountsView.dispose(),this.chartView.dispose(),this.remove()},b}(Backbone.View),FloatApp.Views.Charts.PipelineAndCashflow=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.name="PipelineAndCashflow",b.prototype.template=JST["backbone/templates/cashflow/layout_chart_split"],b.prototype.render=function(){return $(this.el).html(this.template()),this.cashflowChart=new FloatApp.Views.Cashflow.SplitChartView({model:this.options.cashflow,period:"month"}),this.$("#chart-cash").html(this.cashflowChart.render().el),this.pipelineChart=new FloatApp.Views.Cashflow.PipelineChart({model:this.options.cashflow,period:"month"}),this.$("#chart-pipe").html(this.pipelineChart.render().el),FloatApp.Settings.serverSettings.get("enable_scenarios")&&(this.controls=new FloatApp.Modules.ChartControls({model:this.options.cashflow}),this.$('[data-yield="chart-controls"]').html(this.controls.mainView.render().el)),this},b.prototype.onRender=function(){return this.pipelineChart.renderChart(),this.cashflowChart.renderChart()},b.prototype.dispose=function(){return this.pipelineChart.dispose(),this.cashflowChart.dispose(),this.remove()},b}(Backbone.View),FloatApp.Routers.CashflowRouter=function(a){function b(){return this.editOptions=d(this.editOptions,this),this.classifyType=d(this.classifyType,this),this.modalEditView=d(this.modalEditView,this),this.modalEdit=d(this.modalEdit,this),this.recent_import=d(this.recent_import,this),this.new_pipeline=d(this.new_pipeline,this),this.projects=d(this.projects,this),this.table=d(this.table,this),this["default"]=d(this["default"],this),this.bindModals=d(this.bindModals,this),this.navigate=d(this.navigate,this),b.__super__.constructor.apply(this,arguments)}return c(b,a),b.name="CashflowRouter",b.prototype.initialize=function(a){return this.cashflow=new FloatApp.Models.Cashflow({},a),this.regionManager=new FloatApp.RegionManager({charts:".region-overview",content:"#cashflow"}),this.pubsub=FloatApp.PubSub,this.bindModals(),this.windowManager=new FloatApp.WindowManager({cashflow:this.cashflow,offset:220,minCellWidth:90,currentMonthWidth:3,bindResize:!1})},b.prototype.navigate=function(a,b){return FloatApp.PubSub.trigger("viewed","cashflow/"+a,a),Backbone.history.navigate(a,b)},b.prototype.bindModals=function(){var a=this;return this.pubsub.bind("modal:edit",this.modalEdit),this.cashflow.bind("change:view_range",function(b,c){return a.navigate("table/"+c[0].toString()+"-to-"+c[1].toString(),!1)}),FloatApp.PubSub.bind("projects:show",function(b){return a.projectsPanel&&a.projectsPanel.showProjectID(b),a.navigate("projects/"+b,!1)}),FloatApp.PubSub.bind("projects:show:overview",function(b){return a.projectsPanel&&a.projectsPanel.showOverview(b),a.navigate("projects/all",!1)}),FloatApp.PubSub.bind("pipeline:new",function(){var b;return FloatApp.log("Pipeline:new triggered"),a.navigate("pipeline/new"),b=new FloatApp.Models.Project,a.cashflow.projects.add(b),a.projectDetail=new FloatApp.Modules.ProjectDetail({project:b,salesRow:a.cashflow.cashflow_sets.salesRow()}),a.regionManager.switchRegion("content",a.projectDetail.mainView)}),FloatApp.PubSub.bind("pipeline:show",function(b){return a.navigate("pipeline/"+b),a.projectDetail=new FloatApp.Modules.ProjectDetail({project:a.cashflow.projects.get(b),salesRow:a.cashflow.cashflow_sets.salesRow()}),a.regionManager.switchRegion("content",a.projectDetail.mainView)}),FloatApp.PubSub.bind("pipeline:show:overview",function(){return a.navigate("pipeline/all"),a.projectsOverview=new FloatApp.Modules.ProjectsOverview({projects:a.cashflow.projects}),a.regionManager.switchRegion("content",a.projectsOverview.mainView)})},b.prototype.routes={recent_import:"recent_import","projects/:project_id":"projects",projects:"projects","pipeline/:project_id":"new_pipeline",pipeline:"new_pipeline","table/:from-to-:to":"table",":from-to-:to":"table",table:"default",".*":"default"},b.prototype["default"]=function(){var a,b;return a=_.date().clone().subtract({M:1}).beginningOf("month"),b=a.clone().add({M:this.windowManager.nMonths()-1}).endOf("month"),this.navigate("table/"+a.toJSON()+"-to-"+b.toJSON(),!0)},b.prototype.table=function(a,b){return this.currentRoute="table",_.isString(a)&&(a=_.date.fromJSON(a)),_.isString(b)&&(b=_.date.fromJSON(b)),a=a.beginningOf("month"),b=b.endOf("month"),this.cashflow.setViewRange(a,b),this.regionManager.switchRegion("charts",new FloatApp.Views.Charts.CashflowWithAccounts({cashflow:this.cashflow})),this.regionManager.switchRegion("content",new FloatApp.Views.Cashflow.TableView({model:this.cashflow,period:"month"}))},b.prototype.projects=function(a){return this.cashflow.setViewRange(_.date().subtract({M:1}).beginningOf("month"),_.date().add({M:6}).endOf("month"),{silent:!0}),this.regionManager.switchRegion("charts",new FloatApp.Views.Charts.PipelineWithAccounts({cashflow:this.cashflow})),this.projectsPanel=new FloatApp.Views.Projects.ProjectsPanel({model:this.cashflow}),this.regionManager.switchRegion("content",this.projectsPanel),a?this.projectsPanel.showProjectID(a):this.projectsPanel.showOverview()},b.prototype.new_pipeline=function(a){return this.cashflow.setViewRange(_.date().subtract({M:1}).beginningOf("month"),_.date().add({M:6}).endOf("month"),{silent:!0}),this.chartsView=new FloatApp.Views.Charts.PipelineAndCashflow({cashflow:this.cashflow}),this.regionManager.switchRegion("charts",this.chartsView),a&&a!=="all"&&a!=="new"?FloatApp.PubSub.trigger("pipeline:show",a):a==="new"?FloatApp.PubSub.trigger("pipeline:new"):FloatApp.PubSub.trigger("pipeline:show:overview")},b.prototype.recent_import=function(){var a;return a=new FloatApp.Modules.RecentImport({cashflow:this.cashflow}),$("#overview").hide(),this.viewManager.showView(a.mainView)},b.prototype.modalEdit=function(a,b){return a=this.classifyType(a),this.modalEditView(a,this.editOptions(a,b))},b.prototype.modalEditView=function(a,b){var c,d;return c=FloatApp.Views[a].EditView||FloatApp.Views[a].Edit,d=new c(b),$("body").append(d.render().el)},b.prototype.classifyType=function(a){var b,c;return c=_.map(a.split("_"),function(a){return a[0].toUpperCase()+a.slice(1,a.length)}),b=c[c.length-1],_.last(b)==="y"?c[c.length-1]=b.slice(0,b.length-1)+"ies":c[c.length-1]=b+"s",c.join("")},b.prototype.editOptions=function(a,b){var c;return c={Projects:{model:b},VatReturns:{model:b},"default":{model:b,cashflow_sets:this.cashflow.cashflow_sets,projects:this.cashflow.projects}},c[a]||c["default"]},b}(Backbone.Router)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Routers.InvoicesRouter=function(b){function d(){return this.search=a(this.search,this),this.index=a(this.index,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="InvoicesRouter",d.prototype.collection=FloatApp.Collections.InvoicesCollection,d.prototype.views="Invoices",d.prototype.initialize=function(a){return this.invoice_type=a.invoice_type,d.__super__.initialize.call(this,a)},d.prototype.index=function(a,b){return b||(b={}),this.invoice_type==="payable"&&(b.payable=!0),this.invoice_type==="receivable"&&(b.receivable=!0),d.__super__.index.call(this,a,b,b)},d.prototype.search=function(a,b,c){return c||(c={}),this.invoice_type==="payable"&&(c.payable=!0),this.invoice_type==="receivable"&&(c.receivable=!0),d.__super__.search.call(this,a,b,c,c)},d}(FloatApp.Routers.ImportedDataRouter)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};FloatApp.Routers.WizardRouter=function(b){function d(){return this.importing=a(this.importing,this),d.__super__.constructor.apply(this,arguments)}return c(d,b),d.name="WizardRouter",d.prototype.initialize=function(a){return this.cashflow=new FloatApp.Models.Cashflow(a.cashflow,a),this.view_manager=new FloatApp.ViewManager($("#wizard")),this.pubsub=a.pubsub,this.cashflow_initialized=!1},d.prototype.routes={importing:"importing",".*":"importing"},d.prototype.importing=function(){var a;return a=new FloatApp.Views.FreeagentOauthWizard.Importing({cashflow:this.cashflow,pubsub:this.pubsub}),this.view_manager.showView(a)},d}(Backbone.Router)}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};FloatApp.Polls.FreeagentImport=function(){function b(b){this.false_to_false=a(this.false_to_false,this),this.true_to_true=a(this.true_to_true,this),this.false_to_true=a(this.false_to_true,this),this.true_to_false=a(this.true_to_false,this),this.updateState=a(this.updateState,this),this.poll=a(this.poll,this),this.stop=a(this.stop,this),this.start=a(this.start,this),this.changePeriod=a(this.changePeriod,this),this.pubsub=b.pubsub,this.period=b.period||2e4,this.state=b.initial_state||!1,this.interval_handler=!1,b.autostart&&this.start(),this.pubsub.bind("import_started",this.poll),this.pubsub.bind("import_completed",this.poll)}return b.name="FreeagentImport",b.prototype.url="/company/import_running.json",b.prototype.events={false_true:"import_started",true_false:"import_completed",true_true:"import_running",false_false:"import_not_running"},b.prototype.changePeriod=function(a){return this.stop(),this.period=a,this.start()},b.prototype.start=function(){return this.poll(),this.interval_handler=setInterval(this.poll,this.period)},b.prototype.stop=function(){if(this.interval_handler)return clearTimeout(this.interval_handler),this.interval_handler=!1},b.prototype.poll=function(){return $.getJSON(this.url,this.updateState)},b.prototype.updateState=function(a){if(a!==this.state)return a&&this.false_to_true(),a||this.true_to_false(),this.state=a;a&&this.state&&this.true_to_true();if(!a&&!this.state)return this.false_to_false()},b.prototype.true_to_false=function(){return this.pubsub.trigger(this.events.true_false),this.changePeriod(12e4)},b.prototype.false_to_true=function(){return this.pubsub.trigger(this.events.false_true),this.changePeriod(5e3)},b.prototype.true_to_true=function(){if(this.events.true_true)return this.pubsub.trigger(this.events.true_true)},b.prototype.false_to_false=function(){if(this.events.false_false)return this.pubsub.trigger(this.events.false_false)},b}()}.call(this),function(){this.FloatApp||(this.FloatApp={}),this.FloatApp.Charts=function(){var a,b,c;return a={views:{},charts:{},render:function(a,b){var c,d;return d=this.views[a]||this.views["default"],d=jQuery.extend(!0,{},d,b),c=new Highcharts.Chart(d,function(a){return $(a.container).hover(function(){return $.data(this,"hover",!0)},function(){return $.data(this,"hover",!1)}),$("#chart_container, #chart_container_pipeline .highcharts-container").mouseleave(function(){return $("#highchart-tooltip").hide()})}),d.float&&d.float.onRender&&d.float.onRender.apply(c),c}},a.views["default"]={credits:{enabled:!1}},a.metadata={},a.cashflowTodayNode=null,a.overdraftNode=null,a.views.cashflow=jQuery.extend(!0,{},a.views["default"],{chart:{borderColor:"#ffffff",borderWidth:0},yAxis:{labels:{formatter:function(){var a;return a=""+Highcharts.numberFormat(Math.abs(this.value),0),this.value<0&&(a="-"+a),a}},allowDecimals:!1,title:{text:""},plotBands:[{from:-1e8,to:0,color:"rgba(254, 230, 230, 0.5)"}],gridLineDashStyle:"dash"}}),a.views["cashflow/pipeline"]=jQuery.extend(!0,{},a.views.cashflow,{xAxis:{categories:!0,tickmarkPlacement:"between"},tooltip:{shared:!0,formatter:function(){var a,b,c,d,e,f,g,h,i;if($("#chart_container_pipeline .highcharts-container").data("hover")){a=$("#highchart-tooltip").first(),a.length||(a=$('<div id="highchart-tooltip">').css({display:"block",background:"white",position:"absolute",zIndex:1e4}),$("body").append(a),$("body").mousemove(function(a){return $("#highchart-tooltip").css({left:a.clientX+15,top:a.clientY})})),d={},e=0,i=this.points,f=function(a){return a.series.name!=="Sales Target"&&(e=e+Math.abs(a.y,2)),d[a.series.name]={value:Highcharts.numberFormat(Math.abs(a.y,2)),color:a.series.color}};for(g=0,h=i.length;g<h;g++)b=i[g],f(b);e=Highcharts.numberFormat(e),c="",c+="<h1>"+this.x+"</h1>",c+="<div class='hctt-target'>\n<h6 class='hctt-section'>Sales Targets</h6>\n<span class='hctt-colorbox' style='background: "+d["Sales Target"].color+"'></span>\n<span class='hctt-label'>Remaining:</span>\n<span class='hctt-value'>"+d["Sales Target"].value+"</span>\n</div>",c+="<h6 class='hctt-section'>Actuals</h6>\n<div>\n<span class='hctt-colorbox' style='background: "+d.Projected.color+"'></span>\n<span class='hctt-label'>Projected:</span>\n<span class='hctt-value'>"+d.Projected.value+"</span>\n</div>",c+="<div>\n<span class='hctt-colorbox' style='background: "+d.Invoiced.color+"'></span>\n<span class='hctt-label'>Invoiced:</span>\n<span class='hctt-value'>"+d.Invoiced.value+"</span>\n</div>",c+="<div>\n<span class='hctt-colorbox' style='background: "+d.Paid.color+"'></span>\n<span class='hctt-label'>Paid:</span>\n<span class='hctt-value'>"+d.Paid.value+"</span>\n</div>",c+="<div class='hctt-total'>\n<span class='hctt-colorbox' style='background:'></span>\n<span class='hctt-label'>Total:</span>\n<span class='hctt-value'>"+e+"</span>\n</div>",a.show().html(c)}return!1}}}),c=function(a){var b,c,d,e,f,g,h,i,j;return d=this.series.length-1,f=this.series[d].points[0].plotX,e=this.series[d].points[0].x,c=_.last(this.series[d].points).plotX,b=_.last(this.series[d].points).x,g="TODAY",h=(c-f)*((_.date().valueOf()-e)/(b-e))+f+80-15,j=this.yAxis[0],i=j.top-5,a&&a.element.parentNode.removeChild(a.element),a=this.renderer.text(g,h,i).css({fontSize:"9px",color:"#446"}).add(),this.cashflowTodayNode=a},b=function(a){var b,c,d,e,f;c=_.find(this.yAxis[0].plotLinesAndBands,function(a){return a.id==="overdraftline"});if(c&&c.svgElem)return d=FloatApp.Settings.serverSettings.get("overdraft_name")||"Warning",b=c.svgElem.getBBox(),e=b.x+3,f=b.y+10,a&&a.element.parentNode.removeChild(a.element),a=this.renderer.text(d,e,f).css({fontSize:"9px",color:"#844"}).add(),this.overdraftNode=a},a.views["cashflow/longterm"]=jQuery.extend(!0,{},a.views.cashflow,{"float":{onRender:function(){var a;return this.cashflowTodayNode=null,c.call(this,this.cashflowTodayNode),(a=FloatApp.Settings.serverSettings.get("overdraft_limit"))?this.options.float.addOverdraftLine.call(this):FloatApp.Settings.serverSettings.bind("change:overdraft_limit",this.options.float.addOverdraftLine)},addedOverdraftLine:!1,addOverdraftLine:function(){var a;if(!this.options.float.addedOverdraftLine)return a=FloatApp.Settings.serverSettings.get("overdraft_limit"),this.yAxis[0].addPlotLine({zIndex:5,value:a,color:"#880000",width:1,dashStyle:"Dash",id:"overdraftline"}),this.overdraftNode=null,b.call(this,this.overdraftNode),this.options.float.addedOverdraftLine=!0}},chart:{margin:[35,13,50,120],events:{redraw:function(){return c.call(this,this.cashflowTodayNode),b.call(this,this.overdraftNode)}}},legend:{align:"right",verticalAlign:"top",borderWidth:0},colors:["#9900FF","#00B3F3"],plotOptions:{series:{events:{legendItemClick:function(){}}}},title:{text:""},xAxis:{type:"datetime",startOnTick:!1,endOnTick:!0,minPadding:0,maxPadding:0,title:{text:"Date"},plotBands:[{from:_.date("2000-01-01").valueOf(),to:_.date().valueOf(),color:"#EEEEFE"}],plotLines:[{value:_.date().valueOf(),color:"#446",width:1}],gridLineWidth:1,labels:{align:"left"},gridLineDashStyle:"Dash"},yAxis:{plotLines:[{zIndex:5,value:0,color:"#666",width:2}],gridLineDashStyle:"Solid"},tooltip:{formatter:function(){var a,b,c,d,e;return b=["January","February","March","April","May","June","July","August","September","October","November","December"],a=new Date(this.point.x),c=b[a.getMonth()],d="",e=""+Highcharts.numberFormat(Math.abs(this.point.y,2)),this.point.y<0&&(e="-"+e),d+="<b>",a.getDate()===1&&(d+="Beginning of "),a.getDate()>27&&(d+="End of "),d+=c+"</b><br>",d+="<span>"+(this.point.name||this.series.name)+"</span>: "+e,d}}}),a.views["cashflow/longterm-breakdown"]=jQuery.extend(!0,{},a.views["cashflow/longterm"],{chart:{margin:[10,5,50,250]},legend:{align:"vertical",width:100},plotOptions:{column:{stacking:"normal",pointWidth:25,borderWidth:0}}}),a}()}.call(this),function(a){function d(a){var b=[];while(a=j(a))b[b.length]=a[0];return b}function e(c){return a(c).siblings("tr."+b.childPrefix+c[0].id)}function f(a){var b=parseInt(a[0].style.paddingLeft,10);return isNaN(b)?c:b}function g(c,d){var h=a(c.children("td")[b.treeColumn]);h[0].style.paddingLeft=f(h)+d+"px",e(c).each(function(){g(a(this),d)})}function h(c){if(!c.hasClass("initialized")){c.addClass("initialized");var d=e(c);!c.hasClass("parent")&&d.length>0&&c.addClass("parent");if(c.hasClass("parent")){var g=a(c.children("td")[b.treeColumn]),h=f(g)+b.indent;d.each(function(){a(this).children("td")[b.treeColumn].style.paddingLeft=h+"px"});if(b.expandable){var i=parseInt(b.indent,10)+parseInt(b.width,10);if(b.position=="right"){var j='<span style="background-position: right center; padding-left: '+i+'px" class="expander"></span>',k='<span style="padding-left: '+b.indent+'px"></span>';g.prepend(k),g.append(j)}else{var j='<span style="padding-left: '+i+'px" class="expander"></span>';g.prepend(j)}a(g[0].firstChild).click(function(){c.toggleBranch()}),b.clickableNodeNames&&(g[0].style.cursor="pointer",a(g).click(function(a){a.target.className!="expander"&&c.toggleBranch()}));if(b.persist){var l=b.persistCookiePrefix+c.attr("id");a.cookie(l)=="true"&&c.addClass("expanded")}!c.hasClass("expanded")&&!c.hasClass("collapsed")&&c.addClass(b.initialState),c.hasClass("expanded")&&c.expand()}}}}function i(b,c){b.insertAfter(c),e(b).reverse().each(function(){i(a(this),b[0])})}function j(c){var d=c[0].className.split(" ");for(var e=0;e<d.length;e++)if(d[e].match(b.childPrefix))return a(c).siblings("#"+d[e].substring(b.childPrefix.length));return null}var b,c;a.fn.treeTable=function(d){return b=a.extend({},a.fn.treeTable.defaults,d),this.each(function(){a(this).addClass("treeTable").find("tbody tr").each(function(){if(!a(this).hasClass("initialized")){var d=a(this)[0].className.search(b.childPrefix)==-1;d&&isNaN(c)&&(c=parseInt(a(a(this).children("td")[b.treeColumn]).css("padding-left"),10)),!d&&b.expandable&&b.initialState=="collapsed"&&a(this).addClass("ui-helper-hidden"),(!b.expandable||d)&&h(a(this))}})})},a.fn.treeTable.defaults={childPrefix:"child-of-",clickableNodeNames:!1,expandable:!0,indent:19,initialState:"collapsed",onNodeShow:null,onNodeHide:null,treeColumn:0,persist:!1,persistCookiePrefix:"treeTable_"},a.fn.collapse=function(){return a(this).addClass("collapsed"),e(a(this)).each(function(){a(this).hasClass("collapsed")||a(this).collapse(),a(this).addClass("ui-helper-hidden"),a.isFunction(b.onNodeHide)&&b.onNodeHide.call()}),this},a.fn.expand=function(){return a(this).removeClass("collapsed").addClass("expanded"),e(a(this)).each(function(){h(a(this)),a(this).is(".expanded.parent")&&a(this).expand(),a(this).removeClass("ui-helper-hidden"),a.isFunction(b.onNodeShow)&&b.onNodeShow.call()}),this},a.fn.reveal=function(){return a(d(a(this)).reverse()).each(function(){h(a(this)),a(this).expand().show()}),this},a.fn.appendBranchTo=function(c){var e=a(this),f=j(e),h=a.map(d(a(c)),function(a){return a.id});return a.inArray(e[0].id,h)==-1&&(!f||c.id!=f[0].id)&&c.id!=e[0].id&&(g(e,d(e).length*b.indent*-1),f&&e.removeClass(b.childPrefix+f[0].id),e.addClass(b.childPrefix+c.id),i(e,c),g(e,d(e).length*b.indent)),this},a.fn.reverse=function(){return this.pushStack(this.get().reverse(),arguments)},a.fn.toggleBranch=function(){a(this).hasClass("collapsed")?a(this).expand():a(this).removeClass("expanded").collapse();if(b.persist){var c=b.persistCookiePrefix+a(this).attr("id");a.cookie(c,a(this).hasClass("expanded")?"true":null)}return this}}(jQuery),!function(a){function d(a,b,c){return typeof a=="function"?a.apply(b,c):a}var b;a(document).ready(function(){a.support.transition=function(){var a=document.body||document.documentElement,b=a.style,c=b.transition!==undefined||b.WebkitTransition!==undefined||b.MozTransition!==undefined||b.MsTransition!==undefined||b.OTransition!==undefined;return c}(),a.support.transition&&(b="TransitionEnd",a.browser.webkit?b="webkitTransitionEnd":a.browser.mozilla?b="transitionend":a.browser.opera&&(b="oTransitionEnd"))});var c=function(b,c){this.$element=a(b),this.options=c,this.enabled=!0,this.fixTitle()};c.prototype={show:function(){var b,c,e,f,g,h;if(this.getTitle()&&this.enabled){g=this.tip(),this.setContent(),this.options.animate&&g.addClass("fade"),g.remove().css({top:0,left:0,display:"block"}).prependTo(document.body),b=a.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),c=g[0].offsetWidth,e=g[0].offsetHeight,f=d(this.options.placement,this,[g[0],this.$element[0]]);switch(f){case"below":h={top:b.top+b.height+this.options.offset,left:b.left+b.width/2-c/2};break;case"above":h={top:b.top-e-this.options.offset,left:b.left+b.width/2-c/2};break;case"left":h={top:b.top+b.height/2-e/2,left:b.left-c-this.options.offset};break;case"right":h={top:b.top+b.height/2-e/2,left:b.left+b.width+this.options.offset}}g.css(h).addClass(f).addClass("in")}},setContent:function(){var a=this.tip();a.find(".twipsy-inner")[this.options.html?"html":"text"](this.getTitle()),a[0].className="twipsy"},hide:function(){function e(){d.remove()}var c=this,d=this.tip();d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.bind(b,e):e()},fixTitle:function(){var a=this.$element;(a.attr("title")||typeof a.attr("data-original-title")!="string")&&a.attr("data-original-title",a.attr("title")||"").removeAttr("title")},getTitle:function(){var a,b=this.$element,c=this.options;return this.fixTitle(),typeof c.title=="string"?a=b.attr(c.title=="title"?"data-original-title":c.title):typeof c.title=="function"&&(a=c.title.call(b[0])),a=(""+a).replace(/(^\s*|\s*$)/,""),a||c.fallback},tip:function(){return this.$tip||(this.$tip=a('<div class="twipsy" />').html('<div class="twipsy-arrow"></div><div class="twipsy-inner"></div>')),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},a.fn.twipsy=function(b){return a.fn.twipsy.initWith.call(this,b,c,"twipsy"),this},a.fn.twipsy.initWith=function(b,c,d){function i(e){var f=a.data(e,d);return f||(f=new c(e,a.fn.twipsy.elementOptions(e,b)),a.data(e,d,f)),f}function j(){var a=i(this);a.hoverState="in",b.delayIn==0?a.show():(a.fixTitle(),setTimeout(function(){a.hoverState=="in"&&a.show()},b.delayIn))}function k(){var a=i(this);a.hoverState="out",b.delayOut==0?a.hide():setTimeout(function(){a.hoverState=="out"&&a.hide()},b.delayOut)}var e,f,g,h;return b===!0?this.data(d):typeof b=="string"?(e=this.data(d),e&&e[b](),this):(b=a.extend({},a.fn[d].defaults,b),b.live||this.each(function(){i(this)}),b.trigger!="manual"&&(f=b.live?"live":"bind",g=b.trigger=="hover"?"mouseenter":"focus",h=b.trigger=="hover"?"mouseleave":"blur",this[f](g,j)[f](h,k)),this)},a.fn.twipsy.Twipsy=c,a.fn.twipsy.defaults={animate:!0,delayIn:0,delayOut:0,fallback:"",placement:"above",html:!1,live:!1,offset:0,title:"title",trigger:"hover"},a.fn.twipsy.elementOptions=function(b,c){return a.metadata?a.extend({},c,a(b).metadata()):c}}(window.jQuery||window.ender),!function(a){"use strict";var b;a(document).ready(function(){a.support.transition=function(){var a=document.body||document.documentElement,b=a.style,c=b.transition!==undefined||b.WebkitTransition!==undefined||b.MozTransition!==undefined||b.MsTransition!==undefined||b.OTransition!==undefined;return c}(),a.support.transition&&(b="TransitionEnd",a.browser.webkit?b="webkitTransitionEnd":a.browser.mozilla?b="transitionend":a.browser.opera&&(b="oTransitionEnd"))});var c=function(b,c){this.settings=a.extend({},a.fn.alert.defaults,c),this.$element=a(b).delegate(this.settings.selector,"click",this.close)};c.prototype={close:function(c){function e(){d.remove()}var d=a(this).parent(".alert-message");c&&c.preventDefault(),d.removeClass("in"),a.support.transition&&d.hasClass("fade")?d.bind(b,e):e()}},a.fn.alert=function(b){return b===!0?this.data("alert"):this.each(function(){var d=a(this);if(typeof b=="string")return d.data("alert")[b]();a(this).data("alert",new c(this,b))})},a.fn.alert.defaults={selector:".close"},a(document).ready(function(){new c(a("body"),{selector:".alert-message[data-alert] .close"})})}(window.jQuery||window.ender),function(a){function b(){if(!a.fn.ajaxSubmit.debug)return;var b="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(b):window.opera&&window.opera.postError&&window.opera.postError(b)}a.fn.ajaxSubmit=function(c){function u(e){function w(a){var b=a.contentWindow?a.contentWindow.document:a.contentDocument?a.contentDocument:a.document;return b}function x(){function h(){try{var a=w(n).readyState;b("state = "+a),a.toLowerCase()=="uninitialized"&&setTimeout(h,50)}catch(c){b("Server abort: ",c," (",c.name,")"),C(v),s&&clearTimeout(s),s=undefined}}var c=g.attr("target"),e=g.attr("action");f.setAttribute("target",l),d||f.setAttribute("method","POST"),e!=j.url&&f.setAttribute("action",j.url),!j.skipEncodingOverride&&(!d||/post/i.test(d))&&g.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),j.timeout&&(s=setTimeout(function(){r=!0,C(u)},j.timeout));var i=[];try{if(j.extraData)for(var k in j.extraData)i.push(a('<input type="hidden" name="'+k+'" />').attr("value",j.extraData[k]).appendTo(f)[0]);j.iframeTarget||(m.appendTo("body"),n.attachEvent?n.attachEvent("onload",C):n.addEventListener("load",C,!1)),setTimeout(h,15),f.submit()}finally{f.setAttribute("action",e),c?f.setAttribute("target",c):g.removeAttr("target"),a(i).remove()}}function C(c){if(o.aborted||B)return;try{z=w(n)}catch(d){b("cannot access response document: ",d),c=v}if(c===u&&o){o.abort("timeout");return}if(c==v&&o){o.abort("server abort"
);return}if(!z||z.location.href==j.iframeSrc)if(!r)return;n.detachEvent?n.detachEvent("onload",C):n.removeEventListener("load",C,!1);var e="success",f;try{if(r)throw"timeout";var g=j.dataType=="xml"||z.XMLDocument||a.isXMLDoc(z);b("isXml="+g);if(!g&&window.opera&&(z.body==null||z.body.innerHTML=="")&&--A){b("requeing onLoad callback, DOM not available"),setTimeout(C,250);return}var h=z.body?z.body:z.documentElement;o.responseText=h?h.innerHTML:null,o.responseXML=z.XMLDocument?z.XMLDocument:z,g&&(j.dataType="xml"),o.getResponseHeader=function(a){var b={"content-type":j.dataType};return b[a]},h&&(o.status=Number(h.getAttribute("status"))||o.status,o.statusText=h.getAttribute("statusText")||o.statusText);var i=(j.dataType||"").toLowerCase(),l=/(json|script|text)/.test(i);if(l||j.textarea){var p=z.getElementsByTagName("textarea")[0];if(p)o.responseText=p.value,o.status=Number(p.getAttribute("status"))||o.status,o.statusText=p.getAttribute("statusText")||o.statusText;else if(l){var q=z.getElementsByTagName("pre")[0],t=z.getElementsByTagName("body")[0];q?o.responseText=q.textContent?q.textContent:q.innerText:t&&(o.responseText=t.textContent?t.textContent:t.innerText)}}else i=="xml"&&!o.responseXML&&o.responseText!=null&&(o.responseXML=D(o.responseText));try{y=F(o,i,j)}catch(c){e="parsererror",o.error=f=c||e}}catch(c){b("error caught: ",c),e="error",o.error=f=c||e}o.aborted&&(b("upload aborted"),e=null),o.status&&(e=o.status>=200&&o.status<300||o.status===304?"success":"error"),e==="success"?(j.success&&j.success.call(j.context,y,"success",o),k&&a.event.trigger("ajaxSuccess",[o,j])):e&&(f==undefined&&(f=o.statusText),j.error&&j.error.call(j.context,o,e,f),k&&a.event.trigger("ajaxError",[o,j,f])),k&&a.event.trigger("ajaxComplete",[o,j]),k&&!--a.active&&a.event.trigger("ajaxStop"),j.complete&&j.complete.call(j.context,o,e),B=!0,j.timeout&&clearTimeout(s),setTimeout(function(){j.iframeTarget||m.remove(),o.responseXML=null},100)}var f=g[0],h,i,j,k,l,m,n,o,p,q,r,s,t=!!a.fn.prop;if(e)if(t)for(i=0;i<e.length;i++)h=a(f[e[i].name]),h.prop("disabled",!1);else for(i=0;i<e.length;i++)h=a(f[e[i].name]),h.removeAttr("disabled");if(a(":input[name=submit],:input[id=submit]",f).length){alert('Error: Form elements must not have name or id of "submit".');return}j=a.extend(!0,{},a.ajaxSettings,c),j.context=j.context||j,l="jqFormIO"+(new Date).getTime(),j.iframeTarget?(m=a(j.iframeTarget),q=m.attr("name"),q==null?m.attr("name",l):l=q):(m=a('<iframe name="'+l+'" src="'+j.iframeSrc+'" />'),m.css({position:"absolute",top:"-1000px",left:"-1000px"})),n=m[0],o={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(c){var d=c==="timeout"?"timeout":"aborted";b("aborting upload... "+d),this.aborted=1,m.attr("src",j.iframeSrc),o.error=d,j.error&&j.error.call(j.context,o,d,c),k&&a.event.trigger("ajaxError",[o,j,d]),j.complete&&j.complete.call(j.context,o,d)}},k=j.global,k&&!(a.active++)&&a.event.trigger("ajaxStart"),k&&a.event.trigger("ajaxSend",[o,j]);if(j.beforeSend&&j.beforeSend.call(j.context,o,j)===!1){j.global&&a.active--;return}if(o.aborted)return;p=f.clk,p&&(q=p.name,q&&!p.disabled&&(j.extraData=j.extraData||{},j.extraData[q]=p.value,p.type=="image"&&(j.extraData[q+".x"]=f.clk_x,j.extraData[q+".y"]=f.clk_y)));var u=1,v=2;j.forceSync?x():setTimeout(x,10);var y,z,A=50,B,D=a.parseXML||function(a,b){return window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml"),b&&b.documentElement&&b.documentElement.nodeName!="parsererror"?b:null},E=a.parseJSON||function(a){return window.eval("("+a+")")},F=function(b,c,d){var e=b.getResponseHeader("content-type")||"",f=c==="xml"||!c&&e.indexOf("xml")>=0,g=f?b.responseXML:b.responseText;return f&&g.documentElement.nodeName==="parsererror"&&a.error&&a.error("parsererror"),d&&d.dataFilter&&(g=d.dataFilter(g,c)),typeof g=="string"&&(c==="json"||!c&&e.indexOf("json")>=0?g=E(g):(c==="script"||!c&&e.indexOf("javascript")>=0)&&a.globalEval(g)),g}}if(!this.length)return b("ajaxSubmit: skipping submit process - no element selected"),this;var d,e,f,g=this;typeof c=="function"&&(c={success:c}),d=this.attr("method"),e=this.attr("action"),f=typeof e=="string"?a.trim(e):"",f=f||window.location.href||"",f&&(f=(f.match(/^([^#]+)/)||[])[1]),c=a.extend(!0,{url:f,success:a.ajaxSettings.success,type:d||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},c);var h={};this.trigger("form-pre-serialize",[this,c,h]);if(h.veto)return b("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(c.beforeSerialize&&c.beforeSerialize(this,c)===!1)return b("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var i=c.traditional;i===undefined&&(i=a.ajaxSettings.traditional);var j,k,l,m=this.formToArray(c.semantic);c.data&&(c.extraData=c.data,j=a.param(c.data,i));if(c.beforeSubmit&&c.beforeSubmit(m,this,c)===!1)return b("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[m,this,c,h]);if(h.veto)return b("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var n=a.param(m,i);j&&(n=n?n+"&"+j:j),c.type.toUpperCase()=="GET"?(c.url+=(c.url.indexOf("?")>=0?"&":"?")+n,c.data=null):c.data=n;var o=[];c.resetForm&&o.push(function(){g.resetForm()}),c.clearForm&&o.push(function(){g.clearForm(c.includeHidden)});if(!c.dataType&&c.target){var p=c.success||function(){};o.push(function(b){var d=c.replaceTarget?"replaceWith":"html";a(c.target)[d](b).each(p,arguments)})}else c.success&&o.push(c.success);c.success=function(a,b,d){var e=c.context||c;for(var f=0,h=o.length;f<h;f++)o[f].apply(e,[a,b,d||g,g])};var q=a("input:file",this).length>0,r="multipart/form-data",s=g.attr("enctype")==r||g.attr("encoding")==r;if(c.iframe!==!1&&(q||c.iframe||s))c.closeKeepAlive?a.get(c.closeKeepAlive,function(){u(m)}):u(m);else{if(a.browser.msie&&d=="get"&&typeof c.type=="undefined"){var t=g[0].getAttribute("method");typeof t=="string"&&(c.type=t)}a.ajax(c)}return this.trigger("form-submit-notify",[this,c]),this},a.fn.ajaxForm=function(c){if(this.length===0){var d={s:this.selector,c:this.context};return!a.isReady&&d.s?(b("DOM not ready, queuing ajaxForm"),a(function(){a(d.s,d.c).ajaxForm(c)}),this):(b("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)")),this)}return this.ajaxFormUnbind().bind("submit.form-plugin",function(b){b.isDefaultPrevented()||(b.preventDefault(),a(this).ajaxSubmit(c))}).bind("click.form-plugin",function(b){var c=b.target,d=a(c);if(!d.is(":submit,input:image")){var e=d.closest(":submit");if(e.length==0)return;c=e[0]}var f=this;f.clk=c;if(c.type=="image")if(b.offsetX!=undefined)f.clk_x=b.offsetX,f.clk_y=b.offsetY;else if(typeof a.fn.offset=="function"){var g=d.offset();f.clk_x=b.pageX-g.left,f.clk_y=b.pageY-g.top}else f.clk_x=b.pageX-c.offsetLeft,f.clk_y=b.pageY-c.offsetTop;setTimeout(function(){f.clk=f.clk_x=f.clk_y=null},100)})},a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},a.fn.formToArray=function(b){var c=[];if(this.length===0)return c;var d=this[0],e=b?d.getElementsByTagName("*"):d.elements;if(!e)return c;var f,g,h,i,j,k,l;for(f=0,k=e.length;f<k;f++){j=e[f],h=j.name;if(!h)continue;if(b&&d.clk&&j.type=="image"){!j.disabled&&d.clk==j&&(c.push({name:h,value:a(j).val()}),c.push({name:h+".x",value:d.clk_x},{name:h+".y",value:d.clk_y}));continue}i=a.fieldValue(j,!0);if(i&&i.constructor==Array)for(g=0,l=i.length;g<l;g++)c.push({name:h,value:i[g]});else i!==null&&typeof i!="undefined"&&c.push({name:h,value:i})}if(!b&&d.clk){var m=a(d.clk),n=m[0];h=n.name,h&&!n.disabled&&n.type=="image"&&(c.push({name:h,value:m.val()}),c.push({name:h+".x",value:d.clk_x},{name:h+".y",value:d.clk_y}))}return c},a.fn.formSerialize=function(b){return a.param(this.formToArray(b))},a.fn.fieldSerialize=function(b){var c=[];return this.each(function(){var d=this.name;if(!d)return;var e=a.fieldValue(this,b);if(e&&e.constructor==Array)for(var f=0,g=e.length;f<g;f++)c.push({name:d,value:e[f]});else e!==null&&typeof e!="undefined"&&c.push({name:this.name,value:e})}),a.param(c)},a.fn.fieldValue=function(b){for(var c=[],d=0,e=this.length;d<e;d++){var f=this[d],g=a.fieldValue(f,b);if(g===null||typeof g=="undefined"||g.constructor==Array&&!g.length)continue;g.constructor==Array?a.merge(c,g):c.push(g)}return c},a.fieldValue=function(b,c){var d=b.name,e=b.type,f=b.tagName.toLowerCase();c===undefined&&(c=!0);if(c&&(!d||b.disabled||e=="reset"||e=="button"||(e=="checkbox"||e=="radio")&&!b.checked||(e=="submit"||e=="image")&&b.form&&b.form.clk!=b||f=="select"&&b.selectedIndex==-1))return null;if(f=="select"){var g=b.selectedIndex;if(g<0)return null;var h=[],i=b.options,j=e=="select-one",k=j?g+1:i.length;for(var l=j?g:0;l<k;l++){var m=i[l];if(m.selected){var n=m.value;n||(n=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value);if(j)return n;h.push(n)}}return h}return a(b).val()},a.fn.clearForm=function(b){return this.each(function(){a("input,select,textarea",this).clearFields(b)})},a.fn.clearFields=a.fn.clearInputs=function(a){var b=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var c=this.type,d=this.tagName.toLowerCase();b.test(c)||d=="textarea"||a&&/hidden/.test(c)?this.value="":c=="checkbox"||c=="radio"?this.checked=!1:d=="select"&&(this.selectedIndex=-1)})},a.fn.resetForm=function(){return this.each(function(){(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)&&this.reset()})},a.fn.enable=function(a){return a===undefined&&(a=!0),this.each(function(){this.disabled=!a})},a.fn.selected=function(b){return b===undefined&&(b=!0),this.each(function(){var c=this.type;if(c=="checkbox"||c=="radio")this.checked=b;else if(this.tagName.toLowerCase()=="option"){var d=a(this).parent("select");b&&d[0]&&d[0].type=="select-one"&&d.find("option").selected(!1),this.selected=b}})},a.fn.ajaxSubmit.debug=!1}(jQuery),function(a,b,c){function d(a){var b={x:a.offsetLeft,y:a.offsetTop};while(a=a.offsetParent)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}function e(a){for(var b=1;b<arguments.length;b++){var d=arguments[b];for(var e in d)a[e]===c&&(a[e]=d[e])}return a}function f(a,b){for(var c in b)a.style[g(a,c)||c]=b[c];return a}function g(a,b){var d=a.style,e,f;if(d[b]!==c)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(f=0;f<k.length;f++){e=k[f]+b;if(d[e]!==c)return e}}function h(a,b,c,d){var e=["opacity",b,~~(a*100),c,d].join("-"),f=.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=m.substring(0,m.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return l[e]||(n.insertRule("@"+i+"keyframes "+e+"{"+"0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}"+"100%{opacity:"+g+"}"+"}",0),l[e]=1),e}function i(a,b,c){return c&&!c.parentNode&&i(a,c),a.insertBefore(b,c||null),a}function j(a,c){var d=b.createElement(a||"div"),e;for(e in c)d[e]=c[e];return d}var k=["webkit","Moz","ms","O"],l={},m,n=function(){var a=j("style");return i(b.getElementsByTagName("head")[0],a),a.sheet||a.styleSheet}(),o=function r(a){if(!this.spin)return new r(a);this.opts=e(a||{},r.defaults,p)},p=o.defaults={lines:12,length:7,width:5,radius:10,color:"#000",speed:1,trail:100,opacity:.25,fps:20},q=o.prototype={spin:function(a){this.stop();var b=this,c=b.el=f(j(),{position:"relative"}),e,g;a&&(g=d(i(a,c,a.firstChild)),e=d(c),f(c,{left:(a.offsetWidth>>1)-e.x+g.x+"px",top:(a.offsetHeight>>1)-e.y+g.y+"px"})),c.setAttribute("aria-role","progressbar"),b.lines(c,b.opts);if(!m){var h=b.opts,k=0,l=h.fps,n=l/h.speed,o=(1-h.opacity)/(n*h.trail/100),p=n/h.lines;(function q(){k++;for(var a=h.lines;a;a--){var d=Math.max(1-(k+a*p)%n*o,h.opacity);b.opacity(c,h.lines-a,d,h)}b.timeout=b.el&&setTimeout(q,~~(1e3/l))})()}return b},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=c),this}};q.lines=function(a,b){function c(a,c){return f(j(),{position:"absolute",width:b.length+b.width+"px",height:b.width+"px",background:a,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/b.lines*d)+"deg) translate("+b.radius+"px"+",0)",borderRadius:(b.width>>1)+"px"})}var d=0,e;for(;d<b.lines;d++)e=f(j(),{position:"absolute",top:1+~(b.width/2)+"px",transform:"translate3d(0,0,0)",opacity:b.opacity,animation:m&&h(b.opacity,b.trail,d,b.lines)+" "+1/b.speed+"s linear infinite"}),b.shadow&&i(e,f(c("#000","0 0 4px #000"),{top:"2px"})),i(a,i(e,c(b.color,"0 0 1px rgba(0,0,0,.1)")));return a},q.opacity=function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)},function(){var a=f(j("group"),{behavior:"url(#default#VML)"}),b;if(!g(a,"transform")&&a.adj){for(b=4;b--;)n.addRule(["group","roundrect","fill","stroke"][b],"behavior:url(#default#VML)");q.lines=function(a,b){function c(a,c,g){i(h,i(f(d(),{rotation:360/b.lines*a+"deg",left:~~c}),i(f(j("roundrect",{arcsize:1}),{width:e,height:b.width,left:b.radius,top:-b.width>>1,filter:g}),j("fill",{color:b.color,opacity:b.opacity}),j("stroke",{opacity:0}))))}function d(){return f(j("group",{coordsize:g+" "+g,coordorigin:-e+" "+ -e}),{width:g,height:g})}var e=b.length+b.width,g=2*e,h=d(),k=~(b.length+b.radius+b.width)+"px",l;if(b.shadow)for(l=1;l<=b.lines;l++)c(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=b.lines;l++)c(l);return i(f(a,{margin:k+" 0 0 "+k,zoom:1}),h)},q.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}else m=g(a,"animation")}(),a.Spinner=o}(window,document),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c=[].slice;a=function(){function a(a,c){this._log=b(this._log,this),this.logDelete=b(this.logDelete,this),this.logAction=b(this.logAction,this),this.logClick=b(this.logClick,this),this.logEdit=b(this.logEdit,this),this.logCreate=b(this.logCreate,this),this.logView=b(this.logView,this),a?(this.pubsub=FloatApp.PubSub,this.pubsub.bind("viewed",this.logView),this.pubsub.bind("edited",this.logEdit),this.pubsub.bind("clicked",this.logClick),this.pubsub.bind("action",this.logAction),this.pubsub.bind("deleted",this.logDelete),this.pubsub.bind("created",this.logDelete)):window.console&&window.console.log&&console.log("Not logging to clicky since no PubSub event aggregator given")}return a.name="Clicky",a.prototype.logView=function(a,b){return this._log("/"+a,"Viewed: "+b)},a.prototype.logCreate=function(a,b){return this._log("#"+a,"Created: "+b)},a.prototype.logEdit=function(a,b){return this._log("#"+a,"Edited: "+b)},a.prototype.logClick=function(a,b){return this._log("#"+a,"Clicked: "+b)},a.prototype.logAction=function(a,b){return this._log("#"+a,"Action: "+b)},a.prototype.logDelete=function(a,b){return this._log("#"+a,"Deleted: "+b)},a.prototype._log=function(){var a,b;a=1<=arguments.length?c.call(arguments,0):[];if(!!window.clicky)return(b=window.clicky).log.apply(b,a);if(window.console&&window.console.log)return console.log.apply(console,["No clicky api, would have logged: "].concat(c.call(a)))},a}(),window.Clicky=a}.call(this),$(document).ready(function(){$(".alert-message").alert()})